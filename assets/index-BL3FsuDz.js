function fS(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function hS(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),t}var dp={exports:{}},$c={},fp={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function mS(){if(Sy)return Ct;Sy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=v&&H[v]||H["@@iterator"],typeof H=="function"?H:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,_={};function w(H,M,V){this.props=H,this.context=M,this.refs=_,this.updater=V||y}w.prototype.isReactComponent={},w.prototype.setState=function(H,M){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,M,"setState")},w.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function j(){}j.prototype=w.prototype;function k(H,M,V){this.props=H,this.context=M,this.refs=_,this.updater=V||y}var R=k.prototype=new j;R.constructor=k,E(R,w.prototype),R.isPureReactComponent=!0;var B=Array.isArray,U=Object.prototype.hasOwnProperty,W={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(H,M,V){var P,G={},re=null,xe=null;if(M!=null)for(P in M.ref!==void 0&&(xe=M.ref),M.key!==void 0&&(re=""+M.key),M)U.call(M,P)&&!N.hasOwnProperty(P)&&(G[P]=M[P]);var me=arguments.length-2;if(me===1)G.children=V;else if(1<me){for(var Se=Array(me),Ne=0;Ne<me;Ne++)Se[Ne]=arguments[Ne+2];G.children=Se}if(H&&H.defaultProps)for(P in me=H.defaultProps,me)G[P]===void 0&&(G[P]=me[P]);return{$$typeof:r,type:H,key:re,ref:xe,props:G,_owner:W.current}}function T(H,M){return{$$typeof:r,type:H.type,key:M,ref:H.ref,props:H.props,_owner:H._owner}}function C(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function D(H){var M={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(V){return M[V]})}var F=/\/+/g;function O(H,M){return typeof H=="object"&&H!==null&&H.key!=null?D(""+H.key):M.toString(36)}function le(H,M,V,P,G){var re=typeof H;(re==="undefined"||re==="boolean")&&(H=null);var xe=!1;if(H===null)xe=!0;else switch(re){case"string":case"number":xe=!0;break;case"object":switch(H.$$typeof){case r:case e:xe=!0}}if(xe)return xe=H,G=G(xe),H=P===""?"."+O(xe,0):P,B(G)?(V="",H!=null&&(V=H.replace(F,"$&/")+"/"),le(G,M,V,"",function(Ne){return Ne})):G!=null&&(C(G)&&(G=T(G,V+(!G.key||xe&&xe.key===G.key?"":(""+G.key).replace(F,"$&/")+"/")+H)),M.push(G)),1;if(xe=0,P=P===""?".":P+":",B(H))for(var me=0;me<H.length;me++){re=H[me];var Se=P+O(re,me);xe+=le(re,M,V,Se,G)}else if(Se=x(H),typeof Se=="function")for(H=Se.call(H),me=0;!(re=H.next()).done;)re=re.value,Se=P+O(re,me++),xe+=le(re,M,V,Se,G);else if(re==="object")throw M=String(H),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return xe}function we(H,M,V){if(H==null)return H;var P=[],G=0;return le(H,P,"","",function(re){return M.call(V,re,G++)}),P}function Ie(H){if(H._status===-1){var M=H._result;M=M(),M.then(function(V){(H._status===0||H._status===-1)&&(H._status=1,H._result=V)},function(V){(H._status===0||H._status===-1)&&(H._status=2,H._result=V)}),H._status===-1&&(H._status=0,H._result=M)}if(H._status===1)return H._result.default;throw H._result}var ie={current:null},oe={transition:null},de={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:oe,ReactCurrentOwner:W};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Ct.Children={map:we,forEach:function(H,M,V){we(H,function(){M.apply(this,arguments)},V)},count:function(H){var M=0;return we(H,function(){M++}),M},toArray:function(H){return we(H,function(M){return M})||[]},only:function(H){if(!C(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Ct.Component=w,Ct.Fragment=t,Ct.Profiler=s,Ct.PureComponent=k,Ct.StrictMode=n,Ct.Suspense=d,Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Ct.act=Q,Ct.cloneElement=function(H,M,V){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var P=E({},H.props),G=H.key,re=H.ref,xe=H._owner;if(M!=null){if(M.ref!==void 0&&(re=M.ref,xe=W.current),M.key!==void 0&&(G=""+M.key),H.type&&H.type.defaultProps)var me=H.type.defaultProps;for(Se in M)U.call(M,Se)&&!N.hasOwnProperty(Se)&&(P[Se]=M[Se]===void 0&&me!==void 0?me[Se]:M[Se])}var Se=arguments.length-2;if(Se===1)P.children=V;else if(1<Se){me=Array(Se);for(var Ne=0;Ne<Se;Ne++)me[Ne]=arguments[Ne+2];P.children=me}return{$$typeof:r,type:H.type,key:G,ref:re,props:P,_owner:xe}},Ct.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:i,_context:H},H.Consumer=H},Ct.createElement=I,Ct.createFactory=function(H){var M=I.bind(null,H);return M.type=H,M},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(H){return{$$typeof:u,render:H}},Ct.isValidElement=C,Ct.lazy=function(H){return{$$typeof:m,_payload:{_status:-1,_result:H},_init:Ie}},Ct.memo=function(H,M){return{$$typeof:h,type:H,compare:M===void 0?null:M}},Ct.startTransition=function(H){var M=oe.transition;oe.transition={};try{H()}finally{oe.transition=M}},Ct.unstable_act=Q,Ct.useCallback=function(H,M){return ie.current.useCallback(H,M)},Ct.useContext=function(H){return ie.current.useContext(H)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(H){return ie.current.useDeferredValue(H)},Ct.useEffect=function(H,M){return ie.current.useEffect(H,M)},Ct.useId=function(){return ie.current.useId()},Ct.useImperativeHandle=function(H,M,V){return ie.current.useImperativeHandle(H,M,V)},Ct.useInsertionEffect=function(H,M){return ie.current.useInsertionEffect(H,M)},Ct.useLayoutEffect=function(H,M){return ie.current.useLayoutEffect(H,M)},Ct.useMemo=function(H,M){return ie.current.useMemo(H,M)},Ct.useReducer=function(H,M,V){return ie.current.useReducer(H,M,V)},Ct.useRef=function(H){return ie.current.useRef(H)},Ct.useState=function(H){return ie.current.useState(H)},Ct.useSyncExternalStore=function(H,M,V){return ie.current.useSyncExternalStore(H,M,V)},Ct.useTransition=function(){return ie.current.useTransition()},Ct.version="18.3.1",Ct}var Ny;function $g(){return Ny||(Ny=1,fp.exports=mS()),fp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function pS(){if(Iy)return $c;Iy=1;var r=$g(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(u,d,h){var m,v={},x=null,y=null;h!==void 0&&(x=""+h),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(y=d.ref);for(m in d)n.call(d,m)&&!i.hasOwnProperty(m)&&(v[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)v[m]===void 0&&(v[m]=d[m]);return{$$typeof:e,type:u,key:x,ref:y,props:v,_owner:s.current}}return $c.Fragment=t,$c.jsx=o,$c.jsxs=o,$c}var Ry;function gS(){return Ry||(Ry=1,dp.exports=pS()),dp.exports}var c=gS(),se=$g();const pw=rh(se),xS=fS({__proto__:null,default:pw},[se]);var hd={},hp={exports:{}},Vn={},mp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function vS(){return ky||(ky=1,(function(r){function e(oe,de){var Q=oe.length;oe.push(de);e:for(;0<Q;){var H=Q-1>>>1,M=oe[H];if(0<s(M,de))oe[H]=de,oe[Q]=M,Q=H;else break e}}function t(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var de=oe[0],Q=oe.pop();if(Q!==de){oe[0]=Q;e:for(var H=0,M=oe.length,V=M>>>1;H<V;){var P=2*(H+1)-1,G=oe[P],re=P+1,xe=oe[re];if(0>s(G,Q))re<M&&0>s(xe,G)?(oe[H]=xe,oe[re]=Q,H=re):(oe[H]=G,oe[P]=Q,H=P);else if(re<M&&0>s(xe,Q))oe[H]=xe,oe[re]=Q,H=re;else break e}}return de}function s(oe,de){var Q=oe.sortIndex-de.sortIndex;return Q!==0?Q:oe.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();r.unstable_now=function(){return o.now()-u}}var d=[],h=[],m=1,v=null,x=3,y=!1,E=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(oe){for(var de=t(h);de!==null;){if(de.callback===null)n(h);else if(de.startTime<=oe)n(h),de.sortIndex=de.expirationTime,e(d,de);else break;de=t(h)}}function B(oe){if(_=!1,R(oe),!E)if(t(d)!==null)E=!0,Ie(U);else{var de=t(h);de!==null&&ie(B,de.startTime-oe)}}function U(oe,de){E=!1,_&&(_=!1,j(I),I=-1),y=!0;var Q=x;try{for(R(de),v=t(d);v!==null&&(!(v.expirationTime>de)||oe&&!D());){var H=v.callback;if(typeof H=="function"){v.callback=null,x=v.priorityLevel;var M=H(v.expirationTime<=de);de=r.unstable_now(),typeof M=="function"?v.callback=M:v===t(d)&&n(d),R(de)}else n(d);v=t(d)}if(v!==null)var V=!0;else{var P=t(h);P!==null&&ie(B,P.startTime-de),V=!1}return V}finally{v=null,x=Q,y=!1}}var W=!1,N=null,I=-1,T=5,C=-1;function D(){return!(r.unstable_now()-C<T)}function F(){if(N!==null){var oe=r.unstable_now();C=oe;var de=!0;try{de=N(!0,oe)}finally{de?O():(W=!1,N=null)}}else W=!1}var O;if(typeof k=="function")O=function(){k(F)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,we=le.port2;le.port1.onmessage=F,O=function(){we.postMessage(null)}}else O=function(){w(F,0)};function Ie(oe){N=oe,W||(W=!0,O())}function ie(oe,de){I=w(function(){oe(r.unstable_now())},de)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(oe){oe.callback=null},r.unstable_continueExecution=function(){E||y||(E=!0,Ie(U))},r.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<oe?Math.floor(1e3/oe):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(oe){switch(x){case 1:case 2:case 3:var de=3;break;default:de=x}var Q=x;x=de;try{return oe()}finally{x=Q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(oe,de){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Q=x;x=oe;try{return de()}finally{x=Q}},r.unstable_scheduleCallback=function(oe,de,Q){var H=r.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?H+Q:H):Q=H,oe){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Q+M,oe={id:m++,callback:de,priorityLevel:oe,startTime:Q,expirationTime:M,sortIndex:-1},Q>H?(oe.sortIndex=Q,e(h,oe),t(d)===null&&oe===t(h)&&(_?(j(I),I=-1):_=!0,ie(B,Q-H))):(oe.sortIndex=M,e(d,oe),E||y||(E=!0,Ie(U))),oe},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(oe){var de=x;return function(){var Q=x;x=de;try{return oe.apply(this,arguments)}finally{x=Q}}}})(pp)),pp}var Dy;function yS(){return Dy||(Dy=1,mp.exports=vS()),mp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function _S(){if(Py)return Vn;Py=1;var r=$g(),e=yS();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(s[a]=l,a=0;a<l.length;a++)n.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function x(a){return d.call(v,a)?!0:d.call(m,a)?!1:h.test(a)?v[a]=!0:(m[a]=!0,!1)}function y(a,l,f,g){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function E(a,l,f,g){if(l===null||typeof l>"u"||y(a,l,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function _(a,l,f,g,b,S,z){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=b,this.mustUseProperty=f,this.propertyName=a,this.type=l,this.sanitizeURL=S,this.removeEmptyString=z}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){w[a]=new _(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];w[l]=new _(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){w[a]=new _(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){w[a]=new _(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){w[a]=new _(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){w[a]=new _(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){w[a]=new _(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){w[a]=new _(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){w[a]=new _(a,5,!1,a.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function k(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(j,k);w[l]=new _(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(j,k);w[l]=new _(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(j,k);w[l]=new _(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){w[a]=new _(a,1,!1,a.toLowerCase(),null,!1,!1)}),w.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){w[a]=new _(a,1,!1,a.toLowerCase(),null,!0,!0)});function R(a,l,f,g){var b=w.hasOwnProperty(l)?w[l]:null;(b!==null?b.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,f,b,g)&&(f=null),g||b===null?x(l)&&(f===null?a.removeAttribute(l):a.setAttribute(l,""+f)):b.mustUseProperty?a[b.propertyName]=f===null?b.type===3?!1:"":f:(l=b.attributeName,g=b.attributeNamespace,f===null?a.removeAttribute(l):(b=b.type,f=b===3||b===4&&f===!0?"":""+f,g?a.setAttributeNS(g,l,f):a.setAttribute(l,f))))}var B=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),W=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),oe=Symbol.iterator;function de(a){return a===null||typeof a!="object"?null:(a=oe&&a[oe]||a["@@iterator"],typeof a=="function"?a:null)}var Q=Object.assign,H;function M(a){if(H===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);H=l&&l[1]||""}return`
`+H+a}var V=!1;function P(a,l){if(!a||V)return"";V=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(be){var g=be}Reflect.construct(a,[],l)}else{try{l.call()}catch(be){g=be}a.call(l.prototype)}else{try{throw Error()}catch(be){g=be}a()}}catch(be){if(be&&g&&typeof be.stack=="string"){for(var b=be.stack.split(`
`),S=g.stack.split(`
`),z=b.length-1,te=S.length-1;1<=z&&0<=te&&b[z]!==S[te];)te--;for(;1<=z&&0<=te;z--,te--)if(b[z]!==S[te]){if(z!==1||te!==1)do if(z--,te--,0>te||b[z]!==S[te]){var ae=`
`+b[z].replace(" at new "," at ");return a.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",a.displayName)),ae}while(1<=z&&0<=te);break}}}finally{V=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?M(a):""}function G(a){switch(a.tag){case 5:return M(a.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return a=P(a.type,!1),a;case 11:return a=P(a.type.render,!1),a;case 1:return a=P(a.type,!0),a;default:return""}}function re(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case N:return"Fragment";case W:return"Portal";case T:return"Profiler";case I:return"StrictMode";case O:return"Suspense";case le:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case D:return(a.displayName||"Context")+".Consumer";case C:return(a._context.displayName||"Context")+".Provider";case F:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case we:return l=a.displayName||null,l!==null?l:re(a.type)||"Memo";case Ie:l=a._payload,a=a._init;try{return re(a(l))}catch{}}return null}function xe(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function me(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Se(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ne(a){var l=Se(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,S=f.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return b.call(this)},set:function(z){g=""+z,S.call(this,z)}}),Object.defineProperty(a,l,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(z){g=""+z},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function nt(a){a._valueTracker||(a._valueTracker=Ne(a))}function lt(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return a&&(g=Se(a)?a.checked?"true":"false":a.value),a=g,a!==f?(l.setValue(a),!0):!1}function gt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Le(a,l){var f=l.checked;return Q({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function ht(a,l){var f=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;f=me(l.value!=null?l.value:f),a._wrapperState={initialChecked:g,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ze(a,l){l=l.checked,l!=null&&R(a,"checked",l,!1)}function Me(a,l){Ze(a,l);var f=me(l.value),g=l.type;if(f!=null)g==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?ne(a,l.type,f):l.hasOwnProperty("defaultValue")&&ne(a,l.type,me(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function bt(a,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,f||l===a.value||(a.value=l),a.defaultValue=l}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function ne(a,l,f){(l!=="number"||gt(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var ue=Array.isArray;function Ke(a,l,f,g){if(a=a.options,l){l={};for(var b=0;b<f.length;b++)l["$"+f[b]]=!0;for(f=0;f<a.length;f++)b=l.hasOwnProperty("$"+a[f].value),a[f].selected!==b&&(a[f].selected=b),b&&g&&(a[f].defaultSelected=!0)}else{for(f=""+me(f),l=null,b=0;b<a.length;b++){if(a[b].value===f){a[b].selected=!0,g&&(a[b].defaultSelected=!0);return}l!==null||a[b].disabled||(l=a[b])}l!==null&&(l.selected=!0)}}function wt(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function tr(a,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(t(92));if(ue(f)){if(1<f.length)throw Error(t(93));f=f[0]}l=f}l==null&&(l=""),f=l}a._wrapperState={initialValue:me(f)}}function rr(a,l){var f=me(l.value),g=me(l.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),l.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),g!=null&&(a.defaultValue=""+g)}function En(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Ot(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Ot(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Pe,et=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,g,b){MSApp.execUnsafeLocalFunction(function(){return a(l,f,g,b)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Pe=Pe||document.createElement("div"),Pe.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Pe.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Ge(a,l){if(l){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=l;return}}a.textContent=l}var at={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yt=["Webkit","ms","Moz","O"];Object.keys(at).forEach(function(a){yt.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),at[l]=at[a]})});function kt(a,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||at.hasOwnProperty(a)&&at[a]?(""+l).trim():l+"px"}function ur(a,l){a=a.style;for(var f in l)if(l.hasOwnProperty(f)){var g=f.indexOf("--")===0,b=kt(f,l[f],g);f==="float"&&(f="cssFloat"),g?a.setProperty(f,b):a[f]=b}}var Yr=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ut(a,l){if(l){if(Yr[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Bt(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ht=null;function wn(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var kn=null,Br=null,bn=null;function qn(a){if(a=Nc(a)){if(typeof kn!="function")throw Error(t(280));var l=a.stateNode;l&&(l=N0(l),kn(a.stateNode,a.type,l))}}function Dn(a){Br?bn?bn.push(a):bn=[a]:Br=a}function vi(){if(Br){var a=Br,l=bn;if(bn=Br=null,qn(a),l)for(a=0;a<l.length;a++)qn(l[a])}}function us(a,l){return a(l)}function yi(){}var Gn=!1;function Gs(a,l,f){if(Gn)return a(l,f);Gn=!0;try{return us(a,l,f)}finally{Gn=!1,(Br!==null||bn!==null)&&(yi(),vi())}}function sr(a,l){var f=a.stateNode;if(f===null)return null;var g=N0(f);if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,l,typeof f));return f}var Cs=!1;if(u)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Cs=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Cs=!1}function Lr(a,l,f,g,b,S,z,te,ae){var be=Array.prototype.slice.call(arguments,3);try{l.apply(f,be)}catch(Fe){this.onError(Fe)}}var ds=!1,Ks=null,q=!1,J=null,X={onError:function(a){ds=!0,Ks=a}};function Y(a,l,f,g,b,S,z,te,ae){ds=!1,Ks=null,Lr.apply(X,arguments)}function Z(a,l,f,g,b,S,z,te,ae){if(Y.apply(this,arguments),ds){if(ds){var be=Ks;ds=!1,Ks=null}else throw Error(t(198));q||(q=!0,J=be)}}function ee(a){var l=a,f=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(f=l.return),a=l.return;while(a)}return l.tag===3?f:null}function ge(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function Ce(a){if(ee(a)!==a)throw Error(t(188))}function ve(a){var l=a.alternate;if(!l){if(l=ee(a),l===null)throw Error(t(188));return l!==a?null:a}for(var f=a,g=l;;){var b=f.return;if(b===null)break;var S=b.alternate;if(S===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===S.child){for(S=b.child;S;){if(S===f)return Ce(b),a;if(S===g)return Ce(b),l;S=S.sibling}throw Error(t(188))}if(f.return!==g.return)f=b,g=S;else{for(var z=!1,te=b.child;te;){if(te===f){z=!0,f=b,g=S;break}if(te===g){z=!0,g=b,f=S;break}te=te.sibling}if(!z){for(te=S.child;te;){if(te===f){z=!0,f=S,g=b;break}if(te===g){z=!0,g=S,f=b;break}te=te.sibling}if(!z)throw Error(t(189))}}if(f.alternate!==g)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:l}function _e(a){return a=ve(a),a!==null?Ee(a):null}function Ee(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Ee(a);if(l!==null)return l;a=a.sibling}return null}var je=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,Xe=e.unstable_shouldYield,Ue=e.unstable_requestPaint,Be=e.unstable_now,mt=e.unstable_getCurrentPriorityLevel,zt=e.unstable_ImmediatePriority,Lt=e.unstable_UserBlockingPriority,qt=e.unstable_NormalPriority,As=e.unstable_LowPriority,Xs=e.unstable_IdlePriority,Kn=null,_r=null;function Qi(a){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(Kn,a,void 0,(a.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:a0,fc=Math.log,i0=Math.LN2;function a0(a){return a>>>=0,a===0?32:31-(fc(a)/i0|0)|0}var Ko=64,Xo=4194304;function Ji(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Xa(a,l){var f=a.pendingLanes;if(f===0)return 0;var g=0,b=a.suspendedLanes,S=a.pingedLanes,z=f&268435455;if(z!==0){var te=z&~b;te!==0?g=Ji(te):(S&=z,S!==0&&(g=Ji(S)))}else z=f&~b,z!==0?g=Ji(z):S!==0&&(g=Ji(S));if(g===0)return 0;if(l!==0&&l!==g&&(l&b)===0&&(b=g&-g,S=l&-l,b>=S||b===16&&(S&4194240)!==0))return l;if((g&4)!==0&&(g|=f&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=g;0<l;)f=31-ir(l),b=1<<f,g|=a[f],l&=~b;return g}function Vh(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _i(a,l){for(var f=a.suspendedLanes,g=a.pingedLanes,b=a.expirationTimes,S=a.pendingLanes;0<S;){var z=31-ir(S),te=1<<z,ae=b[z];ae===-1?((te&f)===0||(te&g)!==0)&&(b[z]=Vh(te,l)):ae<=l&&(a.expiredLanes|=te),S&=~te}}function Xn(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ya(){var a=Ko;return Ko<<=1,(Ko&4194240)===0&&(Ko=64),a}function Zi(a){for(var l=[],f=0;31>f;f++)l.push(a);return l}function ea(a,l,f){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-ir(l),a[l]=f}function er(a,l){var f=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<f;){var b=31-ir(f),S=1<<b;l[b]=0,g[b]=-1,a[b]=-1,f&=~S}}function ta(a,l){var f=a.entangledLanes|=l;for(a=a.entanglements;f;){var g=31-ir(f),b=1<<g;b&l|a[g]&l&&(a[g]|=l),f&=~b}}var Nt=0;function ra(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var o0,Yo,l0,c0,u0,hc=!1,Ys=[],Qr=null,Ss=null,Ns=null,na=new Map,fs=new Map,Qs=[],Uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d0(a,l){switch(a){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":na.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":fs.delete(l.pointerId)}}function Pn(a,l,f,g,b,S){return a===null||a.nativeEvent!==S?(a={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:S,targetContainers:[b]},l!==null&&(l=Nc(l),l!==null&&Yo(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),a)}function zh(a,l,f,g,b){switch(l){case"focusin":return Qr=Pn(Qr,a,l,f,g,b),!0;case"dragenter":return Ss=Pn(Ss,a,l,f,g,b),!0;case"mouseover":return Ns=Pn(Ns,a,l,f,g,b),!0;case"pointerover":var S=b.pointerId;return na.set(S,Pn(na.get(S)||null,a,l,f,g,b)),!0;case"gotpointercapture":return S=b.pointerId,fs.set(S,Pn(fs.get(S)||null,a,l,f,g,b)),!0}return!1}function f0(a){var l=to(a.target);if(l!==null){var f=ee(l);if(f!==null){if(l=f.tag,l===13){if(l=ge(f),l!==null){a.blockedOn=l,u0(a.priority,function(){l0(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ei(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var f=Qo(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);Ht=g,f.target.dispatchEvent(g),Ht=null}else return l=Nc(f),l!==null&&Yo(l),a.blockedOn=f,!1;l.shift()}return!0}function Qa(a,l,f){Ei(a)&&f.delete(l)}function h0(){hc=!1,Qr!==null&&Ei(Qr)&&(Qr=null),Ss!==null&&Ei(Ss)&&(Ss=null),Ns!==null&&Ei(Ns)&&(Ns=null),na.forEach(Qa),fs.forEach(Qa)}function Is(a,l){a.blockedOn===l&&(a.blockedOn=null,hc||(hc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,h0)))}function Rs(a){function l(b){return Is(b,a)}if(0<Ys.length){Is(Ys[0],a);for(var f=1;f<Ys.length;f++){var g=Ys[f];g.blockedOn===a&&(g.blockedOn=null)}}for(Qr!==null&&Is(Qr,a),Ss!==null&&Is(Ss,a),Ns!==null&&Is(Ns,a),na.forEach(l),fs.forEach(l),f=0;f<Qs.length;f++)g=Qs[f],g.blockedOn===a&&(g.blockedOn=null);for(;0<Qs.length&&(f=Qs[0],f.blockedOn===null);)f0(f),f.blockedOn===null&&Qs.shift()}var wi=B.ReactCurrentBatchConfig,sa=!0;function dr(a,l,f,g){var b=Nt,S=wi.transition;wi.transition=null;try{Nt=1,mc(a,l,f,g)}finally{Nt=b,wi.transition=S}}function $h(a,l,f,g){var b=Nt,S=wi.transition;wi.transition=null;try{Nt=4,mc(a,l,f,g)}finally{Nt=b,wi.transition=S}}function mc(a,l,f,g){if(sa){var b=Qo(a,l,f,g);if(b===null)em(a,l,g,Ja,f),d0(a,g);else if(zh(b,a,l,f,g))g.stopPropagation();else if(d0(a,g),l&4&&-1<Uh.indexOf(a)){for(;b!==null;){var S=Nc(b);if(S!==null&&o0(S),S=Qo(a,l,f,g),S===null&&em(a,l,g,Ja,f),S===b)break;b=S}b!==null&&g.stopPropagation()}else em(a,l,g,null,f)}}var Ja=null;function Qo(a,l,f,g){if(Ja=null,a=wn(g),a=to(a),a!==null)if(l=ee(a),l===null)a=null;else if(f=l.tag,f===13){if(a=ge(l),a!==null)return a;a=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Ja=a,null}function pc(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mt()){case zt:return 1;case Lt:return 4;case qt:case As:return 16;case Xs:return 536870912;default:return 16}default:return 16}}var Yn=null,Jo=null,Fn=null;function gc(){if(Fn)return Fn;var a,l=Jo,f=l.length,g,b="value"in Yn?Yn.value:Yn.textContent,S=b.length;for(a=0;a<f&&l[a]===b[a];a++);var z=f-a;for(g=1;g<=z&&l[f-g]===b[S-g];g++);return Fn=b.slice(a,1<g?1-g:void 0)}function Zo(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Js(){return!0}function xc(){return!1}function Jr(a){function l(f,g,b,S,z){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=S,this.target=z,this.currentTarget=null;for(var te in a)a.hasOwnProperty(te)&&(f=a[te],this[te]=f?f(S):S[te]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Js:xc,this.isPropagationStopped=xc,this}return Q(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),l}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},el=Jr(ks),Zs=Q({},ks,{view:0,detail:0}),Hh=Jr(Zs),tl,bi,ia,Za=Q({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ei,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ia&&(ia&&a.type==="mousemove"?(tl=a.screenX-ia.screenX,bi=a.screenY-ia.screenY):bi=tl=0,ia=a),tl)},movementY:function(a){return"movementY"in a?a.movementY:bi}}),rl=Jr(Za),vc=Q({},Za,{dataTransfer:0}),m0=Jr(vc),nl=Q({},Zs,{relatedTarget:0}),sl=Jr(nl),p0=Q({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Ti=Jr(p0),g0=Q({},ks,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),x0=Jr(g0),v0=Q({},ks,{data:0}),yc=Jr(v0),il={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _0(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=y0[a])?!!l[a]:!1}function ei(){return _0}var p=Q({},Zs,{key:function(a){if(a.key){var l=il[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Zo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Tn[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ei,charCode:function(a){return a.type==="keypress"?Zo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Zo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),A=Jr(p),L=Q({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=Jr(L),he=Q({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ei}),Te=Jr(he),qe=Q({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gt=Jr(qe),Pr=Q({},Za,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Dt=Jr(Pr),Mr=[9,13,27,32],Tr=u&&"CompositionEvent"in window,hs=null;u&&"documentMode"in document&&(hs=document.documentMode);var Qn=u&&"TextEvent"in window&&!hs,eo=u&&(!Tr||hs&&8<hs&&11>=hs),al=" ",E1=!1;function w1(a,l){switch(a){case"keyup":return Mr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ol=!1;function cA(a,l){switch(a){case"compositionend":return b1(l);case"keypress":return l.which!==32?null:(E1=!0,al);case"textInput":return a=l.data,a===al&&E1?null:a;default:return null}}function uA(a,l){if(ol)return a==="compositionend"||!Tr&&w1(a,l)?(a=gc(),Fn=Jo=Yn=null,ol=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return eo&&l.locale!=="ko"?null:l.data;default:return null}}var dA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T1(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!dA[a.type]:l==="textarea"}function C1(a,l,f,g){Dn(g),l=C0(l,"onChange"),0<l.length&&(f=new el("onChange","change",null,f,g),a.push({event:f,listeners:l}))}var _c=null,Ec=null;function fA(a){$1(a,0)}function E0(a){var l=fl(a);if(lt(l))return a}function hA(a,l){if(a==="change")return l}var A1=!1;if(u){var Wh;if(u){var qh="oninput"in document;if(!qh){var S1=document.createElement("div");S1.setAttribute("oninput","return;"),qh=typeof S1.oninput=="function"}Wh=qh}else Wh=!1;A1=Wh&&(!document.documentMode||9<document.documentMode)}function N1(){_c&&(_c.detachEvent("onpropertychange",I1),Ec=_c=null)}function I1(a){if(a.propertyName==="value"&&E0(Ec)){var l=[];C1(l,Ec,a,wn(a)),Gs(fA,l)}}function mA(a,l,f){a==="focusin"?(N1(),_c=l,Ec=f,_c.attachEvent("onpropertychange",I1)):a==="focusout"&&N1()}function pA(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return E0(Ec)}function gA(a,l){if(a==="click")return E0(l)}function xA(a,l){if(a==="input"||a==="change")return E0(l)}function vA(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Ds=typeof Object.is=="function"?Object.is:vA;function wc(a,l){if(Ds(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var f=Object.keys(a),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!d.call(l,b)||!Ds(a[b],l[b]))return!1}return!0}function R1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function k1(a,l){var f=R1(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=l&&g>=l)return{node:f,offset:l-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=R1(f)}}function D1(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?D1(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function P1(){for(var a=window,l=gt();l instanceof a.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)a=l.contentWindow;else break;l=gt(a.document)}return l}function Gh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function yA(a){var l=P1(),f=a.focusedElem,g=a.selectionRange;if(l!==f&&f&&f.ownerDocument&&D1(f.ownerDocument.documentElement,f)){if(g!==null&&Gh(f)){if(l=g.start,a=g.end,a===void 0&&(a=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(a,f.value.length);else if(a=(l=f.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var b=f.textContent.length,S=Math.min(g.start,b);g=g.end===void 0?S:Math.min(g.end,b),!a.extend&&S>g&&(b=g,g=S,S=b),b=k1(f,S);var z=k1(f,g);b&&z&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==z.node||a.focusOffset!==z.offset)&&(l=l.createRange(),l.setStart(b.node,b.offset),a.removeAllRanges(),S>g?(a.addRange(l),a.extend(z.node,z.offset)):(l.setEnd(z.node,z.offset),a.addRange(l)))}}for(l=[],a=f;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)a=l[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var _A=u&&"documentMode"in document&&11>=document.documentMode,ll=null,Kh=null,bc=null,Xh=!1;function F1(a,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Xh||ll==null||ll!==gt(g)||(g=ll,"selectionStart"in g&&Gh(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),bc&&wc(bc,g)||(bc=g,g=C0(Kh,"onSelect"),0<g.length&&(l=new el("onSelect","select",null,l,f),a.push({event:l,listeners:g}),l.target=ll)))}function w0(a,l){var f={};return f[a.toLowerCase()]=l.toLowerCase(),f["Webkit"+a]="webkit"+l,f["Moz"+a]="moz"+l,f}var cl={animationend:w0("Animation","AnimationEnd"),animationiteration:w0("Animation","AnimationIteration"),animationstart:w0("Animation","AnimationStart"),transitionend:w0("Transition","TransitionEnd")},Yh={},j1={};u&&(j1=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function b0(a){if(Yh[a])return Yh[a];if(!cl[a])return a;var l=cl[a],f;for(f in l)if(l.hasOwnProperty(f)&&f in j1)return Yh[a]=l[f];return a}var O1=b0("animationend"),B1=b0("animationiteration"),L1=b0("animationstart"),M1=b0("transitionend"),V1=new Map,U1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function aa(a,l){V1.set(a,l),i(l,[a])}for(var Qh=0;Qh<U1.length;Qh++){var Jh=U1[Qh],EA=Jh.toLowerCase(),wA=Jh[0].toUpperCase()+Jh.slice(1);aa(EA,"on"+wA)}aa(O1,"onAnimationEnd"),aa(B1,"onAnimationIteration"),aa(L1,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(M1,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tc));function z1(a,l,f){var g=a.type||"unknown-event";a.currentTarget=f,Z(g,l,void 0,a),a.currentTarget=null}function $1(a,l){l=(l&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],b=g.event;g=g.listeners;e:{var S=void 0;if(l)for(var z=g.length-1;0<=z;z--){var te=g[z],ae=te.instance,be=te.currentTarget;if(te=te.listener,ae!==S&&b.isPropagationStopped())break e;z1(b,te,be),S=ae}else for(z=0;z<g.length;z++){if(te=g[z],ae=te.instance,be=te.currentTarget,te=te.listener,ae!==S&&b.isPropagationStopped())break e;z1(b,te,be),S=ae}}}if(q)throw a=J,q=!1,J=null,a}function ar(a,l){var f=l[am];f===void 0&&(f=l[am]=new Set);var g=a+"__bubble";f.has(g)||(H1(l,a,2,!1),f.add(g))}function Zh(a,l,f){var g=0;l&&(g|=4),H1(f,a,g,l)}var T0="_reactListening"+Math.random().toString(36).slice(2);function Cc(a){if(!a[T0]){a[T0]=!0,n.forEach(function(f){f!=="selectionchange"&&(bA.has(f)||Zh(f,!1,a),Zh(f,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[T0]||(l[T0]=!0,Zh("selectionchange",!1,l))}}function H1(a,l,f,g){switch(pc(l)){case 1:var b=dr;break;case 4:b=$h;break;default:b=mc}f=b.bind(null,l,f,a),b=void 0,!Cs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),g?b!==void 0?a.addEventListener(l,f,{capture:!0,passive:b}):a.addEventListener(l,f,!0):b!==void 0?a.addEventListener(l,f,{passive:b}):a.addEventListener(l,f,!1)}function em(a,l,f,g,b){var S=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var z=g.tag;if(z===3||z===4){var te=g.stateNode.containerInfo;if(te===b||te.nodeType===8&&te.parentNode===b)break;if(z===4)for(z=g.return;z!==null;){var ae=z.tag;if((ae===3||ae===4)&&(ae=z.stateNode.containerInfo,ae===b||ae.nodeType===8&&ae.parentNode===b))return;z=z.return}for(;te!==null;){if(z=to(te),z===null)return;if(ae=z.tag,ae===5||ae===6){g=S=z;continue e}te=te.parentNode}}g=g.return}Gs(function(){var be=S,Fe=wn(f),Ve=[];e:{var De=V1.get(a);if(De!==void 0){var Ye=el,rt=a;switch(a){case"keypress":if(Zo(f)===0)break e;case"keydown":case"keyup":Ye=A;break;case"focusin":rt="focus",Ye=sl;break;case"focusout":rt="blur",Ye=sl;break;case"beforeblur":case"afterblur":Ye=sl;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=m0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=Te;break;case O1:case B1:case L1:Ye=Ti;break;case M1:Ye=Gt;break;case"scroll":Ye=Hh;break;case"wheel":Ye=Dt;break;case"copy":case"cut":case"paste":Ye=x0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=K}var st=(l&4)!==0,Er=!st&&a==="scroll",pe=st?De!==null?De+"Capture":null:De;st=[];for(var ce=be,ye;ce!==null;){ye=ce;var ze=ye.stateNode;if(ye.tag===5&&ze!==null&&(ye=ze,pe!==null&&(ze=sr(ce,pe),ze!=null&&st.push(Ac(ce,ze,ye)))),Er)break;ce=ce.return}0<st.length&&(De=new Ye(De,rt,null,f,Fe),Ve.push({event:De,listeners:st}))}}if((l&7)===0){e:{if(De=a==="mouseover"||a==="pointerover",Ye=a==="mouseout"||a==="pointerout",De&&f!==Ht&&(rt=f.relatedTarget||f.fromElement)&&(to(rt)||rt[Ci]))break e;if((Ye||De)&&(De=Fe.window===Fe?Fe:(De=Fe.ownerDocument)?De.defaultView||De.parentWindow:window,Ye?(rt=f.relatedTarget||f.toElement,Ye=be,rt=rt?to(rt):null,rt!==null&&(Er=ee(rt),rt!==Er||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(Ye=null,rt=be),Ye!==rt)){if(st=rl,ze="onMouseLeave",pe="onMouseEnter",ce="mouse",(a==="pointerout"||a==="pointerover")&&(st=K,ze="onPointerLeave",pe="onPointerEnter",ce="pointer"),Er=Ye==null?De:fl(Ye),ye=rt==null?De:fl(rt),De=new st(ze,ce+"leave",Ye,f,Fe),De.target=Er,De.relatedTarget=ye,ze=null,to(Fe)===be&&(st=new st(pe,ce+"enter",rt,f,Fe),st.target=ye,st.relatedTarget=Er,ze=st),Er=ze,Ye&&rt)t:{for(st=Ye,pe=rt,ce=0,ye=st;ye;ye=ul(ye))ce++;for(ye=0,ze=pe;ze;ze=ul(ze))ye++;for(;0<ce-ye;)st=ul(st),ce--;for(;0<ye-ce;)pe=ul(pe),ye--;for(;ce--;){if(st===pe||pe!==null&&st===pe.alternate)break t;st=ul(st),pe=ul(pe)}st=null}else st=null;Ye!==null&&W1(Ve,De,Ye,st,!1),rt!==null&&Er!==null&&W1(Ve,Er,rt,st,!0)}}e:{if(De=be?fl(be):window,Ye=De.nodeName&&De.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&De.type==="file")var ot=hA;else if(T1(De))if(A1)ot=xA;else{ot=pA;var dt=mA}else(Ye=De.nodeName)&&Ye.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(ot=gA);if(ot&&(ot=ot(a,be))){C1(Ve,ot,f,Fe);break e}dt&&dt(a,De,be),a==="focusout"&&(dt=De._wrapperState)&&dt.controlled&&De.type==="number"&&ne(De,"number",De.value)}switch(dt=be?fl(be):window,a){case"focusin":(T1(dt)||dt.contentEditable==="true")&&(ll=dt,Kh=be,bc=null);break;case"focusout":bc=Kh=ll=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,F1(Ve,f,Fe);break;case"selectionchange":if(_A)break;case"keydown":case"keyup":F1(Ve,f,Fe)}var ft;if(Tr)e:{switch(a){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else ol?w1(a,f)&&(xt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(xt="onCompositionStart");xt&&(eo&&f.locale!=="ko"&&(ol||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&ol&&(ft=gc()):(Yn=Fe,Jo="value"in Yn?Yn.value:Yn.textContent,ol=!0)),dt=C0(be,xt),0<dt.length&&(xt=new yc(xt,a,null,f,Fe),Ve.push({event:xt,listeners:dt}),ft?xt.data=ft:(ft=b1(f),ft!==null&&(xt.data=ft)))),(ft=Qn?cA(a,f):uA(a,f))&&(be=C0(be,"onBeforeInput"),0<be.length&&(Fe=new yc("onBeforeInput","beforeinput",null,f,Fe),Ve.push({event:Fe,listeners:be}),Fe.data=ft))}$1(Ve,l)})}function Ac(a,l,f){return{instance:a,listener:l,currentTarget:f}}function C0(a,l){for(var f=l+"Capture",g=[];a!==null;){var b=a,S=b.stateNode;b.tag===5&&S!==null&&(b=S,S=sr(a,f),S!=null&&g.unshift(Ac(a,S,b)),S=sr(a,l),S!=null&&g.push(Ac(a,S,b))),a=a.return}return g}function ul(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function W1(a,l,f,g,b){for(var S=l._reactName,z=[];f!==null&&f!==g;){var te=f,ae=te.alternate,be=te.stateNode;if(ae!==null&&ae===g)break;te.tag===5&&be!==null&&(te=be,b?(ae=sr(f,S),ae!=null&&z.unshift(Ac(f,ae,te))):b||(ae=sr(f,S),ae!=null&&z.push(Ac(f,ae,te)))),f=f.return}z.length!==0&&a.push({event:l,listeners:z})}var TA=/\r\n?/g,CA=/\u0000|\uFFFD/g;function q1(a){return(typeof a=="string"?a:""+a).replace(TA,`
`).replace(CA,"")}function A0(a,l,f){if(l=q1(l),q1(a)!==l&&f)throw Error(t(425))}function S0(){}var tm=null,rm=null;function nm(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var sm=typeof setTimeout=="function"?setTimeout:void 0,AA=typeof clearTimeout=="function"?clearTimeout:void 0,G1=typeof Promise=="function"?Promise:void 0,SA=typeof queueMicrotask=="function"?queueMicrotask:typeof G1<"u"?function(a){return G1.resolve(null).then(a).catch(NA)}:sm;function NA(a){setTimeout(function(){throw a})}function im(a,l){var f=l,g=0;do{var b=f.nextSibling;if(a.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"){if(g===0){a.removeChild(b),Rs(l);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=b}while(f);Rs(l)}function oa(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function K1(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return a;l--}else f==="/$"&&l++}a=a.previousSibling}return null}var dl=Math.random().toString(36).slice(2),ti="__reactFiber$"+dl,Sc="__reactProps$"+dl,Ci="__reactContainer$"+dl,am="__reactEvents$"+dl,IA="__reactListeners$"+dl,RA="__reactHandles$"+dl;function to(a){var l=a[ti];if(l)return l;for(var f=a.parentNode;f;){if(l=f[Ci]||f[ti]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(a=K1(a);a!==null;){if(f=a[ti])return f;a=K1(a)}return l}a=f,f=a.parentNode}return null}function Nc(a){return a=a[ti]||a[Ci],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function fl(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function N0(a){return a[Sc]||null}var om=[],hl=-1;function la(a){return{current:a}}function or(a){0>hl||(a.current=om[hl],om[hl]=null,hl--)}function nr(a,l){hl++,om[hl]=a.current,a.current=l}var ca={},dn=la(ca),jn=la(!1),ro=ca;function ml(a,l){var f=a.type.contextTypes;if(!f)return ca;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var b={},S;for(S in f)b[S]=l[S];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=b),b}function On(a){return a=a.childContextTypes,a!=null}function I0(){or(jn),or(dn)}function X1(a,l,f){if(dn.current!==ca)throw Error(t(168));nr(dn,l),nr(jn,f)}function Y1(a,l,f){var g=a.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var b in g)if(!(b in l))throw Error(t(108,xe(a)||"Unknown",b));return Q({},f,g)}function R0(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ca,ro=dn.current,nr(dn,a),nr(jn,jn.current),!0}function Q1(a,l,f){var g=a.stateNode;if(!g)throw Error(t(169));f?(a=Y1(a,l,ro),g.__reactInternalMemoizedMergedChildContext=a,or(jn),or(dn),nr(dn,a)):or(jn),nr(jn,f)}var Ai=null,k0=!1,lm=!1;function J1(a){Ai===null?Ai=[a]:Ai.push(a)}function kA(a){k0=!0,J1(a)}function ua(){if(!lm&&Ai!==null){lm=!0;var a=0,l=Nt;try{var f=Ai;for(Nt=1;a<f.length;a++){var g=f[a];do g=g(!0);while(g!==null)}Ai=null,k0=!1}catch(b){throw Ai!==null&&(Ai=Ai.slice(a+1)),je(zt,ua),b}finally{Nt=l,lm=!1}}return null}var pl=[],gl=0,D0=null,P0=0,ms=[],ps=0,no=null,Si=1,Ni="";function so(a,l){pl[gl++]=P0,pl[gl++]=D0,D0=a,P0=l}function Z1(a,l,f){ms[ps++]=Si,ms[ps++]=Ni,ms[ps++]=no,no=a;var g=Si;a=Ni;var b=32-ir(g)-1;g&=~(1<<b),f+=1;var S=32-ir(l)+b;if(30<S){var z=b-b%5;S=(g&(1<<z)-1).toString(32),g>>=z,b-=z,Si=1<<32-ir(l)+b|f<<b|g,Ni=S+a}else Si=1<<S|f<<b|g,Ni=a}function cm(a){a.return!==null&&(so(a,1),Z1(a,1,0))}function um(a){for(;a===D0;)D0=pl[--gl],pl[gl]=null,P0=pl[--gl],pl[gl]=null;for(;a===no;)no=ms[--ps],ms[ps]=null,Ni=ms[--ps],ms[ps]=null,Si=ms[--ps],ms[ps]=null}var Jn=null,Zn=null,fr=!1,Ps=null;function ev(a,l){var f=ys(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=a,l=a.deletions,l===null?(a.deletions=[f],a.flags|=16):l.push(f)}function tv(a,l){switch(a.tag){case 5:var f=a.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,Jn=a,Zn=oa(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,Jn=a,Zn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=no!==null?{id:Si,overflow:Ni}:null,a.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=ys(18,null,null,0),f.stateNode=l,f.return=a,a.child=f,Jn=a,Zn=null,!0):!1;default:return!1}}function dm(a){return(a.mode&1)!==0&&(a.flags&128)===0}function fm(a){if(fr){var l=Zn;if(l){var f=l;if(!tv(a,l)){if(dm(a))throw Error(t(418));l=oa(f.nextSibling);var g=Jn;l&&tv(a,l)?ev(g,f):(a.flags=a.flags&-4097|2,fr=!1,Jn=a)}}else{if(dm(a))throw Error(t(418));a.flags=a.flags&-4097|2,fr=!1,Jn=a}}}function rv(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Jn=a}function F0(a){if(a!==Jn)return!1;if(!fr)return rv(a),fr=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!nm(a.type,a.memoizedProps)),l&&(l=Zn)){if(dm(a))throw nv(),Error(t(418));for(;l;)ev(a,l),l=oa(l.nextSibling)}if(rv(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(l===0){Zn=oa(a.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}a=a.nextSibling}Zn=null}}else Zn=Jn?oa(a.stateNode.nextSibling):null;return!0}function nv(){for(var a=Zn;a;)a=oa(a.nextSibling)}function xl(){Zn=Jn=null,fr=!1}function hm(a){Ps===null?Ps=[a]:Ps.push(a)}var DA=B.ReactCurrentBatchConfig;function Ic(a,l,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var g=f.stateNode}if(!g)throw Error(t(147,a));var b=g,S=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===S?l.ref:(l=function(z){var te=b.refs;z===null?delete te[S]:te[S]=z},l._stringRef=S,l)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function j0(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function sv(a){var l=a._init;return l(a._payload)}function iv(a){function l(pe,ce){if(a){var ye=pe.deletions;ye===null?(pe.deletions=[ce],pe.flags|=16):ye.push(ce)}}function f(pe,ce){if(!a)return null;for(;ce!==null;)l(pe,ce),ce=ce.sibling;return null}function g(pe,ce){for(pe=new Map;ce!==null;)ce.key!==null?pe.set(ce.key,ce):pe.set(ce.index,ce),ce=ce.sibling;return pe}function b(pe,ce){return pe=va(pe,ce),pe.index=0,pe.sibling=null,pe}function S(pe,ce,ye){return pe.index=ye,a?(ye=pe.alternate,ye!==null?(ye=ye.index,ye<ce?(pe.flags|=2,ce):ye):(pe.flags|=2,ce)):(pe.flags|=1048576,ce)}function z(pe){return a&&pe.alternate===null&&(pe.flags|=2),pe}function te(pe,ce,ye,ze){return ce===null||ce.tag!==6?(ce=sp(ye,pe.mode,ze),ce.return=pe,ce):(ce=b(ce,ye),ce.return=pe,ce)}function ae(pe,ce,ye,ze){var ot=ye.type;return ot===N?Fe(pe,ce,ye.props.children,ze,ye.key):ce!==null&&(ce.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ie&&sv(ot)===ce.type)?(ze=b(ce,ye.props),ze.ref=Ic(pe,ce,ye),ze.return=pe,ze):(ze=id(ye.type,ye.key,ye.props,null,pe.mode,ze),ze.ref=Ic(pe,ce,ye),ze.return=pe,ze)}function be(pe,ce,ye,ze){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ye.containerInfo||ce.stateNode.implementation!==ye.implementation?(ce=ip(ye,pe.mode,ze),ce.return=pe,ce):(ce=b(ce,ye.children||[]),ce.return=pe,ce)}function Fe(pe,ce,ye,ze,ot){return ce===null||ce.tag!==7?(ce=ho(ye,pe.mode,ze,ot),ce.return=pe,ce):(ce=b(ce,ye),ce.return=pe,ce)}function Ve(pe,ce,ye){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=sp(""+ce,pe.mode,ye),ce.return=pe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case U:return ye=id(ce.type,ce.key,ce.props,null,pe.mode,ye),ye.ref=Ic(pe,null,ce),ye.return=pe,ye;case W:return ce=ip(ce,pe.mode,ye),ce.return=pe,ce;case Ie:var ze=ce._init;return Ve(pe,ze(ce._payload),ye)}if(ue(ce)||de(ce))return ce=ho(ce,pe.mode,ye,null),ce.return=pe,ce;j0(pe,ce)}return null}function De(pe,ce,ye,ze){var ot=ce!==null?ce.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ot!==null?null:te(pe,ce,""+ye,ze);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case U:return ye.key===ot?ae(pe,ce,ye,ze):null;case W:return ye.key===ot?be(pe,ce,ye,ze):null;case Ie:return ot=ye._init,De(pe,ce,ot(ye._payload),ze)}if(ue(ye)||de(ye))return ot!==null?null:Fe(pe,ce,ye,ze,null);j0(pe,ye)}return null}function Ye(pe,ce,ye,ze,ot){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return pe=pe.get(ye)||null,te(ce,pe,""+ze,ot);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case U:return pe=pe.get(ze.key===null?ye:ze.key)||null,ae(ce,pe,ze,ot);case W:return pe=pe.get(ze.key===null?ye:ze.key)||null,be(ce,pe,ze,ot);case Ie:var dt=ze._init;return Ye(pe,ce,ye,dt(ze._payload),ot)}if(ue(ze)||de(ze))return pe=pe.get(ye)||null,Fe(ce,pe,ze,ot,null);j0(ce,ze)}return null}function rt(pe,ce,ye,ze){for(var ot=null,dt=null,ft=ce,xt=ce=0,zr=null;ft!==null&&xt<ye.length;xt++){ft.index>xt?(zr=ft,ft=null):zr=ft.sibling;var Mt=De(pe,ft,ye[xt],ze);if(Mt===null){ft===null&&(ft=zr);break}a&&ft&&Mt.alternate===null&&l(pe,ft),ce=S(Mt,ce,xt),dt===null?ot=Mt:dt.sibling=Mt,dt=Mt,ft=zr}if(xt===ye.length)return f(pe,ft),fr&&so(pe,xt),ot;if(ft===null){for(;xt<ye.length;xt++)ft=Ve(pe,ye[xt],ze),ft!==null&&(ce=S(ft,ce,xt),dt===null?ot=ft:dt.sibling=ft,dt=ft);return fr&&so(pe,xt),ot}for(ft=g(pe,ft);xt<ye.length;xt++)zr=Ye(ft,pe,xt,ye[xt],ze),zr!==null&&(a&&zr.alternate!==null&&ft.delete(zr.key===null?xt:zr.key),ce=S(zr,ce,xt),dt===null?ot=zr:dt.sibling=zr,dt=zr);return a&&ft.forEach(function(ya){return l(pe,ya)}),fr&&so(pe,xt),ot}function st(pe,ce,ye,ze){var ot=de(ye);if(typeof ot!="function")throw Error(t(150));if(ye=ot.call(ye),ye==null)throw Error(t(151));for(var dt=ot=null,ft=ce,xt=ce=0,zr=null,Mt=ye.next();ft!==null&&!Mt.done;xt++,Mt=ye.next()){ft.index>xt?(zr=ft,ft=null):zr=ft.sibling;var ya=De(pe,ft,Mt.value,ze);if(ya===null){ft===null&&(ft=zr);break}a&&ft&&ya.alternate===null&&l(pe,ft),ce=S(ya,ce,xt),dt===null?ot=ya:dt.sibling=ya,dt=ya,ft=zr}if(Mt.done)return f(pe,ft),fr&&so(pe,xt),ot;if(ft===null){for(;!Mt.done;xt++,Mt=ye.next())Mt=Ve(pe,Mt.value,ze),Mt!==null&&(ce=S(Mt,ce,xt),dt===null?ot=Mt:dt.sibling=Mt,dt=Mt);return fr&&so(pe,xt),ot}for(ft=g(pe,ft);!Mt.done;xt++,Mt=ye.next())Mt=Ye(ft,pe,xt,Mt.value,ze),Mt!==null&&(a&&Mt.alternate!==null&&ft.delete(Mt.key===null?xt:Mt.key),ce=S(Mt,ce,xt),dt===null?ot=Mt:dt.sibling=Mt,dt=Mt);return a&&ft.forEach(function(dS){return l(pe,dS)}),fr&&so(pe,xt),ot}function Er(pe,ce,ye,ze){if(typeof ye=="object"&&ye!==null&&ye.type===N&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case U:e:{for(var ot=ye.key,dt=ce;dt!==null;){if(dt.key===ot){if(ot=ye.type,ot===N){if(dt.tag===7){f(pe,dt.sibling),ce=b(dt,ye.props.children),ce.return=pe,pe=ce;break e}}else if(dt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ie&&sv(ot)===dt.type){f(pe,dt.sibling),ce=b(dt,ye.props),ce.ref=Ic(pe,dt,ye),ce.return=pe,pe=ce;break e}f(pe,dt);break}else l(pe,dt);dt=dt.sibling}ye.type===N?(ce=ho(ye.props.children,pe.mode,ze,ye.key),ce.return=pe,pe=ce):(ze=id(ye.type,ye.key,ye.props,null,pe.mode,ze),ze.ref=Ic(pe,ce,ye),ze.return=pe,pe=ze)}return z(pe);case W:e:{for(dt=ye.key;ce!==null;){if(ce.key===dt)if(ce.tag===4&&ce.stateNode.containerInfo===ye.containerInfo&&ce.stateNode.implementation===ye.implementation){f(pe,ce.sibling),ce=b(ce,ye.children||[]),ce.return=pe,pe=ce;break e}else{f(pe,ce);break}else l(pe,ce);ce=ce.sibling}ce=ip(ye,pe.mode,ze),ce.return=pe,pe=ce}return z(pe);case Ie:return dt=ye._init,Er(pe,ce,dt(ye._payload),ze)}if(ue(ye))return rt(pe,ce,ye,ze);if(de(ye))return st(pe,ce,ye,ze);j0(pe,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,ce!==null&&ce.tag===6?(f(pe,ce.sibling),ce=b(ce,ye),ce.return=pe,pe=ce):(f(pe,ce),ce=sp(ye,pe.mode,ze),ce.return=pe,pe=ce),z(pe)):f(pe,ce)}return Er}var vl=iv(!0),av=iv(!1),O0=la(null),B0=null,yl=null,mm=null;function pm(){mm=yl=B0=null}function gm(a){var l=O0.current;or(O0),a._currentValue=l}function xm(a,l,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===f)break;a=a.return}}function _l(a,l){B0=a,mm=yl=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Bn=!0),a.firstContext=null)}function gs(a){var l=a._currentValue;if(mm!==a)if(a={context:a,memoizedValue:l,next:null},yl===null){if(B0===null)throw Error(t(308));yl=a,B0.dependencies={lanes:0,firstContext:a}}else yl=yl.next=a;return l}var io=null;function vm(a){io===null?io=[a]:io.push(a)}function ov(a,l,f,g){var b=l.interleaved;return b===null?(f.next=f,vm(l)):(f.next=b.next,b.next=f),l.interleaved=f,Ii(a,g)}function Ii(a,l){a.lanes|=l;var f=a.alternate;for(f!==null&&(f.lanes|=l),f=a,a=a.return;a!==null;)a.childLanes|=l,f=a.alternate,f!==null&&(f.childLanes|=l),f=a,a=a.return;return f.tag===3?f.stateNode:null}var da=!1;function ym(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lv(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Ri(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function fa(a,l,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Ft&2)!==0){var b=g.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),g.pending=l,Ii(a,f)}return b=g.interleaved,b===null?(l.next=l,vm(g)):(l.next=b.next,b.next=l),g.interleaved=l,Ii(a,f)}function L0(a,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,ta(a,f)}}function cv(a,l){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var z={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};S===null?b=S=z:S=S.next=z,f=f.next}while(f!==null);S===null?b=S=l:S=S.next=l}else b=S=l;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:S,shared:g.shared,effects:g.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=l}function M0(a,l,f,g){var b=a.updateQueue;da=!1;var S=b.firstBaseUpdate,z=b.lastBaseUpdate,te=b.shared.pending;if(te!==null){b.shared.pending=null;var ae=te,be=ae.next;ae.next=null,z===null?S=be:z.next=be,z=ae;var Fe=a.alternate;Fe!==null&&(Fe=Fe.updateQueue,te=Fe.lastBaseUpdate,te!==z&&(te===null?Fe.firstBaseUpdate=be:te.next=be,Fe.lastBaseUpdate=ae))}if(S!==null){var Ve=b.baseState;z=0,Fe=be=ae=null,te=S;do{var De=te.lane,Ye=te.eventTime;if((g&De)===De){Fe!==null&&(Fe=Fe.next={eventTime:Ye,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var rt=a,st=te;switch(De=l,Ye=f,st.tag){case 1:if(rt=st.payload,typeof rt=="function"){Ve=rt.call(Ye,Ve,De);break e}Ve=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=st.payload,De=typeof rt=="function"?rt.call(Ye,Ve,De):rt,De==null)break e;Ve=Q({},Ve,De);break e;case 2:da=!0}}te.callback!==null&&te.lane!==0&&(a.flags|=64,De=b.effects,De===null?b.effects=[te]:De.push(te))}else Ye={eventTime:Ye,lane:De,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Fe===null?(be=Fe=Ye,ae=Ve):Fe=Fe.next=Ye,z|=De;if(te=te.next,te===null){if(te=b.shared.pending,te===null)break;De=te,te=De.next,De.next=null,b.lastBaseUpdate=De,b.shared.pending=null}}while(!0);if(Fe===null&&(ae=Ve),b.baseState=ae,b.firstBaseUpdate=be,b.lastBaseUpdate=Fe,l=b.shared.interleaved,l!==null){b=l;do z|=b.lane,b=b.next;while(b!==l)}else S===null&&(b.shared.lanes=0);lo|=z,a.lanes=z,a.memoizedState=Ve}}function uv(a,l,f){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var g=a[l],b=g.callback;if(b!==null){if(g.callback=null,g=f,typeof b!="function")throw Error(t(191,b));b.call(g)}}}var Rc={},ri=la(Rc),kc=la(Rc),Dc=la(Rc);function ao(a){if(a===Rc)throw Error(t(174));return a}function _m(a,l){switch(nr(Dc,l),nr(kc,a),nr(ri,Rc),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:fe(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=fe(l,a)}or(ri),nr(ri,l)}function El(){or(ri),or(kc),or(Dc)}function dv(a){ao(Dc.current);var l=ao(ri.current),f=fe(l,a.type);l!==f&&(nr(kc,a),nr(ri,f))}function Em(a){kc.current===a&&(or(ri),or(kc))}var hr=la(0);function V0(a){for(var l=a;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var wm=[];function bm(){for(var a=0;a<wm.length;a++)wm[a]._workInProgressVersionPrimary=null;wm.length=0}var U0=B.ReactCurrentDispatcher,Tm=B.ReactCurrentBatchConfig,oo=0,mr=null,Fr=null,Vr=null,z0=!1,Pc=!1,Fc=0,PA=0;function fn(){throw Error(t(321))}function Cm(a,l){if(l===null)return!1;for(var f=0;f<l.length&&f<a.length;f++)if(!Ds(a[f],l[f]))return!1;return!0}function Am(a,l,f,g,b,S){if(oo=S,mr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,U0.current=a===null||a.memoizedState===null?BA:LA,a=f(g,b),Pc){S=0;do{if(Pc=!1,Fc=0,25<=S)throw Error(t(301));S+=1,Vr=Fr=null,l.updateQueue=null,U0.current=MA,a=f(g,b)}while(Pc)}if(U0.current=W0,l=Fr!==null&&Fr.next!==null,oo=0,Vr=Fr=mr=null,z0=!1,l)throw Error(t(300));return a}function Sm(){var a=Fc!==0;return Fc=0,a}function ni(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?mr.memoizedState=Vr=a:Vr=Vr.next=a,Vr}function xs(){if(Fr===null){var a=mr.alternate;a=a!==null?a.memoizedState:null}else a=Fr.next;var l=Vr===null?mr.memoizedState:Vr.next;if(l!==null)Vr=l,Fr=a;else{if(a===null)throw Error(t(310));Fr=a,a={memoizedState:Fr.memoizedState,baseState:Fr.baseState,baseQueue:Fr.baseQueue,queue:Fr.queue,next:null},Vr===null?mr.memoizedState=Vr=a:Vr=Vr.next=a}return Vr}function jc(a,l){return typeof l=="function"?l(a):l}function Nm(a){var l=xs(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var g=Fr,b=g.baseQueue,S=f.pending;if(S!==null){if(b!==null){var z=b.next;b.next=S.next,S.next=z}g.baseQueue=b=S,f.pending=null}if(b!==null){S=b.next,g=g.baseState;var te=z=null,ae=null,be=S;do{var Fe=be.lane;if((oo&Fe)===Fe)ae!==null&&(ae=ae.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),g=be.hasEagerState?be.eagerState:a(g,be.action);else{var Ve={lane:Fe,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};ae===null?(te=ae=Ve,z=g):ae=ae.next=Ve,mr.lanes|=Fe,lo|=Fe}be=be.next}while(be!==null&&be!==S);ae===null?z=g:ae.next=te,Ds(g,l.memoizedState)||(Bn=!0),l.memoizedState=g,l.baseState=z,l.baseQueue=ae,f.lastRenderedState=g}if(a=f.interleaved,a!==null){b=a;do S=b.lane,mr.lanes|=S,lo|=S,b=b.next;while(b!==a)}else b===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function Im(a){var l=xs(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var g=f.dispatch,b=f.pending,S=l.memoizedState;if(b!==null){f.pending=null;var z=b=b.next;do S=a(S,z.action),z=z.next;while(z!==b);Ds(S,l.memoizedState)||(Bn=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),f.lastRenderedState=S}return[S,g]}function fv(){}function hv(a,l){var f=mr,g=xs(),b=l(),S=!Ds(g.memoizedState,b);if(S&&(g.memoizedState=b,Bn=!0),g=g.queue,Rm(gv.bind(null,f,g,a),[a]),g.getSnapshot!==l||S||Vr!==null&&Vr.memoizedState.tag&1){if(f.flags|=2048,Oc(9,pv.bind(null,f,g,b,l),void 0,null),Ur===null)throw Error(t(349));(oo&30)!==0||mv(f,l,b)}return b}function mv(a,l,f){a.flags|=16384,a={getSnapshot:l,value:f},l=mr.updateQueue,l===null?(l={lastEffect:null,stores:null},mr.updateQueue=l,l.stores=[a]):(f=l.stores,f===null?l.stores=[a]:f.push(a))}function pv(a,l,f,g){l.value=f,l.getSnapshot=g,xv(l)&&vv(a)}function gv(a,l,f){return f(function(){xv(l)&&vv(a)})}function xv(a){var l=a.getSnapshot;a=a.value;try{var f=l();return!Ds(a,f)}catch{return!0}}function vv(a){var l=Ii(a,1);l!==null&&Bs(l,a,1,-1)}function yv(a){var l=ni();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jc,lastRenderedState:a},l.queue=a,a=a.dispatch=OA.bind(null,mr,a),[l.memoizedState,a]}function Oc(a,l,f,g){return a={tag:a,create:l,destroy:f,deps:g,next:null},l=mr.updateQueue,l===null?(l={lastEffect:null,stores:null},mr.updateQueue=l,l.lastEffect=a.next=a):(f=l.lastEffect,f===null?l.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,l.lastEffect=a)),a}function _v(){return xs().memoizedState}function $0(a,l,f,g){var b=ni();mr.flags|=a,b.memoizedState=Oc(1|l,f,void 0,g===void 0?null:g)}function H0(a,l,f,g){var b=xs();g=g===void 0?null:g;var S=void 0;if(Fr!==null){var z=Fr.memoizedState;if(S=z.destroy,g!==null&&Cm(g,z.deps)){b.memoizedState=Oc(l,f,S,g);return}}mr.flags|=a,b.memoizedState=Oc(1|l,f,S,g)}function Ev(a,l){return $0(8390656,8,a,l)}function Rm(a,l){return H0(2048,8,a,l)}function wv(a,l){return H0(4,2,a,l)}function bv(a,l){return H0(4,4,a,l)}function Tv(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Cv(a,l,f){return f=f!=null?f.concat([a]):null,H0(4,4,Tv.bind(null,l,a),f)}function km(){}function Av(a,l){var f=xs();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&Cm(l,g[1])?g[0]:(f.memoizedState=[a,l],a)}function Sv(a,l){var f=xs();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&Cm(l,g[1])?g[0]:(a=a(),f.memoizedState=[a,l],a)}function Nv(a,l,f){return(oo&21)===0?(a.baseState&&(a.baseState=!1,Bn=!0),a.memoizedState=f):(Ds(f,l)||(f=Ya(),mr.lanes|=f,lo|=f,a.baseState=!0),l)}function FA(a,l){var f=Nt;Nt=f!==0&&4>f?f:4,a(!0);var g=Tm.transition;Tm.transition={};try{a(!1),l()}finally{Nt=f,Tm.transition=g}}function Iv(){return xs().memoizedState}function jA(a,l,f){var g=ga(a);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},Rv(a))kv(l,f);else if(f=ov(a,l,f,g),f!==null){var b=An();Bs(f,a,g,b),Dv(f,l,g)}}function OA(a,l,f){var g=ga(a),b={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(Rv(a))kv(l,b);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var z=l.lastRenderedState,te=S(z,f);if(b.hasEagerState=!0,b.eagerState=te,Ds(te,z)){var ae=l.interleaved;ae===null?(b.next=b,vm(l)):(b.next=ae.next,ae.next=b),l.interleaved=b;return}}catch{}finally{}f=ov(a,l,b,g),f!==null&&(b=An(),Bs(f,a,g,b),Dv(f,l,g))}}function Rv(a){var l=a.alternate;return a===mr||l!==null&&l===mr}function kv(a,l){Pc=z0=!0;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}function Dv(a,l,f){if((f&4194240)!==0){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,ta(a,f)}}var W0={readContext:gs,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},BA={readContext:gs,useCallback:function(a,l){return ni().memoizedState=[a,l===void 0?null:l],a},useContext:gs,useEffect:Ev,useImperativeHandle:function(a,l,f){return f=f!=null?f.concat([a]):null,$0(4194308,4,Tv.bind(null,l,a),f)},useLayoutEffect:function(a,l){return $0(4194308,4,a,l)},useInsertionEffect:function(a,l){return $0(4,2,a,l)},useMemo:function(a,l){var f=ni();return l=l===void 0?null:l,a=a(),f.memoizedState=[a,l],a},useReducer:function(a,l,f){var g=ni();return l=f!==void 0?f(l):l,g.memoizedState=g.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},g.queue=a,a=a.dispatch=jA.bind(null,mr,a),[g.memoizedState,a]},useRef:function(a){var l=ni();return a={current:a},l.memoizedState=a},useState:yv,useDebugValue:km,useDeferredValue:function(a){return ni().memoizedState=a},useTransition:function(){var a=yv(!1),l=a[0];return a=FA.bind(null,a[1]),ni().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,f){var g=mr,b=ni();if(fr){if(f===void 0)throw Error(t(407));f=f()}else{if(f=l(),Ur===null)throw Error(t(349));(oo&30)!==0||mv(g,l,f)}b.memoizedState=f;var S={value:f,getSnapshot:l};return b.queue=S,Ev(gv.bind(null,g,S,a),[a]),g.flags|=2048,Oc(9,pv.bind(null,g,S,f,l),void 0,null),f},useId:function(){var a=ni(),l=Ur.identifierPrefix;if(fr){var f=Ni,g=Si;f=(g&~(1<<32-ir(g)-1)).toString(32)+f,l=":"+l+"R"+f,f=Fc++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=PA++,l=":"+l+"r"+f.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},LA={readContext:gs,useCallback:Av,useContext:gs,useEffect:Rm,useImperativeHandle:Cv,useInsertionEffect:wv,useLayoutEffect:bv,useMemo:Sv,useReducer:Nm,useRef:_v,useState:function(){return Nm(jc)},useDebugValue:km,useDeferredValue:function(a){var l=xs();return Nv(l,Fr.memoizedState,a)},useTransition:function(){var a=Nm(jc)[0],l=xs().memoizedState;return[a,l]},useMutableSource:fv,useSyncExternalStore:hv,useId:Iv,unstable_isNewReconciler:!1},MA={readContext:gs,useCallback:Av,useContext:gs,useEffect:Rm,useImperativeHandle:Cv,useInsertionEffect:wv,useLayoutEffect:bv,useMemo:Sv,useReducer:Im,useRef:_v,useState:function(){return Im(jc)},useDebugValue:km,useDeferredValue:function(a){var l=xs();return Fr===null?l.memoizedState=a:Nv(l,Fr.memoizedState,a)},useTransition:function(){var a=Im(jc)[0],l=xs().memoizedState;return[a,l]},useMutableSource:fv,useSyncExternalStore:hv,useId:Iv,unstable_isNewReconciler:!1};function Fs(a,l){if(a&&a.defaultProps){l=Q({},l),a=a.defaultProps;for(var f in a)l[f]===void 0&&(l[f]=a[f]);return l}return l}function Dm(a,l,f,g){l=a.memoizedState,f=f(g,l),f=f==null?l:Q({},l,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var q0={isMounted:function(a){return(a=a._reactInternals)?ee(a)===a:!1},enqueueSetState:function(a,l,f){a=a._reactInternals;var g=An(),b=ga(a),S=Ri(g,b);S.payload=l,f!=null&&(S.callback=f),l=fa(a,S,b),l!==null&&(Bs(l,a,b,g),L0(l,a,b))},enqueueReplaceState:function(a,l,f){a=a._reactInternals;var g=An(),b=ga(a),S=Ri(g,b);S.tag=1,S.payload=l,f!=null&&(S.callback=f),l=fa(a,S,b),l!==null&&(Bs(l,a,b,g),L0(l,a,b))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var f=An(),g=ga(a),b=Ri(f,g);b.tag=2,l!=null&&(b.callback=l),l=fa(a,b,g),l!==null&&(Bs(l,a,g,f),L0(l,a,g))}};function Pv(a,l,f,g,b,S,z){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,S,z):l.prototype&&l.prototype.isPureReactComponent?!wc(f,g)||!wc(b,S):!0}function Fv(a,l,f){var g=!1,b=ca,S=l.contextType;return typeof S=="object"&&S!==null?S=gs(S):(b=On(l)?ro:dn.current,g=l.contextTypes,S=(g=g!=null)?ml(a,b):ca),l=new l(f,S),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=q0,a.stateNode=l,l._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=S),l}function jv(a,l,f,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==a&&q0.enqueueReplaceState(l,l.state,null)}function Pm(a,l,f,g){var b=a.stateNode;b.props=f,b.state=a.memoizedState,b.refs={},ym(a);var S=l.contextType;typeof S=="object"&&S!==null?b.context=gs(S):(S=On(l)?ro:dn.current,b.context=ml(a,S)),b.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Dm(a,l,S,f),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(l=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),l!==b.state&&q0.enqueueReplaceState(b,b.state,null),M0(a,f,b,g),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function wl(a,l){try{var f="",g=l;do f+=G(g),g=g.return;while(g);var b=f}catch(S){b=`
Error generating stack: `+S.message+`
`+S.stack}return{value:a,source:l,stack:b,digest:null}}function Fm(a,l,f){return{value:a,source:null,stack:f??null,digest:l??null}}function jm(a,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var VA=typeof WeakMap=="function"?WeakMap:Map;function Ov(a,l,f){f=Ri(-1,f),f.tag=3,f.payload={element:null};var g=l.value;return f.callback=function(){Z0||(Z0=!0,Ym=g),jm(a,l)},f}function Bv(a,l,f){f=Ri(-1,f),f.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var b=l.value;f.payload=function(){return g(b)},f.callback=function(){jm(a,l)}}var S=a.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(f.callback=function(){jm(a,l),typeof g!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var z=l.stack;this.componentDidCatch(l.value,{componentStack:z!==null?z:""})}),f}function Lv(a,l,f){var g=a.pingCache;if(g===null){g=a.pingCache=new VA;var b=new Set;g.set(l,b)}else b=g.get(l),b===void 0&&(b=new Set,g.set(l,b));b.has(f)||(b.add(f),a=eS.bind(null,a,l,f),l.then(a,a))}function Mv(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function Vv(a,l,f,g,b){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=Ri(-1,1),l.tag=2,fa(f,l,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var UA=B.ReactCurrentOwner,Bn=!1;function Cn(a,l,f,g){l.child=a===null?av(l,null,f,g):vl(l,a.child,f,g)}function Uv(a,l,f,g,b){f=f.render;var S=l.ref;return _l(l,b),g=Am(a,l,f,g,S,b),f=Sm(),a!==null&&!Bn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ki(a,l,b)):(fr&&f&&cm(l),l.flags|=1,Cn(a,l,g,b),l.child)}function zv(a,l,f,g,b){if(a===null){var S=f.type;return typeof S=="function"&&!np(S)&&S.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=S,$v(a,l,S,g,b)):(a=id(f.type,null,g,l,l.mode,b),a.ref=l.ref,a.return=l,l.child=a)}if(S=a.child,(a.lanes&b)===0){var z=S.memoizedProps;if(f=f.compare,f=f!==null?f:wc,f(z,g)&&a.ref===l.ref)return ki(a,l,b)}return l.flags|=1,a=va(S,g),a.ref=l.ref,a.return=l,l.child=a}function $v(a,l,f,g,b){if(a!==null){var S=a.memoizedProps;if(wc(S,g)&&a.ref===l.ref)if(Bn=!1,l.pendingProps=g=S,(a.lanes&b)!==0)(a.flags&131072)!==0&&(Bn=!0);else return l.lanes=a.lanes,ki(a,l,b)}return Om(a,l,f,g,b)}function Hv(a,l,f){var g=l.pendingProps,b=g.children,S=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(Tl,es),es|=f;else{if((f&1073741824)===0)return a=S!==null?S.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,nr(Tl,es),es|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:f,nr(Tl,es),es|=g}else S!==null?(g=S.baseLanes|f,l.memoizedState=null):g=f,nr(Tl,es),es|=g;return Cn(a,l,b,f),l.child}function Wv(a,l){var f=l.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function Om(a,l,f,g,b){var S=On(f)?ro:dn.current;return S=ml(l,S),_l(l,b),f=Am(a,l,f,g,S,b),g=Sm(),a!==null&&!Bn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ki(a,l,b)):(fr&&g&&cm(l),l.flags|=1,Cn(a,l,f,b),l.child)}function qv(a,l,f,g,b){if(On(f)){var S=!0;R0(l)}else S=!1;if(_l(l,b),l.stateNode===null)K0(a,l),Fv(l,f,g),Pm(l,f,g,b),g=!0;else if(a===null){var z=l.stateNode,te=l.memoizedProps;z.props=te;var ae=z.context,be=f.contextType;typeof be=="object"&&be!==null?be=gs(be):(be=On(f)?ro:dn.current,be=ml(l,be));var Fe=f.getDerivedStateFromProps,Ve=typeof Fe=="function"||typeof z.getSnapshotBeforeUpdate=="function";Ve||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(te!==g||ae!==be)&&jv(l,z,g,be),da=!1;var De=l.memoizedState;z.state=De,M0(l,g,z,b),ae=l.memoizedState,te!==g||De!==ae||jn.current||da?(typeof Fe=="function"&&(Dm(l,f,Fe,g),ae=l.memoizedState),(te=da||Pv(l,f,te,g,De,ae,be))?(Ve||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(l.flags|=4194308)):(typeof z.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=ae),z.props=g,z.state=ae,z.context=be,g=te):(typeof z.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{z=l.stateNode,lv(a,l),te=l.memoizedProps,be=l.type===l.elementType?te:Fs(l.type,te),z.props=be,Ve=l.pendingProps,De=z.context,ae=f.contextType,typeof ae=="object"&&ae!==null?ae=gs(ae):(ae=On(f)?ro:dn.current,ae=ml(l,ae));var Ye=f.getDerivedStateFromProps;(Fe=typeof Ye=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(te!==Ve||De!==ae)&&jv(l,z,g,ae),da=!1,De=l.memoizedState,z.state=De,M0(l,g,z,b);var rt=l.memoizedState;te!==Ve||De!==rt||jn.current||da?(typeof Ye=="function"&&(Dm(l,f,Ye,g),rt=l.memoizedState),(be=da||Pv(l,f,be,g,De,rt,ae)||!1)?(Fe||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(g,rt,ae),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(g,rt,ae)),typeof z.componentDidUpdate=="function"&&(l.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof z.componentDidUpdate!="function"||te===a.memoizedProps&&De===a.memoizedState||(l.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||te===a.memoizedProps&&De===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=rt),z.props=g,z.state=rt,z.context=ae,g=be):(typeof z.componentDidUpdate!="function"||te===a.memoizedProps&&De===a.memoizedState||(l.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||te===a.memoizedProps&&De===a.memoizedState||(l.flags|=1024),g=!1)}return Bm(a,l,f,g,S,b)}function Bm(a,l,f,g,b,S){Wv(a,l);var z=(l.flags&128)!==0;if(!g&&!z)return b&&Q1(l,f,!1),ki(a,l,S);g=l.stateNode,UA.current=l;var te=z&&typeof f.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,a!==null&&z?(l.child=vl(l,a.child,null,S),l.child=vl(l,null,te,S)):Cn(a,l,te,S),l.memoizedState=g.state,b&&Q1(l,f,!0),l.child}function Gv(a){var l=a.stateNode;l.pendingContext?X1(a,l.pendingContext,l.pendingContext!==l.context):l.context&&X1(a,l.context,!1),_m(a,l.containerInfo)}function Kv(a,l,f,g,b){return xl(),hm(b),l.flags|=256,Cn(a,l,f,g),l.child}var Lm={dehydrated:null,treeContext:null,retryLane:0};function Mm(a){return{baseLanes:a,cachePool:null,transitions:null}}function Xv(a,l,f){var g=l.pendingProps,b=hr.current,S=!1,z=(l.flags&128)!==0,te;if((te=z)||(te=a!==null&&a.memoizedState===null?!1:(b&2)!==0),te?(S=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),nr(hr,b&1),a===null)return fm(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(z=g.children,a=g.fallback,S?(g=l.mode,S=l.child,z={mode:"hidden",children:z},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=z):S=ad(z,g,0,null),a=ho(a,g,f,null),S.return=l,a.return=l,S.sibling=a,l.child=S,l.child.memoizedState=Mm(f),l.memoizedState=Lm,a):Vm(l,z));if(b=a.memoizedState,b!==null&&(te=b.dehydrated,te!==null))return zA(a,l,z,g,te,b,f);if(S){S=g.fallback,z=l.mode,b=a.child,te=b.sibling;var ae={mode:"hidden",children:g.children};return(z&1)===0&&l.child!==b?(g=l.child,g.childLanes=0,g.pendingProps=ae,l.deletions=null):(g=va(b,ae),g.subtreeFlags=b.subtreeFlags&14680064),te!==null?S=va(te,S):(S=ho(S,z,f,null),S.flags|=2),S.return=l,g.return=l,g.sibling=S,l.child=g,g=S,S=l.child,z=a.child.memoizedState,z=z===null?Mm(f):{baseLanes:z.baseLanes|f,cachePool:null,transitions:z.transitions},S.memoizedState=z,S.childLanes=a.childLanes&~f,l.memoizedState=Lm,g}return S=a.child,a=S.sibling,g=va(S,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=f),g.return=l,g.sibling=null,a!==null&&(f=l.deletions,f===null?(l.deletions=[a],l.flags|=16):f.push(a)),l.child=g,l.memoizedState=null,g}function Vm(a,l){return l=ad({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function G0(a,l,f,g){return g!==null&&hm(g),vl(l,a.child,null,f),a=Vm(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function zA(a,l,f,g,b,S,z){if(f)return l.flags&256?(l.flags&=-257,g=Fm(Error(t(422))),G0(a,l,z,g)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(S=g.fallback,b=l.mode,g=ad({mode:"visible",children:g.children},b,0,null),S=ho(S,b,z,null),S.flags|=2,g.return=l,S.return=l,g.sibling=S,l.child=g,(l.mode&1)!==0&&vl(l,a.child,null,z),l.child.memoizedState=Mm(z),l.memoizedState=Lm,S);if((l.mode&1)===0)return G0(a,l,z,null);if(b.data==="$!"){if(g=b.nextSibling&&b.nextSibling.dataset,g)var te=g.dgst;return g=te,S=Error(t(419)),g=Fm(S,g,void 0),G0(a,l,z,g)}if(te=(z&a.childLanes)!==0,Bn||te){if(g=Ur,g!==null){switch(z&-z){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(g.suspendedLanes|z))!==0?0:b,b!==0&&b!==S.retryLane&&(S.retryLane=b,Ii(a,b),Bs(g,a,b,-1))}return rp(),g=Fm(Error(t(421))),G0(a,l,z,g)}return b.data==="$?"?(l.flags|=128,l.child=a.child,l=tS.bind(null,a),b._reactRetry=l,null):(a=S.treeContext,Zn=oa(b.nextSibling),Jn=l,fr=!0,Ps=null,a!==null&&(ms[ps++]=Si,ms[ps++]=Ni,ms[ps++]=no,Si=a.id,Ni=a.overflow,no=l),l=Vm(l,g.children),l.flags|=4096,l)}function Yv(a,l,f){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),xm(a.return,l,f)}function Um(a,l,f,g,b){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b}:(S.isBackwards=l,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=f,S.tailMode=b)}function Qv(a,l,f){var g=l.pendingProps,b=g.revealOrder,S=g.tail;if(Cn(a,l,g.children,f),g=hr.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Yv(a,f,l);else if(a.tag===19)Yv(a,f,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(nr(hr,g),(l.mode&1)===0)l.memoizedState=null;else switch(b){case"forwards":for(f=l.child,b=null;f!==null;)a=f.alternate,a!==null&&V0(a)===null&&(b=f),f=f.sibling;f=b,f===null?(b=l.child,l.child=null):(b=f.sibling,f.sibling=null),Um(l,!1,b,f,S);break;case"backwards":for(f=null,b=l.child,l.child=null;b!==null;){if(a=b.alternate,a!==null&&V0(a)===null){l.child=b;break}a=b.sibling,b.sibling=f,f=b,b=a}Um(l,!0,f,null,S);break;case"together":Um(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function K0(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function ki(a,l,f){if(a!==null&&(l.dependencies=a.dependencies),lo|=l.lanes,(f&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,f=va(a,a.pendingProps),l.child=f,f.return=l;a.sibling!==null;)a=a.sibling,f=f.sibling=va(a,a.pendingProps),f.return=l;f.sibling=null}return l.child}function $A(a,l,f){switch(l.tag){case 3:Gv(l),xl();break;case 5:dv(l);break;case 1:On(l.type)&&R0(l);break;case 4:_m(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,b=l.memoizedProps.value;nr(O0,g._currentValue),g._currentValue=b;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(nr(hr,hr.current&1),l.flags|=128,null):(f&l.child.childLanes)!==0?Xv(a,l,f):(nr(hr,hr.current&1),a=ki(a,l,f),a!==null?a.sibling:null);nr(hr,hr.current&1);break;case 19:if(g=(f&l.childLanes)!==0,(a.flags&128)!==0){if(g)return Qv(a,l,f);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),nr(hr,hr.current),g)break;return null;case 22:case 23:return l.lanes=0,Hv(a,l,f)}return ki(a,l,f)}var Jv,zm,Zv,ey;Jv=function(a,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},zm=function(){},Zv=function(a,l,f,g){var b=a.memoizedProps;if(b!==g){a=l.stateNode,ao(ri.current);var S=null;switch(f){case"input":b=Le(a,b),g=Le(a,g),S=[];break;case"select":b=Q({},b,{value:void 0}),g=Q({},g,{value:void 0}),S=[];break;case"textarea":b=wt(a,b),g=wt(a,g),S=[];break;default:typeof b.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=S0)}ut(f,g);var z;f=null;for(be in b)if(!g.hasOwnProperty(be)&&b.hasOwnProperty(be)&&b[be]!=null)if(be==="style"){var te=b[be];for(z in te)te.hasOwnProperty(z)&&(f||(f={}),f[z]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(s.hasOwnProperty(be)?S||(S=[]):(S=S||[]).push(be,null));for(be in g){var ae=g[be];if(te=b?.[be],g.hasOwnProperty(be)&&ae!==te&&(ae!=null||te!=null))if(be==="style")if(te){for(z in te)!te.hasOwnProperty(z)||ae&&ae.hasOwnProperty(z)||(f||(f={}),f[z]="");for(z in ae)ae.hasOwnProperty(z)&&te[z]!==ae[z]&&(f||(f={}),f[z]=ae[z])}else f||(S||(S=[]),S.push(be,f)),f=ae;else be==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,te=te?te.__html:void 0,ae!=null&&te!==ae&&(S=S||[]).push(be,ae)):be==="children"?typeof ae!="string"&&typeof ae!="number"||(S=S||[]).push(be,""+ae):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(s.hasOwnProperty(be)?(ae!=null&&be==="onScroll"&&ar("scroll",a),S||te===ae||(S=[])):(S=S||[]).push(be,ae))}f&&(S=S||[]).push("style",f);var be=S;(l.updateQueue=be)&&(l.flags|=4)}},ey=function(a,l,f,g){f!==g&&(l.flags|=4)};function Bc(a,l){if(!fr)switch(a.tailMode){case"hidden":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function hn(a){var l=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(l)for(var b=a.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=g,a.childLanes=f,l}function HA(a,l,f){var g=l.pendingProps;switch(um(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(l),null;case 1:return On(l.type)&&I0(),hn(l),null;case 3:return g=l.stateNode,El(),or(jn),or(dn),bm(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(F0(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ps!==null&&(Zm(Ps),Ps=null))),zm(a,l),hn(l),null;case 5:Em(l);var b=ao(Dc.current);if(f=l.type,a!==null&&l.stateNode!=null)Zv(a,l,f,g,b),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return hn(l),null}if(a=ao(ri.current),F0(l)){g=l.stateNode,f=l.type;var S=l.memoizedProps;switch(g[ti]=l,g[Sc]=S,a=(l.mode&1)!==0,f){case"dialog":ar("cancel",g),ar("close",g);break;case"iframe":case"object":case"embed":ar("load",g);break;case"video":case"audio":for(b=0;b<Tc.length;b++)ar(Tc[b],g);break;case"source":ar("error",g);break;case"img":case"image":case"link":ar("error",g),ar("load",g);break;case"details":ar("toggle",g);break;case"input":ht(g,S),ar("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},ar("invalid",g);break;case"textarea":tr(g,S),ar("invalid",g)}ut(f,S),b=null;for(var z in S)if(S.hasOwnProperty(z)){var te=S[z];z==="children"?typeof te=="string"?g.textContent!==te&&(S.suppressHydrationWarning!==!0&&A0(g.textContent,te,a),b=["children",te]):typeof te=="number"&&g.textContent!==""+te&&(S.suppressHydrationWarning!==!0&&A0(g.textContent,te,a),b=["children",""+te]):s.hasOwnProperty(z)&&te!=null&&z==="onScroll"&&ar("scroll",g)}switch(f){case"input":nt(g),bt(g,S,!0);break;case"textarea":nt(g),En(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=S0)}g=b,l.updateQueue=g,g!==null&&(l.flags|=4)}else{z=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Ot(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=z.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=z.createElement(f,{is:g.is}):(a=z.createElement(f),f==="select"&&(z=a,g.multiple?z.multiple=!0:g.size&&(z.size=g.size))):a=z.createElementNS(a,f),a[ti]=l,a[Sc]=g,Jv(a,l,!1,!1),l.stateNode=a;e:{switch(z=Bt(f,g),f){case"dialog":ar("cancel",a),ar("close",a),b=g;break;case"iframe":case"object":case"embed":ar("load",a),b=g;break;case"video":case"audio":for(b=0;b<Tc.length;b++)ar(Tc[b],a);b=g;break;case"source":ar("error",a),b=g;break;case"img":case"image":case"link":ar("error",a),ar("load",a),b=g;break;case"details":ar("toggle",a),b=g;break;case"input":ht(a,g),b=Le(a,g),ar("invalid",a);break;case"option":b=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},b=Q({},g,{value:void 0}),ar("invalid",a);break;case"textarea":tr(a,g),b=wt(a,g),ar("invalid",a);break;default:b=g}ut(f,b),te=b;for(S in te)if(te.hasOwnProperty(S)){var ae=te[S];S==="style"?ur(a,ae):S==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&et(a,ae)):S==="children"?typeof ae=="string"?(f!=="textarea"||ae!=="")&&Ge(a,ae):typeof ae=="number"&&Ge(a,""+ae):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(s.hasOwnProperty(S)?ae!=null&&S==="onScroll"&&ar("scroll",a):ae!=null&&R(a,S,ae,z))}switch(f){case"input":nt(a),bt(a,g,!1);break;case"textarea":nt(a),En(a);break;case"option":g.value!=null&&a.setAttribute("value",""+me(g.value));break;case"select":a.multiple=!!g.multiple,S=g.value,S!=null?Ke(a,!!g.multiple,S,!1):g.defaultValue!=null&&Ke(a,!!g.multiple,g.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=S0)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return hn(l),null;case 6:if(a&&l.stateNode!=null)ey(a,l,a.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(f=ao(Dc.current),ao(ri.current),F0(l)){if(g=l.stateNode,f=l.memoizedProps,g[ti]=l,(S=g.nodeValue!==f)&&(a=Jn,a!==null))switch(a.tag){case 3:A0(g.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&A0(g.nodeValue,f,(a.mode&1)!==0)}S&&(l.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[ti]=l,l.stateNode=g}return hn(l),null;case 13:if(or(hr),g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(fr&&Zn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)nv(),xl(),l.flags|=98560,S=!1;else if(S=F0(l),g!==null&&g.dehydrated!==null){if(a===null){if(!S)throw Error(t(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[ti]=l}else xl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;hn(l),S=!1}else Ps!==null&&(Zm(Ps),Ps=null),S=!0;if(!S)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=f,l):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(hr.current&1)!==0?jr===0&&(jr=3):rp())),l.updateQueue!==null&&(l.flags|=4),hn(l),null);case 4:return El(),zm(a,l),a===null&&Cc(l.stateNode.containerInfo),hn(l),null;case 10:return gm(l.type._context),hn(l),null;case 17:return On(l.type)&&I0(),hn(l),null;case 19:if(or(hr),S=l.memoizedState,S===null)return hn(l),null;if(g=(l.flags&128)!==0,z=S.rendering,z===null)if(g)Bc(S,!1);else{if(jr!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(z=V0(a),z!==null){for(l.flags|=128,Bc(S,!1),g=z.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=f,f=l.child;f!==null;)S=f,a=g,S.flags&=14680066,z=S.alternate,z===null?(S.childLanes=0,S.lanes=a,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=z.childLanes,S.lanes=z.lanes,S.child=z.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=z.memoizedProps,S.memoizedState=z.memoizedState,S.updateQueue=z.updateQueue,S.type=z.type,a=z.dependencies,S.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return nr(hr,hr.current&1|2),l.child}a=a.sibling}S.tail!==null&&Be()>Cl&&(l.flags|=128,g=!0,Bc(S,!1),l.lanes=4194304)}else{if(!g)if(a=V0(z),a!==null){if(l.flags|=128,g=!0,f=a.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),Bc(S,!0),S.tail===null&&S.tailMode==="hidden"&&!z.alternate&&!fr)return hn(l),null}else 2*Be()-S.renderingStartTime>Cl&&f!==1073741824&&(l.flags|=128,g=!0,Bc(S,!1),l.lanes=4194304);S.isBackwards?(z.sibling=l.child,l.child=z):(f=S.last,f!==null?f.sibling=z:l.child=z,S.last=z)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=Be(),l.sibling=null,f=hr.current,nr(hr,g?f&1|2:f&1),l):(hn(l),null);case 22:case 23:return tp(),g=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(es&1073741824)!==0&&(hn(l),l.subtreeFlags&6&&(l.flags|=8192)):hn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function WA(a,l){switch(um(l),l.tag){case 1:return On(l.type)&&I0(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return El(),or(jn),or(dn),bm(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Em(l),null;case 13:if(or(hr),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));xl()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return or(hr),null;case 4:return El(),null;case 10:return gm(l.type._context),null;case 22:case 23:return tp(),null;case 24:return null;default:return null}}var X0=!1,mn=!1,qA=typeof WeakSet=="function"?WeakSet:Set,tt=null;function bl(a,l){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){xr(a,l,g)}else f.current=null}function $m(a,l,f){try{f()}catch(g){xr(a,l,g)}}var ty=!1;function GA(a,l){if(tm=sa,a=P1(),Gh(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var z=0,te=-1,ae=-1,be=0,Fe=0,Ve=a,De=null;t:for(;;){for(var Ye;Ve!==f||b!==0&&Ve.nodeType!==3||(te=z+b),Ve!==S||g!==0&&Ve.nodeType!==3||(ae=z+g),Ve.nodeType===3&&(z+=Ve.nodeValue.length),(Ye=Ve.firstChild)!==null;)De=Ve,Ve=Ye;for(;;){if(Ve===a)break t;if(De===f&&++be===b&&(te=z),De===S&&++Fe===g&&(ae=z),(Ye=Ve.nextSibling)!==null)break;Ve=De,De=Ve.parentNode}Ve=Ye}f=te===-1||ae===-1?null:{start:te,end:ae}}else f=null}f=f||{start:0,end:0}}else f=null;for(rm={focusedElem:a,selectionRange:f},sa=!1,tt=l;tt!==null;)if(l=tt,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,tt=a;else for(;tt!==null;){l=tt;try{var rt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var st=rt.memoizedProps,Er=rt.memoizedState,pe=l.stateNode,ce=pe.getSnapshotBeforeUpdate(l.elementType===l.type?st:Fs(l.type,st),Er);pe.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:var ye=l.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ze){xr(l,l.return,ze)}if(a=l.sibling,a!==null){a.return=l.return,tt=a;break}tt=l.return}return rt=ty,ty=!1,rt}function Lc(a,l,f){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&a)===a){var S=b.destroy;b.destroy=void 0,S!==void 0&&$m(l,f,S)}b=b.next}while(b!==g)}}function Y0(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&a)===a){var g=f.create;f.destroy=g()}f=f.next}while(f!==l)}}function Hm(a){var l=a.ref;if(l!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof l=="function"?l(a):l.current=a}}function ry(a){var l=a.alternate;l!==null&&(a.alternate=null,ry(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[ti],delete l[Sc],delete l[am],delete l[IA],delete l[RA])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function ny(a){return a.tag===5||a.tag===3||a.tag===4}function sy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ny(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Wm(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(a,l):f.insertBefore(a,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(a,f)):(l=f,l.appendChild(a)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=S0));else if(g!==4&&(a=a.child,a!==null))for(Wm(a,l,f),a=a.sibling;a!==null;)Wm(a,l,f),a=a.sibling}function qm(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?f.insertBefore(a,l):f.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(qm(a,l,f),a=a.sibling;a!==null;)qm(a,l,f),a=a.sibling}var Zr=null,js=!1;function ha(a,l,f){for(f=f.child;f!==null;)iy(a,l,f),f=f.sibling}function iy(a,l,f){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(Kn,f)}catch{}switch(f.tag){case 5:mn||bl(f,l);case 6:var g=Zr,b=js;Zr=null,ha(a,l,f),Zr=g,js=b,Zr!==null&&(js?(a=Zr,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):Zr.removeChild(f.stateNode));break;case 18:Zr!==null&&(js?(a=Zr,f=f.stateNode,a.nodeType===8?im(a.parentNode,f):a.nodeType===1&&im(a,f),Rs(a)):im(Zr,f.stateNode));break;case 4:g=Zr,b=js,Zr=f.stateNode.containerInfo,js=!0,ha(a,l,f),Zr=g,js=b;break;case 0:case 11:case 14:case 15:if(!mn&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var S=b,z=S.destroy;S=S.tag,z!==void 0&&((S&2)!==0||(S&4)!==0)&&$m(f,l,z),b=b.next}while(b!==g)}ha(a,l,f);break;case 1:if(!mn&&(bl(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(te){xr(f,l,te)}ha(a,l,f);break;case 21:ha(a,l,f);break;case 22:f.mode&1?(mn=(g=mn)||f.memoizedState!==null,ha(a,l,f),mn=g):ha(a,l,f);break;default:ha(a,l,f)}}function ay(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new qA),l.forEach(function(g){var b=rS.bind(null,a,g);f.has(g)||(f.add(g),g.then(b,b))})}}function Os(a,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g];try{var S=a,z=l,te=z;e:for(;te!==null;){switch(te.tag){case 5:Zr=te.stateNode,js=!1;break e;case 3:Zr=te.stateNode.containerInfo,js=!0;break e;case 4:Zr=te.stateNode.containerInfo,js=!0;break e}te=te.return}if(Zr===null)throw Error(t(160));iy(S,z,b),Zr=null,js=!1;var ae=b.alternate;ae!==null&&(ae.return=null),b.return=null}catch(be){xr(b,l,be)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)oy(l,a),l=l.sibling}function oy(a,l){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Os(l,a),si(a),g&4){try{Lc(3,a,a.return),Y0(3,a)}catch(st){xr(a,a.return,st)}try{Lc(5,a,a.return)}catch(st){xr(a,a.return,st)}}break;case 1:Os(l,a),si(a),g&512&&f!==null&&bl(f,f.return);break;case 5:if(Os(l,a),si(a),g&512&&f!==null&&bl(f,f.return),a.flags&32){var b=a.stateNode;try{Ge(b,"")}catch(st){xr(a,a.return,st)}}if(g&4&&(b=a.stateNode,b!=null)){var S=a.memoizedProps,z=f!==null?f.memoizedProps:S,te=a.type,ae=a.updateQueue;if(a.updateQueue=null,ae!==null)try{te==="input"&&S.type==="radio"&&S.name!=null&&Ze(b,S),Bt(te,z);var be=Bt(te,S);for(z=0;z<ae.length;z+=2){var Fe=ae[z],Ve=ae[z+1];Fe==="style"?ur(b,Ve):Fe==="dangerouslySetInnerHTML"?et(b,Ve):Fe==="children"?Ge(b,Ve):R(b,Fe,Ve,be)}switch(te){case"input":Me(b,S);break;case"textarea":rr(b,S);break;case"select":var De=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!S.multiple;var Ye=S.value;Ye!=null?Ke(b,!!S.multiple,Ye,!1):De!==!!S.multiple&&(S.defaultValue!=null?Ke(b,!!S.multiple,S.defaultValue,!0):Ke(b,!!S.multiple,S.multiple?[]:"",!1))}b[Sc]=S}catch(st){xr(a,a.return,st)}}break;case 6:if(Os(l,a),si(a),g&4){if(a.stateNode===null)throw Error(t(162));b=a.stateNode,S=a.memoizedProps;try{b.nodeValue=S}catch(st){xr(a,a.return,st)}}break;case 3:if(Os(l,a),si(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Rs(l.containerInfo)}catch(st){xr(a,a.return,st)}break;case 4:Os(l,a),si(a);break;case 13:Os(l,a),si(a),b=a.child,b.flags&8192&&(S=b.memoizedState!==null,b.stateNode.isHidden=S,!S||b.alternate!==null&&b.alternate.memoizedState!==null||(Xm=Be())),g&4&&ay(a);break;case 22:if(Fe=f!==null&&f.memoizedState!==null,a.mode&1?(mn=(be=mn)||Fe,Os(l,a),mn=be):Os(l,a),si(a),g&8192){if(be=a.memoizedState!==null,(a.stateNode.isHidden=be)&&!Fe&&(a.mode&1)!==0)for(tt=a,Fe=a.child;Fe!==null;){for(Ve=tt=Fe;tt!==null;){switch(De=tt,Ye=De.child,De.tag){case 0:case 11:case 14:case 15:Lc(4,De,De.return);break;case 1:bl(De,De.return);var rt=De.stateNode;if(typeof rt.componentWillUnmount=="function"){g=De,f=De.return;try{l=g,rt.props=l.memoizedProps,rt.state=l.memoizedState,rt.componentWillUnmount()}catch(st){xr(g,f,st)}}break;case 5:bl(De,De.return);break;case 22:if(De.memoizedState!==null){uy(Ve);continue}}Ye!==null?(Ye.return=De,tt=Ye):uy(Ve)}Fe=Fe.sibling}e:for(Fe=null,Ve=a;;){if(Ve.tag===5){if(Fe===null){Fe=Ve;try{b=Ve.stateNode,be?(S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(te=Ve.stateNode,ae=Ve.memoizedProps.style,z=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,te.style.display=kt("display",z))}catch(st){xr(a,a.return,st)}}}else if(Ve.tag===6){if(Fe===null)try{Ve.stateNode.nodeValue=be?"":Ve.memoizedProps}catch(st){xr(a,a.return,st)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===a)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===a)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===a)break e;Fe===Ve&&(Fe=null),Ve=Ve.return}Fe===Ve&&(Fe=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:Os(l,a),si(a),g&4&&ay(a);break;case 21:break;default:Os(l,a),si(a)}}function si(a){var l=a.flags;if(l&2){try{e:{for(var f=a.return;f!==null;){if(ny(f)){var g=f;break e}f=f.return}throw Error(t(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(Ge(b,""),g.flags&=-33);var S=sy(a);qm(a,S,b);break;case 3:case 4:var z=g.stateNode.containerInfo,te=sy(a);Wm(a,te,z);break;default:throw Error(t(161))}}catch(ae){xr(a,a.return,ae)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function KA(a,l,f){tt=a,ly(a)}function ly(a,l,f){for(var g=(a.mode&1)!==0;tt!==null;){var b=tt,S=b.child;if(b.tag===22&&g){var z=b.memoizedState!==null||X0;if(!z){var te=b.alternate,ae=te!==null&&te.memoizedState!==null||mn;te=X0;var be=mn;if(X0=z,(mn=ae)&&!be)for(tt=b;tt!==null;)z=tt,ae=z.child,z.tag===22&&z.memoizedState!==null?dy(b):ae!==null?(ae.return=z,tt=ae):dy(b);for(;S!==null;)tt=S,ly(S),S=S.sibling;tt=b,X0=te,mn=be}cy(a)}else(b.subtreeFlags&8772)!==0&&S!==null?(S.return=b,tt=S):cy(a)}}function cy(a){for(;tt!==null;){var l=tt;if((l.flags&8772)!==0){var f=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:mn||Y0(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!mn)if(f===null)g.componentDidMount();else{var b=l.elementType===l.type?f.memoizedProps:Fs(l.type,f.memoizedProps);g.componentDidUpdate(b,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=l.updateQueue;S!==null&&uv(l,S,g);break;case 3:var z=l.updateQueue;if(z!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}uv(l,z,f)}break;case 5:var te=l.stateNode;if(f===null&&l.flags&4){f=te;var ae=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&f.focus();break;case"img":ae.src&&(f.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var be=l.alternate;if(be!==null){var Fe=be.memoizedState;if(Fe!==null){var Ve=Fe.dehydrated;Ve!==null&&Rs(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}mn||l.flags&512&&Hm(l)}catch(De){xr(l,l.return,De)}}if(l===a){tt=null;break}if(f=l.sibling,f!==null){f.return=l.return,tt=f;break}tt=l.return}}function uy(a){for(;tt!==null;){var l=tt;if(l===a){tt=null;break}var f=l.sibling;if(f!==null){f.return=l.return,tt=f;break}tt=l.return}}function dy(a){for(;tt!==null;){var l=tt;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{Y0(4,l)}catch(ae){xr(l,f,ae)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var b=l.return;try{g.componentDidMount()}catch(ae){xr(l,b,ae)}}var S=l.return;try{Hm(l)}catch(ae){xr(l,S,ae)}break;case 5:var z=l.return;try{Hm(l)}catch(ae){xr(l,z,ae)}}}catch(ae){xr(l,l.return,ae)}if(l===a){tt=null;break}var te=l.sibling;if(te!==null){te.return=l.return,tt=te;break}tt=l.return}}var XA=Math.ceil,Q0=B.ReactCurrentDispatcher,Gm=B.ReactCurrentOwner,vs=B.ReactCurrentBatchConfig,Ft=0,Ur=null,Cr=null,en=0,es=0,Tl=la(0),jr=0,Mc=null,lo=0,J0=0,Km=0,Vc=null,Ln=null,Xm=0,Cl=1/0,Di=null,Z0=!1,Ym=null,ma=null,ed=!1,pa=null,td=0,Uc=0,Qm=null,rd=-1,nd=0;function An(){return(Ft&6)!==0?Be():rd!==-1?rd:rd=Be()}function ga(a){return(a.mode&1)===0?1:(Ft&2)!==0&&en!==0?en&-en:DA.transition!==null?(nd===0&&(nd=Ya()),nd):(a=Nt,a!==0||(a=window.event,a=a===void 0?16:pc(a.type)),a)}function Bs(a,l,f,g){if(50<Uc)throw Uc=0,Qm=null,Error(t(185));ea(a,f,g),((Ft&2)===0||a!==Ur)&&(a===Ur&&((Ft&2)===0&&(J0|=f),jr===4&&xa(a,en)),Mn(a,g),f===1&&Ft===0&&(l.mode&1)===0&&(Cl=Be()+500,k0&&ua()))}function Mn(a,l){var f=a.callbackNode;_i(a,l);var g=Xa(a,a===Ur?en:0);if(g===0)f!==null&&He(f),a.callbackNode=null,a.callbackPriority=0;else if(l=g&-g,a.callbackPriority!==l){if(f!=null&&He(f),l===1)a.tag===0?kA(hy.bind(null,a)):J1(hy.bind(null,a)),SA(function(){(Ft&6)===0&&ua()}),f=null;else{switch(ra(g)){case 1:f=zt;break;case 4:f=Lt;break;case 16:f=qt;break;case 536870912:f=Xs;break;default:f=qt}f=Ey(f,fy.bind(null,a))}a.callbackPriority=l,a.callbackNode=f}}function fy(a,l){if(rd=-1,nd=0,(Ft&6)!==0)throw Error(t(327));var f=a.callbackNode;if(Al()&&a.callbackNode!==f)return null;var g=Xa(a,a===Ur?en:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||l)l=sd(a,g);else{l=g;var b=Ft;Ft|=2;var S=py();(Ur!==a||en!==l)&&(Di=null,Cl=Be()+500,uo(a,l));do try{JA();break}catch(te){my(a,te)}while(!0);pm(),Q0.current=S,Ft=b,Cr!==null?l=0:(Ur=null,en=0,l=jr)}if(l!==0){if(l===2&&(b=Xn(a),b!==0&&(g=b,l=Jm(a,b))),l===1)throw f=Mc,uo(a,0),xa(a,g),Mn(a,Be()),f;if(l===6)xa(a,g);else{if(b=a.current.alternate,(g&30)===0&&!YA(b)&&(l=sd(a,g),l===2&&(S=Xn(a),S!==0&&(g=S,l=Jm(a,S))),l===1))throw f=Mc,uo(a,0),xa(a,g),Mn(a,Be()),f;switch(a.finishedWork=b,a.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:fo(a,Ln,Di);break;case 3:if(xa(a,g),(g&130023424)===g&&(l=Xm+500-Be(),10<l)){if(Xa(a,0)!==0)break;if(b=a.suspendedLanes,(b&g)!==g){An(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=sm(fo.bind(null,a,Ln,Di),l);break}fo(a,Ln,Di);break;case 4:if(xa(a,g),(g&4194240)===g)break;for(l=a.eventTimes,b=-1;0<g;){var z=31-ir(g);S=1<<z,z=l[z],z>b&&(b=z),g&=~S}if(g=b,g=Be()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*XA(g/1960))-g,10<g){a.timeoutHandle=sm(fo.bind(null,a,Ln,Di),g);break}fo(a,Ln,Di);break;case 5:fo(a,Ln,Di);break;default:throw Error(t(329))}}}return Mn(a,Be()),a.callbackNode===f?fy.bind(null,a):null}function Jm(a,l){var f=Vc;return a.current.memoizedState.isDehydrated&&(uo(a,l).flags|=256),a=sd(a,l),a!==2&&(l=Ln,Ln=f,l!==null&&Zm(l)),a}function Zm(a){Ln===null?Ln=a:Ln.push.apply(Ln,a)}function YA(a){for(var l=a;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var b=f[g],S=b.getSnapshot;b=b.value;try{if(!Ds(S(),b))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function xa(a,l){for(l&=~Km,l&=~J0,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var f=31-ir(l),g=1<<f;a[f]=-1,l&=~g}}function hy(a){if((Ft&6)!==0)throw Error(t(327));Al();var l=Xa(a,0);if((l&1)===0)return Mn(a,Be()),null;var f=sd(a,l);if(a.tag!==0&&f===2){var g=Xn(a);g!==0&&(l=g,f=Jm(a,g))}if(f===1)throw f=Mc,uo(a,0),xa(a,l),Mn(a,Be()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,fo(a,Ln,Di),Mn(a,Be()),null}function ep(a,l){var f=Ft;Ft|=1;try{return a(l)}finally{Ft=f,Ft===0&&(Cl=Be()+500,k0&&ua())}}function co(a){pa!==null&&pa.tag===0&&(Ft&6)===0&&Al();var l=Ft;Ft|=1;var f=vs.transition,g=Nt;try{if(vs.transition=null,Nt=1,a)return a()}finally{Nt=g,vs.transition=f,Ft=l,(Ft&6)===0&&ua()}}function tp(){es=Tl.current,or(Tl)}function uo(a,l){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,AA(f)),Cr!==null)for(f=Cr.return;f!==null;){var g=f;switch(um(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&I0();break;case 3:El(),or(jn),or(dn),bm();break;case 5:Em(g);break;case 4:El();break;case 13:or(hr);break;case 19:or(hr);break;case 10:gm(g.type._context);break;case 22:case 23:tp()}f=f.return}if(Ur=a,Cr=a=va(a.current,null),en=es=l,jr=0,Mc=null,Km=J0=lo=0,Ln=Vc=null,io!==null){for(l=0;l<io.length;l++)if(f=io[l],g=f.interleaved,g!==null){f.interleaved=null;var b=g.next,S=f.pending;if(S!==null){var z=S.next;S.next=b,g.next=z}f.pending=g}io=null}return a}function my(a,l){do{var f=Cr;try{if(pm(),U0.current=W0,z0){for(var g=mr.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}z0=!1}if(oo=0,Vr=Fr=mr=null,Pc=!1,Fc=0,Gm.current=null,f===null||f.return===null){jr=1,Mc=l,Cr=null;break}e:{var S=a,z=f.return,te=f,ae=l;if(l=en,te.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var be=ae,Fe=te,Ve=Fe.tag;if((Fe.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var De=Fe.alternate;De?(Fe.updateQueue=De.updateQueue,Fe.memoizedState=De.memoizedState,Fe.lanes=De.lanes):(Fe.updateQueue=null,Fe.memoizedState=null)}var Ye=Mv(z);if(Ye!==null){Ye.flags&=-257,Vv(Ye,z,te,S,l),Ye.mode&1&&Lv(S,be,l),l=Ye,ae=be;var rt=l.updateQueue;if(rt===null){var st=new Set;st.add(ae),l.updateQueue=st}else rt.add(ae);break e}else{if((l&1)===0){Lv(S,be,l),rp();break e}ae=Error(t(426))}}else if(fr&&te.mode&1){var Er=Mv(z);if(Er!==null){(Er.flags&65536)===0&&(Er.flags|=256),Vv(Er,z,te,S,l),hm(wl(ae,te));break e}}S=ae=wl(ae,te),jr!==4&&(jr=2),Vc===null?Vc=[S]:Vc.push(S),S=z;do{switch(S.tag){case 3:S.flags|=65536,l&=-l,S.lanes|=l;var pe=Ov(S,ae,l);cv(S,pe);break e;case 1:te=ae;var ce=S.type,ye=S.stateNode;if((S.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(ma===null||!ma.has(ye)))){S.flags|=65536,l&=-l,S.lanes|=l;var ze=Bv(S,te,l);cv(S,ze);break e}}S=S.return}while(S!==null)}xy(f)}catch(ot){l=ot,Cr===f&&f!==null&&(Cr=f=f.return);continue}break}while(!0)}function py(){var a=Q0.current;return Q0.current=W0,a===null?W0:a}function rp(){(jr===0||jr===3||jr===2)&&(jr=4),Ur===null||(lo&268435455)===0&&(J0&268435455)===0||xa(Ur,en)}function sd(a,l){var f=Ft;Ft|=2;var g=py();(Ur!==a||en!==l)&&(Di=null,uo(a,l));do try{QA();break}catch(b){my(a,b)}while(!0);if(pm(),Ft=f,Q0.current=g,Cr!==null)throw Error(t(261));return Ur=null,en=0,jr}function QA(){for(;Cr!==null;)gy(Cr)}function JA(){for(;Cr!==null&&!Xe();)gy(Cr)}function gy(a){var l=_y(a.alternate,a,es);a.memoizedProps=a.pendingProps,l===null?xy(a):Cr=l,Gm.current=null}function xy(a){var l=a;do{var f=l.alternate;if(a=l.return,(l.flags&32768)===0){if(f=HA(f,l,es),f!==null){Cr=f;return}}else{if(f=WA(f,l),f!==null){f.flags&=32767,Cr=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{jr=6,Cr=null;return}}if(l=l.sibling,l!==null){Cr=l;return}Cr=l=a}while(l!==null);jr===0&&(jr=5)}function fo(a,l,f){var g=Nt,b=vs.transition;try{vs.transition=null,Nt=1,ZA(a,l,f,g)}finally{vs.transition=b,Nt=g}return null}function ZA(a,l,f,g){do Al();while(pa!==null);if((Ft&6)!==0)throw Error(t(327));f=a.finishedWork;var b=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var S=f.lanes|f.childLanes;if(er(a,S),a===Ur&&(Cr=Ur=null,en=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||ed||(ed=!0,Ey(qt,function(){return Al(),null})),S=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||S){S=vs.transition,vs.transition=null;var z=Nt;Nt=1;var te=Ft;Ft|=4,Gm.current=null,GA(a,f),oy(f,a),yA(rm),sa=!!tm,rm=tm=null,a.current=f,KA(f),Ue(),Ft=te,Nt=z,vs.transition=S}else a.current=f;if(ed&&(ed=!1,pa=a,td=b),S=a.pendingLanes,S===0&&(ma=null),Qi(f.stateNode),Mn(a,Be()),l!==null)for(g=a.onRecoverableError,f=0;f<l.length;f++)b=l[f],g(b.value,{componentStack:b.stack,digest:b.digest});if(Z0)throw Z0=!1,a=Ym,Ym=null,a;return(td&1)!==0&&a.tag!==0&&Al(),S=a.pendingLanes,(S&1)!==0?a===Qm?Uc++:(Uc=0,Qm=a):Uc=0,ua(),null}function Al(){if(pa!==null){var a=ra(td),l=vs.transition,f=Nt;try{if(vs.transition=null,Nt=16>a?16:a,pa===null)var g=!1;else{if(a=pa,pa=null,td=0,(Ft&6)!==0)throw Error(t(331));var b=Ft;for(Ft|=4,tt=a.current;tt!==null;){var S=tt,z=S.child;if((tt.flags&16)!==0){var te=S.deletions;if(te!==null){for(var ae=0;ae<te.length;ae++){var be=te[ae];for(tt=be;tt!==null;){var Fe=tt;switch(Fe.tag){case 0:case 11:case 15:Lc(8,Fe,S)}var Ve=Fe.child;if(Ve!==null)Ve.return=Fe,tt=Ve;else for(;tt!==null;){Fe=tt;var De=Fe.sibling,Ye=Fe.return;if(ry(Fe),Fe===be){tt=null;break}if(De!==null){De.return=Ye,tt=De;break}tt=Ye}}}var rt=S.alternate;if(rt!==null){var st=rt.child;if(st!==null){rt.child=null;do{var Er=st.sibling;st.sibling=null,st=Er}while(st!==null)}}tt=S}}if((S.subtreeFlags&2064)!==0&&z!==null)z.return=S,tt=z;else e:for(;tt!==null;){if(S=tt,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Lc(9,S,S.return)}var pe=S.sibling;if(pe!==null){pe.return=S.return,tt=pe;break e}tt=S.return}}var ce=a.current;for(tt=ce;tt!==null;){z=tt;var ye=z.child;if((z.subtreeFlags&2064)!==0&&ye!==null)ye.return=z,tt=ye;else e:for(z=ce;tt!==null;){if(te=tt,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:Y0(9,te)}}catch(ot){xr(te,te.return,ot)}if(te===z){tt=null;break e}var ze=te.sibling;if(ze!==null){ze.return=te.return,tt=ze;break e}tt=te.return}}if(Ft=b,ua(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(Kn,a)}catch{}g=!0}return g}finally{Nt=f,vs.transition=l}}return!1}function vy(a,l,f){l=wl(f,l),l=Ov(a,l,1),a=fa(a,l,1),l=An(),a!==null&&(ea(a,1,l),Mn(a,l))}function xr(a,l,f){if(a.tag===3)vy(a,a,f);else for(;l!==null;){if(l.tag===3){vy(l,a,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ma===null||!ma.has(g))){a=wl(f,a),a=Bv(l,a,1),l=fa(l,a,1),a=An(),l!==null&&(ea(l,1,a),Mn(l,a));break}}l=l.return}}function eS(a,l,f){var g=a.pingCache;g!==null&&g.delete(l),l=An(),a.pingedLanes|=a.suspendedLanes&f,Ur===a&&(en&f)===f&&(jr===4||jr===3&&(en&130023424)===en&&500>Be()-Xm?uo(a,0):Km|=f),Mn(a,l)}function yy(a,l){l===0&&((a.mode&1)===0?l=1:(l=Xo,Xo<<=1,(Xo&130023424)===0&&(Xo=4194304)));var f=An();a=Ii(a,l),a!==null&&(ea(a,l,f),Mn(a,f))}function tS(a){var l=a.memoizedState,f=0;l!==null&&(f=l.retryLane),yy(a,f)}function rS(a,l){var f=0;switch(a.tag){case 13:var g=a.stateNode,b=a.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),yy(a,f)}var _y;_y=function(a,l,f){if(a!==null)if(a.memoizedProps!==l.pendingProps||jn.current)Bn=!0;else{if((a.lanes&f)===0&&(l.flags&128)===0)return Bn=!1,$A(a,l,f);Bn=(a.flags&131072)!==0}else Bn=!1,fr&&(l.flags&1048576)!==0&&Z1(l,P0,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;K0(a,l),a=l.pendingProps;var b=ml(l,dn.current);_l(l,f),b=Am(null,l,g,a,b,f);var S=Sm();return l.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,On(g)?(S=!0,R0(l)):S=!1,l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,ym(l),b.updater=q0,l.stateNode=b,b._reactInternals=l,Pm(l,g,a,f),l=Bm(null,l,g,!0,S,f)):(l.tag=0,fr&&S&&cm(l),Cn(null,l,b,f),l=l.child),l;case 16:g=l.elementType;e:{switch(K0(a,l),a=l.pendingProps,b=g._init,g=b(g._payload),l.type=g,b=l.tag=sS(g),a=Fs(g,a),b){case 0:l=Om(null,l,g,a,f);break e;case 1:l=qv(null,l,g,a,f);break e;case 11:l=Uv(null,l,g,a,f);break e;case 14:l=zv(null,l,g,Fs(g.type,a),f);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,b=l.pendingProps,b=l.elementType===g?b:Fs(g,b),Om(a,l,g,b,f);case 1:return g=l.type,b=l.pendingProps,b=l.elementType===g?b:Fs(g,b),qv(a,l,g,b,f);case 3:e:{if(Gv(l),a===null)throw Error(t(387));g=l.pendingProps,S=l.memoizedState,b=S.element,lv(a,l),M0(l,g,null,f);var z=l.memoizedState;if(g=z.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){b=wl(Error(t(423)),l),l=Kv(a,l,g,f,b);break e}else if(g!==b){b=wl(Error(t(424)),l),l=Kv(a,l,g,f,b);break e}else for(Zn=oa(l.stateNode.containerInfo.firstChild),Jn=l,fr=!0,Ps=null,f=av(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(xl(),g===b){l=ki(a,l,f);break e}Cn(a,l,g,f)}l=l.child}return l;case 5:return dv(l),a===null&&fm(l),g=l.type,b=l.pendingProps,S=a!==null?a.memoizedProps:null,z=b.children,nm(g,b)?z=null:S!==null&&nm(g,S)&&(l.flags|=32),Wv(a,l),Cn(a,l,z,f),l.child;case 6:return a===null&&fm(l),null;case 13:return Xv(a,l,f);case 4:return _m(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=vl(l,null,g,f):Cn(a,l,g,f),l.child;case 11:return g=l.type,b=l.pendingProps,b=l.elementType===g?b:Fs(g,b),Uv(a,l,g,b,f);case 7:return Cn(a,l,l.pendingProps,f),l.child;case 8:return Cn(a,l,l.pendingProps.children,f),l.child;case 12:return Cn(a,l,l.pendingProps.children,f),l.child;case 10:e:{if(g=l.type._context,b=l.pendingProps,S=l.memoizedProps,z=b.value,nr(O0,g._currentValue),g._currentValue=z,S!==null)if(Ds(S.value,z)){if(S.children===b.children&&!jn.current){l=ki(a,l,f);break e}}else for(S=l.child,S!==null&&(S.return=l);S!==null;){var te=S.dependencies;if(te!==null){z=S.child;for(var ae=te.firstContext;ae!==null;){if(ae.context===g){if(S.tag===1){ae=Ri(-1,f&-f),ae.tag=2;var be=S.updateQueue;if(be!==null){be=be.shared;var Fe=be.pending;Fe===null?ae.next=ae:(ae.next=Fe.next,Fe.next=ae),be.pending=ae}}S.lanes|=f,ae=S.alternate,ae!==null&&(ae.lanes|=f),xm(S.return,f,l),te.lanes|=f;break}ae=ae.next}}else if(S.tag===10)z=S.type===l.type?null:S.child;else if(S.tag===18){if(z=S.return,z===null)throw Error(t(341));z.lanes|=f,te=z.alternate,te!==null&&(te.lanes|=f),xm(z,f,l),z=S.sibling}else z=S.child;if(z!==null)z.return=S;else for(z=S;z!==null;){if(z===l){z=null;break}if(S=z.sibling,S!==null){S.return=z.return,z=S;break}z=z.return}S=z}Cn(a,l,b.children,f),l=l.child}return l;case 9:return b=l.type,g=l.pendingProps.children,_l(l,f),b=gs(b),g=g(b),l.flags|=1,Cn(a,l,g,f),l.child;case 14:return g=l.type,b=Fs(g,l.pendingProps),b=Fs(g.type,b),zv(a,l,g,b,f);case 15:return $v(a,l,l.type,l.pendingProps,f);case 17:return g=l.type,b=l.pendingProps,b=l.elementType===g?b:Fs(g,b),K0(a,l),l.tag=1,On(g)?(a=!0,R0(l)):a=!1,_l(l,f),Fv(l,g,b),Pm(l,g,b,f),Bm(null,l,g,!0,a,f);case 19:return Qv(a,l,f);case 22:return Hv(a,l,f)}throw Error(t(156,l.tag))};function Ey(a,l){return je(a,l)}function nS(a,l,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ys(a,l,f,g){return new nS(a,l,f,g)}function np(a){return a=a.prototype,!(!a||!a.isReactComponent)}function sS(a){if(typeof a=="function")return np(a)?1:0;if(a!=null){if(a=a.$$typeof,a===F)return 11;if(a===we)return 14}return 2}function va(a,l){var f=a.alternate;return f===null?(f=ys(a.tag,l,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=l,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,l=a.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function id(a,l,f,g,b,S){var z=2;if(g=a,typeof a=="function")np(a)&&(z=1);else if(typeof a=="string")z=5;else e:switch(a){case N:return ho(f.children,b,S,l);case I:z=8,b|=8;break;case T:return a=ys(12,f,l,b|2),a.elementType=T,a.lanes=S,a;case O:return a=ys(13,f,l,b),a.elementType=O,a.lanes=S,a;case le:return a=ys(19,f,l,b),a.elementType=le,a.lanes=S,a;case ie:return ad(f,b,S,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:z=10;break e;case D:z=9;break e;case F:z=11;break e;case we:z=14;break e;case Ie:z=16,g=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=ys(z,f,l,b),l.elementType=a,l.type=g,l.lanes=S,l}function ho(a,l,f,g){return a=ys(7,a,g,l),a.lanes=f,a}function ad(a,l,f,g){return a=ys(22,a,g,l),a.elementType=ie,a.lanes=f,a.stateNode={isHidden:!1},a}function sp(a,l,f){return a=ys(6,a,null,l),a.lanes=f,a}function ip(a,l,f){return l=ys(4,a.children!==null?a.children:[],a.key,l),l.lanes=f,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function iS(a,l,f,g,b){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zi(0),this.expirationTimes=Zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.identifierPrefix=g,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function ap(a,l,f,g,b,S,z,te,ae){return a=new iS(a,l,f,te,ae),l===1?(l=1,S===!0&&(l|=8)):l=0,S=ys(3,null,null,l),a.current=S,S.stateNode=a,S.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},ym(S),a}function aS(a,l,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:g==null?null:""+g,children:a,containerInfo:l,implementation:f}}function wy(a){if(!a)return ca;a=a._reactInternals;e:{if(ee(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(On(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(On(f))return Y1(a,f,l)}return l}function by(a,l,f,g,b,S,z,te,ae){return a=ap(f,g,!0,a,b,S,z,te,ae),a.context=wy(null),f=a.current,g=An(),b=ga(f),S=Ri(g,b),S.callback=l??null,fa(f,S,b),a.current.lanes=b,ea(a,b,g),Mn(a,g),a}function od(a,l,f,g){var b=l.current,S=An(),z=ga(b);return f=wy(f),l.context===null?l.context=f:l.pendingContext=f,l=Ri(S,z),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=fa(b,l,z),a!==null&&(Bs(a,b,z,S),L0(a,b,z)),z}function ld(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Ty(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<l?f:l}}function op(a,l){Ty(a,l),(a=a.alternate)&&Ty(a,l)}function oS(){return null}var Cy=typeof reportError=="function"?reportError:function(a){console.error(a)};function lp(a){this._internalRoot=a}cd.prototype.render=lp.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));od(a,l,null,null)},cd.prototype.unmount=lp.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;co(function(){od(null,a,null,null)}),l[Ci]=null}};function cd(a){this._internalRoot=a}cd.prototype.unstable_scheduleHydration=function(a){if(a){var l=c0();a={blockedOn:null,target:a,priority:l};for(var f=0;f<Qs.length&&l!==0&&l<Qs[f].priority;f++);Qs.splice(f,0,a),f===0&&f0(a)}};function cp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function ud(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Ay(){}function lS(a,l,f,g,b){if(b){if(typeof g=="function"){var S=g;g=function(){var be=ld(z);S.call(be)}}var z=by(l,g,a,0,null,!1,!1,"",Ay);return a._reactRootContainer=z,a[Ci]=z.current,Cc(a.nodeType===8?a.parentNode:a),co(),z}for(;b=a.lastChild;)a.removeChild(b);if(typeof g=="function"){var te=g;g=function(){var be=ld(ae);te.call(be)}}var ae=ap(a,0,!1,null,null,!1,!1,"",Ay);return a._reactRootContainer=ae,a[Ci]=ae.current,Cc(a.nodeType===8?a.parentNode:a),co(function(){od(l,ae,f,g)}),ae}function dd(a,l,f,g,b){var S=f._reactRootContainer;if(S){var z=S;if(typeof b=="function"){var te=b;b=function(){var ae=ld(z);te.call(ae)}}od(l,z,a,b)}else z=lS(f,l,a,b,g);return ld(z)}o0=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var f=Ji(l.pendingLanes);f!==0&&(ta(l,f|1),Mn(l,Be()),(Ft&6)===0&&(Cl=Be()+500,ua()))}break;case 13:co(function(){var g=Ii(a,1);if(g!==null){var b=An();Bs(g,a,1,b)}}),op(a,1)}},Yo=function(a){if(a.tag===13){var l=Ii(a,134217728);if(l!==null){var f=An();Bs(l,a,134217728,f)}op(a,134217728)}},l0=function(a){if(a.tag===13){var l=ga(a),f=Ii(a,l);if(f!==null){var g=An();Bs(f,a,l,g)}op(a,l)}},c0=function(){return Nt},u0=function(a,l){var f=Nt;try{return Nt=a,l()}finally{Nt=f}},kn=function(a,l,f){switch(l){case"input":if(Me(a,f),l=f.name,f.type==="radio"&&l!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==a&&g.form===a.form){var b=N0(g);if(!b)throw Error(t(90));lt(g),Me(g,b)}}}break;case"textarea":rr(a,f);break;case"select":l=f.value,l!=null&&Ke(a,!!f.multiple,l,!1)}},us=ep,yi=co;var cS={usingClientEntryPoint:!1,Events:[Nc,fl,N0,Dn,vi,ep]},zc={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uS={bundleType:zc.bundleType,version:zc.version,rendererPackageName:zc.rendererPackageName,rendererConfig:zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=_e(a),a===null?null:a.stateNode},findFiberByHostInstance:zc.findFiberByHostInstance||oS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{Kn=fd.inject(uS),_r=fd}catch{}}return Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cS,Vn.createPortal=function(a,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cp(l))throw Error(t(200));return aS(a,l,null,f)},Vn.createRoot=function(a,l){if(!cp(a))throw Error(t(299));var f=!1,g="",b=Cy;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),l=ap(a,1,!1,null,null,f,!1,g,b),a[Ci]=l.current,Cc(a.nodeType===8?a.parentNode:a),new lp(l)},Vn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=_e(l),a=a===null?null:a.stateNode,a},Vn.flushSync=function(a){return co(a)},Vn.hydrate=function(a,l,f){if(!ud(l))throw Error(t(200));return dd(null,a,l,!0,f)},Vn.hydrateRoot=function(a,l,f){if(!cp(a))throw Error(t(405));var g=f!=null&&f.hydratedSources||null,b=!1,S="",z=Cy;if(f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onRecoverableError!==void 0&&(z=f.onRecoverableError)),l=by(l,null,a,1,f??null,b,!1,S,z),a[Ci]=l.current,Cc(a),g)for(a=0;a<g.length;a++)f=g[a],b=f._getVersion,b=b(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,b]:l.mutableSourceEagerHydrationData.push(f,b);return new cd(l)},Vn.render=function(a,l,f){if(!ud(l))throw Error(t(200));return dd(null,a,l,!1,f)},Vn.unmountComponentAtNode=function(a){if(!ud(a))throw Error(t(40));return a._reactRootContainer?(co(function(){dd(null,null,a,!1,function(){a._reactRootContainer=null,a[Ci]=null})}),!0):!1},Vn.unstable_batchedUpdates=ep,Vn.unstable_renderSubtreeIntoContainer=function(a,l,f,g){if(!ud(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return dd(a,l,f,!1,g)},Vn.version="18.3.1-next-f1338f8080-20240426",Vn}var Fy;function gw(){if(Fy)return hp.exports;Fy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),hp.exports=_S(),hp.exports}var jy;function ES(){if(jy)return hd;jy=1;var r=gw();return hd.createRoot=r.createRoot,hd.hydrateRoot=r.hydrateRoot,hd}var wS=ES();const bS=rh(wS);gw();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mu(){return mu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},mu.apply(this,arguments)}var Ia;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ia||(Ia={}));const Oy="popstate";function TS(r){r===void 0&&(r={});function e(n,s){let{pathname:i,search:o,hash:u}=n.location;return lg("",{pathname:i,search:o,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:wf(s)}return AS(e,t,null,r)}function Ir(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function xw(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CS(){return Math.random().toString(36).substr(2,8)}function By(r,e){return{usr:r.state,key:r.key,idx:e}}function lg(r,e,t,n){return t===void 0&&(t=null),mu({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ec(e):e,{state:t,key:e&&e.key||n||CS()})}function wf(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ec(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function AS(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,u=Ia.Pop,d=null,h=m();h==null&&(h=0,o.replaceState(mu({},o.state,{idx:h}),""));function m(){return(o.state||{idx:null}).idx}function v(){u=Ia.Pop;let w=m(),j=w==null?null:w-h;h=w,d&&d({action:u,location:_.location,delta:j})}function x(w,j){u=Ia.Push;let k=lg(_.location,w,j);h=m()+1;let R=By(k,h),B=_.createHref(k);try{o.pushState(R,"",B)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(B)}i&&d&&d({action:u,location:_.location,delta:1})}function y(w,j){u=Ia.Replace;let k=lg(_.location,w,j);h=m();let R=By(k,h),B=_.createHref(k);o.replaceState(R,"",B),i&&d&&d({action:u,location:_.location,delta:0})}function E(w){let j=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof w=="string"?w:wf(w);return k=k.replace(/ $/,"%20"),Ir(j,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,j)}let _={get action(){return u},get location(){return r(s,o)},listen(w){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Oy,v),d=w,()=>{s.removeEventListener(Oy,v),d=null}},createHref(w){return e(s,w)},createURL:E,encodeLocation(w){let j=E(w);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:y,go(w){return o.go(w)}};return _}var Ly;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ly||(Ly={}));function SS(r,e,t){return t===void 0&&(t="/"),NS(r,e,t)}function NS(r,e,t,n){let s=typeof e=="string"?ec(e):e,i=Hg(s.pathname||"/",t);if(i==null)return null;let o=vw(r);IS(o);let u=null;for(let d=0;u==null&&d<o.length;++d){let h=US(i);u=LS(o[d],h)}return u}function vw(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(i,o,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Ir(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let h=Pa([n,d.relativePath]),m=t.concat(d);i.children&&i.children.length>0&&(Ir(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),vw(i.children,e,m,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:OS(h,i.index),routesMeta:m})};return r.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,o);else for(let d of yw(i.path))s(i,o,d)}),e}function yw(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=yw(n.join("/")),u=[];return u.push(...o.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...o),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function IS(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:BS(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const RS=/^:[\w-]+$/,kS=3,DS=2,PS=1,FS=10,jS=-2,My=r=>r==="*";function OS(r,e){let t=r.split("/"),n=t.length;return t.some(My)&&(n+=jS),e&&(n+=DS),t.filter(s=>!My(s)).reduce((s,i)=>s+(RS.test(i)?kS:i===""?PS:FS),n)}function BS(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function LS(r,e,t){let{routesMeta:n}=r,s={},i="/",o=[];for(let u=0;u<n.length;++u){let d=n[u],h=u===n.length-1,m=i==="/"?e:e.slice(i.length)||"/",v=MS({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),x=d.route;if(!v)return null;Object.assign(s,v.params),o.push({params:s,pathname:Pa([i,v.pathname]),pathnameBase:WS(Pa([i,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(i=Pa([i,v.pathnameBase]))}return o}function MS(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=VS(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((h,m,v)=>{let{paramName:x,isOptional:y}=m;if(x==="*"){let _=u[v]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const E=u[v];return y&&!E?h[x]=void 0:h[x]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:r}}function VS(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),xw(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function US(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xw(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Hg(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function zS(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?ec(r):r;return{pathname:t?t.startsWith("/")?t:$S(t,e):e,search:qS(n),hash:GS(s)}}function $S(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function gp(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HS(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _w(r,e){let t=HS(r);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function Ew(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=ec(r):(s=mu({},r),Ir(!s.pathname||!s.pathname.includes("?"),gp("?","pathname","search",s)),Ir(!s.pathname||!s.pathname.includes("#"),gp("#","pathname","hash",s)),Ir(!s.search||!s.search.includes("#"),gp("#","search","hash",s)));let i=r===""||s.pathname==="",o=i?"/":s.pathname,u;if(o==null)u=t;else{let v=e.length-1;if(!n&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),v-=1;s.pathname=x.join("/")}u=v>=0?e[v]:"/"}let d=zS(s,u),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}const Pa=r=>r.join("/").replace(/\/\/+/g,"/"),WS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),qS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,GS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function KS(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const ww=["post","put","patch","delete"];new Set(ww);const XS=["get",...ww];new Set(XS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pu(){return pu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},pu.apply(this,arguments)}const Wg=se.createContext(null),YS=se.createContext(null),Po=se.createContext(null),nh=se.createContext(null),$a=se.createContext({outlet:null,matches:[],isDataRoute:!1}),bw=se.createContext(null);function QS(r,e){let{relative:t}=e===void 0?{}:e;Ou()||Ir(!1);let{basename:n,navigator:s}=se.useContext(Po),{hash:i,pathname:o,search:u}=Cw(r,{relative:t}),d=o;return n!=="/"&&(d=o==="/"?n:Pa([n,o])),s.createHref({pathname:d,search:u,hash:i})}function Ou(){return se.useContext(nh)!=null}function sh(){return Ou()||Ir(!1),se.useContext(nh).location}function Tw(r){se.useContext(Po).static||se.useLayoutEffect(r)}function qg(){let{isDataRoute:r}=se.useContext($a);return r?d3():JS()}function JS(){Ou()||Ir(!1);let r=se.useContext(Wg),{basename:e,future:t,navigator:n}=se.useContext(Po),{matches:s}=se.useContext($a),{pathname:i}=sh(),o=JSON.stringify(_w(s,t.v7_relativeSplatPath)),u=se.useRef(!1);return Tw(()=>{u.current=!0}),se.useCallback(function(h,m){if(m===void 0&&(m={}),!u.current)return;if(typeof h=="number"){n.go(h);return}let v=Ew(h,JSON.parse(o),i,m.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Pa([e,v.pathname])),(m.replace?n.replace:n.push)(v,m.state,m)},[e,n,o,i,r])}function ZS(){let{matches:r}=se.useContext($a),e=r[r.length-1];return e?e.params:{}}function Cw(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=se.useContext(Po),{matches:s}=se.useContext($a),{pathname:i}=sh(),o=JSON.stringify(_w(s,n.v7_relativeSplatPath));return se.useMemo(()=>Ew(r,JSON.parse(o),i,t==="path"),[r,o,i,t])}function e3(r,e){return t3(r,e)}function t3(r,e,t,n){Ou()||Ir(!1);let{navigator:s}=se.useContext(Po),{matches:i}=se.useContext($a),o=i[i.length-1],u=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let h=sh(),m;if(e){var v;let w=typeof e=="string"?ec(e):e;d==="/"||(v=w.pathname)!=null&&v.startsWith(d)||Ir(!1),m=w}else m=h;let x=m.pathname||"/",y=x;if(d!=="/"){let w=d.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(w.length).join("/")}let E=SS(r,{pathname:y}),_=a3(E&&E.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Pa([d,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Pa([d,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,n);return e&&_?se.createElement(nh.Provider,{value:{location:pu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Ia.Pop}},_):_}function r3(){let r=u3(),e=KS(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),t?se.createElement("pre",{style:s},t):null,null)}const n3=se.createElement(r3,null);class s3 extends se.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?se.createElement($a.Provider,{value:this.props.routeContext},se.createElement(bw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i3(r){let{routeContext:e,match:t,children:n}=r,s=se.useContext(Wg);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),se.createElement($a.Provider,{value:e},n)}function a3(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var i;if(!t)return null;if(t.errors)r=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,u=(s=t)==null?void 0:s.errors;if(u!=null){let m=o.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);m>=0||Ir(!1),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,h=-1;if(t&&n&&n.v7_partialHydration)for(let m=0;m<o.length;m++){let v=o[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=m),v.route.id){let{loaderData:x,errors:y}=t,E=v.route.loader&&x[v.route.id]===void 0&&(!y||y[v.route.id]===void 0);if(v.route.lazy||E){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((m,v,x)=>{let y,E=!1,_=null,w=null;t&&(y=u&&v.route.id?u[v.route.id]:void 0,_=v.route.errorElement||n3,d&&(h<0&&x===0?(f3("route-fallback"),E=!0,w=null):h===x&&(E=!0,w=v.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,x+1)),k=()=>{let R;return y?R=_:E?R=w:v.route.Component?R=se.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=m,se.createElement(i3,{match:v,routeContext:{outlet:m,matches:j,isDataRoute:t!=null},children:R})};return t&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?se.createElement(s3,{location:t.location,revalidation:t.revalidation,component:_,error:y,children:k(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):k()},null)}var Aw=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Aw||{}),Sw=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Sw||{});function o3(r){let e=se.useContext(Wg);return e||Ir(!1),e}function l3(r){let e=se.useContext(YS);return e||Ir(!1),e}function c3(r){let e=se.useContext($a);return e||Ir(!1),e}function Nw(r){let e=c3(),t=e.matches[e.matches.length-1];return t.route.id||Ir(!1),t.route.id}function u3(){var r;let e=se.useContext(bw),t=l3(),n=Nw();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function d3(){let{router:r}=o3(Aw.UseNavigateStable),e=Nw(Sw.UseNavigateStable),t=se.useRef(!1);return Tw(()=>{t.current=!0}),se.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,pu({fromRouteId:e},i)))},[r,e])}const Vy={};function f3(r,e,t){Vy[r]||(Vy[r]=!0)}function h3(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function ba(r){Ir(!1)}function m3(r){let{basename:e="/",children:t=null,location:n,navigationType:s=Ia.Pop,navigator:i,static:o=!1,future:u}=r;Ou()&&Ir(!1);let d=e.replace(/^\/*/,"/"),h=se.useMemo(()=>({basename:d,navigator:i,static:o,future:pu({v7_relativeSplatPath:!1},u)}),[d,u,i,o]);typeof n=="string"&&(n=ec(n));let{pathname:m="/",search:v="",hash:x="",state:y=null,key:E="default"}=n,_=se.useMemo(()=>{let w=Hg(m,d);return w==null?null:{location:{pathname:w,search:v,hash:x,state:y,key:E},navigationType:s}},[d,m,v,x,y,E,s]);return _==null?null:se.createElement(Po.Provider,{value:h},se.createElement(nh.Provider,{children:t,value:_}))}function p3(r){let{children:e,location:t}=r;return e3(cg(e),t)}new Promise(()=>{});function cg(r,e){e===void 0&&(e=[]);let t=[];return se.Children.forEach(r,(n,s)=>{if(!se.isValidElement(n))return;let i=[...e,s];if(n.type===se.Fragment){t.push.apply(t,cg(n.props.children,i));return}n.type!==ba&&Ir(!1),!n.props.index||!n.props.children||Ir(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=cg(n.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ug(){return ug=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ug.apply(this,arguments)}function g3(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function x3(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function v3(r,e){return r.button===0&&(!e||e==="_self")&&!x3(r)}const y3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_3="6";try{window.__reactRouterVersion=_3}catch{}const E3="startTransition",Uy=xS[E3];function w3(r){let{basename:e,children:t,future:n,window:s}=r,i=se.useRef();i.current==null&&(i.current=TS({window:s,v5Compat:!0}));let o=i.current,[u,d]=se.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},m=se.useCallback(v=>{h&&Uy?Uy(()=>d(v)):d(v)},[d,h]);return se.useLayoutEffect(()=>o.listen(m),[o,m]),se.useEffect(()=>h3(n),[n]),se.createElement(m3,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:o,future:n})}const b3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rd=se.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:u,target:d,to:h,preventScrollReset:m,viewTransition:v}=e,x=g3(e,y3),{basename:y}=se.useContext(Po),E,_=!1;if(typeof h=="string"&&T3.test(h)&&(E=h,b3))try{let R=new URL(window.location.href),B=h.startsWith("//")?new URL(R.protocol+h):new URL(h),U=Hg(B.pathname,y);B.origin===R.origin&&U!=null?h=U+B.search+B.hash:_=!0}catch{}let w=QS(h,{relative:s}),j=C3(h,{replace:o,state:u,target:d,preventScrollReset:m,relative:s,viewTransition:v});function k(R){n&&n(R),R.defaultPrevented||j(R)}return se.createElement("a",ug({},x,{href:E||w,onClick:_||i?n:k,ref:t,target:d}))});var zy;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(zy||(zy={}));var $y;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})($y||($y={}));function C3(r,e){let{target:t,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:u}=e===void 0?{}:e,d=qg(),h=sh(),m=Cw(r,{relative:o});return se.useCallback(v=>{if(v3(v,t)){v.preventDefault();let x=n!==void 0?n:wf(h)===wf(m);d(r,{replace:x,state:s,preventScrollReset:i,relative:o,viewTransition:u})}},[h,d,m,n,s,t,r,i,o,u])}const A3=({clientLogo:r,showSaadSoft:e=!0})=>c.jsxs("div",{className:"flex items-center justify-between w-full",children:[c.jsx("div",{className:"flex items-center",children:r?c.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-white shadow-md border-2 border-gray-200",children:c.jsx("img",{src:r,alt:"Logo del Restaurante",className:"w-full h-full object-cover object-center"})}):c.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center shadow-md border-2 border-gray-300",children:c.jsx("span",{className:"text-gray-500 text-sm font-medium",children:"Logo"})})}),e&&c.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center space-x-2 text-xs text-gray-500",children:[c.jsx("span",{children:"Desarrollado por"}),c.jsxs("div",{className:"flex items-center space-x-1 font-semibold text-blue-600",children:[c.jsx("img",{src:"/images/guri.png",alt:"Guri Soft",className:"w-6 h-6 object-contain"}),c.jsx("span",{children:"Guri"}),c.jsx("span",{className:"text-gray-700",children:"Soft"})]})]})]});var Hy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},S3=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=r[t++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=r[t++],o=r[t++],u=r[t++],d=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=r[t++],o=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Rw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const i=r[s],o=s+1<r.length,u=o?r[s+1]:0,d=s+2<r.length,h=d?r[s+2]:0,m=i>>2,v=(i&3)<<4|u>>4;let x=(u&15)<<2|h>>6,y=h&63;d||(y=64,o||(x=64)),n.push(t[m],t[v],t[x],t[y])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Iw(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):S3(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const i=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const h=s<r.length?t[r.charAt(s)]:64;++s;const v=s<r.length?t[r.charAt(s)]:64;if(++s,i==null||u==null||h==null||v==null)throw new N3;const x=i<<2|u>>4;if(n.push(x),h!==64){const y=u<<4&240|h>>2;if(n.push(y),v!==64){const E=h<<6&192|v;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class N3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I3=function(r){const e=Iw(r);return Rw.encodeByteArray(e,!0)},bf=function(r){return I3(r).replace(/\./g,"")},kw=function(r){try{return Rw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=()=>R3().__FIREBASE_DEFAULTS__,D3=()=>{if(typeof process>"u"||typeof Hy>"u")return;const r=Hy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},P3=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&kw(r[1]);return e&&JSON.parse(e)},ih=()=>{try{return k3()||D3()||P3()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Dw=r=>{var e,t;return(t=(e=ih())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},F3=r=>{const e=Dw(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Pw=()=>{var r;return(r=ih())===null||r===void 0?void 0:r.config},Fw=r=>{var e;return(e=ih())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,i=r.sub||r.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},r);return[bf(JSON.stringify(t)),bf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function L3(){var r;const e=(r=ih())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function V3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U3(){const r=_n();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function z3(){return!L3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ow(){try{return typeof indexedDB=="object"}catch{return!1}}function Bw(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}function $3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="FirebaseError";class qs extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=H3,Object.setPrototypeOf(this,qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fo.prototype.create)}}class Fo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?W3(i,n):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new qs(s,u,n)}}function W3(r,e){return r.replace(q3,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const q3=/\{\$([^}]+)}/g;function G3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function gu(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const i=r[s],o=e[s];if(Wy(i)&&Wy(o)){if(!gu(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function Wy(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Kc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Xc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function K3(r,e){const t=new X3(r,e);return t.subscribe.bind(t)}class X3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Y3(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=xp),s.error===void 0&&(s.error=xp),s.complete===void 0&&(s.complete=xp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y3(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function xp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=1e3,J3=2,Z3=14400*1e3,eN=.5;function qy(r,e=Q3,t=J3){const n=e*Math.pow(t,r),s=Math.round(eN*n*(Math.random()-.5)*2);return Math.min(Z3,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(r){return r&&r._delegate?r._delegate:r}class $s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new j3;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nN(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);n===u&&o.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:rN(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rN(r){return r===mo?void 0:r}function nN(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(It||(It={}));const iN={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},aN=It.INFO,oN={[It.DEBUG]:"log",[It.VERBOSE]:"log",[It.INFO]:"info",[It.WARN]:"warn",[It.ERROR]:"error"},lN=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=oN[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ah{constructor(e){this.name=e,this._logLevel=aN,this._logHandler=lN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in It))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,It.DEBUG,...e),this._logHandler(this,It.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,It.VERBOSE,...e),this._logHandler(this,It.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,It.INFO,...e),this._logHandler(this,It.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,It.WARN,...e),this._logHandler(this,It.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,It.ERROR,...e),this._logHandler(this,It.ERROR,...e)}}const cN=(r,e)=>e.some(t=>r instanceof t);let Gy,Ky;function uN(){return Gy||(Gy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dN(){return Ky||(Ky=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lw=new WeakMap,dg=new WeakMap,Mw=new WeakMap,vp=new WeakMap,Gg=new WeakMap;function fN(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",i),r.removeEventListener("error",o)},i=()=>{t(Fa(r.result)),s()},o=()=>{n(r.error),s()};r.addEventListener("success",i),r.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Lw.set(t,r)}).catch(()=>{}),Gg.set(e,r),e}function hN(r){if(dg.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",o),r.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",i),r.addEventListener("error",o),r.addEventListener("abort",o)});dg.set(r,e)}let fg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return dg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Mw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fa(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function mN(r){fg=r(fg)}function pN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(yp(this),e,...t);return Mw.set(n,e.sort?e.sort():[e]),Fa(n)}:dN().includes(r)?function(...e){return r.apply(yp(this),e),Fa(Lw.get(this))}:function(...e){return Fa(r.apply(yp(this),e))}}function gN(r){return typeof r=="function"?pN(r):(r instanceof IDBTransaction&&hN(r),cN(r,uN())?new Proxy(r,fg):r)}function Fa(r){if(r instanceof IDBRequest)return fN(r);if(vp.has(r))return vp.get(r);const e=gN(r);return e!==r&&(vp.set(r,e),Gg.set(e,r)),e}const yp=r=>Gg.get(r);function Vw(r,e,{blocked:t,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(r,e),u=Fa(o);return n&&o.addEventListener("upgradeneeded",d=>{n(Fa(o.result),d.oldVersion,d.newVersion,Fa(o.transaction),d)}),t&&o.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{i&&d.addEventListener("close",()=>i()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const xN=["get","getKey","getAll","getAllKeys","count"],vN=["put","add","delete","clear"],_p=new Map;function Xy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(_p.get(e))return _p.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=vN.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||xN.includes(t)))return;const i=async function(o,...u){const d=this.transaction(o,s?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),s&&d.done]))[0]};return _p.set(e,i),i}mN(r=>({...r,get:(e,t,n)=>Xy(e,t)||r.get(e,t,n),has:(e,t)=>!!Xy(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_N(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function _N(r){const e=r.getComponent();return e?.type==="VERSION"}const hg="@firebase/app",Yy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new ah("@firebase/app"),EN="@firebase/app-compat",wN="@firebase/analytics-compat",bN="@firebase/analytics",TN="@firebase/app-check-compat",CN="@firebase/app-check",AN="@firebase/auth",SN="@firebase/auth-compat",NN="@firebase/database",IN="@firebase/data-connect",RN="@firebase/database-compat",kN="@firebase/functions",DN="@firebase/functions-compat",PN="@firebase/installations",FN="@firebase/installations-compat",jN="@firebase/messaging",ON="@firebase/messaging-compat",BN="@firebase/performance",LN="@firebase/performance-compat",MN="@firebase/remote-config",VN="@firebase/remote-config-compat",UN="@firebase/storage",zN="@firebase/storage-compat",$N="@firebase/firestore",HN="@firebase/vertexai-preview",WN="@firebase/firestore-compat",qN="firebase",GN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="[DEFAULT]",KN={[hg]:"fire-core",[EN]:"fire-core-compat",[bN]:"fire-analytics",[wN]:"fire-analytics-compat",[CN]:"fire-app-check",[TN]:"fire-app-check-compat",[AN]:"fire-auth",[SN]:"fire-auth-compat",[NN]:"fire-rtdb",[IN]:"fire-data-connect",[RN]:"fire-rtdb-compat",[kN]:"fire-fn",[DN]:"fire-fn-compat",[PN]:"fire-iid",[FN]:"fire-iid-compat",[jN]:"fire-fcm",[ON]:"fire-fcm-compat",[BN]:"fire-perf",[LN]:"fire-perf-compat",[MN]:"fire-rc",[VN]:"fire-rc-compat",[UN]:"fire-gcs",[zN]:"fire-gcs-compat",[$N]:"fire-fst",[WN]:"fire-fst-compat",[HN]:"fire-vertex","fire-js":"fire-js",[qN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=new Map,XN=new Map,pg=new Map;function Qy(r,e){try{r.container.addComponent(e)}catch(t){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function hi(r){const e=r.name;if(pg.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;pg.set(e,r);for(const t of Tf.values())Qy(t,r);for(const t of XN.values())Qy(t,r);return!0}function jo(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function li(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ja=new Fo("app","Firebase",YN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ja.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=GN;function Uw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:mg,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw ja.create("bad-app-name",{appName:String(s)});if(t||(t=Pw()),!t)throw ja.create("no-options");const i=Tf.get(s);if(i){if(gu(t,i.options)&&gu(n,i.config))return i;throw ja.create("duplicate-app",{appName:s})}const o=new sN(s);for(const d of pg.values())o.addComponent(d);const u=new QN(t,n,o);return Tf.set(s,u),u}function Kg(r=mg){const e=Tf.get(r);if(!e&&r===mg&&Pw())return Uw();if(!e)throw ja.create("no-app",{appName:r});return e}function ws(r,e,t){var n;let s=(n=KN[r])!==null&&n!==void 0?n:r;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(u.join(" "));return}hi(new $s(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="firebase-heartbeat-database",ZN=1,xu="firebase-heartbeat-store";let Ep=null;function zw(){return Ep||(Ep=Vw(JN,ZN,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(xu)}catch(t){console.warn(t)}}}}).catch(r=>{throw ja.create("idb-open",{originalErrorMessage:r.message})})),Ep}async function eI(r){try{const t=(await zw()).transaction(xu),n=await t.objectStore(xu).get($w(r));return await t.done,n}catch(e){if(e instanceof qs)$i.warn(e.message);else{const t=ja.create("idb-get",{originalErrorMessage:e?.message});$i.warn(t.message)}}}async function Jy(r,e){try{const n=(await zw()).transaction(xu,"readwrite");await n.objectStore(xu).put(e,$w(r)),await n.done}catch(t){if(t instanceof qs)$i.warn(t.message);else{const n=ja.create("idb-set",{originalErrorMessage:t?.message});$i.warn(n.message)}}}function $w(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=1024,rI=720*60*60*1e3;class nI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iI(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=rI}),this._storage.overwrite(this._heartbeatsCache))}catch(n){$i.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zy(),{heartbeatsToSend:n,unsentEntries:s}=sI(this._heartbeatsCache.heartbeats),i=bf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return $i.warn(t),""}}}function Zy(){return new Date().toISOString().substring(0,10)}function sI(r,e=tI){const t=[];let n=r.slice();for(const s of r){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),e_(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),e_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class iI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ow()?Bw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function e_(r){return bf(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(r){hi(new $s("platform-logger",e=>new yN(e),"PRIVATE")),hi(new $s("heartbeat",e=>new nI(e),"PRIVATE")),ws(hg,Yy,r),ws(hg,Yy,"esm2017"),ws("fire-js","")}aI("");var t_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,Hw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function T(){}T.prototype=I.prototype,N.D=I.prototype,N.prototype=new T,N.prototype.constructor=N,N.C=function(C,D,F){for(var O=Array(arguments.length-2),le=2;le<arguments.length;le++)O[le-2]=arguments[le];return I.prototype[D].apply(C,O)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,I,T){T||(T=0);var C=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)C[D]=I.charCodeAt(T++)|I.charCodeAt(T++)<<8|I.charCodeAt(T++)<<16|I.charCodeAt(T++)<<24;else for(D=0;16>D;++D)C[D]=I[T++]|I[T++]<<8|I[T++]<<16|I[T++]<<24;I=N.g[0],T=N.g[1],D=N.g[2];var F=N.g[3],O=I+(F^T&(D^F))+C[0]+3614090360&4294967295;I=T+(O<<7&4294967295|O>>>25),O=F+(D^I&(T^D))+C[1]+3905402710&4294967295,F=I+(O<<12&4294967295|O>>>20),O=D+(T^F&(I^T))+C[2]+606105819&4294967295,D=F+(O<<17&4294967295|O>>>15),O=T+(I^D&(F^I))+C[3]+3250441966&4294967295,T=D+(O<<22&4294967295|O>>>10),O=I+(F^T&(D^F))+C[4]+4118548399&4294967295,I=T+(O<<7&4294967295|O>>>25),O=F+(D^I&(T^D))+C[5]+1200080426&4294967295,F=I+(O<<12&4294967295|O>>>20),O=D+(T^F&(I^T))+C[6]+2821735955&4294967295,D=F+(O<<17&4294967295|O>>>15),O=T+(I^D&(F^I))+C[7]+4249261313&4294967295,T=D+(O<<22&4294967295|O>>>10),O=I+(F^T&(D^F))+C[8]+1770035416&4294967295,I=T+(O<<7&4294967295|O>>>25),O=F+(D^I&(T^D))+C[9]+2336552879&4294967295,F=I+(O<<12&4294967295|O>>>20),O=D+(T^F&(I^T))+C[10]+4294925233&4294967295,D=F+(O<<17&4294967295|O>>>15),O=T+(I^D&(F^I))+C[11]+2304563134&4294967295,T=D+(O<<22&4294967295|O>>>10),O=I+(F^T&(D^F))+C[12]+1804603682&4294967295,I=T+(O<<7&4294967295|O>>>25),O=F+(D^I&(T^D))+C[13]+4254626195&4294967295,F=I+(O<<12&4294967295|O>>>20),O=D+(T^F&(I^T))+C[14]+2792965006&4294967295,D=F+(O<<17&4294967295|O>>>15),O=T+(I^D&(F^I))+C[15]+1236535329&4294967295,T=D+(O<<22&4294967295|O>>>10),O=I+(D^F&(T^D))+C[1]+4129170786&4294967295,I=T+(O<<5&4294967295|O>>>27),O=F+(T^D&(I^T))+C[6]+3225465664&4294967295,F=I+(O<<9&4294967295|O>>>23),O=D+(I^T&(F^I))+C[11]+643717713&4294967295,D=F+(O<<14&4294967295|O>>>18),O=T+(F^I&(D^F))+C[0]+3921069994&4294967295,T=D+(O<<20&4294967295|O>>>12),O=I+(D^F&(T^D))+C[5]+3593408605&4294967295,I=T+(O<<5&4294967295|O>>>27),O=F+(T^D&(I^T))+C[10]+38016083&4294967295,F=I+(O<<9&4294967295|O>>>23),O=D+(I^T&(F^I))+C[15]+3634488961&4294967295,D=F+(O<<14&4294967295|O>>>18),O=T+(F^I&(D^F))+C[4]+3889429448&4294967295,T=D+(O<<20&4294967295|O>>>12),O=I+(D^F&(T^D))+C[9]+568446438&4294967295,I=T+(O<<5&4294967295|O>>>27),O=F+(T^D&(I^T))+C[14]+3275163606&4294967295,F=I+(O<<9&4294967295|O>>>23),O=D+(I^T&(F^I))+C[3]+4107603335&4294967295,D=F+(O<<14&4294967295|O>>>18),O=T+(F^I&(D^F))+C[8]+1163531501&4294967295,T=D+(O<<20&4294967295|O>>>12),O=I+(D^F&(T^D))+C[13]+2850285829&4294967295,I=T+(O<<5&4294967295|O>>>27),O=F+(T^D&(I^T))+C[2]+4243563512&4294967295,F=I+(O<<9&4294967295|O>>>23),O=D+(I^T&(F^I))+C[7]+1735328473&4294967295,D=F+(O<<14&4294967295|O>>>18),O=T+(F^I&(D^F))+C[12]+2368359562&4294967295,T=D+(O<<20&4294967295|O>>>12),O=I+(T^D^F)+C[5]+4294588738&4294967295,I=T+(O<<4&4294967295|O>>>28),O=F+(I^T^D)+C[8]+2272392833&4294967295,F=I+(O<<11&4294967295|O>>>21),O=D+(F^I^T)+C[11]+1839030562&4294967295,D=F+(O<<16&4294967295|O>>>16),O=T+(D^F^I)+C[14]+4259657740&4294967295,T=D+(O<<23&4294967295|O>>>9),O=I+(T^D^F)+C[1]+2763975236&4294967295,I=T+(O<<4&4294967295|O>>>28),O=F+(I^T^D)+C[4]+1272893353&4294967295,F=I+(O<<11&4294967295|O>>>21),O=D+(F^I^T)+C[7]+4139469664&4294967295,D=F+(O<<16&4294967295|O>>>16),O=T+(D^F^I)+C[10]+3200236656&4294967295,T=D+(O<<23&4294967295|O>>>9),O=I+(T^D^F)+C[13]+681279174&4294967295,I=T+(O<<4&4294967295|O>>>28),O=F+(I^T^D)+C[0]+3936430074&4294967295,F=I+(O<<11&4294967295|O>>>21),O=D+(F^I^T)+C[3]+3572445317&4294967295,D=F+(O<<16&4294967295|O>>>16),O=T+(D^F^I)+C[6]+76029189&4294967295,T=D+(O<<23&4294967295|O>>>9),O=I+(T^D^F)+C[9]+3654602809&4294967295,I=T+(O<<4&4294967295|O>>>28),O=F+(I^T^D)+C[12]+3873151461&4294967295,F=I+(O<<11&4294967295|O>>>21),O=D+(F^I^T)+C[15]+530742520&4294967295,D=F+(O<<16&4294967295|O>>>16),O=T+(D^F^I)+C[2]+3299628645&4294967295,T=D+(O<<23&4294967295|O>>>9),O=I+(D^(T|~F))+C[0]+4096336452&4294967295,I=T+(O<<6&4294967295|O>>>26),O=F+(T^(I|~D))+C[7]+1126891415&4294967295,F=I+(O<<10&4294967295|O>>>22),O=D+(I^(F|~T))+C[14]+2878612391&4294967295,D=F+(O<<15&4294967295|O>>>17),O=T+(F^(D|~I))+C[5]+4237533241&4294967295,T=D+(O<<21&4294967295|O>>>11),O=I+(D^(T|~F))+C[12]+1700485571&4294967295,I=T+(O<<6&4294967295|O>>>26),O=F+(T^(I|~D))+C[3]+2399980690&4294967295,F=I+(O<<10&4294967295|O>>>22),O=D+(I^(F|~T))+C[10]+4293915773&4294967295,D=F+(O<<15&4294967295|O>>>17),O=T+(F^(D|~I))+C[1]+2240044497&4294967295,T=D+(O<<21&4294967295|O>>>11),O=I+(D^(T|~F))+C[8]+1873313359&4294967295,I=T+(O<<6&4294967295|O>>>26),O=F+(T^(I|~D))+C[15]+4264355552&4294967295,F=I+(O<<10&4294967295|O>>>22),O=D+(I^(F|~T))+C[6]+2734768916&4294967295,D=F+(O<<15&4294967295|O>>>17),O=T+(F^(D|~I))+C[13]+1309151649&4294967295,T=D+(O<<21&4294967295|O>>>11),O=I+(D^(T|~F))+C[4]+4149444226&4294967295,I=T+(O<<6&4294967295|O>>>26),O=F+(T^(I|~D))+C[11]+3174756917&4294967295,F=I+(O<<10&4294967295|O>>>22),O=D+(I^(F|~T))+C[2]+718787259&4294967295,D=F+(O<<15&4294967295|O>>>17),O=T+(F^(D|~I))+C[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+F&4294967295}n.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var T=I-this.blockSize,C=this.B,D=this.h,F=0;F<I;){if(D==0)for(;F<=T;)s(this,N,F),F+=this.blockSize;if(typeof N=="string"){for(;F<I;)if(C[D++]=N.charCodeAt(F++),D==this.blockSize){s(this,C),D=0;break}}else for(;F<I;)if(C[D++]=N[F++],D==this.blockSize){s(this,C),D=0;break}}this.h=D,this.o+=I},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var T=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=T&255,T/=256;for(this.u(N),N=Array(16),I=T=0;4>I;++I)for(var C=0;32>C;C+=8)N[T++]=this.g[I]>>>C&255;return N};function i(N,I){var T=u;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=I(N)}function o(N,I){this.h=I;for(var T=[],C=!0,D=N.length-1;0<=D;D--){var F=N[D]|0;C&&F==I||(T[D]=F,C=!1)}this.g=T}var u={};function d(N){return-128<=N&&128>N?i(N,function(I){return new o([I|0],0>I?-1:0)}):new o([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return v;if(0>N)return w(h(-N));for(var I=[],T=1,C=0;N>=T;C++)I[C]=N/T|0,T*=4294967296;return new o(I,0)}function m(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return w(m(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(I,8)),C=v,D=0;D<N.length;D+=8){var F=Math.min(8,N.length-D),O=parseInt(N.substring(D,D+F),I);8>F?(F=h(Math.pow(I,F)),C=C.j(F).add(h(O))):(C=C.j(T),C=C.add(h(O)))}return C}var v=d(0),x=d(1),y=d(16777216);r=o.prototype,r.m=function(){if(_(this))return-w(this).m();for(var N=0,I=1,T=0;T<this.g.length;T++){var C=this.i(T);N+=(0<=C?C:4294967296+C)*I,I*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(E(this))return"0";if(_(this))return"-"+w(this).toString(N);for(var I=h(Math.pow(N,6)),T=this,C="";;){var D=B(T,I).g;T=j(T,D.j(I));var F=((0<T.g.length?T.g[0]:T.h)>>>0).toString(N);if(T=D,E(T))return F+C;for(;6>F.length;)F="0"+F;C=F+C}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function E(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function _(N){return N.h==-1}r.l=function(N){return N=j(this,N),_(N)?-1:E(N)?0:1};function w(N){for(var I=N.g.length,T=[],C=0;C<I;C++)T[C]=~N.g[C];return new o(T,~N.h).add(x)}r.abs=function(){return _(this)?w(this):this},r.add=function(N){for(var I=Math.max(this.g.length,N.g.length),T=[],C=0,D=0;D<=I;D++){var F=C+(this.i(D)&65535)+(N.i(D)&65535),O=(F>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);C=O>>>16,F&=65535,O&=65535,T[D]=O<<16|F}return new o(T,T[T.length-1]&-2147483648?-1:0)};function j(N,I){return N.add(w(I))}r.j=function(N){if(E(this)||E(N))return v;if(_(this))return _(N)?w(this).j(w(N)):w(w(this).j(N));if(_(N))return w(this.j(w(N)));if(0>this.l(y)&&0>N.l(y))return h(this.m()*N.m());for(var I=this.g.length+N.g.length,T=[],C=0;C<2*I;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<N.g.length;D++){var F=this.i(C)>>>16,O=this.i(C)&65535,le=N.i(D)>>>16,we=N.i(D)&65535;T[2*C+2*D]+=O*we,k(T,2*C+2*D),T[2*C+2*D+1]+=F*we,k(T,2*C+2*D+1),T[2*C+2*D+1]+=O*le,k(T,2*C+2*D+1),T[2*C+2*D+2]+=F*le,k(T,2*C+2*D+2)}for(C=0;C<I;C++)T[C]=T[2*C+1]<<16|T[2*C];for(C=I;C<2*I;C++)T[C]=0;return new o(T,0)};function k(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function R(N,I){this.g=N,this.h=I}function B(N,I){if(E(I))throw Error("division by zero");if(E(N))return new R(v,v);if(_(N))return I=B(w(N),I),new R(w(I.g),w(I.h));if(_(I))return I=B(N,w(I)),new R(w(I.g),I.h);if(30<N.g.length){if(_(N)||_(I))throw Error("slowDivide_ only works with positive integers.");for(var T=x,C=I;0>=C.l(N);)T=U(T),C=U(C);var D=W(T,1),F=W(C,1);for(C=W(C,2),T=W(T,2);!E(C);){var O=F.add(C);0>=O.l(N)&&(D=D.add(T),F=O),C=W(C,1),T=W(T,1)}return I=j(N,D.j(I)),new R(D,I)}for(D=v;0<=N.l(I);){for(T=Math.max(1,Math.floor(N.m()/I.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),F=h(T),O=F.j(I);_(O)||0<O.l(N);)T-=C,F=h(T),O=F.j(I);E(F)&&(F=x),D=D.add(F),N=j(N,O)}return new R(D,N)}r.A=function(N){return B(this,N).h},r.and=function(N){for(var I=Math.max(this.g.length,N.g.length),T=[],C=0;C<I;C++)T[C]=this.i(C)&N.i(C);return new o(T,this.h&N.h)},r.or=function(N){for(var I=Math.max(this.g.length,N.g.length),T=[],C=0;C<I;C++)T[C]=this.i(C)|N.i(C);return new o(T,this.h|N.h)},r.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),T=[],C=0;C<I;C++)T[C]=this.i(C)^N.i(C);return new o(T,this.h^N.h)};function U(N){for(var I=N.g.length+1,T=[],C=0;C<I;C++)T[C]=N.i(C)<<1|N.i(C-1)>>>31;return new o(T,N.h)}function W(N,I){var T=I>>5;I%=32;for(var C=N.g.length-T,D=[],F=0;F<C;F++)D[F]=0<I?N.i(F+T)>>>I|N.i(F+T+1)<<32-I:N.i(F+T);return new o(D,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Hw=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,yo=o}).apply(typeof t_<"u"?t_:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ww,Yc,qw,kd,gg,Gw,Kw,Xw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,A,L){return p==Array.prototype||p==Object.prototype||(p[A]=L.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var A=0;A<p.length;++A){var L=p[A];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var n=t(this);function s(p,A){if(A)e:{var L=n;p=p.split(".");for(var K=0;K<p.length-1;K++){var he=p[K];if(!(he in L))break e;L=L[he]}p=p[p.length-1],K=L[p],A=A(K),A!=K&&A!=null&&e(L,p,{configurable:!0,writable:!0,value:A})}}function i(p,A){p instanceof String&&(p+="");var L=0,K=!1,he={next:function(){if(!K&&L<p.length){var Te=L++;return{value:A(Te,p[Te]),done:!1}}return K=!0,{done:!0,value:void 0}}};return he[Symbol.iterator]=function(){return he},he}s("Array.prototype.values",function(p){return p||function(){return i(this,function(A,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function d(p){var A=typeof p;return A=A!="object"?A:p?Array.isArray(p)?"array":A:"null",A=="array"||A=="object"&&typeof p.length=="number"}function h(p){var A=typeof p;return A=="object"&&p!=null||A=="function"}function m(p,A,L){return p.call.apply(p.bind,arguments)}function v(p,A,L){if(!p)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var he=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(he,K),p.apply(A,he)}}return function(){return p.apply(A,arguments)}}function x(p,A,L){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,x.apply(null,arguments)}function y(p,A){var L=Array.prototype.slice.call(arguments,1);return function(){var K=L.slice();return K.push.apply(K,arguments),p.apply(this,K)}}function E(p,A){function L(){}L.prototype=A.prototype,p.aa=A.prototype,p.prototype=new L,p.prototype.constructor=p,p.Qb=function(K,he,Te){for(var qe=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)qe[Gt-2]=arguments[Gt];return A.prototype[he].apply(K,qe)}}function _(p){const A=p.length;if(0<A){const L=Array(A);for(let K=0;K<A;K++)L[K]=p[K];return L}return[]}function w(p,A){for(let L=1;L<arguments.length;L++){const K=arguments[L];if(d(K)){const he=p.length||0,Te=K.length||0;p.length=he+Te;for(let qe=0;qe<Te;qe++)p[he+qe]=K[qe]}else p.push(K)}}class j{constructor(A,L){this.i=A,this.j=L,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function k(p){return/^[\s\xa0]*$/.test(p)}function R(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function B(p){return B[" "](p),p}B[" "]=function(){};var U=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function W(p,A,L){for(const K in p)A.call(L,p[K],K,p)}function N(p,A){for(const L in p)A.call(void 0,p[L],L,p)}function I(p){const A={};for(const L in p)A[L]=p[L];return A}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(p,A){let L,K;for(let he=1;he<arguments.length;he++){K=arguments[he];for(L in K)p[L]=K[L];for(let Te=0;Te<T.length;Te++)L=T[Te],Object.prototype.hasOwnProperty.call(K,L)&&(p[L]=K[L])}}function D(p){var A=1;p=p.split(":");const L=[];for(;0<A&&p.length;)L.push(p.shift()),A--;return p.length&&L.push(p.join(":")),L}function F(p){u.setTimeout(()=>{throw p},0)}function O(){var p=de;let A=null;return p.g&&(A=p.g,p.g=p.g.next,p.g||(p.h=null),A.next=null),A}class le{constructor(){this.h=this.g=null}add(A,L){const K=we.get();K.set(A,L),this.h?this.h.next=K:this.g=K,this.h=K}}var we=new j(()=>new Ie,p=>p.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(A,L){this.h=A,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,oe=!1,de=new le,Q=()=>{const p=u.Promise.resolve(void 0);ie=()=>{p.then(H)}};var H=()=>{for(var p;p=O();){try{p.h.call(p.g)}catch(L){F(L)}var A=we;A.j(p),100>A.h&&(A.h++,p.next=A.g,A.g=p)}oe=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(p,A){this.type=p,this.g=this.target=A,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,A=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const L=()=>{};u.addEventListener("test",L,A),u.removeEventListener("test",L,A)}catch{}return p})();function G(p,A){if(V.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var L=this.type=p.type,K=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=A,A=p.relatedTarget){if(U){e:{try{B(A.nodeName);var he=!0;break e}catch{}he=!1}he||(A=null)}}else L=="mouseover"?A=p.fromElement:L=="mouseout"&&(A=p.toElement);this.relatedTarget=A,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:re[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&G.aa.h.call(this)}}E(G,V);var re={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),me=0;function Se(p,A,L,K,he){this.listener=p,this.proxy=null,this.src=A,this.type=L,this.capture=!!K,this.ha=he,this.key=++me,this.da=this.fa=!1}function Ne(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function nt(p){this.src=p,this.g={},this.h=0}nt.prototype.add=function(p,A,L,K,he){var Te=p.toString();p=this.g[Te],p||(p=this.g[Te]=[],this.h++);var qe=gt(p,A,K,he);return-1<qe?(A=p[qe],L||(A.fa=!1)):(A=new Se(A,this.src,Te,!!K,he),A.fa=L,p.push(A)),A};function lt(p,A){var L=A.type;if(L in p.g){var K=p.g[L],he=Array.prototype.indexOf.call(K,A,void 0),Te;(Te=0<=he)&&Array.prototype.splice.call(K,he,1),Te&&(Ne(A),p.g[L].length==0&&(delete p.g[L],p.h--))}}function gt(p,A,L,K){for(var he=0;he<p.length;++he){var Te=p[he];if(!Te.da&&Te.listener==A&&Te.capture==!!L&&Te.ha==K)return he}return-1}var Le="closure_lm_"+(1e6*Math.random()|0),ht={};function Ze(p,A,L,K,he){if(Array.isArray(A)){for(var Te=0;Te<A.length;Te++)Ze(p,A[Te],L,K,he);return null}return L=En(L),p&&p[xe]?p.K(A,L,h(K)?!!K.capture:!1,he):Me(p,A,L,!1,K,he)}function Me(p,A,L,K,he,Te){if(!A)throw Error("Invalid event type");var qe=h(he)?!!he.capture:!!he,Gt=tr(p);if(Gt||(p[Le]=Gt=new nt(p)),L=Gt.add(A,L,K,qe,Te),L.proxy)return L;if(K=bt(),L.proxy=K,K.src=p,K.listener=L,p.addEventListener)P||(he=qe),he===void 0&&(he=!1),p.addEventListener(A.toString(),K,he);else if(p.attachEvent)p.attachEvent(Ke(A.toString()),K);else if(p.addListener&&p.removeListener)p.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return L}function bt(){function p(L){return A.call(p.src,p.listener,L)}const A=wt;return p}function ne(p,A,L,K,he){if(Array.isArray(A))for(var Te=0;Te<A.length;Te++)ne(p,A[Te],L,K,he);else K=h(K)?!!K.capture:!!K,L=En(L),p&&p[xe]?(p=p.i,A=String(A).toString(),A in p.g&&(Te=p.g[A],L=gt(Te,L,K,he),-1<L&&(Ne(Te[L]),Array.prototype.splice.call(Te,L,1),Te.length==0&&(delete p.g[A],p.h--)))):p&&(p=tr(p))&&(A=p.g[A.toString()],p=-1,A&&(p=gt(A,L,K,he)),(L=-1<p?A[p]:null)&&ue(L))}function ue(p){if(typeof p!="number"&&p&&!p.da){var A=p.src;if(A&&A[xe])lt(A.i,p);else{var L=p.type,K=p.proxy;A.removeEventListener?A.removeEventListener(L,K,p.capture):A.detachEvent?A.detachEvent(Ke(L),K):A.addListener&&A.removeListener&&A.removeListener(K),(L=tr(A))?(lt(L,p),L.h==0&&(L.src=null,A[Le]=null)):Ne(p)}}}function Ke(p){return p in ht?ht[p]:ht[p]="on"+p}function wt(p,A){if(p.da)p=!0;else{A=new G(A,this);var L=p.listener,K=p.ha||p.src;p.fa&&ue(p),p=L.call(K,A)}return p}function tr(p){return p=p[Le],p instanceof nt?p:null}var rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(p){return typeof p=="function"?p:(p[rr]||(p[rr]=function(A){return p.handleEvent(A)}),p[rr])}function Ot(){M.call(this),this.i=new nt(this),this.M=this,this.F=null}E(Ot,M),Ot.prototype[xe]=!0,Ot.prototype.removeEventListener=function(p,A,L,K){ne(this,p,A,L,K)};function fe(p,A){var L,K=p.F;if(K)for(L=[];K;K=K.F)L.push(K);if(p=p.M,K=A.type||A,typeof A=="string")A=new V(A,p);else if(A instanceof V)A.target=A.target||p;else{var he=A;A=new V(K,p),C(A,he)}if(he=!0,L)for(var Te=L.length-1;0<=Te;Te--){var qe=A.g=L[Te];he=Pe(qe,K,!0,A)&&he}if(qe=A.g=p,he=Pe(qe,K,!0,A)&&he,he=Pe(qe,K,!1,A)&&he,L)for(Te=0;Te<L.length;Te++)qe=A.g=L[Te],he=Pe(qe,K,!1,A)&&he}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var p=this.i,A;for(A in p.g){for(var L=p.g[A],K=0;K<L.length;K++)Ne(L[K]);delete p.g[A],p.h--}}this.F=null},Ot.prototype.K=function(p,A,L,K){return this.i.add(String(p),A,!1,L,K)},Ot.prototype.L=function(p,A,L,K){return this.i.add(String(p),A,!0,L,K)};function Pe(p,A,L,K){if(A=p.i.g[String(A)],!A)return!0;A=A.concat();for(var he=!0,Te=0;Te<A.length;++Te){var qe=A[Te];if(qe&&!qe.da&&qe.capture==L){var Gt=qe.listener,Pr=qe.ha||qe.src;qe.fa&&lt(p.i,qe),he=Gt.call(Pr,K)!==!1&&he}}return he&&!K.defaultPrevented}function et(p,A,L){if(typeof p=="function")L&&(p=x(p,L));else if(p&&typeof p.handleEvent=="function")p=x(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:u.setTimeout(p,A||0)}function Ge(p){p.g=et(()=>{p.g=null,p.i&&(p.i=!1,Ge(p))},p.l);const A=p.h;p.h=null,p.m.apply(null,A)}class at extends M{constructor(A,L){super(),this.m=A,this.l=L,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yt(p){M.call(this),this.h=p,this.g={}}E(yt,M);var kt=[];function ur(p){W(p.g,function(A,L){this.g.hasOwnProperty(L)&&ue(A)},p),p.g={}}yt.prototype.N=function(){yt.aa.N.call(this),ur(this)},yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yr=u.JSON.stringify,ut=u.JSON.parse,Bt=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Ht(){}Ht.prototype.h=null;function wn(p){return p.h||(p.h=p.i())}function kn(){}var Br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bn(){V.call(this,"d")}E(bn,V);function qn(){V.call(this,"c")}E(qn,V);var Dn={},vi=null;function us(){return vi=vi||new Ot}Dn.La="serverreachability";function yi(p){V.call(this,Dn.La,p)}E(yi,V);function Gn(p){const A=us();fe(A,new yi(A))}Dn.STAT_EVENT="statevent";function Gs(p,A){V.call(this,Dn.STAT_EVENT,p),this.stat=A}E(Gs,V);function sr(p){const A=us();fe(A,new Gs(A,p))}Dn.Ma="timingevent";function Cs(p,A){V.call(this,Dn.Ma,p),this.size=A}E(Cs,V);function Wt(p,A){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},A)}function Lr(){this.g=!0}Lr.prototype.xa=function(){this.g=!1};function ds(p,A,L,K,he,Te){p.info(function(){if(p.g)if(Te)for(var qe="",Gt=Te.split("&"),Pr=0;Pr<Gt.length;Pr++){var Dt=Gt[Pr].split("=");if(1<Dt.length){var Mr=Dt[0];Dt=Dt[1];var Tr=Mr.split("_");qe=2<=Tr.length&&Tr[1]=="type"?qe+(Mr+"="+Dt+"&"):qe+(Mr+"=redacted&")}}else qe=null;else qe=Te;return"XMLHTTP REQ ("+K+") [attempt "+he+"]: "+A+`
`+L+`
`+qe})}function Ks(p,A,L,K,he,Te,qe){p.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+he+"]: "+A+`
`+L+`
`+Te+" "+qe})}function q(p,A,L,K){p.info(function(){return"XMLHTTP TEXT ("+A+"): "+X(p,L)+(K?" "+K:"")})}function J(p,A){p.info(function(){return"TIMEOUT: "+A})}Lr.prototype.info=function(){};function X(p,A){if(!p.g)return A;if(!A)return null;try{var L=JSON.parse(A);if(L){for(p=0;p<L.length;p++)if(Array.isArray(L[p])){var K=L[p];if(!(2>K.length)){var he=K[1];if(Array.isArray(he)&&!(1>he.length)){var Te=he[0];if(Te!="noop"&&Te!="stop"&&Te!="close")for(var qe=1;qe<he.length;qe++)he[qe]=""}}}}return Yr(L)}catch{return A}}var Y={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Z={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ee;function ge(){}E(ge,Ht),ge.prototype.g=function(){return new XMLHttpRequest},ge.prototype.i=function(){return{}},ee=new ge;function Ce(p,A,L,K){this.j=p,this.i=A,this.l=L,this.R=K||1,this.U=new yt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ve}function ve(){this.i=null,this.g="",this.h=!1}var _e={},Ee={};function je(p,A,L){p.L=1,p.v=ta(Xn(A)),p.m=L,p.P=!0,He(p,null)}function He(p,A){p.F=Date.now(),Be(p),p.A=Xn(p.v);var L=p.A,K=p.R;Array.isArray(K)||(K=[String(K)]),na(L.i,"t",K),p.C=0,L=p.j.J,p.h=new ve,p.g=v0(p.j,L?A:null,!p.m),0<p.O&&(p.M=new at(x(p.Y,p,p.g),p.O)),A=p.U,L=p.g,K=p.ca;var he="readystatechange";Array.isArray(he)||(he&&(kt[0]=he.toString()),he=kt);for(var Te=0;Te<he.length;Te++){var qe=Ze(L,he[Te],K||A.handleEvent,!1,A.h||A);if(!qe)break;A.g[qe.key]=qe}A=p.H?I(p.H):{},p.m?(p.u||(p.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,A)):(p.u="GET",p.g.ea(p.A,p.u,null,A)),Gn(),ds(p.i,p.u,p.A,p.l,p.R,p.m)}Ce.prototype.ca=function(p){p=p.target;const A=this.M;A&&Fn(p)==3?A.j():this.Y(p)},Ce.prototype.Y=function(p){try{if(p==this.g)e:{const Tr=Fn(this.g);var A=this.g.Ba();const hs=this.g.Z();if(!(3>Tr)&&(Tr!=3||this.g&&(this.h.h||this.g.oa()||gc(this.g)))){this.J||Tr!=4||A==7||(A==8||0>=hs?Gn(3):Gn(2)),zt(this);var L=this.g.Z();this.X=L;t:if(Xe(this)){var K=gc(this.g);p="";var he=K.length,Te=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qt(this),Lt(this);var qe="";break t}this.h.i=new u.TextDecoder}for(A=0;A<he;A++)this.h.h=!0,p+=this.h.i.decode(K[A],{stream:!(Te&&A==he-1)});K.length=0,this.h.g+=p,this.C=0,qe=this.h.g}else qe=this.g.oa();if(this.o=L==200,Ks(this.i,this.u,this.A,this.l,this.R,Tr,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,Pr=this.g;if((Gt=Pr.g?Pr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Gt)){var Dt=Gt;break t}}Dt=null}if(L=Dt)q(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,As(this,L);else{this.o=!1,this.s=3,sr(12),qt(this),Lt(this);break e}}if(this.P){L=!0;let Qn;for(;!this.J&&this.C<qe.length;)if(Qn=Ue(this,qe),Qn==Ee){Tr==4&&(this.s=4,sr(14),L=!1),q(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==_e){this.s=4,sr(15),q(this.i,this.l,qe,"[Invalid Chunk]"),L=!1;break}else q(this.i,this.l,Qn,null),As(this,Qn);if(Xe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tr!=4||qe.length!=0||this.h.h||(this.s=1,sr(16),L=!1),this.o=this.o&&L,!L)q(this.i,this.l,qe,"[Invalid Chunked Response]"),qt(this),Lt(this);else if(0<qe.length&&!this.W){this.W=!0;var Mr=this.j;Mr.g==this&&Mr.ba&&!Mr.M&&(Mr.j.info("Great, no buffering proxy detected. Bytes received: "+qe.length),vc(Mr),Mr.M=!0,sr(11))}}else q(this.i,this.l,qe,null),As(this,qe);Tr==4&&qt(this),this.o&&!this.J&&(Tr==4?sl(this.j,this):(this.o=!1,Be(this)))}else Zo(this.g),L==400&&0<qe.indexOf("Unknown SID")?(this.s=3,sr(12)):(this.s=0,sr(13)),qt(this),Lt(this)}}}catch{}finally{}};function Xe(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Ue(p,A){var L=p.C,K=A.indexOf(`
`,L);return K==-1?Ee:(L=Number(A.substring(L,K)),isNaN(L)?_e:(K+=1,K+L>A.length?Ee:(A=A.slice(K,K+L),p.C=K+L,A)))}Ce.prototype.cancel=function(){this.J=!0,qt(this)};function Be(p){p.S=Date.now()+p.I,mt(p,p.I)}function mt(p,A){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Wt(x(p.ba,p),A)}function zt(p){p.B&&(u.clearTimeout(p.B),p.B=null)}Ce.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(J(this.i,this.A),this.L!=2&&(Gn(),sr(17)),qt(this),this.s=2,Lt(this)):mt(this,this.S-p)};function Lt(p){p.j.G==0||p.J||sl(p.j,p)}function qt(p){zt(p);var A=p.M;A&&typeof A.ma=="function"&&A.ma(),p.M=null,ur(p.U),p.g&&(A=p.g,p.g=null,A.abort(),A.ma())}function As(p,A){try{var L=p.j;if(L.G!=0&&(L.g==p||ir(L.h,p))){if(!p.K&&ir(L.h,p)&&L.G==3){try{var K=L.Da.g.parse(A)}catch{K=null}if(Array.isArray(K)&&K.length==3){var he=K;if(he[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<p.F)nl(L),ks(L);else break e;rl(L),sr(18)}}else L.za=he[1],0<L.za-L.T&&37500>he[2]&&L.F&&L.v==0&&!L.C&&(L.C=Wt(x(L.Za,L),6e3));if(1>=Qi(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Ti(L,11)}else if((p.K||L.g==p)&&nl(L),!k(A))for(he=L.Da.g.parse(A),A=0;A<he.length;A++){let Dt=he[A];if(L.T=Dt[0],Dt=Dt[1],L.G==2)if(Dt[0]=="c"){L.K=Dt[1],L.ia=Dt[2];const Mr=Dt[3];Mr!=null&&(L.la=Mr,L.j.info("VER="+L.la));const Tr=Dt[4];Tr!=null&&(L.Aa=Tr,L.j.info("SVER="+L.Aa));const hs=Dt[5];hs!=null&&typeof hs=="number"&&0<hs&&(K=1.5*hs,L.L=K,L.j.info("backChannelRequestTimeoutMs_="+K)),K=L;const Qn=p.g;if(Qn){const eo=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eo){var Te=K.h;Te.g||eo.indexOf("spdy")==-1&&eo.indexOf("quic")==-1&&eo.indexOf("h2")==-1||(Te.j=Te.l,Te.g=new Set,Te.h&&(fc(Te,Te.h),Te.h=null))}if(K.D){const al=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(K.ya=al,er(K.I,K.D,al))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-p.F,L.j.info("Handshake RTT: "+L.R+"ms")),K=L;var qe=p;if(K.qa=x0(K,K.J?K.ia:null,K.W),qe.K){i0(K.h,qe);var Gt=qe,Pr=K.L;Pr&&(Gt.I=Pr),Gt.B&&(zt(Gt),Be(Gt)),K.g=qe}else Za(K);0<L.i.length&&Zs(L)}else Dt[0]!="stop"&&Dt[0]!="close"||Ti(L,7);else L.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Ti(L,7):Jr(L):Dt[0]!="noop"&&L.l&&L.l.ta(Dt),L.v=0)}}Gn(4)}catch{}}var Xs=class{constructor(p,A){this.g=p,this.map=A}};function Kn(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _r(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Qi(p){return p.h?1:p.g?p.g.size:0}function ir(p,A){return p.h?p.h==A:p.g?p.g.has(A):!1}function fc(p,A){p.g?p.g.add(A):p.h=A}function i0(p,A){p.h&&p.h==A?p.h=null:p.g&&p.g.has(A)&&p.g.delete(A)}Kn.prototype.cancel=function(){if(this.i=a0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function a0(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let A=p.i;for(const L of p.g.values())A=A.concat(L.D);return A}return _(p.i)}function Ko(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(d(p)){for(var A=[],L=p.length,K=0;K<L;K++)A.push(p[K]);return A}A=[],L=0;for(K in p)A[L++]=p[K];return A}function Xo(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(d(p)||typeof p=="string"){var A=[];p=p.length;for(var L=0;L<p;L++)A.push(L);return A}A=[],L=0;for(const K in p)A[L++]=K;return A}}}function Ji(p,A){if(p.forEach&&typeof p.forEach=="function")p.forEach(A,void 0);else if(d(p)||typeof p=="string")Array.prototype.forEach.call(p,A,void 0);else for(var L=Xo(p),K=Ko(p),he=K.length,Te=0;Te<he;Te++)A.call(void 0,K[Te],L&&L[Te],p)}var Xa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vh(p,A){if(p){p=p.split("&");for(var L=0;L<p.length;L++){var K=p[L].indexOf("="),he=null;if(0<=K){var Te=p[L].substring(0,K);he=p[L].substring(K+1)}else Te=p[L];A(Te,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function _i(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof _i){this.h=p.h,Ya(this,p.j),this.o=p.o,this.g=p.g,Zi(this,p.s),this.l=p.l;var A=p.i,L=new Ys;L.i=A.i,A.g&&(L.g=new Map(A.g),L.h=A.h),ea(this,L),this.m=p.m}else p&&(A=String(p).match(Xa))?(this.h=!1,Ya(this,A[1]||"",!0),this.o=Nt(A[2]||""),this.g=Nt(A[3]||"",!0),Zi(this,A[4]),this.l=Nt(A[5]||"",!0),ea(this,A[6]||"",!0),this.m=Nt(A[7]||"")):(this.h=!1,this.i=new Ys(null,this.h))}_i.prototype.toString=function(){var p=[],A=this.j;A&&p.push(ra(A,Yo,!0),":");var L=this.g;return(L||A=="file")&&(p.push("//"),(A=this.o)&&p.push(ra(A,Yo,!0),"@"),p.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&p.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&p.push("/"),p.push(ra(L,L.charAt(0)=="/"?c0:l0,!0))),(L=this.i.toString())&&p.push("?",L),(L=this.m)&&p.push("#",ra(L,hc)),p.join("")};function Xn(p){return new _i(p)}function Ya(p,A,L){p.j=L?Nt(A,!0):A,p.j&&(p.j=p.j.replace(/:$/,""))}function Zi(p,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);p.s=A}else p.s=null}function ea(p,A,L){A instanceof Ys?(p.i=A,Qs(p.i,p.h)):(L||(A=ra(A,u0)),p.i=new Ys(A,p.h))}function er(p,A,L){p.i.set(A,L)}function ta(p){return er(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Nt(p,A){return p?A?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ra(p,A,L){return typeof p=="string"?(p=encodeURI(p).replace(A,o0),L&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function o0(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Yo=/[#\/\?@]/g,l0=/[#\?:]/g,c0=/[#\?]/g,u0=/[#\?@]/g,hc=/#/g;function Ys(p,A){this.h=this.g=null,this.i=p||null,this.j=!!A}function Qr(p){p.g||(p.g=new Map,p.h=0,p.i&&Vh(p.i,function(A,L){p.add(decodeURIComponent(A.replace(/\+/g," ")),L)}))}r=Ys.prototype,r.add=function(p,A){Qr(this),this.i=null,p=fs(this,p);var L=this.g.get(p);return L||this.g.set(p,L=[]),L.push(A),this.h+=1,this};function Ss(p,A){Qr(p),A=fs(p,A),p.g.has(A)&&(p.i=null,p.h-=p.g.get(A).length,p.g.delete(A))}function Ns(p,A){return Qr(p),A=fs(p,A),p.g.has(A)}r.forEach=function(p,A){Qr(this),this.g.forEach(function(L,K){L.forEach(function(he){p.call(A,he,K,this)},this)},this)},r.na=function(){Qr(this);const p=Array.from(this.g.values()),A=Array.from(this.g.keys()),L=[];for(let K=0;K<A.length;K++){const he=p[K];for(let Te=0;Te<he.length;Te++)L.push(A[K])}return L},r.V=function(p){Qr(this);let A=[];if(typeof p=="string")Ns(this,p)&&(A=A.concat(this.g.get(fs(this,p))));else{p=Array.from(this.g.values());for(let L=0;L<p.length;L++)A=A.concat(p[L])}return A},r.set=function(p,A){return Qr(this),this.i=null,p=fs(this,p),Ns(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[A]),this.h+=1,this},r.get=function(p,A){return p?(p=this.V(p),0<p.length?String(p[0]):A):A};function na(p,A,L){Ss(p,A),0<L.length&&(p.i=null,p.g.set(fs(p,A),_(L)),p.h+=L.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],A=Array.from(this.g.keys());for(var L=0;L<A.length;L++){var K=A[L];const Te=encodeURIComponent(String(K)),qe=this.V(K);for(K=0;K<qe.length;K++){var he=Te;qe[K]!==""&&(he+="="+encodeURIComponent(String(qe[K]))),p.push(he)}}return this.i=p.join("&")};function fs(p,A){return A=String(A),p.j&&(A=A.toLowerCase()),A}function Qs(p,A){A&&!p.j&&(Qr(p),p.i=null,p.g.forEach(function(L,K){var he=K.toLowerCase();K!=he&&(Ss(this,K),na(this,he,L))},p)),p.j=A}function Uh(p,A){const L=new Lr;if(u.Image){const K=new Image;K.onload=y(Pn,L,"TestLoadImage: loaded",!0,A,K),K.onerror=y(Pn,L,"TestLoadImage: error",!1,A,K),K.onabort=y(Pn,L,"TestLoadImage: abort",!1,A,K),K.ontimeout=y(Pn,L,"TestLoadImage: timeout",!1,A,K),u.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=p}else A(!1)}function d0(p,A){const L=new Lr,K=new AbortController,he=setTimeout(()=>{K.abort(),Pn(L,"TestPingServer: timeout",!1,A)},1e4);fetch(p,{signal:K.signal}).then(Te=>{clearTimeout(he),Te.ok?Pn(L,"TestPingServer: ok",!0,A):Pn(L,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(he),Pn(L,"TestPingServer: error",!1,A)})}function Pn(p,A,L,K,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),K(L)}catch{}}function zh(){this.g=new Bt}function f0(p,A,L){const K=L||"";try{Ji(p,function(he,Te){let qe=he;h(he)&&(qe=Yr(he)),A.push(K+Te+"="+encodeURIComponent(qe))})}catch(he){throw A.push(K+"type="+encodeURIComponent("_badmap")),he}}function Ei(p){this.l=p.Ub||null,this.j=p.eb||!1}E(Ei,Ht),Ei.prototype.g=function(){return new Qa(this.l,this.j)},Ei.prototype.i=(function(p){return function(){return p}})({});function Qa(p,A){Ot.call(this),this.D=p,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Qa,Ot),r=Qa.prototype,r.open=function(p,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=A,this.readyState=1,Rs(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(A.body=p),(this.D||u).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},r.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;h0(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function h0(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}r.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var A=p.value?p.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!p.done}))&&(this.response=this.responseText+=A)}p.done?Is(this):Rs(this),this.readyState==3&&h0(this)}},r.Ra=function(p){this.g&&(this.response=this.responseText=p,Is(this))},r.Qa=function(p){this.g&&(this.response=p,Is(this))},r.ga=function(){this.g&&Is(this)};function Is(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Rs(p)}r.setRequestHeader=function(p,A){this.u.append(p,A)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],A=this.h.entries();for(var L=A.next();!L.done;)L=L.value,p.push(L[0]+": "+L[1]),L=A.next();return p.join(`\r
`)};function Rs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function wi(p){let A="";return W(p,function(L,K){A+=K,A+=":",A+=L,A+=`\r
`}),A}function sa(p,A,L){e:{for(K in L){var K=!1;break e}K=!0}K||(L=wi(L),typeof p=="string"?L!=null&&encodeURIComponent(String(L)):er(p,A,L))}function dr(p){Ot.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(dr,Ot);var $h=/^https?$/i,mc=["POST","PUT"];r=dr.prototype,r.Ha=function(p){this.J=p},r.ea=function(p,A,L,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);A=A?A.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ee.g(),this.v=this.o?wn(this.o):wn(ee),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(A,String(p),!0),this.B=!1}catch(Te){Ja(this,Te);return}if(p=L||"",L=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var he in K)L.set(he,K[he]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const Te of K.keys())L.set(Te,K.get(Te));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(L.keys()).find(Te=>Te.toLowerCase()=="content-type"),he=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(mc,A,void 0))||K||he||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Te,qe]of L)this.g.setRequestHeader(Te,qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jo(this),this.u=!0,this.g.send(p),this.u=!1}catch(Te){Ja(this,Te)}};function Ja(p,A){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=A,p.m=5,Qo(p),Yn(p)}function Qo(p){p.A||(p.A=!0,fe(p,"complete"),fe(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,fe(this,"complete"),fe(this,"abort"),Yn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yn(this,!0)),dr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?pc(this):this.bb())},r.bb=function(){pc(this)};function pc(p){if(p.h&&typeof o<"u"&&(!p.v[1]||Fn(p)!=4||p.Z()!=2)){if(p.u&&Fn(p)==4)et(p.Ea,0,p);else if(fe(p,"readystatechange"),Fn(p)==4){p.h=!1;try{const qe=p.Z();e:switch(qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var L;if(!(L=A)){var K;if(K=qe===0){var he=String(p.D).match(Xa)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),K=!$h.test(he?he.toLowerCase():"")}L=K}if(L)fe(p,"complete"),fe(p,"success");else{p.m=6;try{var Te=2<Fn(p)?p.g.statusText:""}catch{Te=""}p.l=Te+" ["+p.Z()+"]",Qo(p)}}finally{Yn(p)}}}}function Yn(p,A){if(p.g){Jo(p);const L=p.g,K=p.v[0]?()=>{}:null;p.g=null,p.v=null,A||fe(p,"ready");try{L.onreadystatechange=K}catch{}}}function Jo(p){p.I&&(u.clearTimeout(p.I),p.I=null)}r.isActive=function(){return!!this.g};function Fn(p){return p.g?p.g.readyState:0}r.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(p){if(this.g){var A=this.g.responseText;return p&&A.indexOf(p)==0&&(A=A.substring(p.length)),ut(A)}};function gc(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Zo(p){const A={};p=(p.g&&2<=Fn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<p.length;K++){if(k(p[K]))continue;var L=D(p[K]);const he=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const Te=A[he]||[];A[he]=Te,Te.push(L)}N(A,function(K){return K.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(p,A,L){return L&&L.internalChannelParams&&L.internalChannelParams[p]||A}function xc(p){this.Aa=0,this.i=[],this.j=new Lr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,p),this.cb=Js("retryDelaySeedMs",1e4,p),this.Wa=Js("forwardChannelMaxRetries",2,p),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Kn(p&&p.concurrentRequestLimit),this.Da=new zh,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=xc.prototype,r.la=8,r.G=1,r.connect=function(p,A,L,K){sr(0),this.W=p,this.H=A||{},L&&K!==void 0&&(this.H.OSID=L,this.H.OAID=K),this.F=this.X,this.I=x0(this,null,this.W),Zs(this)};function Jr(p){if(el(p),p.G==3){var A=p.U++,L=Xn(p.I);if(er(L,"SID",p.K),er(L,"RID",A),er(L,"TYPE","terminate"),bi(p,L),A=new Ce(p,p.j,A),A.L=2,A.v=ta(Xn(L)),L=!1,u.navigator&&u.navigator.sendBeacon)try{L=u.navigator.sendBeacon(A.v.toString(),"")}catch{}!L&&u.Image&&(new Image().src=A.v,L=!0),L||(A.g=v0(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Be(A)}g0(p)}function ks(p){p.g&&(vc(p),p.g.cancel(),p.g=null)}function el(p){ks(p),p.u&&(u.clearTimeout(p.u),p.u=null),nl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function Zs(p){if(!_r(p.h)&&!p.s){p.s=!0;var A=p.Ga;ie||Q(),oe||(ie(),oe=!0),de.add(A,p),p.B=0}}function Hh(p,A){return Qi(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=A.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Wt(x(p.Ga,p,A),p0(p,p.B)),p.B++,!0)}r.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const he=new Ce(this,this.j,p);let Te=this.o;if(this.S&&(Te?(Te=I(Te),C(Te,this.S)):Te=this.S),this.m!==null||this.O||(he.H=Te,Te=null),this.P)e:{for(var A=0,L=0;L<this.i.length;L++){t:{var K=this.i[L];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(A+=K,4096<A){A=L;break e}if(A===4096||L===this.i.length-1){A=L+1;break e}}A=1e3}else A=1e3;A=ia(this,he,A),L=Xn(this.I),er(L,"RID",p),er(L,"CVER",22),this.D&&er(L,"X-HTTP-Session-Id",this.D),bi(this,L),Te&&(this.O?A="headers="+encodeURIComponent(String(wi(Te)))+"&"+A:this.m&&sa(L,this.m,Te)),fc(this.h,he),this.Ua&&er(L,"TYPE","init"),this.P?(er(L,"$req",A),er(L,"SID","null"),he.T=!0,je(he,L,null)):je(he,L,A),this.G=2}}else this.G==3&&(p?tl(this,p):this.i.length==0||_r(this.h)||tl(this))};function tl(p,A){var L;A?L=A.l:L=p.U++;const K=Xn(p.I);er(K,"SID",p.K),er(K,"RID",L),er(K,"AID",p.T),bi(p,K),p.m&&p.o&&sa(K,p.m,p.o),L=new Ce(p,p.j,L,p.B+1),p.m===null&&(L.H=p.o),A&&(p.i=A.D.concat(p.i)),A=ia(p,L,1e3),L.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),fc(p.h,L),je(L,K,A)}function bi(p,A){p.H&&W(p.H,function(L,K){er(A,K,L)}),p.l&&Ji({},function(L,K){er(A,K,L)})}function ia(p,A,L){L=Math.min(p.i.length,L);var K=p.l?x(p.l.Na,p.l,p):null;e:{var he=p.i;let Te=-1;for(;;){const qe=["count="+L];Te==-1?0<L?(Te=he[0].g,qe.push("ofs="+Te)):Te=0:qe.push("ofs="+Te);let Gt=!0;for(let Pr=0;Pr<L;Pr++){let Dt=he[Pr].g;const Mr=he[Pr].map;if(Dt-=Te,0>Dt)Te=Math.max(0,he[Pr].g-100),Gt=!1;else try{f0(Mr,qe,"req"+Dt+"_")}catch{K&&K(Mr)}}if(Gt){K=qe.join("&");break e}}}return p=p.i.splice(0,L),A.D=p,K}function Za(p){if(!p.g&&!p.u){p.Y=1;var A=p.Fa;ie||Q(),oe||(ie(),oe=!0),de.add(A,p),p.v=0}}function rl(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Wt(x(p.Fa,p),p0(p,p.v)),p.v++,!0)}r.Fa=function(){if(this.u=null,m0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Wt(x(this.ab,this),p)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sr(10),ks(this),m0(this))};function vc(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function m0(p){p.g=new Ce(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var A=Xn(p.qa);er(A,"RID","rpc"),er(A,"SID",p.K),er(A,"AID",p.T),er(A,"CI",p.F?"0":"1"),!p.F&&p.ja&&er(A,"TO",p.ja),er(A,"TYPE","xmlhttp"),bi(p,A),p.m&&p.o&&sa(A,p.m,p.o),p.L&&(p.g.I=p.L);var L=p.g;p=p.ia,L.L=1,L.v=ta(Xn(A)),L.m=null,L.P=!0,He(L,p)}r.Za=function(){this.C!=null&&(this.C=null,ks(this),rl(this),sr(19))};function nl(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function sl(p,A){var L=null;if(p.g==A){nl(p),vc(p),p.g=null;var K=2}else if(ir(p.h,A))L=A.D,i0(p.h,A),K=1;else return;if(p.G!=0){if(A.o)if(K==1){L=A.m?A.m.length:0,A=Date.now()-A.F;var he=p.B;K=us(),fe(K,new Cs(K,L)),Zs(p)}else Za(p);else if(he=A.s,he==3||he==0&&0<A.X||!(K==1&&Hh(p,A)||K==2&&rl(p)))switch(L&&0<L.length&&(A=p.h,A.i=A.i.concat(L)),he){case 1:Ti(p,5);break;case 4:Ti(p,10);break;case 3:Ti(p,6);break;default:Ti(p,2)}}}function p0(p,A){let L=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(L*=2),L*A}function Ti(p,A){if(p.j.info("Error code "+A),A==2){var L=x(p.fb,p),K=p.Xa;const he=!K;K=new _i(K||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ya(K,"https"),ta(K),he?Uh(K.toString(),L):d0(K.toString(),L)}else sr(2);p.G=0,p.l&&p.l.sa(A),g0(p),el(p)}r.fb=function(p){p?(this.j.info("Successfully pinged google.com"),sr(2)):(this.j.info("Failed to ping google.com"),sr(1))};function g0(p){if(p.G=0,p.ka=[],p.l){const A=a0(p.h);(A.length!=0||p.i.length!=0)&&(w(p.ka,A),w(p.ka,p.i),p.h.i.length=0,_(p.i),p.i.length=0),p.l.ra()}}function x0(p,A,L){var K=L instanceof _i?Xn(L):new _i(L);if(K.g!="")A&&(K.g=A+"."+K.g),Zi(K,K.s);else{var he=u.location;K=he.protocol,A=A?A+"."+he.hostname:he.hostname,he=+he.port;var Te=new _i(null);K&&Ya(Te,K),A&&(Te.g=A),he&&Zi(Te,he),L&&(Te.l=L),K=Te}return L=p.D,A=p.ya,L&&A&&er(K,L,A),er(K,"VER",p.la),bi(p,K),K}function v0(p,A,L){if(A&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=p.Ca&&!p.pa?new dr(new Ei({eb:L})):new dr(p.pa),A.Ha(p.J),A}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function yc(){}r=yc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function il(){}il.prototype.g=function(p,A){return new Tn(p,A)};function Tn(p,A){Ot.call(this),this.g=new xc(A),this.l=p,this.h=A&&A.messageUrlParams||null,p=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(p?p["X-WebChannel-Content-Type"]=A.messageContentType:p={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(p?p["X-WebChannel-Client-Profile"]=A.va:p={"X-WebChannel-Client-Profile":A.va}),this.g.S=p,(p=A&&A.Sb)&&!k(p)&&(this.g.m=p),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!k(A)&&(this.g.D=A,p=this.h,p!==null&&A in p&&(p=this.h,A in p&&delete p[A])),this.j=new ei(this)}E(Tn,Ot),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){Jr(this.g)},Tn.prototype.o=function(p){var A=this.g;if(typeof p=="string"){var L={};L.__data__=p,p=L}else this.u&&(L={},L.__data__=Yr(p),p=L);A.i.push(new Xs(A.Ya++,p)),A.G==3&&Zs(A)},Tn.prototype.N=function(){this.g.l=null,delete this.j,Jr(this.g),delete this.g,Tn.aa.N.call(this)};function y0(p){bn.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var A=p.__sm__;if(A){e:{for(const L in A){p=L;break e}p=void 0}(this.i=p)&&(p=this.i,A=A!==null&&p in A?A[p]:void 0),this.data=A}else this.data=p}E(y0,bn);function _0(){qn.call(this),this.status=1}E(_0,qn);function ei(p){this.g=p}E(ei,yc),ei.prototype.ua=function(){fe(this.g,"a")},ei.prototype.ta=function(p){fe(this.g,new y0(p))},ei.prototype.sa=function(p){fe(this.g,new _0)},ei.prototype.ra=function(){fe(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,Xw=function(){return new il},Kw=function(){return us()},Gw=Dn,gg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Y.NO_ERROR=0,Y.TIMEOUT=8,Y.HTTP_ERROR=6,kd=Y,Z.COMPLETE="complete",qw=Z,kn.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,Yc=kn,dr.prototype.listenOnce=dr.prototype.L,dr.prototype.getLastError=dr.prototype.Ka,dr.prototype.getLastErrorCode=dr.prototype.Ba,dr.prototype.getStatus=dr.prototype.Z,dr.prototype.getResponseJson=dr.prototype.Oa,dr.prototype.getResponseText=dr.prototype.oa,dr.prototype.send=dr.prototype.ea,dr.prototype.setWithCredentials=dr.prototype.Ha,Ww=dr}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});const r_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new ah("@firebase/firestore");function Hc(){return Eo.logLevel}function it(r,...e){if(Eo.logLevel<=It.DEBUG){const t=e.map(Xg);Eo.debug(`Firestore (${rc}): ${r}`,...t)}}function Hi(r,...e){if(Eo.logLevel<=It.ERROR){const t=e.map(Xg);Eo.error(`Firestore (${rc}): ${r}`,...t)}}function wo(r,...e){if(Eo.logLevel<=It.WARN){const t=e.map(Xg);Eo.warn(`Firestore (${rc}): ${r}`,...t)}}function Xg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r="Unexpected state"){const e=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+r;throw Hi(e),new Error(e)}function Qt(r,e){r||vt()}function Et(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends qs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gn.UNAUTHENTICATED)))}shutdown(){}}class oI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lI{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qt(this.o===void 0);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let i=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Oi,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Oi)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Qt(typeof n.accessToken=="string"),new Yw(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string"),new gn(e)}}class cI{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uI{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new cI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qt(this.o===void 0);const n=i=>{i.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,it("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const s=i=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qt(typeof t.token=="string"),this.R=t.token,new dI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=hI(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<t&&(n+=e.charAt(s[i]%e.length))}return n}}function Ut(r,e){return r<e?-1:r>e?1:0}function Gl(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qe(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qe(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Qe(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Rr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Rr(0,0))}static max(){return new _t(new Rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t,n){t===void 0?t=0:t>e.length&&vt(),n===void 0?n=e.length-t:n>e.length-t&&vt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return vu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vu?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=e.get(s),o=t.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class lr extends vu{construct(e,t,n){return new lr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Qe(Re.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new lr(t)}static emptyPath(){return new lr([])}}const mI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hr extends vu{construct(e,t,n){return new Hr(e,t,n)}static isValidIdentifier(e){return mI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Hr(["__name__"])}static fromServerFormat(e){const t=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Qe(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Qe(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Qe(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(n+=u,s++):(i(),s++)}if(i(),o)throw new Qe(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hr(t)}static emptyPath(){return new Hr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.path=e}static fromPath(e){return new ct(lr.fromString(e))}static fromName(e){return new ct(lr.fromString(e).popFirst(5))}static empty(){return new ct(lr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new lr(e.slice()))}}function pI(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=_t.fromTimestamp(n===1e9?new Rr(t+1,0):new Rr(t,n));return new Oa(s,ct.empty(),e)}function gI(r){return new Oa(r.readTime,r.key,-1)}class Oa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Oa(_t.min(),ct.empty(),-1)}static max(){return new Oa(_t.max(),ct.empty(),-1)}}function xI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ct.comparator(r.documentKey,e.documentKey),t!==0?t:Ut(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(r){if(r.code!==Re.FAILED_PRECONDITION||r.message!==vI)throw r;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Oe(((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Oe?t:Oe.resolve(t)}catch(t){return Oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Oe.reject(t)}static resolve(e){return new Oe(((t,n)=>{t(e)}))}static reject(e){return new Oe(((t,n)=>{n(e)}))}static waitFor(e){return new Oe(((t,n)=>{let s=0,i=0,o=!1;e.forEach((u=>{++s,u.next((()=>{++i,o&&i===s&&t()}),(d=>n(d)))})),o=!0,i===s&&t()}))}static or(e){let t=Oe.resolve(!1);for(const n of e)t=t.next((s=>s?Oe.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,i)=>{n.push(t.call(this,s,i))})),this.waitFor(n)}static mapArray(e,t){return new Oe(((n,s)=>{const i=e.length,o=new Array(i);let u=0;for(let d=0;d<i;d++){const h=d;t(e[h]).next((m=>{o[h]=m,++u,u===i&&n(o)}),(m=>s(m)))}}))}static doWhile(e,t){return new Oe(((n,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):n()};i()}))}}function _I(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Mu(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qg.oe=-1;function oh(r){return r==null}function Cf(r){return r===0&&1/r==-1/0}function EI(r){return typeof r=="number"&&Number.isInteger(r)&&!Cf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Oo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Jw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}}class pd{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=n??nn.RED,this.left=s??nn.EMPTY,this.right=i??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,i){return new nn(e??this.key,t??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return nn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,t,n,s,i){return this}insert(e,t,n){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s_(this.data.getIterator())}getIteratorFrom(e){return new s_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new on(this.comparator);return t.data=e,t}}class s_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.fields=e,e.sort(Hr.comparator)}static empty(){return new as([])}unionWith(e){let t=new on(Hr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new as(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gl(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Zw("Invalid base64 string: "+i):i}})(e);return new Kr(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new Kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kr.EMPTY_BYTE_STRING=new Kr("");const wI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ba(r){if(Qt(!!r),typeof r=="string"){let e=0;const t=wI.exec(r);if(Qt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:wr(r.seconds),nanos:wr(r.nanos)}}function wr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function bo(r){return typeof r=="string"?Kr.fromBase64String(r):Kr.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Zg(r){const e=r.mapValue.fields.__previous_value__;return Jg(e)?Zg(e):e}function yu(r){const e=Ba(r.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,t,n,s,i,o,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h}}class Kl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd={mapValue:{}};function To(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Jg(r)?4:CI(r)?9007199254740991:TI(r)?10:11:vt()}function mi(r,e){if(r===e)return!0;const t=To(r);if(t!==To(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return yu(r).isEqual(yu(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ba(s.timestampValue),u=Ba(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,i){return bo(s.bytesValue).isEqual(bo(i.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,i){return wr(s.geoPointValue.latitude)===wr(i.geoPointValue.latitude)&&wr(s.geoPointValue.longitude)===wr(i.geoPointValue.longitude)})(r,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return wr(s.integerValue)===wr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=wr(s.doubleValue),u=wr(i.doubleValue);return o===u?Cf(o)===Cf(u):isNaN(o)&&isNaN(u)}return!1})(r,e);case 9:return Gl(r.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(n_(o)!==n_(u))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(u[d]===void 0||!mi(o[d],u[d])))return!1;return!0})(r,e);default:return vt()}}function _u(r,e){return(r.values||[]).find((t=>mi(t,e)))!==void 0}function Xl(r,e){if(r===e)return 0;const t=To(r),n=To(e);if(t!==n)return Ut(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(r.booleanValue,e.booleanValue);case 2:return(function(i,o){const u=wr(i.integerValue||i.doubleValue),d=wr(o.integerValue||o.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(r,e);case 3:return i_(r.timestampValue,e.timestampValue);case 4:return i_(yu(r),yu(e));case 5:return Ut(r.stringValue,e.stringValue);case 6:return(function(i,o){const u=bo(i),d=bo(o);return u.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(i,o){const u=i.split("/"),d=o.split("/");for(let h=0;h<u.length&&h<d.length;h++){const m=Ut(u[h],d[h]);if(m!==0)return m}return Ut(u.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(i,o){const u=Ut(wr(i.latitude),wr(o.latitude));return u!==0?u:Ut(wr(i.longitude),wr(o.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return a_(r.arrayValue,e.arrayValue);case 10:return(function(i,o){var u,d,h,m;const v=i.fields||{},x=o.fields||{},y=(u=v.value)===null||u===void 0?void 0:u.arrayValue,E=(d=x.value)===null||d===void 0?void 0:d.arrayValue,_=Ut(((h=y?.values)===null||h===void 0?void 0:h.length)||0,((m=E?.values)===null||m===void 0?void 0:m.length)||0);return _!==0?_:a_(y,E)})(r.mapValue,e.mapValue);case 11:return(function(i,o){if(i===gd.mapValue&&o===gd.mapValue)return 0;if(i===gd.mapValue)return 1;if(o===gd.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),h=o.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let v=0;v<d.length&&v<m.length;++v){const x=Ut(d[v],m[v]);if(x!==0)return x;const y=Xl(u[d[v]],h[m[v]]);if(y!==0)return y}return Ut(d.length,m.length)})(r.mapValue,e.mapValue);default:throw vt()}}function i_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ut(r,e);const t=Ba(r),n=Ba(e),s=Ut(t.seconds,n.seconds);return s!==0?s:Ut(t.nanos,n.nanos)}function a_(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const i=Xl(t[s],n[s]);if(i)return i}return Ut(t.length,n.length)}function Yl(r){return xg(r)}function xg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=Ba(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return bo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ct.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const i of t.values||[])s?s=!1:n+=",",n+=xg(i);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${xg(t.fields[o])}`;return s+"}"})(r.mapValue):vt()}function o_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function vg(r){return!!r&&"integerValue"in r}function ex(r){return!!r&&"arrayValue"in r}function l_(r){return!!r&&"nullValue"in r}function c_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Dd(r){return!!r&&"mapValue"in r}function TI(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function eu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Oo(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=eu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(r.arrayValue.values[t]);return e}return Object.assign({},r)}function CI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Dd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=Hr.emptyPath(),n={},s=[];e.forEach(((o,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=u.popLast()}o?n[u.lastSegment()]=eu(o):s.push(u.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,s)}delete(e){const t=this.field(e.popLast());Dd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Dd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Oo(t,((s,i)=>e[s]=i));for(const s of n)delete e[s]}clone(){return new Un(eu(this.value))}}function e4(r){const e=[];return Oo(r.fields,((t,n)=>{const s=new Hr([t]);if(Dd(n)){const i=e4(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new as(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t,n,s,i,o,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new xn(e,0,_t.min(),_t.min(),_t.min(),Un.empty(),0)}static newFoundDocument(e,t,n,s){return new xn(e,1,t,_t.min(),n,s,0)}static newNoDocument(e,t){return new xn(e,2,t,_t.min(),_t.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,_t.min(),_t.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this.position=e,this.inclusive=t}}function u_(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const i=e[s],o=r.position[s];if(i.field.isKeyField()?n=ct.comparator(ct.fromName(o.referenceValue),t.key):n=Xl(o,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function d_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!mi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,t="asc"){this.field=e,this.dir=t}}function AI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{}class Nr extends t4{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new NI(e,t,n):t==="array-contains"?new kI(e,n):t==="in"?new DI(e,n):t==="not-in"?new PI(e,n):t==="array-contains-any"?new FI(e,n):new Nr(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new II(e,n):new RI(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Xl(t,this.value)):t!==null&&To(this.value)===To(t)&&this.matchesComparison(Xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hs extends t4{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Hs(e,t)}matches(e){return r4(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function r4(r){return r.op==="and"}function n4(r){return SI(r)&&r4(r)}function SI(r){for(const e of r.filters)if(e instanceof Hs)return!1;return!0}function yg(r){if(r instanceof Nr)return r.field.canonicalString()+r.op.toString()+Yl(r.value);if(n4(r))return r.filters.map((e=>yg(e))).join(",");{const e=r.filters.map((t=>yg(t))).join(",");return`${r.op}(${e})`}}function s4(r,e){return r instanceof Nr?(function(n,s){return s instanceof Nr&&n.op===s.op&&n.field.isEqual(s.field)&&mi(n.value,s.value)})(r,e):r instanceof Hs?(function(n,s){return s instanceof Hs&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((i,o,u)=>i&&s4(o,s.filters[u])),!0):!1})(r,e):void vt()}function i4(r){return r instanceof Nr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Yl(t.value)}`})(r):r instanceof Hs?(function(t){return t.op.toString()+" {"+t.getFilters().map(i4).join(" ,")+"}"})(r):"Filter"}class NI extends Nr{constructor(e,t,n){super(e,t,n),this.key=ct.fromName(n.referenceValue)}matches(e){const t=ct.comparator(e.key,this.key);return this.matchesComparison(t)}}class II extends Nr{constructor(e,t){super(e,"in",t),this.keys=a4("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class RI extends Nr{constructor(e,t){super(e,"not-in",t),this.keys=a4("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function a4(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((n=>ct.fromName(n.referenceValue)))}class kI extends Nr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ex(t)&&_u(t.arrayValue,this.value)}}class DI extends Nr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_u(this.value.arrayValue,t)}}class PI extends Nr{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!_u(this.value.arrayValue,t)}}class FI extends Nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ex(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>_u(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t=null,n=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function f_(r,e=null,t=[],n=[],s=null,i=null,o=null){return new jI(r,e,t,n,s,i,o)}function tx(r){const e=Et(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>yg(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),oh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Yl(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Yl(n))).join(",")),e.ue=t}return e.ue}function rx(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!AI(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!s4(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!d_(r.startAt,e.startAt)&&d_(r.endAt,e.endAt)}function _g(r){return ct.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t=null,n=[],s=[],i=null,o="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function OI(r,e,t,n,s,i,o,u){return new nc(r,e,t,n,s,i,o,u)}function lh(r){return new nc(r)}function h_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function o4(r){return r.collectionGroup!==null}function tu(r){const e=Et(r);if(e.ce===null){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new on(Hr.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Eu(i,n))})),t.has(Hr.keyField().canonicalString())||e.ce.push(new Eu(Hr.keyField(),n))}return e.ce}function ci(r){const e=Et(r);return e.le||(e.le=BI(e,tu(r))),e.le}function BI(r,e){if(r.limitType==="F")return f_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Eu(s.field,i)}));const t=r.endAt?new Af(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Af(r.startAt.position,r.startAt.inclusive):null;return f_(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Eg(r,e){const t=r.filters.concat([e]);return new nc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function wg(r,e,t){return new nc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ch(r,e){return rx(ci(r),ci(e))&&r.limitType===e.limitType}function l4(r){return`${tx(ci(r))}|lt:${r.limitType}`}function kl(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>i4(s))).join(", ")}]`),oh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Yl(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Yl(s))).join(",")),`Target(${n})`})(ci(r))}; limitType=${r.limitType})`}function uh(r,e){return e.isFoundDocument()&&(function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ct.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(r,e)&&(function(n,s){for(const i of tu(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(o,u,d){const h=u_(o,u,d);return o.inclusive?h<=0:h<0})(n.startAt,tu(n),s)||n.endAt&&!(function(o,u,d){const h=u_(o,u,d);return o.inclusive?h>=0:h>0})(n.endAt,tu(n),s))})(r,e)}function LI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function c4(r){return(e,t)=>{let n=!1;for(const s of tu(r)){const i=MI(s,e,t);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function MI(r,e,t){const n=r.field.isKeyField()?ct.comparator(e.key,t.key):(function(i,o,u){const d=o.data.field(i),h=u.data.field(i);return d!==null&&h!==null?Xl(d,h):vt()})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,((t,n)=>{for(const[s,i]of n)e(s,i)}))}isEmpty(){return Jw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new gr(ct.comparator);function Wi(){return VI}const u4=new gr(ct.comparator);function Qc(...r){let e=u4;for(const t of r)e=e.insert(t.key,t);return e}function d4(r){let e=u4;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function xo(){return ru()}function f4(){return ru()}function ru(){return new sc((r=>r.toString()),((r,e)=>r.isEqual(e)))}const UI=new gr(ct.comparator),zI=new on(ct.comparator);function St(...r){let e=zI;for(const t of r)e=e.add(t);return e}const $I=new on(Ut);function HI(){return $I}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cf(e)?"-0":e}}function h4(r){return{integerValue:""+r}}function m4(r,e){return EI(e)?h4(e):nx(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function WI(r,e,t){return r instanceof wu?(function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Jg(i)&&(i=Zg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}})(t,e):r instanceof bu?g4(r,e):r instanceof Tu?x4(r,e):(function(s,i){const o=p4(s,i),u=m_(o)+m_(s.Pe);return vg(o)&&vg(s.Pe)?h4(u):nx(s.serializer,u)})(r,e)}function qI(r,e,t){return r instanceof bu?g4(r,e):r instanceof Tu?x4(r,e):t}function p4(r,e){return r instanceof Cu?(function(n){return vg(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class wu extends dh{}class bu extends dh{constructor(e){super(),this.elements=e}}function g4(r,e){const t=v4(e);for(const n of r.elements)t.some((s=>mi(s,n)))||t.push(n);return{arrayValue:{values:t}}}class Tu extends dh{constructor(e){super(),this.elements=e}}function x4(r,e){let t=v4(e);for(const n of r.elements)t=t.filter((s=>!mi(s,n)));return{arrayValue:{values:t}}}class Cu extends dh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function m_(r){return wr(r.integerValue||r.doubleValue)}function v4(r){return ex(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,t){this.field=e,this.transform=t}}function GI(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof bu&&s instanceof bu||n instanceof Tu&&s instanceof Tu?Gl(n.elements,s.elements,mi):n instanceof Cu&&s instanceof Cu?mi(n.Pe,s.Pe):n instanceof wu&&s instanceof wu})(r.transform,e.transform)}class KI{constructor(e,t){this.version=e,this.transformResults=t}}class bs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bs}static exists(e){return new bs(void 0,e)}static updateTime(e){return new bs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class fh{}function _4(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new sx(r.key,bs.none()):new Vu(r.key,r.data,bs.none());{const t=r.data,n=Un.empty();let s=new on(Hr.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new Ha(r.key,n,new as(s.toArray()),bs.none())}}function XI(r,e,t){r instanceof Vu?(function(s,i,o){const u=s.value.clone(),d=g_(s.fieldTransforms,i,o.transformResults);u.setAll(d),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(r,e,t):r instanceof Ha?(function(s,i,o){if(!Pd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=g_(s.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(E4(s)),d.setAll(u),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(r,e,t):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function nu(r,e,t,n){return r instanceof Vu?(function(i,o,u,d){if(!Pd(i.precondition,o))return u;const h=i.value.clone(),m=x_(i.fieldTransforms,d,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(r,e,t,n):r instanceof Ha?(function(i,o,u,d){if(!Pd(i.precondition,o))return u;const h=x_(i.fieldTransforms,d,o),m=o.data;return m.setAll(E4(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((v=>v.field)))})(r,e,t,n):(function(i,o,u){return Pd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(r,e,t)}function YI(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),i=p4(n.transform,s||null);i!=null&&(t===null&&(t=Un.empty()),t.set(n.field,i))}return t||null}function p_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Gl(n,s,((i,o)=>GI(i,o)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Vu extends fh{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ha extends fh{constructor(e,t,n,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function E4(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function g_(r,e,t){const n=new Map;Qt(r.length===t.length);for(let s=0;s<t.length;s++){const i=r[s],o=i.transform,u=e.data.field(i.field);n.set(i.field,qI(o,u,t[s]))}return n}function x_(r,e,t){const n=new Map;for(const s of r){const i=s.transform,o=t.data.field(s.field);n.set(s.field,WI(i,o,e))}return n}class sx extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QI extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&XI(i,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=nu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=nu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=f4();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=t.has(s.key)?null:u;const d=_4(o,u);d!==null&&n.set(s.key,d),o.isValidDocument()||o.convertToNoDocument(_t.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),St())}isEqual(e){return this.batchId===e.batchId&&Gl(this.mutations,e.mutations,((t,n)=>p_(t,n)))&&Gl(this.baseMutations,e.baseMutations,((t,n)=>p_(t,n)))}}class ix{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Qt(e.mutations.length===n.length);let s=(function(){return UI})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new ix(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sr,Pt;function t6(r){switch(r){default:return vt();case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0}}function w4(r){if(r===void 0)return Hi("GRPC error has no .code"),Re.UNKNOWN;switch(r){case Sr.OK:return Re.OK;case Sr.CANCELLED:return Re.CANCELLED;case Sr.UNKNOWN:return Re.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return Re.INTERNAL;case Sr.UNAVAILABLE:return Re.UNAVAILABLE;case Sr.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case Sr.NOT_FOUND:return Re.NOT_FOUND;case Sr.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case Sr.ABORTED:return Re.ABORTED;case Sr.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case Sr.DATA_LOSS:return Re.DATA_LOSS;default:return vt()}}(Pt=Sr||(Sr={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=new yo([4294967295,4294967295],0);function v_(r){const e=r6().encode(r),t=new Hw;return t.update(e),new Uint8Array(t.digest())}function y_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yo([t,n],0),new yo([s,i],0)]}class ax{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Jc(`Invalid padding: ${t}`);if(n<0)throw new Jc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Jc(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Jc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yo.fromNumber(this.Ie)}Ee(e,t,n){let s=e.add(t.multiply(yo.fromNumber(n)));return s.compare(n6)===1&&(s=new yo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=v_(e),[n,s]=y_(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);if(!this.de(o))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ax(i,s,t);return n.forEach((u=>o.insert(u))),o}insert(e){if(this.Ie===0)return;const t=v_(e),[n,s]=y_(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t,n,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Uu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new hh(_t.min(),s,new gr(Ut),Wi(),St())}}class Uu{constructor(e,t,n,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Uu(n,t,St(),St(),St())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t,n,s){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=s}}class b4{constructor(e,t){this.targetId=e,this.me=t}}class T4{constructor(e,t,n=Kr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class __{constructor(){this.fe=0,this.ge=w_(),this.pe=Kr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=St(),t=St(),n=St();return this.ge.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:vt()}})),new Uu(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=w_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class s6{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wi(),this.qe=E_(),this.Qe=new gr(Ut)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:vt()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((n,s)=>{this.ze(s)&&t(s)}))}He(e){const t=e.targetId,n=e.me.count,s=this.Je(t);if(s){const i=s.target;if(_g(i))if(n===0){const o=new ct(i.path);this.Ue(t,o,xn.newNoDocument(o,_t.min()))}else Qt(n===1);else{const o=this.Ye(t);if(o!==n){const u=this.Ze(e),d=u?this.Xe(u,e,o):1;if(d!==0){this.je(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=t;let o,u;try{o=bo(n).toUint8Array()}catch(d){if(d instanceof Zw)return wo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new ax(o,s,i)}catch(d){return wo(d instanceof Jc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let s=0;return n.forEach((i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(t,i,null),s++)})),s}rt(e){const t=new Map;this.Be.forEach(((i,o)=>{const u=this.Je(o);if(u){if(i.current&&_g(u.target)){const d=new ct(u.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,xn.newNoDocument(d,e))}i.be&&(t.set(o,i.ve()),i.Ce())}}));let n=St();this.qe.forEach(((i,o)=>{let u=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(i))})),this.ke.forEach(((i,o)=>o.setReadTime(e)));const s=new hh(e,t,this.Qe,this.ke,n);return this.ke=Wi(),this.qe=E_(),this.Qe=new gr(Ut),s}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new __,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new on(Ut),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||it("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new __),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function E_(){return new gr(ct.comparator)}function w_(){return new gr(ct.comparator)}const i6={asc:"ASCENDING",desc:"DESCENDING"},a6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o6={and:"AND",or:"OR"};class l6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bg(r,e){return r.useProto3Json||oh(e)?e:{value:e}}function Sf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C4(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function c6(r,e){return Sf(r,e.toTimestamp())}function ui(r){return Qt(!!r),_t.fromTimestamp((function(t){const n=Ba(t);return new Rr(n.seconds,n.nanos)})(r))}function ox(r,e){return Tg(r,e).canonicalString()}function Tg(r,e){const t=(function(s){return new lr(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function A4(r){const e=lr.fromString(r);return Qt(k4(e)),e}function Cg(r,e){return ox(r.databaseId,e.path)}function wp(r,e){const t=A4(e);if(t.get(1)!==r.databaseId.projectId)throw new Qe(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Qe(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ct(N4(t))}function S4(r,e){return ox(r.databaseId,e)}function u6(r){const e=A4(r);return e.length===4?lr.emptyPath():N4(e)}function Ag(r){return new lr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function N4(r){return Qt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function b_(r,e,t){return{name:Cg(r,e),fields:t.value.mapValue.fields}}function d6(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:vt()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(h,m){return h.useProto3Json?(Qt(m===void 0||typeof m=="string"),Kr.fromBase64String(m||"")):(Qt(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Kr.fromUint8Array(m||new Uint8Array))})(r,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&(function(h){const m=h.code===void 0?Re.UNKNOWN:w4(h.code);return new Qe(m,h.message||"")})(o);t=new T4(n,s,i,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=wp(r,n.document.name),i=ui(n.document.updateTime),o=n.document.createTime?ui(n.document.createTime):_t.min(),u=new Un({mapValue:{fields:n.document.fields}}),d=xn.newFoundDocument(s,i,o,u),h=n.targetIds||[],m=n.removedTargetIds||[];t=new Fd(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=wp(r,n.document),i=n.readTime?ui(n.readTime):_t.min(),o=xn.newNoDocument(s,i),u=n.removedTargetIds||[];t=new Fd([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=wp(r,n.document),i=n.removedTargetIds||[];t=new Fd([],i,s,null)}else{if(!("filter"in e))return vt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new e6(s,i),u=n.targetId;t=new b4(u,o)}}return t}function f6(r,e){let t;if(e instanceof Vu)t={update:b_(r,e.key,e.value)};else if(e instanceof sx)t={delete:Cg(r,e.key)};else if(e instanceof Ha)t={update:b_(r,e.key,e.data),updateMask:E6(e.fieldMask)};else{if(!(e instanceof QI))return vt();t={verify:Cg(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const u=o.transform;if(u instanceof wu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof bu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Tu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Cu)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw vt()})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:c6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:vt()})(r,e.precondition)),t}function h6(r,e){return r&&r.length>0?(Qt(e!==void 0),r.map((t=>(function(s,i){let o=s.updateTime?ui(s.updateTime):ui(i);return o.isEqual(_t.min())&&(o=ui(i)),new KI(o,s.transformResults||[])})(t,e)))):[]}function m6(r,e){return{documents:[S4(r,e.path)]}}function p6(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=S4(r,s);const i=(function(h){if(h.length!==0)return R4(Hs.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((m=>(function(x){return{field:Dl(x.field),direction:v6(x.dir)}})(m)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=bg(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:t,parent:s}}function g6(r){let e=u6(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Qt(n===1);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];t.where&&(i=(function(v){const x=I4(v);return x instanceof Hs&&n4(x)?x.getFilters():[x]})(t.where));let o=[];t.orderBy&&(o=(function(v){return v.map((x=>(function(E){return new Eu(Pl(E.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(x)))})(t.orderBy));let u=null;t.limit&&(u=(function(v){let x;return x=typeof v=="object"?v.value:v,oh(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(v){const x=!!v.before,y=v.values||[];return new Af(y,x)})(t.startAt));let h=null;return t.endAt&&(h=(function(v){const x=!v.before,y=v.values||[];return new Af(y,x)})(t.endAt)),OI(e,s,o,i,u,"F",d,h)}function x6(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function I4(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Pl(t.unaryFilter.field);return Nr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Pl(t.unaryFilter.field);return Nr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Pl(t.unaryFilter.field);return Nr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pl(t.unaryFilter.field);return Nr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return vt()}})(r):r.fieldFilter!==void 0?(function(t){return Nr.create(Pl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Hs.create(t.compositeFilter.filters.map((n=>I4(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return vt()}})(t.compositeFilter.op))})(r):vt()}function v6(r){return i6[r]}function y6(r){return a6[r]}function _6(r){return o6[r]}function Dl(r){return{fieldPath:r.canonicalString()}}function Pl(r){return Hr.fromServerFormat(r.fieldPath)}function R4(r){return r instanceof Nr?(function(t){if(t.op==="=="){if(c_(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NAN"}};if(l_(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(c_(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NAN"}};if(l_(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(t.field),op:y6(t.op),value:t.value}}})(r):r instanceof Hs?(function(t){const n=t.getFilters().map((s=>R4(s)));return n.length===1?n[0]:{compositeFilter:{op:_6(t.op),filters:n}}})(r):vt()}function E6(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function k4(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,t,n,s,i=_t.min(),o=_t.min(),u=Kr.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Ra(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.ct=e}}function b6(r){const e=g6({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?wg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.un=new C6}addToCollectionParentIndex(e,t){return this.un.add(t),Oe.resolve()}getCollectionParents(e,t){return Oe.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Oe.resolve()}deleteFieldIndex(e,t){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,t){return Oe.resolve()}getDocumentsMatchingTarget(e,t){return Oe.resolve(null)}getIndexType(e,t){return Oe.resolve(0)}getFieldIndexes(e,t){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,t){return Oe.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,t){return Oe.resolve(Oa.min())}updateCollectionGroup(e,t,n){return Oe.resolve()}updateIndexEntries(e,t){return Oe.resolve()}}class C6{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new on(lr.comparator),i=!s.has(n);return this.index[t]=s.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new on(lr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ql(0)}static kn(){return new Ql(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(){this.changes=new sc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Oe.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&nu(n.mutation,s,as.empty(),Rr.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,St()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=St()){const s=xo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((i=>{let o=Qc();return i.forEach(((u,d)=>{o=o.insert(u,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const n=xo();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,St())))}populateOverlays(e,t,n){const s=[];return n.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,u)=>{t.set(o,u)}))}))}computeViews(e,t,n,s){let i=Wi();const o=ru(),u=(function(){return ru()})();return t.forEach(((d,h)=>{const m=n.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Ha)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),nu(m.mutation,h,m.mutation.getFieldMask(),Rr.now())):o.set(h.key,as.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,m)=>o.set(h,m))),t.forEach(((h,m)=>{var v;return u.set(h,new S6(m,(v=o.get(h))!==null&&v!==void 0?v:null))})),u)))}recalculateAndSaveOverlays(e,t){const n=ru();let s=new gr(((o,u)=>o-u)),i=St();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const u of o)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let m=n.get(d)||as.empty();m=u.applyToLocalView(h,m),n.set(d,m);const v=(s.get(u.batchId)||St()).add(d);s=s.insert(u.batchId,v)}))})).next((()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,m=d.value,v=f4();m.forEach((x=>{if(!i.has(x)){const y=_4(t.get(x),n.get(x));y!==null&&v.set(x,y),i=i.add(x)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,v))}return Oe.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(o){return ct.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):o4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-i.size):Oe.resolve(xo());let u=-1,d=i;return o.next((h=>Oe.forEach(h,((m,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),i.get(m)?Oe.resolve():this.remoteDocumentCache.getEntry(e,m).next((x=>{d=d.insert(m,x)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,St()))).next((m=>({batchId:u,changes:d4(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ct(t)).next((n=>{let s=Qc();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const i=t.collectionGroup;let o=Qc();return this.indexManager.getCollectionParents(e,i).next((u=>Oe.forEach(u,(d=>{const h=(function(v,x){return new nc(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,s).next((m=>{m.forEach(((v,x)=>{o=o.insert(v,x)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,s)))).next((o=>{i.forEach(((d,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,xn.newInvalidDocument(m)))}));let u=Qc();return o.forEach(((d,h)=>{const m=i.get(d);m!==void 0&&nu(m.mutation,h,as.empty(),Rr.now()),uh(t,h)&&(u=u.insert(d,h))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Oe.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ui(s.createTime)}})(t)),Oe.resolve()}getNamedQuery(e,t){return Oe.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(s){return{name:s.name,query:b6(s.bundledQuery),readTime:ui(s.readTime)}})(t)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.overlays=new gr(ct.comparator),this.Ir=new Map}getOverlay(e,t){return Oe.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xo();return Oe.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&n.set(s,i)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,i)=>{this.ht(e,t,i)})),Oe.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Oe.resolve()}getOverlaysForCollection(e,t,n){const s=xo(),i=t.length+1,o=new ct(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&s.set(d.getKey(),d)}return Oe.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let i=new gr(((h,m)=>h-m));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let m=i.get(h.largestBatchId);m===null&&(m=xo(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=xo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>u.set(h,m))),!(u.size()>=s)););return Oe.resolve(u)}ht(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new ZI(t,n));let i=this.Ir.get(t);i===void 0&&(i=St(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.sessionToken=Kr.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.Tr=new on($r.Er),this.dr=new on($r.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new $r(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Vr(new $r(e,t))}mr(e,t){e.forEach((n=>this.removeReference(n,t)))}gr(e){const t=new ct(new lr([])),n=new $r(t,e),s=new $r(t,e+1),i=[];return this.dr.forEachInRange([n,s],(o=>{this.Vr(o),i.push(o.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ct(new lr([])),n=new $r(t,e),s=new $r(t,e+1);let i=St();return this.dr.forEachInRange([n,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new $r(e,0),n=this.Tr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class $r{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ct.comparator(e.key,t.key)||Ut(e.wr,t.wr)}static Ar(e,t){return Ut(e.wr,t.wr)||ct.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new on($r.Er)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JI(i,t,n,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new $r(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Oe.resolve(o)}lookupMutationBatch(e,t){return Oe.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.vr(n),i=s<0?0:s;return Oe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new $r(t,0),s=new $r(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],(o=>{const u=this.Dr(o.wr);i.push(u)})),Oe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new on(Ut);return t.forEach((s=>{const i=new $r(s,0),o=new $r(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],(u=>{n=n.add(u.wr)}))})),Oe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let i=n;ct.isDocumentKey(i)||(i=i.child(""));const o=new $r(new ct(i),0);let u=new on(Ut);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===s&&(u=u.add(d.wr)),!0)}),o),Oe.resolve(this.Cr(u))}Cr(e){const t=[];return e.forEach((n=>{const s=this.Dr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Oe.forEach(t.mutations,(s=>{const i=new $r(s.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new $r(t,0),s=this.br.firstAfterOrEqual(n);return Oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.Mr=e,this.docs=(function(){return new gr(ct.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),i=s?s.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Oe.resolve(n?n.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let n=Wi();return t.forEach((s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():xn.newInvalidDocument(s))})),Oe.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let i=Wi();const o=t.path,u=new ct(o.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||xI(gI(m),n)<=0||(s.has(m.key)||uh(t,m))&&(i=i.insert(m.key,m.mutableCopy()))}return Oe.resolve(i)}getAllFromCollectionGroup(e,t,n,s){vt()}Or(e,t){return Oe.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new F6(this)}getSize(e){return Oe.resolve(this.size)}}class F6 extends A6{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)})),Oe.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.persistence=e,this.Nr=new sc((t=>tx(t)),rx),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lx,this.targetCount=0,this.kr=Ql.Bn()}forEachTarget(e,t){return this.Nr.forEach(((n,s)=>t(s))),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Oe.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ql(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Oe.resolve()}updateTargetData(e,t){return this.Kn(t),Oe.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,t,n){let s=0;const i=[];return this.Nr.forEach(((o,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),Oe.waitFor(i).next((()=>s))}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Oe.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Oe.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),Oe.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Oe.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Oe.resolve(n)}containsKey(e,t){return Oe.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Qg(0),this.Kr=!1,this.Kr=!0,this.$r=new k6,this.referenceDelegate=e(this),this.Ur=new j6(this),this.indexManager=new T6,this.remoteDocumentCache=(function(s){return new P6(s)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new w6(t),this.Gr=new I6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new D6(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){it("MemoryPersistence","Starting transaction:",e);const s=new B6(this.Qr.next());return this.referenceDelegate.zr(),n(s).next((i=>this.referenceDelegate.jr(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Hr(e,t){return Oe.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class B6 extends yI{constructor(e){super(),this.currentSequenceNumber=e}}class cx{constructor(e){this.persistence=e,this.Jr=new lx,this.Yr=null}static Zr(e){return new cx(e)}get Xr(){if(this.Yr)return this.Yr;throw vt()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Oe.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Oe.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Oe.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((s=>this.Xr.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.Xr,(n=>{const s=ct.fromPath(n);return this.ei(e,s).next((i=>{i||t.removeEntry(s,_t.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Oe.or([()=>Oe.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=s}static Wi(e,t){let n=St(),s=St();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ux(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return z3()?8:_I(_n())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,s){const i={result:null};return this.Yi(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.Zi(e,t,s,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new L6;return this.Xi(e,t,o).next((u=>{if(i.result=u,this.zi)return this.es(e,t,o,u.size)}))})).next((()=>i.result))}es(e,t,n,s){return n.documentReadCount<this.ji?(Hc()<=It.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",kl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Oe.resolve()):(Hc()<=It.DEBUG&&it("QueryEngine","Query:",kl(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Hc()<=It.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",kl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(t))):Oe.resolve())}Yi(e,t){if(h_(t))return Oe.resolve(null);let n=ci(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=wg(t,null,"F"),n=ci(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=St(...i);return this.Ji.getDocuments(e,o).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(t,u);return this.ns(t,h,o,d.readTime)?this.Yi(e,wg(t,null,"F")):this.rs(e,h,t,d)}))))})))))}Zi(e,t,n,s){return h_(t)||s.isEqual(_t.min())?Oe.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(t,i);return this.ns(t,o,n,s)?Oe.resolve(null):(Hc()<=It.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),kl(t)),this.rs(e,o,t,pI(s,-1)).next((u=>u)))}))}ts(e,t){let n=new on(c4(e));return t.forEach(((s,i)=>{uh(e,i)&&(n=n.add(i))})),n}ns(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,t,n){return Hc()<=It.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",kl(t)),this.Ji.getDocumentsMatchingQuery(e,t,Oa.min(),n)}rs(e,t,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e,t,n,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new gr(Ut),this._s=new sc((i=>tx(i)),rx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N6(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function U6(r,e,t,n){return new V6(r,e,t,n)}async function D4(r,e){const t=Et(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((i=>(s=i,t.ls(e),t.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],u=[];let d=St();for(const h of s){o.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of i){u.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:u})))}))}))}function z6(r,e){const t=Et(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),i=t.cs.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,m){const v=h.batch,x=v.keys();let y=Oe.resolve();return x.forEach((E=>{y=y.next((()=>m.getEntry(d,E))).next((_=>{const w=h.docVersions.get(E);Qt(w!==null),_.version.compareTo(w)<0&&(v.applyToRemoteDocument(_,h),_.isValidDocument()&&(_.setReadTime(h.commitVersion),m.addEntry(_)))}))})),y.next((()=>u.mutationQueue.removeMutationBatch(d,v)))})(t,n,e,i).next((()=>i.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=St();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function P4(r){const e=Et(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function $6(r,e){const t=Et(r),n=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const u=[];e.targetChanges.forEach(((m,v)=>{const x=s.get(v);if(!x)return;u.push(t.Ur.removeMatchingKeys(i,m.removedDocuments,v).next((()=>t.Ur.addMatchingKeys(i,m.addedDocuments,v))));let y=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(v)!==null?y=y.withResumeToken(Kr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):m.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(m.resumeToken,n)),s=s.insert(v,y),(function(_,w,j){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(x,y,m)&&u.push(t.Ur.updateTargetData(i,y))}));let d=Wi(),h=St();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(i,m))})),u.push(H6(i,o,e.documentUpdates).next((m=>{d=m.Ps,h=m.Is}))),!n.isEqual(_t.min())){const m=t.Ur.getLastRemoteSnapshotVersion(i).next((v=>t.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));u.push(m)}return Oe.waitFor(u).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(t.os=s,i)))}function H6(r,e,t){let n=St(),s=St();return t.forEach((i=>n=n.add(i))),e.getEntries(r,n).next((i=>{let o=Wi();return t.forEach(((u,d)=>{const h=i.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(_t.min())?(e.removeEntry(u,d.readTime),o=o.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(u,d)):it("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:s}}))}function W6(r,e){const t=Et(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function q6(r,e){const t=Et(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Ur.getTargetData(n,e).next((i=>i?(s=i,Oe.resolve(s)):t.Ur.allocateTargetId(n).next((o=>(s=new Ra(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n}))}async function Sg(r,e,t){const n=Et(r),s=n.os.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Mu(o))throw o;it("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function T_(r,e,t){const n=Et(r);let s=_t.min(),i=St();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,m){const v=Et(d),x=v._s.get(m);return x!==void 0?Oe.resolve(v.os.get(x)):v.Ur.getTargetData(h,m)})(n,o,ci(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,u.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,t?s:_t.min(),t?i:St()))).next((u=>(G6(n,LI(e),u),{documents:u,Ts:i})))))}function G6(r,e,t){let n=r.us.get(e)||_t.min();t.forEach(((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),r.us.set(e,n)}class C_{constructor(){this.activeTargetIds=HI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K6{constructor(){this.so=new C_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new C_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd=null;function bp(){return xd===null?xd=(function(){return 268435456+Math.round(2147483648*Math.random())})():xd++,"0x"+xd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class J6 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(t,n,s,i,o){const u=bp(),d=this.xo(t,n.toUriEncodedString());it("RestConnection",`Sending RPC '${t}' ${u}:`,d,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(t,d,h,s).then((m=>(it("RestConnection",`Received RPC '${t}' ${u}: `,m),m)),(m=>{throw wo("RestConnection",`RPC '${t}' ${u} failed with error: `,m,"url: ",d,"request:",s),m}))}Lo(t,n,s,i,o,u){return this.Mo(t,n,s,i,o)}Oo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>t[o]=i)),s&&s.headers.forEach(((i,o)=>t[o]=i))}xo(t,n){const s=Y6[t];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,s){const i=bp();return new Promise(((o,u)=>{const d=new Ww;d.setWithCredentials(!0),d.listenOnce(qw.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case kd.NO_ERROR:const m=d.getResponseJson();it(pn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case kd.TIMEOUT:it(pn,`RPC '${e}' ${i} timed out`),u(new Qe(Re.DEADLINE_EXCEEDED,"Request time out"));break;case kd.HTTP_ERROR:const v=d.getStatus();if(it(pn,`RPC '${e}' ${i} failed with status:`,v,"response text:",d.getResponseText()),v>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x?.error;if(y&&y.status&&y.message){const E=(function(w){const j=w.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(j)>=0?j:Re.UNKNOWN})(y.status);u(new Qe(E,y.message))}else u(new Qe(Re.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Qe(Re.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{it(pn,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(s);it(pn,`RPC '${e}' ${i} sending request:`,s),d.send(t,"POST",h,n,15)}))}Bo(e,t,n){const s=bp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xw(),u=Kw(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const m=i.join("");it(pn,`Creating RPC '${e}' stream ${s}: ${m}`,d);const v=o.createWebChannel(m,d);let x=!1,y=!1;const E=new Q6({Io:w=>{y?it(pn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(x||(it(pn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),x=!0),it(pn,`RPC '${e}' stream ${s} sending:`,w),v.send(w))},To:()=>v.close()}),_=(w,j,k)=>{w.listen(j,(R=>{try{k(R)}catch(B){setTimeout((()=>{throw B}),0)}}))};return _(v,Yc.EventType.OPEN,(()=>{y||(it(pn,`RPC '${e}' stream ${s} transport opened.`),E.yo())})),_(v,Yc.EventType.CLOSE,(()=>{y||(y=!0,it(pn,`RPC '${e}' stream ${s} transport closed`),E.So())})),_(v,Yc.EventType.ERROR,(w=>{y||(y=!0,wo(pn,`RPC '${e}' stream ${s} transport errored:`,w),E.So(new Qe(Re.UNAVAILABLE,"The operation could not be completed")))})),_(v,Yc.EventType.MESSAGE,(w=>{var j;if(!y){const k=w.data[0];Qt(!!k);const R=k,B=R.error||((j=R[0])===null||j===void 0?void 0:j.error);if(B){it(pn,`RPC '${e}' stream ${s} received error:`,B);const U=B.status;let W=(function(T){const C=Sr[T];if(C!==void 0)return w4(C)})(U),N=B.message;W===void 0&&(W=Re.INTERNAL,N="Unknown error status: "+U+" with message "+B.message),y=!0,E.So(new Qe(W,N)),v.close()}else it(pn,`RPC '${e}' stream ${s} received:`,k),E.bo(k)}})),_(u,Gw.STAT_EVENT,(w=>{w.stat===gg.PROXY?it(pn,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===gg.NOPROXY&&it(pn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{E.wo()}),0),E}}function Tp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(r){return new l6(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,t,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-n);s>0&&it("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,t,n,s,i,o,u,d){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new F4(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Re.RESOURCE_EXHAUSTED?(Hi(t.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.Yo===t&&this.P_(n,s)}),(n=>{e((()=>{const s=new Qe(Re.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{n((()=>this.I_(s)))})),this.stream.onMessage((s=>{n((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return it("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Z6 extends j4{constructor(e,t,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,o),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=d6(this.serializer,e),n=(function(i){if(!("targetChange"in i))return _t.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?_t.min():o.readTime?ui(o.readTime):_t.min()})(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Ag(this.serializer),t.addTarget=(function(i,o){let u;const d=o.target;if(u=_g(d)?{documents:m6(i,d)}:{query:p6(i,d)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=C4(i,o.resumeToken);const h=bg(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(_t.min())>0){u.readTime=Sf(i,o.snapshotVersion.toTimestamp());const h=bg(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const n=x6(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Ag(this.serializer),t.removeTarget=e,this.a_(t)}}class e8 extends j4{constructor(e,t,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=h6(e.writeResults,e.commitTime),n=ui(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Ag(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>f6(this.serializer,n)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8 extends class{}{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Qe(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,Tg(t,n),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Qe(Re.UNKNOWN,i.toString())}))}Lo(e,t,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Lo(e,Tg(t,n),s,o,u,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Qe(Re.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class r8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Hi(t),this.D_=!1):it("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,t,n,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((o=>{n.enqueueAndForget((async()=>{Bo(this)&&(it("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Et(d);h.L_.add(4),await zu(h),h.q_.set("Unknown"),h.L_.delete(4),await ph(h)})(this))}))})),this.q_=new r8(n,s)}}async function ph(r){if(Bo(r))for(const e of r.B_)await e(!0)}async function zu(r){for(const e of r.B_)await e(!1)}function O4(r,e){const t=Et(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),mx(t)?hx(t):ic(t).r_()&&fx(t,e))}function dx(r,e){const t=Et(r),n=ic(t);t.N_.delete(e),n.r_()&&B4(t,e),t.N_.size===0&&(n.r_()?n.o_():Bo(t)&&t.q_.set("Unknown"))}function fx(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ic(r).A_(e)}function B4(r,e){r.Q_.xe(e),ic(r).R_(e)}function hx(r){r.Q_=new s6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),ic(r).start(),r.q_.v_()}function mx(r){return Bo(r)&&!ic(r).n_()&&r.N_.size>0}function Bo(r){return Et(r).L_.size===0}function L4(r){r.Q_=void 0}async function s8(r){r.q_.set("Online")}async function i8(r){r.N_.forEach(((e,t)=>{fx(r,e)}))}async function a8(r,e){L4(r),mx(r)?(r.q_.M_(e),hx(r)):r.q_.set("Unknown")}async function o8(r,e,t){if(r.q_.set("Online"),e instanceof T4&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))})(r,e)}catch(n){it("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Nf(r,n)}else if(e instanceof Fd?r.Q_.Ke(e):e instanceof b4?r.Q_.He(e):r.Q_.We(e),!t.isEqual(_t.min()))try{const n=await P4(r.localStore);t.compareTo(n)>=0&&await(function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=i.N_.get(h);m&&i.N_.set(h,m.withResumeToken(d.resumeToken,o))}})),u.targetMismatches.forEach(((d,h)=>{const m=i.N_.get(d);if(!m)return;i.N_.set(d,m.withResumeToken(Kr.EMPTY_BYTE_STRING,m.snapshotVersion)),B4(i,d);const v=new Ra(m.target,d,h,m.sequenceNumber);fx(i,v)})),i.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){it("RemoteStore","Failed to raise snapshot:",n),await Nf(r,n)}}async function Nf(r,e,t){if(!Mu(e))throw e;r.L_.add(1),await zu(r),r.q_.set("Offline"),t||(t=()=>P4(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{it("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await ph(r)}))}function M4(r,e){return e().catch((t=>Nf(r,t,e)))}async function gh(r){const e=Et(r),t=La(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;l8(e);)try{const s=await W6(e.localStore,n);if(s===null){e.O_.length===0&&t.o_();break}n=s.batchId,c8(e,s)}catch(s){await Nf(e,s)}V4(e)&&U4(e)}function l8(r){return Bo(r)&&r.O_.length<10}function c8(r,e){r.O_.push(e);const t=La(r);t.r_()&&t.V_&&t.m_(e.mutations)}function V4(r){return Bo(r)&&!La(r).n_()&&r.O_.length>0}function U4(r){La(r).start()}async function u8(r){La(r).p_()}async function d8(r){const e=La(r);for(const t of r.O_)e.m_(t.mutations)}async function f8(r,e,t){const n=r.O_.shift(),s=ix.from(n,e,t);await M4(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await gh(r)}async function h8(r,e){e&&La(r).V_&&await(async function(n,s){if((function(o){return t6(o)&&o!==Re.ABORTED})(s.code)){const i=n.O_.shift();La(n).s_(),await M4(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s))),await gh(n)}})(r,e),V4(r)&&U4(r)}async function S_(r,e){const t=Et(r);t.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const n=Bo(t);t.L_.add(3),await zu(t),n&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await ph(t)}async function m8(r,e){const t=Et(r);e?(t.L_.delete(2),await ph(t)):e||(t.L_.add(2),await zu(t),t.q_.set("Unknown"))}function ic(r){return r.K_||(r.K_=(function(t,n,s){const i=Et(t);return i.w_(),new Z6(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(r.datastore,r.asyncQueue,{Eo:s8.bind(null,r),Ro:i8.bind(null,r),mo:a8.bind(null,r),d_:o8.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),mx(r)?hx(r):r.q_.set("Unknown")):(await r.K_.stop(),L4(r))}))),r.K_}function La(r){return r.U_||(r.U_=(function(t,n,s){const i=Et(t);return i.w_(),new e8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:u8.bind(null,r),mo:h8.bind(null,r),f_:d8.bind(null,r),g_:f8.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await gh(r)):(await r.U_.stop(),r.O_.length>0&&(it("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t,n,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,i){const o=Date.now()+n,u=new px(e,t,o,s,i);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gx(r,e){if(Hi("AsyncQueue",`${e}: ${r}`),Mu(r))return new Qe(Re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ct.comparator(t.key,n.key):(t,n)=>ct.comparator(t.key,n.key),this.keyedMap=Qc(),this.sortedSet=new gr(this.comparator)}static emptySet(e){return new Ll(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ll;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.W_=new gr(ct.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(t,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(t):e.type===1&&n.type===2?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):vt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Jl{constructor(e,t,n,s,i,o,u,d,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,s,i){const o=[];return t.forEach((u=>{o.push({type:0,doc:u})})),new Jl(e,t,Ll.emptySet(t),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class g8{constructor(){this.queries=I_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,n){const s=Et(t),i=s.queries;s.queries=I_(),i.forEach(((o,u)=>{for(const d of u.j_)d.onError(n)}))})(this,new Qe(Re.ABORTED,"Firestore shutting down"))}}function I_(){return new sc((r=>l4(r)),ch)}async function xx(r,e){const t=Et(r);let n=3;const s=e.query;let i=t.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new p8,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await t.onListen(s,!0);break;case 1:i.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const u=gx(o,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,i),i.j_.push(e),e.Z_(t.onlineState),i.z_&&e.X_(i.z_)&&yx(t)}async function vx(r,e){const t=Et(r),n=e.query;let s=3;const i=t.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function x8(r,e){const t=Et(r);let n=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(n=!0);o.z_=s}}n&&yx(t)}function v8(r,e,t){const n=Et(r),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(t);n.queries.delete(e)}function yx(r){r.Y_.forEach((e=>{e.next()}))}var Ng,R_;(R_=Ng||(Ng={})).ea="default",R_.Cache="cache";class _x{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Jl(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const n=t!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ng.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.key=e}}class $4{constructor(e){this.key=e}}class y8{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=St(),this.mutatedKeys=St(),this.Aa=c4(e),this.Ra=new Ll(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new N_,s=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,v)=>{const x=s.get(m),y=uh(this.query,v)?v:null,E=!!x&&this.mutatedKeys.has(x.key),_=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;x&&y?x.data.isEqual(y.data)?E!==_&&(n.track({type:3,doc:y}),w=!0):this.ga(x,y)||(n.track({type:2,doc:y}),w=!0,(d&&this.Aa(y,d)>0||h&&this.Aa(y,h)<0)&&(u=!0)):!x&&y?(n.track({type:0,doc:y}),w=!0):x&&!y&&(n.track({type:1,doc:x}),w=!0,(d||h)&&(u=!0)),w&&(y?(o=o.add(y),i=_?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),n.track({type:1,doc:m})}return{Ra:o,fa:n,ns:u,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((m,v)=>(function(y,E){const _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return _(y)-_(E)})(m.type,v.type)||this.Aa(m.doc,v.doc))),this.pa(n),s=s!=null&&s;const u=t&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new Jl(this.query,e.Ra,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new N_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=St(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const t=[];return e.forEach((n=>{this.da.has(n)||t.push(new $4(n))})),this.da.forEach((n=>{e.has(n)||t.push(new z4(n))})),t}ba(e){this.Ta=e.Ts,this.da=St();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Jl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class _8{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class E8{constructor(e){this.key=e,this.va=!1}}class w8{constructor(e,t,n,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new sc((u=>l4(u)),ch),this.Ma=new Map,this.xa=new Set,this.Oa=new gr(ct.comparator),this.Na=new Map,this.La=new lx,this.Ba={},this.ka=new Map,this.qa=Ql.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function b8(r,e,t=!0){const n=X4(r);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await H4(n,e,t,!0),s}async function T8(r,e){const t=X4(r);await H4(t,e,!0,!1)}async function H4(r,e,t,n){const s=await q6(r.localStore,ci(e)),i=s.targetId,o=r.sharedClientState.addLocalQueryTarget(i,t);let u;return n&&(u=await C8(r,e,i,o==="current",s.resumeToken)),r.isPrimaryClient&&t&&O4(r.remoteStore,s),u}async function C8(r,e,t,n,s){r.Ka=(v,x,y)=>(async function(_,w,j,k){let R=w.view.ma(j);R.ns&&(R=await T_(_.localStore,w.query,!1).then((({documents:N})=>w.view.ma(N,R))));const B=k&&k.targetChanges.get(w.targetId),U=k&&k.targetMismatches.get(w.targetId)!=null,W=w.view.applyChanges(R,_.isPrimaryClient,B,U);return D_(_,w.targetId,W.wa),W.snapshot})(r,v,x,y);const i=await T_(r.localStore,e,!0),o=new y8(e,i.Ts),u=o.ma(i.documents),d=Uu.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),h=o.applyChanges(u,r.isPrimaryClient,d);D_(r,t,h.wa);const m=new _8(e,t,o);return r.Fa.set(e,m),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),h.snapshot}async function A8(r,e,t){const n=Et(r),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter((o=>!ch(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Sg(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&dx(n.remoteStore,s.targetId),Ig(n,s.targetId)})).catch(Lu)):(Ig(n,s.targetId),await Sg(n.localStore,s.targetId,!0))}async function S8(r,e){const t=Et(r),n=t.Fa.get(e),s=t.Ma.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),dx(t.remoteStore,n.targetId))}async function N8(r,e,t){const n=j8(r);try{const s=await(function(o,u){const d=Et(o),h=Rr.now(),m=u.reduce(((y,E)=>y.add(E.key)),St());let v,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let E=Wi(),_=St();return d.cs.getEntries(y,m).next((w=>{E=w,E.forEach(((j,k)=>{k.isValidDocument()||(_=_.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(y,E))).next((w=>{v=w;const j=[];for(const k of u){const R=YI(k,v.get(k.key).overlayedDocument);R!=null&&j.push(new Ha(k.key,R,e4(R.value.mapValue),bs.exists(!0)))}return d.mutationQueue.addMutationBatch(y,h,j,u)})).next((w=>{x=w;const j=w.applyToLocalDocumentSet(v,_);return d.documentOverlayCache.saveOverlays(y,w.batchId,j)}))})).then((()=>({batchId:x.batchId,changes:d4(v)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(o,u,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new gr(Ut)),h=h.insert(u,d),o.Ba[o.currentUser.toKey()]=h})(n,s.batchId,t),await $u(n,s.changes),await gh(n.remoteStore)}catch(s){const i=gx(s,"Failed to persist write");t.reject(i)}}async function W4(r,e){const t=Et(r);try{const n=await $6(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=t.Na.get(i);o&&(Qt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Qt(o.va):s.removedDocuments.size>0&&(Qt(o.va),o.va=!1))})),await $u(t,n,e)}catch(n){await Lu(n)}}function k_(r,e,t){const n=Et(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Fa.forEach(((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)})),(function(o,u){const d=Et(o);d.onlineState=u;let h=!1;d.queries.forEach(((m,v)=>{for(const x of v.j_)x.Z_(u)&&(h=!0)})),h&&yx(d)})(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function I8(r,e,t){const n=Et(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Na.get(e),i=s&&s.key;if(i){let o=new gr(ct.comparator);o=o.insert(i,xn.newNoDocument(i,_t.min()));const u=St().add(i),d=new hh(_t.min(),new Map,new gr(Ut),o,u);await W4(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),Ex(n)}else await Sg(n.localStore,e,!1).then((()=>Ig(n,e,t))).catch(Lu)}async function R8(r,e){const t=Et(r),n=e.batch.batchId;try{const s=await z6(t.localStore,e);G4(t,n,null),q4(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await $u(t,s)}catch(s){await Lu(s)}}async function k8(r,e,t){const n=Et(r);try{const s=await(function(o,u){const d=Et(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,u).next((v=>(Qt(v!==null),m=v.keys(),d.mutationQueue.removeMutationBatch(h,v)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(n.localStore,e);G4(n,e,t),q4(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await $u(n,s)}catch(s){await Lu(s)}}function q4(r,e){(r.ka.get(e)||[]).forEach((t=>{t.resolve()})),r.ka.delete(e)}function G4(r,e,t){const n=Et(r);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Ig(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Ma.get(e))r.Fa.delete(n),t&&r.Ca.$a(n,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((n=>{r.La.containsKey(n)||K4(r,n)}))}function K4(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(dx(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),Ex(r))}function D_(r,e,t){for(const n of t)n instanceof z4?(r.La.addReference(n.key,e),D8(r,n)):n instanceof $4?(it("SyncEngine","Document no longer in limbo: "+n.key),r.La.removeReference(n.key,e),r.La.containsKey(n.key)||K4(r,n.key)):vt()}function D8(r,e){const t=e.key,n=t.path.canonicalString();r.Oa.get(t)||r.xa.has(n)||(it("SyncEngine","New document in limbo: "+t),r.xa.add(n),Ex(r))}function Ex(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new ct(lr.fromString(e)),n=r.qa.next();r.Na.set(n,new E8(t)),r.Oa=r.Oa.insert(t,n),O4(r.remoteStore,new Ra(ci(lh(t.path)),n,"TargetPurposeLimboResolution",Qg.oe))}}async function $u(r,e,t){const n=Et(r),s=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((u,d)=>{o.push(n.Ka(d,e,t).then((h=>{var m;if((h||t)&&n.isPrimaryClient){const v=h?!h.fromCache:(m=t?.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(h){s.push(h);const v=ux.Wi(d.targetId,h);i.push(v)}})))})),await Promise.all(o),n.Ca.d_(s),await(async function(d,h){const m=Et(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Oe.forEach(h,(x=>Oe.forEach(x.$i,(y=>m.persistence.referenceDelegate.addReference(v,x.targetId,y))).next((()=>Oe.forEach(x.Ui,(y=>m.persistence.referenceDelegate.removeReference(v,x.targetId,y)))))))))}catch(v){if(!Mu(v))throw v;it("LocalStore","Failed to update sequence numbers: "+v)}for(const v of h){const x=v.targetId;if(!v.fromCache){const y=m.os.get(x),E=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(E);m.os=m.os.insert(x,_)}}})(n.localStore,i))}async function P8(r,e){const t=Et(r);if(!t.currentUser.isEqual(e)){it("SyncEngine","User change. New user:",e.toKey());const n=await D4(t.localStore,e);t.currentUser=e,(function(i,o){i.ka.forEach((u=>{u.forEach((d=>{d.reject(new Qe(Re.CANCELLED,o))}))})),i.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await $u(t,n.hs)}}function F8(r,e){const t=Et(r),n=t.Na.get(e);if(n&&n.va)return St().add(n.key);{let s=St();const i=t.Ma.get(e);if(!i)return s;for(const o of i){const u=t.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function X4(r){const e=Et(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=W4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I8.bind(null,e),e.Ca.d_=x8.bind(null,e.eventManager),e.Ca.$a=v8.bind(null,e.eventManager),e}function j8(r){const e=Et(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k8.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return U6(this.persistence,new M6,e.initialUser,this.serializer)}Ga(e){return new O6(cx.Zr,this.serializer)}Wa(e){return new K6}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class Rg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>k_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=P8.bind(null,this.syncEngine),await m8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new g8})()}createDatastore(e){const t=mh(e.databaseInfo.databaseId),n=(function(i){return new J6(i)})(e.databaseInfo);return(function(i,o,u,d){return new t8(i,o,u,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,i,o,u){return new n8(n,s,i,o,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>k_(this.syncEngine,t,0)),(function(){return A_.D()?new A_:new X6})())}createSyncEngine(e,t){return(function(s,i,o,u,d,h,m){const v=new w8(s,i,o,u,d,h);return m&&(v.Qa=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const i=Et(s);it("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await zu(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Rg.provider={build:()=>new Rg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Hi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,t,n,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=gn.UNAUTHENTICATED,this.clientId=Yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{it("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(it("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=gx(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Cp(r,e){r.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await D4(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function P_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await B8(r);it("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>S_(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>S_(e.remoteStore,s))),r._onlineComponents=e}async function B8(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){it("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Re.FAILED_PRECONDITION||s.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;wo("Error using user provided cache. Falling back to memory cache: "+t),await Cp(r,new If)}}else it("FirestoreClient","Using default OfflineComponentProvider"),await Cp(r,new If);return r._offlineComponents}async function Y4(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(it("FirestoreClient","Using user provided OnlineComponentProvider"),await P_(r,r._uninitializedComponentsProvider._online)):(it("FirestoreClient","Using default OnlineComponentProvider"),await P_(r,new Rg))),r._onlineComponents}function L8(r){return Y4(r).then((e=>e.syncEngine))}async function Rf(r){const e=await Y4(r),t=e.eventManager;return t.onListen=b8.bind(null,e.syncEngine),t.onUnlisten=A8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=T8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S8.bind(null,e.syncEngine),t}function M8(r,e,t={}){const n=new Oi;return r.asyncQueue.enqueueAndForget((async()=>(function(i,o,u,d,h){const m=new wx({next:x=>{m.Za(),o.enqueueAndForget((()=>vx(i,v)));const y=x.docs.has(u);!y&&x.fromCache?h.reject(new Qe(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&x.fromCache&&d&&d.source==="server"?h.reject(new Qe(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),v=new _x(lh(u.path),m,{includeMetadataChanges:!0,_a:!0});return xx(i,v)})(await Rf(r),r.asyncQueue,e,t,n))),n.promise}function V8(r,e,t={}){const n=new Oi;return r.asyncQueue.enqueueAndForget((async()=>(function(i,o,u,d,h){const m=new wx({next:x=>{m.Za(),o.enqueueAndForget((()=>vx(i,v))),x.fromCache&&d.source==="server"?h.reject(new Qe(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),v=new _x(u,m,{includeMetadataChanges:!0,_a:!0});return xx(i,v)})(await Rf(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(r,e,t){if(!t)throw new Qe(Re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Z4(r,e,t,n){if(e===!0&&n===!0)throw new Qe(Re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function j_(r){if(!ct.isDocumentKey(r))throw new Qe(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function O_(r){if(ct.isDocumentKey(r))throw new Qe(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function xh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":vt()}function In(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Qe(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xh(r);throw new Qe(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Qe(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Qe(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q4((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Qe(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Qe(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Qe(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qe(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Qe(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B_(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Qw;switch(n.type){case"firstParty":return new uI(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Qe(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=F_.get(t);n&&(it("ComponentProvider","Removing Datastore"),F_.delete(t),n.terminate())})(this),Promise.resolve()}}function eb(r,e,t,n={}){var s;const i=(r=In(r,vh))._getSettings(),o=`${e}:${t}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),n.mockUserToken){let u,d;if(typeof n.mockUserToken=="string")u=n.mockUserToken,d=gn.MOCK_USER;else{u=O3(n.mockUserToken,(s=r._app)===null||s===void 0?void 0:s.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Qe(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new gn(h)}r._authCredentials=new oI(new Yw(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class ln{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class Bi extends Xi{constructor(e,t,n){super(e,t,lh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new ct(e))}withConverter(e){return new Bi(this.firestore,e,this._path)}}function jt(r,e,...t){if(r=br(r),J4("collection","path",e),r instanceof vh){const n=lr.fromString(e,...t);return O_(n),new Bi(r,null,n)}{if(!(r instanceof ln||r instanceof Bi))throw new Qe(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(lr.fromString(e,...t));return O_(n),new Bi(r.firestore,null,n)}}function At(r,e,...t){if(r=br(r),arguments.length===1&&(e=Yg.newId()),J4("doc","path",e),r instanceof vh){const n=lr.fromString(e,...t);return j_(n),new ln(r,null,new ct(n))}{if(!(r instanceof ln||r instanceof Bi))throw new Qe(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(lr.fromString(e,...t));return j_(n),new ln(r.firestore,r instanceof Bi?r.converter:null,new ct(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new F4(this,"async_queue_retry"),this.Vu=()=>{const n=Tp();n&&it("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const t=Tp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Tp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Oi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Mu(e))throw e;it("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const s=(function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u})(n);throw Hi("INTERNAL UNHANDLED ERROR: ",s),n})).then((n=>(this.du=!1,n))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=px.createAndSchedule(this,e,t,n,(i=>this.yu(i)));return this.Tu.push(s),s}fu(){this.Eu&&vt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function M_(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1})(r,["next","error","complete"])}class pi extends vh{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new L_,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L_(e),this._firestoreClient=void 0,await e}}}function tb(r,e){const t=typeof r=="object"?r:Kg(),n=typeof r=="string"?r:"(default)",s=jo(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=F3("firestore");i&&eb(s,...i)}return s}function Hu(r){if(r._terminated)throw new Qe(Re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||U8(r),r._firestoreClient}function U8(r){var e,t,n;const s=r._freezeSettings(),i=(function(u,d,h,m){return new bI(u,d,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Q4(m.experimentalLongPollingOptions),m.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,s);r._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),r._firestoreClient=new O8(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(u){const d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(Kr.fromBase64String(e))}catch(t){throw new Qe(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Co(Kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Qe(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qe(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qe(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8=/^__.*__$/;class $8{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vu(e,this.data,t,this.fieldTransforms)}}class rb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class bx{constructor(e,t,n,s,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new bx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nb(this.Cu)&&z8.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class H8{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||mh(e)}Qu(e,t,n,s=!1){return new bx({Cu:e,methodName:t,qu:n,path:Hr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eh(r){const e=r._freezeSettings(),t=mh(r._databaseId);return new H8(r._databaseId,!!e.ignoreUndefinedProperties,t)}function sb(r,e,t,n,s,i={}){const o=r.Qu(i.merge||i.mergeFields?2:0,e,t,s);Ax("Data must be an object, but it was:",o,n);const u=ib(n,o);let d,h;if(i.merge)d=new as(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const v of i.mergeFields){const x=kg(e,v,t);if(!o.contains(x))throw new Qe(Re.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);ob(m,x)||m.push(x)}d=new as(m),h=o.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,h=o.fieldTransforms;return new $8(new Un(u),d,h)}class wh extends ac{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wh}}class Tx extends ac{_toFieldTransform(e){return new y4(e.path,new wu)}isEqual(e){return e instanceof Tx}}class Cx extends ac{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Cu(e.serializer,m4(e.serializer,this.$u));return new y4(e.path,t)}isEqual(e){return e instanceof Cx&&this.$u===e.$u}}function W8(r,e,t,n){const s=r.Qu(1,e,t);Ax("Data must be an object, but it was:",s,n);const i=[],o=Un.empty();Oo(n,((d,h)=>{const m=Sx(e,d,t);h=br(h);const v=s.Nu(m);if(h instanceof wh)i.push(m);else{const x=qu(h,v);x!=null&&(i.push(m),o.set(m,x))}}));const u=new as(i);return new rb(o,u,s.fieldTransforms)}function q8(r,e,t,n,s,i){const o=r.Qu(1,e,t),u=[kg(e,n,t)],d=[s];if(i.length%2!=0)throw new Qe(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)u.push(kg(e,i[x])),d.push(i[x+1]);const h=[],m=Un.empty();for(let x=u.length-1;x>=0;--x)if(!ob(h,u[x])){const y=u[x];let E=d[x];E=br(E);const _=o.Nu(y);if(E instanceof wh)h.push(y);else{const w=qu(E,_);w!=null&&(h.push(y),m.set(y,w))}}const v=new as(h);return new rb(m,v,o.fieldTransforms)}function G8(r,e,t,n=!1){return qu(t,r.Qu(n?4:3,e))}function qu(r,e){if(ab(r=br(r)))return Ax("Unsupported field value:",e,r),ib(r,e);if(r instanceof ac)return(function(n,s){if(!nb(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,s){const i=[];let o=0;for(const u of n){let d=qu(u,s.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(r,e)}return(function(n,s){if((n=br(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return m4(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Rr.fromDate(n);return{timestampValue:Sf(s.serializer,i)}}if(n instanceof Rr){const i=new Rr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Sf(s.serializer,i)}}if(n instanceof yh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Co)return{bytesValue:C4(s.serializer,n._byteString)};if(n instanceof ln){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ox(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof _h)return(function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return nx(u.serializer,d)}))}}}}}})(n,s);throw s.Bu(`Unsupported field value: ${xh(n)}`)})(r,e)}function ib(r,e){const t={};return Jw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(r,((n,s)=>{const i=qu(s,e.Mu(n));i!=null&&(t[n]=i)})),{mapValue:{fields:t}}}function ab(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Rr||r instanceof yh||r instanceof Co||r instanceof ln||r instanceof ac||r instanceof _h)}function Ax(r,e,t){if(!ab(t)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(t)){const n=xh(t);throw n==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+n)}}function kg(r,e,t){if((e=br(e))instanceof Wu)return e._internalPath;if(typeof e=="string")return Sx(r,e);throw kf("Field path arguments must be of type string or ",r,!1,void 0,t)}const K8=new RegExp("[~\\*/\\[\\]]");function Sx(r,e,t){if(e.search(K8)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Wu(...e.split("."))._internalPath}catch{throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function kf(r,e,t,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${s}`),d+=")"),new Qe(Re.INVALID_ARGUMENT,u+r+d)}function ob(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t,n,s,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class X8 extends lb{data(){return super.data()}}function bh(r,e){return typeof e=="string"?Sx(r,e):e instanceof Wu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Qe(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nx{}class Ix extends Nx{}function Li(r,e,...t){let n=[];e instanceof Nx&&n.push(e),n=n.concat(t),(function(i){const o=i.filter((d=>d instanceof Th)).length,u=i.filter((d=>d instanceof Gu)).length;if(o>1||o>0&&u>0)throw new Qe(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class Gu extends Ix{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Gu(e,t,n)}_apply(e){const t=this._parse(e);return ub(e._query,t),new Xi(e.firestore,e.converter,Eg(e._query,t))}_parse(e){const t=Eh(e.firestore);return(function(i,o,u,d,h,m,v){let x;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Qe(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){U_(v,m);const y=[];for(const E of v)y.push(V_(d,i,E));x={arrayValue:{values:y}}}else x=V_(d,i,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||U_(v,m),x=G8(u,o,v,m==="in"||m==="not-in");return Nr.create(h,m,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function su(r,e,t){const n=e,s=bh("where",r);return Gu._create(s,n,t)}class Th extends Nx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Th(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Hs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let o=s;const u=i.getFlattenedFilters();for(const d of u)ub(o,d),o=Eg(o,d)})(e._query,t),new Xi(e.firestore,e.converter,Eg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ch extends Ix{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ch(e,t)}_apply(e){const t=(function(s,i,o){if(s.startAt!==null)throw new Qe(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Qe(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eu(i,o)})(e._query,this._field,this._direction);return new Xi(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new nc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Ml(r,e="asc"){const t=e,n=bh("orderBy",r);return Ch._create(n,t)}function V_(r,e,t){if(typeof(t=br(t))=="string"){if(t==="")throw new Qe(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o4(e)&&t.indexOf("/")!==-1)throw new Qe(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(lr.fromString(t));if(!ct.isDocumentKey(n))throw new Qe(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return o_(r,new ct(n))}if(t instanceof ln)return o_(r,t._key);throw new Qe(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(t)}.`)}function U_(r,e){if(!Array.isArray(r)||r.length===0)throw new Qe(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ub(r,e){const t=(function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Qe(Re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Qe(Re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class db{convertValue(e,t="none"){switch(To(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw vt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Oo(e,((s,i)=>{n[s]=this.convertValue(i,t)})),n}convertVectorValue(e){var t,n,s;const i=(s=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map((o=>wr(o.doubleValue)));return new _h(i)}convertGeoPoint(e){return new yh(wr(e.latitude),wr(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Zg(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=Ba(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=lr.fromString(e);Qt(k4(n));const s=new Kl(n.get(1),n.get(3)),i=new ct(n.popFirst(5));return s.isEqual(t)||Hi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r,e,t){let n;return n=r?r.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rx extends lb{constructor(e,t,n,s,i,o){super(e,t,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(bh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class iu extends Rx{data(e={}){return super.data(e)}}class kx{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new jl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new iu(this._firestore,this._userDataWriter,n.key,n,new jl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qe(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((u=>{const d=new iu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new jl(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>i||u.type!==3)).map((u=>{const d=new iu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new jl(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:Y8(u.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Y8(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(r){r=In(r,ln);const e=In(r.firestore,pi);return M8(Hu(e),r._key).then((t=>mb(e,r,t)))}class Dx extends db{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function os(r){r=In(r,Xi);const e=In(r.firestore,pi),t=Hu(e),n=new Dx(e);return cb(r._query),V8(t,r._query).then((s=>new kx(e,n,r,s)))}function hb(r,e,t){r=In(r,ln);const n=In(r.firestore,pi),s=fb(r.converter,e);return Ku(n,[sb(Eh(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,bs.none())])}function pr(r,e,t,...n){r=In(r,ln);const s=In(r.firestore,pi),i=Eh(s);let o;return o=typeof(e=br(e))=="string"||e instanceof Wu?q8(i,"updateDoc",r._key,e,t,n):W8(i,"updateDoc",r._key,e),Ku(s,[o.toMutation(r._key,bs.exists(!0))])}function Ma(r){return Ku(In(r.firestore,pi),[new sx(r._key,bs.none())])}function gi(r,e){const t=In(r.firestore,pi),n=At(r),s=fb(r.converter,e);return Ku(t,[sb(Eh(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,bs.exists(!1))]).then((()=>n))}function ns(r,...e){var t,n,s;r=br(r);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||M_(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(M_(e[o])){const v=e[o];e[o]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[o+1]=(n=v.error)===null||n===void 0?void 0:n.bind(v),e[o+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let d,h,m;if(r instanceof ln)h=In(r.firestore,pi),m=lh(r._key.path),d={next:v=>{e[o]&&e[o](mb(h,r,v))},error:e[o+1],complete:e[o+2]};else{const v=In(r,Xi);h=In(v.firestore,pi),m=v._query;const x=new Dx(h);d={next:y=>{e[o]&&e[o](new kx(h,x,v,y))},error:e[o+1],complete:e[o+2]},cb(r._query)}return(function(x,y,E,_){const w=new wx(_),j=new _x(y,w,E);return x.asyncQueue.enqueueAndForget((async()=>xx(await Rf(x),j))),()=>{w.Za(),x.asyncQueue.enqueueAndForget((async()=>vx(await Rf(x),j)))}})(Hu(h),m,u,d)}function Ku(r,e){return(function(n,s){const i=new Oi;return n.asyncQueue.enqueueAndForget((async()=>N8(await L8(n),s,i))),i.promise})(Hu(r),e)}function mb(r,e,t){const n=t.docs.get(e._key),s=new Dx(r);return new Rx(r,s,e._key,n,new jl(t.hasPendingWrites,t.fromCache),e.converter)}function Df(){return new Tx("serverTimestamp")}function Dg(r){return new Cx("increment",r)}(function(e,t=!0){(function(s){rc=s})(tc),hi(new $s("firestore",((n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),u=new pi(new lI(n.getProvider("auth-internal")),new fI(n.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Qe(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(h.options.projectId,m)})(o,s),o);return i=Object.assign({useFetchStreams:t},i),u._setSettings(i),u}),"PUBLIC").setMultipleInstances(!0)),ws(r_,"4.7.3",e),ws(r_,"4.7.3","esm2017")})();const Q8=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:db,Bytes:Co,CollectionReference:Bi,DocumentReference:ln,DocumentSnapshot:Rx,FieldPath:Wu,FieldValue:ac,Firestore:pi,FirestoreError:Qe,GeoPoint:yh,Query:Xi,QueryCompositeFilterConstraint:Th,QueryConstraint:Ix,QueryDocumentSnapshot:iu,QueryFieldFilterConstraint:Gu,QueryOrderByConstraint:Ch,QuerySnapshot:kx,SnapshotMetadata:jl,Timestamp:Rr,VectorValue:_h,_AutoId:Yg,_ByteString:Kr,_DatabaseId:Kl,_DocumentKey:ct,_EmptyAuthCredentialsProvider:Qw,_FieldPath:Hr,_cast:In,_logWarn:wo,_validateIsNotUsedTogether:Z4,addDoc:gi,collection:jt,connectFirestoreEmulator:eb,deleteDoc:Ma,doc:At,ensureFirestoreConfigured:Hu,executeWrite:Ku,getDoc:Au,getDocs:os,getFirestore:tb,increment:Dg,onSnapshot:ns,orderBy:Ml,query:Li,serverTimestamp:Df,setDoc:hb,updateDoc:pr,where:su},Symbol.toStringTag,{value:"Module"}));var J8="firebase",Z8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ws(J8,Z8,"app");function Px(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function pb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eR=pb,gb=new Fo("auth","Firebase",pb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new ah("@firebase/auth");function tR(r,...e){Pf.logLevel<=It.WARN&&Pf.warn(`Auth (${tc}): ${r}`,...e)}function jd(r,...e){Pf.logLevel<=It.ERROR&&Pf.error(`Auth (${tc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(r,...e){throw Fx(r,...e)}function di(r,...e){return Fx(r,...e)}function xb(r,e,t){const n=Object.assign(Object.assign({},eR()),{[e]:t});return new Fo("auth","Firebase",n).create(e,{appName:r.name})}function Mi(r){return xb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fx(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return gb.create(r,...e)}function pt(r,e,...t){if(!r)throw Fx(e,...t)}function Pi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw jd(e),new Error(e)}function qi(r,e){r||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function rR(){return z_()==="http:"||z_()==="https:"}function z_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rR()||jw()||"connection"in navigator)?navigator.onLine:!0}function sR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,qi(t>e,"Short delay should be less than long delay!"),this.isMobile=B3()||V3()}get(){return nR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(r,e){qi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Xu(3e4,6e4);function Wa(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function qa(r,e,t,n,s={}){return yb(r,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const u=Bu(Object.assign({key:r.config.apiKey},o)).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const h=Object.assign({method:e,headers:d},i);return M3()||(h.referrerPolicy="no-referrer"),vb.fetch()(_b(r,r.config.apiHost,t,u),h)})}async function yb(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},iR),e);try{const s=new lR(r),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw vd(r,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(r,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw vd(r,"email-already-in-use",o);if(d==="USER_DISABLED")throw vd(r,"user-disabled",o);const m=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw xb(r,m,h);Ws(r,m)}}catch(s){if(s instanceof qs)throw s;Ws(r,"network-request-failed",{message:String(s)})}}async function Yu(r,e,t,n,s={}){const i=await qa(r,e,t,n,s);return"mfaPendingCredential"in i&&Ws(r,"multi-factor-auth-required",{_serverResponse:i}),i}function _b(r,e,t,n){const s=`${e}${t}?${n}`;return r.config.emulator?jx(r.config,s):`${r.config.apiScheme}://${s}`}function oR(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(di(this.auth,"network-request-failed")),aR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vd(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=di(r,e,n);return s.customData._tokenResponse=t,s}function $_(r){return r!==void 0&&r.enterprise!==void 0}class cR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return oR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function uR(r,e){return qa(r,"GET","/v2/recaptchaConfig",Wa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(r,e){return qa(r,"POST","/v1/accounts:delete",e)}async function Eb(r,e){return qa(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fR(r,e=!1){const t=br(r),n=await t.getIdToken(e),s=Ox(n);pt(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:n,authTime:au(Ap(s.auth_time)),issuedAtTime:au(Ap(s.iat)),expirationTime:au(Ap(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Ap(r){return Number(r)*1e3}function Ox(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return jd("JWT malformed, contained fewer than 3 sections"),null;try{const s=kw(t);return s?JSON.parse(s):(jd("Failed to decode base64 JWT payload"),null)}catch(s){return jd("Caught error parsing JWT payload as JSON",s?.toString()),null}}function H_(r){const e=Ox(r);return pt(e,"internal-error"),pt(typeof e.exp<"u","internal-error"),pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof qs&&hR(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function hR({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ff(r){var e;const t=r.auth,n=await r.getIdToken(),s=await Su(r,Eb(t,{idToken:n}));pt(s?.users.length,t,"internal-error");const i=s.users[0];r._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?wb(i.providerUserInfo):[],u=gR(r.providerData,o),d=r.isAnonymous,h=!(r.email&&i.passwordHash)&&!u?.length,m=d?h:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Fg(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(r,v)}async function pR(r){const e=br(r);await Ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gR(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function wb(r){return r.map(e=>{var{providerId:t}=e,n=Px(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(r,e){const t=await yb(r,{},async()=>{const n=Bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=r.config,o=_b(r,s,"/v1/token",`key=${i}`),u=await r._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",vb.fetch()(o,{method:"POST",headers:u,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vR(r,e){return qa(r,"POST","/v2/accounts:revokeToken",Wa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt(typeof e.idToken<"u","internal-error"),pt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pt(e.length!==0,"internal-error");const t=H_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:i}=await xR(e,t);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:i}=t,o=new Vl;return n&&(pt(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(pt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(r,e){pt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Fi{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,i=Px(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Su(this,this.stsTokenManager.getToken(this.auth,e));return pt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fR(this,e)}reload(){return pR(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ff(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(Mi(this.auth));const e=await this.getIdToken();return await Su(this,dR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,i,o,u,d,h,m;const v=(n=t.displayName)!==null&&n!==void 0?n:void 0,x=(s=t.email)!==null&&s!==void 0?s:void 0,y=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(u=t.tenantId)!==null&&u!==void 0?u:void 0,w=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,j=(h=t.createdAt)!==null&&h!==void 0?h:void 0,k=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:R,emailVerified:B,isAnonymous:U,providerData:W,stsTokenManager:N}=t;pt(R&&N,e,"internal-error");const I=Vl.fromJSON(this.name,N);pt(typeof R=="string",e,"internal-error"),_a(v,e.name),_a(x,e.name),pt(typeof B=="boolean",e,"internal-error"),pt(typeof U=="boolean",e,"internal-error"),_a(y,e.name),_a(E,e.name),_a(_,e.name),_a(w,e.name),_a(j,e.name),_a(k,e.name);const T=new Fi({uid:R,auth:e,email:x,emailVerified:B,displayName:v,isAnonymous:U,photoURL:E,phoneNumber:y,tenantId:_,stsTokenManager:I,createdAt:j,lastLoginAt:k});return W&&Array.isArray(W)&&(T.providerData=W.map(C=>Object.assign({},C))),w&&(T._redirectEventId=w),T}static async _fromIdTokenResponse(e,t,n=!1){const s=new Vl;s.updateFromServerResponse(t);const i=new Fi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Ff(i),i}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];pt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?wb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,u=new Vl;u.updateFromIdToken(n);const d=new Fi({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Fg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;function ji(r){qi(r instanceof Function,"Expected a class definition");let e=W_.get(r);return e?(qi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,W_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bb.type="NONE";const q_=bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(r,e,t){return`firebase:${r}:${e}:${t}`}class Ul{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Od(this.userKey,s.apiKey,i),this.fullPersistenceKey=Od("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ul(ji(q_),e,n);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||ji(q_);const o=Od(n,e.config.apiKey,e.name);let u=null;for(const h of t)try{const m=await h._get(o);if(m){const v=Fi._fromJSON(e,m);h!==i&&(u=v),i=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Ul(i,e,n):(i=d[0],u&&await i._set(o,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ul(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ib(e))return"Blackberry";if(Rb(e))return"Webos";if(Cb(e))return"Safari";if((e.includes("chrome/")||Ab(e))&&!e.includes("edge/"))return"Chrome";if(Nb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function Tb(r=_n()){return/firefox\//i.test(r)}function Cb(r=_n()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ab(r=_n()){return/crios\//i.test(r)}function Sb(r=_n()){return/iemobile/i.test(r)}function Nb(r=_n()){return/android/i.test(r)}function Ib(r=_n()){return/blackberry/i.test(r)}function Rb(r=_n()){return/webos/i.test(r)}function Bx(r=_n()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function yR(r=_n()){var e;return Bx(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _R(){return U3()&&document.documentMode===10}function kb(r=_n()){return Bx(r)||Nb(r)||Rb(r)||Ib(r)||/windows phone/i.test(r)||Sb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(r,e=[]){let t;switch(r){case"Browser":t=G_(_n());break;case"Worker":t=`${G_(_n())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((o,u)=>{try{const d=e(i);o(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(r,e={}){return qa(r,"GET","/v2/passwordPolicy",Wa(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=6;class TR{constructor(e){var t,n,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:bR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,i,o,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K_(this),this.idTokenSubscription=new K_(this),this.beforeStateQueue=new ER(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ji(t)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Ul.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Eb(this,{idToken:e}),n=await Fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(li(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===u)&&d?.user&&(s=d.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ff(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(Mi(this));const t=e?br(e):null;return t&&pt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(Mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(Mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wR(this),t=new TR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fo("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await vR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ji(e)||this._popupRedirectResolver;pt(t,this,"argument-error"),this.redirectPersistenceManager=await Ul.create(this,[ji(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{o=!0,d()}}else{const d=e.addObserver(t);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Db(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&tR(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Lo(r){return br(r)}class K_{constructor(e){this.auth=e,this.observer=null,this.addObserver=K3(t=>this.observer=t)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AR(r){Ah=r}function Pb(r){return Ah.loadJS(r)}function SR(){return Ah.recaptchaEnterpriseScript}function NR(){return Ah.gapiScript}function IR(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const RR="recaptcha-enterprise",kR="NO_RECAPTCHA";class DR{constructor(e){this.type=RR,this.auth=Lo(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{uR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new cR(d);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(d=>{u(d)})})}function s(i,o,u){const d=window.grecaptcha;$_(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(kR)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{n(this.auth).then(u=>{if(!t&&$_(window.grecaptcha))s(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=SR();d.length!==0&&(d+=u),Pb(d).then(()=>{s(u,i,o)}).catch(h=>{o(h)})}}).catch(u=>{o(u)})})}}async function X_(r,e,t,n=!1){const s=new DR(r);let i;try{i=await s.verify(t)}catch{i=await s.verify(t,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function jg(r,e,t,n){var s;if(!((s=r._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await X_(r,e,t,t==="getOobCode");return n(r,i)}else return n(r,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await X_(r,e,t,t==="getOobCode");return n(r,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(r,e){const t=jo(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(gu(i,e??{}))return s;Ws(s,"already-initialized")}return t.initialize({options:e})}function FR(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ji);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function jR(r,e,t){const n=Lo(r);pt(n._canInitEmulator,n,"emulator-config-failed"),pt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=Fb(e),{host:o,port:u}=OR(e),d=u===null?"":`:${u}`;n.config.emulator={url:`${i}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),BR()}function Fb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function OR(r){const e=Fb(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:Y_(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:Y_(o)}}}function Y_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function BR(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,t){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function LR(r,e){return qa(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(r,e){return Yu(r,"POST","/v1/accounts:signInWithPassword",Wa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(r,e){return Yu(r,"POST","/v1/accounts:signInWithEmailLink",Wa(r,e))}async function UR(r,e){return Yu(r,"POST","/v1/accounts:signInWithEmailLink",Wa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends Lx{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Nu(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Nu(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jg(e,t,"signInWithPassword",MR);case"emailLink":return VR(e,{email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jg(e,n,"signUpPassword",LR);case"emailLink":return UR(e,{idToken:t,email:this._email,oobCode:this._password});default:Ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(r,e){return Yu(r,"POST","/v1/accounts:signInWithIdp",Wa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="http://localhost";class Ao extends Lx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ws("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,i=Px(t,["providerId","signInMethod"]);if(!n||!s)return null;const o=new Ao(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return zl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,zl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zl(e,t)}buildRequest(){const e={requestUri:zR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HR(r){const e=Kc(Xc(r)).link,t=e?Kc(Xc(e)).deep_link_id:null,n=Kc(Xc(r)).deep_link_id;return(n?Kc(Xc(n)).link:null)||n||t||e||r}class Mx{constructor(e){var t,n,s,i,o,u;const d=Kc(Xc(e)),h=(t=d.apiKey)!==null&&t!==void 0?t:null,m=(n=d.oobCode)!==null&&n!==void 0?n:null,v=$R((s=d.mode)!==null&&s!==void 0?s:null);pt(h&&m&&v,"argument-error"),this.apiKey=h,this.operation=v,this.code=m,this.continueUrl=(i=d.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=d.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=HR(e);try{return new Mx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this.providerId=oc.PROVIDER_ID}static credential(e,t){return Nu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Mx.parseLink(t);return pt(n,"argument-error"),Nu._fromEmailAndCode(e,n.code,n.tenantId)}}oc.PROVIDER_ID="password";oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends jb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends Qu{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ta.credential(e.oauthAccessToken)}catch{return null}}}Ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ta.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ao._fromParams({providerId:Ca.PROVIDER_ID,signInMethod:Ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ca.credentialFromTaggedObject(e)}static credentialFromError(e){return Ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ca.credential(t,n)}catch{return null}}}Ca.GOOGLE_SIGN_IN_METHOD="google.com";Ca.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends Qu{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Aa.credential(e.oauthAccessToken)}catch{return null}}}Aa.GITHUB_SIGN_IN_METHOD="github.com";Aa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Qu{constructor(){super("twitter.com")}static credential(e,t){return Ao._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Sa.credential(t,n)}catch{return null}}}Sa.TWITTER_SIGN_IN_METHOD="twitter.com";Sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(r,e){return Yu(r,"POST","/v1/accounts:signUp",Wa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const i=await Fi._fromIdTokenResponse(e,n,s),o=Q_(n);return new So({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=Q_(n);return new So({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function Q_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends qs{constructor(e,t,n,s){var i;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,jf.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new jf(e,t,n,s)}}function Ob(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jf._fromErrorAndOperation(r,i,e,n):i})}async function qR(r,e,t=!1){const n=await Su(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return So._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(r,e,t=!1){const{auth:n}=r;if(li(n.app))return Promise.reject(Mi(n));const s="reauthenticate";try{const i=await Su(r,Ob(n,s,e,r),t);pt(i.idToken,n,"internal-error");const o=Ox(i.idToken);pt(o,n,"internal-error");const{sub:u}=o;return pt(r.uid===u,n,"user-mismatch"),So._forOperation(r,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Ws(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(r,e,t=!1){if(li(r.app))return Promise.reject(Mi(r));const n="signIn",s=await Ob(r,n,e),i=await So._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(i.user),i}async function KR(r,e){return Bb(Lo(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(r){const e=Lo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XR(r,e,t){if(li(r.app))return Promise.reject(Mi(r));const n=Lo(r),o=await jg(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Lb(r),d}),u=await So._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(u.user),u}function Mb(r,e,t){return li(r.app)?Promise.reject(Mi(r)):KR(br(r),oc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Lb(r),n})}function YR(r,e,t,n){return br(r).onIdTokenChanged(e,t,n)}function QR(r,e,t){return br(r).beforeAuthStateChanged(e,t)}function Vb(r,e,t,n){return br(r).onAuthStateChanged(e,t,n)}function JR(r){return br(r).signOut()}const Of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=1e3,ek=10;class zb extends Ub{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,u,d)=>{this.notifyListeners(o,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!t&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);_R()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ek):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},ZR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zb.type="LOCAL";const tk=zb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Ub{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$b.type="SESSION";const Hb=$b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new Sh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(o).map(async h=>h(t.origin,i)),d=await rk(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,d)=>{const h=Vx("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(v){const x=v;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(x.data.response);break;default:clearTimeout(m),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function sk(r){fi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function ik(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ak(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function ok(){return Wb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firebaseLocalStorageDb",lk=1,Bf="firebaseLocalStorage",Gb="fbase_key";class Ju{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nh(r,e){return r.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function ck(){const r=indexedDB.deleteDatabase(qb);return new Ju(r).toPromise()}function Og(){const r=indexedDB.open(qb,lk);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Bf,{keyPath:Gb})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Bf)?e(n):(n.close(),await ck(),e(await Og()))})})}async function J_(r,e,t){const n=Nh(r,!0).put({[Gb]:e,value:t});return new Ju(n).toPromise()}async function uk(r,e){const t=Nh(r,!1).get(e),n=await new Ju(t).toPromise();return n===void 0?null:n.value}function Z_(r,e){const t=Nh(r,!0).delete(e);return new Ju(t).toPromise()}const dk=800,fk=3;class Kb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>fk)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(ok()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ik(),!this.activeServiceWorker)return;this.sender=new nk(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ak()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Og();return await J_(e,Of,"1"),await Z_(e,Of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>J_(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>uk(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Z_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Nh(s,!1).getAll();return new Ju(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kb.type="LOCAL";const hk=Kb;new Xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(r,e){return e?ji(e):(pt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux extends Lx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pk(r){return Bb(r.auth,new Ux(r),r.bypassAuthState)}function gk(r){const{auth:e,user:t}=r;return pt(t,e,"internal-error"),GR(t,new Ux(r),r.bypassAuthState)}async function xk(r){const{auth:e,user:t}=r;return pt(t,e,"internal-error"),qR(t,new Ux(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,t,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pk;case"linkViaPopup":case"linkViaRedirect":return xk;case"reauthViaPopup":case"reauthViaRedirect":return gk;default:Ws(this.auth,"internal-error")}}resolve(e){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new Xu(2e3,1e4);class Ol extends Xb{constructor(e,t,n,s,i){super(e,t,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Ol.currentPopupAction&&Ol.currentPopupAction.cancel(),Ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){qi(this.filter.length===1,"Popup operations only handle one event");const e=Vx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vk.get())};e()}}Ol.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="pendingRedirect",Bd=new Map;class _k extends Xb{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Bd.get(this.auth._key());if(!e){try{const n=await Ek(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Bd.set(this.auth._key(),e)}return this.bypassAuthState||Bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ek(r,e){const t=Tk(e),n=bk(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function wk(r,e){Bd.set(r._key(),e)}function bk(r){return ji(r._redirectPersistence)}function Tk(r){return Od(yk,r.config.apiKey,r.name)}async function Ck(r,e,t=!1){if(li(r.app))return Promise.reject(Mi(r));const n=Lo(r),s=mk(n,e),o=await new _k(n,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=600*1e3;class Sk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Nk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Yb(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(di(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ak&&this.cachedEventUids.clear(),this.cachedEventUids.has(e2(e))}saveEventToCache(e){this.cachedEventUids.add(e2(e)),this.lastProcessedEventTime=Date.now()}}function e2(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Yb({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function Nk(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(r,e={}){return qa(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kk=/^https?/;async function Dk(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Ik(r);for(const t of e)try{if(Pk(t))return}catch{}Ws(r,"unauthorized-domain")}function Pk(r){const e=Pg(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const o=new URL(r);return o.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!kk.test(t))return!1;if(Rk.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new Xu(3e4,6e4);function t2(){const r=fi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function jk(r){return new Promise((e,t)=>{var n,s,i;function o(){t2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t2(),t(di(r,"network-request-failed"))},timeout:Fk.get()})}if(!((s=(n=fi().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=fi().gapi)===null||i===void 0)&&i.load)o();else{const u=IR("iframefcb");return fi()[u]=()=>{gapi.load?o():t(di(r,"network-request-failed"))},Pb(`${NR()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw Ld=null,e})}let Ld=null;function Ok(r){return Ld=Ld||jk(r),Ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=new Xu(5e3,15e3),Lk="__/auth/iframe",Mk="emulator/auth/iframe",Vk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zk(r){const e=r.config;pt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?jx(e,Mk):`https://${r.config.authDomain}/${Lk}`,n={apiKey:e.apiKey,appName:r.name,v:tc},s=Uk.get(r.config.apiHost);s&&(n.eid=s);const i=r._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${Bu(n).slice(1)}`}async function $k(r){const e=await Ok(r),t=fi().gapi;return pt(t,r,"internal-error"),e.open({where:document.body,url:zk(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vk,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=di(r,"network-request-failed"),u=fi().setTimeout(()=>{i(o)},Bk.get());function d(){fi().clearTimeout(u),s(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wk=500,qk=600,Gk="_blank",Kk="http://localhost";class r2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xk(r,e,t,n=Wk,s=qk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d=Object.assign(Object.assign({},Hk),{width:n.toString(),height:s.toString(),top:i,left:o}),h=_n().toLowerCase();t&&(u=Ab(h)?Gk:t),Tb(h)&&(e=e||Kk,d.scrollbars="yes");const m=Object.entries(d).reduce((x,[y,E])=>`${x}${y}=${E},`,"");if(yR(h)&&u!=="_self")return Yk(e||"",u),new r2(null);const v=window.open(e||"",u,m);pt(v,r,"popup-blocked");try{v.focus()}catch{}return new r2(v)}function Yk(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="__/auth/handler",Jk="emulator/auth/handler",Zk=encodeURIComponent("fac");async function n2(r,e,t,n,s,i){pt(r.config.authDomain,r,"auth-domain-config-required"),pt(r.config.apiKey,r,"invalid-api-key");const o={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:tc,eventId:s};if(e instanceof jb){e.setDefaultLanguage(r.languageCode),o.providerId=e.providerId||"",G3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,v]of Object.entries({}))o[m]=v}if(e instanceof Qu){const m=e.getScopes().filter(v=>v!=="");m.length>0&&(o.scopes=m.join(","))}r.tenantId&&(o.tid=r.tenantId);const u=o;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await r._getAppCheckToken(),h=d?`#${Zk}=${encodeURIComponent(d)}`:"";return`${e5(r)}?${Bu(u).slice(1)}${h}`}function e5({config:r}){return r.emulator?jx(r,Jk):`https://${r.authDomain}/${Qk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="webStorageSupport";class t5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hb,this._completeRedirectFn=Ck,this._overrideRedirectResult=wk}async _openPopup(e,t,n,s){var i;qi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await n2(e,t,n,Pg(),s);return Xk(e,o,Vx())}async _openRedirect(e,t,n,s){await this._originValidation(e);const i=await n2(e,t,n,Pg(),s);return sk(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(qi(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await $k(e),n=new Sk(e);return t.register("authEvent",s=>(pt(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sp,{type:Sp},s=>{var i;const o=(i=s?.[0])===null||i===void 0?void 0:i[Sp];o!==void 0&&t(!!o),Ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Dk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kb()||Cb()||Bx()}}const r5=t5;var s2="@firebase/auth",i2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i5(r){hi(new $s("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=n.options;pt(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Db(r)},h=new CR(n,s,i,d);return FR(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),hi(new $s("auth-internal",e=>{const t=Lo(e.getProvider("auth").getImmediate());return(n=>new n5(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(s2,i2,s5(r)),ws(s2,i2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=300,o5=Fw("authIdTokenMaxAge")||a5;let a2=null;const l5=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>o5)return;const s=t?.token;a2!==s&&(a2=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function c5(r=Kg()){const e=jo(r,"auth");if(e.isInitialized())return e.getImmediate();const t=PR(r,{popupRedirectResolver:r5,persistence:[hk,tk,Hb]}),n=Fw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=l5(i.toString());QR(t,o,()=>o(t.currentUser)),YR(t,u=>o(u))}}const s=Dw("auth");return s&&jR(t,`http://${s}`),t}function u5(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}AR({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const i=di("internal-error");i.customData=s,t(i)},n.type="text/javascript",n.charset="UTF-8",u5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i5("Browser");const Qb="@firebase/installations",zx="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=1e4,Zb=`w:${zx}`,eT="FIS_v2",d5="https://firebaseinstallations.googleapis.com/v1",f5=3600*1e3,h5="installations",m5="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},No=new Fo(h5,m5,p5);function tT(r){return r instanceof qs&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT({projectId:r}){return`${d5}/projects/${r}/installations`}function nT(r){return{token:r.token,requestStatus:2,expiresIn:x5(r.expiresIn),creationTime:Date.now()}}async function sT(r,e){const n=(await e.json()).error;return No.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function iT({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function g5(r,{refreshToken:e}){const t=iT(r);return t.append("Authorization",v5(e)),t}async function aT(r){const e=await r();return e.status>=500&&e.status<600?r():e}function x5(r){return Number(r.replace("s","000"))}function v5(r){return`${eT} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const n=rT(r),s=iT(r),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const o={fid:t,authVersion:eT,appId:r.appId,sdkVersion:Zb},u={method:"POST",headers:s,body:JSON.stringify(o)},d=await aT(()=>fetch(n,u));if(d.ok){const h=await d.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:nT(h.authToken)}}else throw await sT("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=/^[cdef][\w-]{21}$/,Bg="";function w5(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=b5(r);return E5.test(t)?t:Bg}catch{return Bg}}function b5(r){return _5(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=new Map;function cT(r,e){const t=Ih(r);uT(t,e),T5(t,e)}function uT(r,e){const t=lT.get(r);if(t)for(const n of t)n(e)}function T5(r,e){const t=C5();t&&t.postMessage({key:r,fid:e}),A5()}let vo=null;function C5(){return!vo&&"BroadcastChannel"in self&&(vo=new BroadcastChannel("[Firebase] FID Change"),vo.onmessage=r=>{uT(r.data.key,r.data.fid)}),vo}function A5(){lT.size===0&&vo&&(vo.close(),vo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="firebase-installations-database",N5=1,Io="firebase-installations-store";let Np=null;function $x(){return Np||(Np=Vw(S5,N5,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Io)}}})),Np}async function Lf(r,e){const t=Ih(r),s=(await $x()).transaction(Io,"readwrite"),i=s.objectStore(Io),o=await i.get(t);return await i.put(e,t),await s.done,(!o||o.fid!==e.fid)&&cT(r,e.fid),e}async function dT(r){const e=Ih(r),n=(await $x()).transaction(Io,"readwrite");await n.objectStore(Io).delete(e),await n.done}async function Rh(r,e){const t=Ih(r),s=(await $x()).transaction(Io,"readwrite"),i=s.objectStore(Io),o=await i.get(t),u=e(o);return u===void 0?await i.delete(t):await i.put(u,t),await s.done,u&&(!o||o.fid!==u.fid)&&cT(r,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(r){let e;const t=await Rh(r.appConfig,n=>{const s=I5(n),i=R5(r,s);return e=i.registrationPromise,i.installationEntry});return t.fid===Bg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function I5(r){const e=r||{fid:w5(),registrationStatus:0};return fT(e)}function R5(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(No.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=k5(r,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:D5(r)}:{installationEntry:e}}async function k5(r,e){try{const t=await y5(r,e);return Lf(r.appConfig,t)}catch(t){throw tT(t)&&t.customData.serverCode===409?await dT(r.appConfig):await Lf(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function D5(r){let e=await o2(r.appConfig);for(;e.registrationStatus===1;)await oT(100),e=await o2(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await Hx(r);return n||t}return e}function o2(r){return Rh(r,e=>{if(!e)throw No.create("installation-not-found");return fT(e)})}function fT(r){return P5(r)?{fid:r.fid,registrationStatus:0}:r}function P5(r){return r.registrationStatus===1&&r.registrationTime+Jb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F5({appConfig:r,heartbeatServiceProvider:e},t){const n=j5(r,t),s=g5(r,t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const o={installation:{sdkVersion:Zb,appId:r.appId}},u={method:"POST",headers:s,body:JSON.stringify(o)},d=await aT(()=>fetch(n,u));if(d.ok){const h=await d.json();return nT(h)}else throw await sT("Generate Auth Token",d)}function j5(r,{fid:e}){return`${rT(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(r,e=!1){let t;const n=await Rh(r.appConfig,i=>{if(!hT(i))throw No.create("not-registered");const o=i.authToken;if(!e&&L5(o))return i;if(o.requestStatus===1)return t=O5(r,e),i;{if(!navigator.onLine)throw No.create("app-offline");const u=V5(i);return t=B5(r,u),u}});return t?await t:n.authToken}async function O5(r,e){let t=await l2(r.appConfig);for(;t.authToken.requestStatus===1;)await oT(100),t=await l2(r.appConfig);const n=t.authToken;return n.requestStatus===0?Wx(r,e):n}function l2(r){return Rh(r,e=>{if(!hT(e))throw No.create("not-registered");const t=e.authToken;return U5(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function B5(r,e){try{const t=await F5(r,e),n=Object.assign(Object.assign({},e),{authToken:t});return await Lf(r.appConfig,n),t}catch(t){if(tT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await dT(r.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Lf(r.appConfig,n)}throw t}}function hT(r){return r!==void 0&&r.registrationStatus===2}function L5(r){return r.requestStatus===2&&!M5(r)}function M5(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+f5}function V5(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function U5(r){return r.requestStatus===1&&r.requestTime+Jb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z5(r){const e=r,{installationEntry:t,registrationPromise:n}=await Hx(e);return n?n.catch(console.error):Wx(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $5(r,e=!1){const t=r;return await H5(t),(await Wx(t,e)).token}async function H5(r){const{registrationPromise:e}=await Hx(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(r){if(!r||!r.options)throw Ip("App Configuration");if(!r.name)throw Ip("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Ip(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Ip(r){return No.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="installations",q5="installations-internal",G5=r=>{const e=r.getProvider("app").getImmediate(),t=W5(e),n=jo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},K5=r=>{const e=r.getProvider("app").getImmediate(),t=jo(e,mT).getImmediate();return{getId:()=>z5(t),getToken:s=>$5(t,s)}};function X5(){hi(new $s(mT,G5,"PUBLIC")),hi(new $s(q5,K5,"PRIVATE"))}X5();ws(Qb,zx);ws(Qb,zx,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="analytics",Y5="firebase_id",Q5="origin",J5=60*1e3,Z5="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new ah("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ls=new Fo("analytics","Analytics",eD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(r){if(!r.startsWith(qx)){const e=ls.create("invalid-gtag-resource",{gtagURL:r});return zn.warn(e.message),""}return r}function pT(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function rD(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function nD(r,e){const t=rD("firebase-js-sdk-policy",{createScriptURL:tD}),n=document.createElement("script"),s=`${qx}?l=${r}&id=${e}`;n.src=t?t?.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function sD(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function iD(r,e,t,n,s,i){const o=n[s];try{if(o)await e[o];else{const d=(await pT(t)).find(h=>h.measurementId===s);d&&await e[d.appId]}}catch(u){zn.error(u)}r("config",s,i)}async function aD(r,e,t,n,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const u=await pT(t);for(const d of o){const h=u.find(v=>v.measurementId===d),m=h&&e[h.appId];if(m)i.push(m);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),r("event",n,s||{})}catch(i){zn.error(i)}}function oD(r,e,t,n){async function s(i,...o){try{if(i==="event"){const[u,d]=o;await aD(r,e,t,u,d)}else if(i==="config"){const[u,d]=o;await iD(r,e,t,n,u,d)}else if(i==="consent"){const[u,d]=o;r("consent",u,d)}else if(i==="get"){const[u,d,h]=o;r("get",u,d,h)}else if(i==="set"){const[u]=o;r("set",u)}else r(i,...o)}catch(u){zn.error(u)}}return s}function lD(r,e,t,n,s){let i=function(...o){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=oD(i,r,e,t),{gtagCore:i,wrappedGtag:window[s]}}function cD(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(qx)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=30,dD=1e3;class fD{constructor(e={},t=dD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const gT=new fD;function hD(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function mD(r){var e;const{appId:t,apiKey:n}=r,s={method:"GET",headers:hD(n)},i=Z5.replace("{app-id}",t),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let u="";try{const d=await o.json();!((e=d.error)===null||e===void 0)&&e.message&&(u=d.error.message)}catch{}throw ls.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()}async function pD(r,e=gT,t){const{appId:n,apiKey:s,measurementId:i}=r.options;if(!n)throw ls.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:n};throw ls.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new vD;return setTimeout(async()=>{u.abort()},J5),xT({appId:n,apiKey:s,measurementId:i},o,u,e)}async function xT(r,{throttleEndTimeMillis:e,backoffCount:t},n,s=gT){var i;const{appId:o,measurementId:u}=r;try{await gD(n,e)}catch(d){if(u)return zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:o,measurementId:u};throw d}try{const d=await mD(r);return s.deleteThrottleMetadata(o),d}catch(d){const h=d;if(!xD(h)){if(s.deleteThrottleMetadata(o),u)return zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:o,measurementId:u};throw d}const m=Number((i=h?.customData)===null||i===void 0?void 0:i.httpStatus)===503?qy(t,s.intervalMillis,uD):qy(t,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+m,backoffCount:t+1};return s.setThrottleMetadata(o,v),zn.debug(`Calling attemptFetch again in ${m} millis`),xT(r,v,n,s)}}function gD(r,e){return new Promise((t,n)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(t,s);r.addEventListener(()=>{clearTimeout(i),n(ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xD(r){if(!(r instanceof qs)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class vD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function yD(r,e,t,n,s){if(s&&s.global){r("event",t,n);return}else{const i=await e,o=Object.assign(Object.assign({},n),{send_to:i});r("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(){if(Ow())try{await Bw()}catch(r){return zn.warn(ls.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return zn.warn(ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ED(r,e,t,n,s,i,o){var u;const d=pD(r);d.then(y=>{t[y.measurementId]=y.appId,r.options.measurementId&&y.measurementId!==r.options.measurementId&&zn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>zn.error(y)),e.push(d);const h=_D().then(y=>{if(y)return n.getId()}),[m,v]=await Promise.all([d,h]);cD(i)||nD(i,m.measurementId),s("js",new Date);const x=(u=o?.config)!==null&&u!==void 0?u:{};return x[Q5]="firebase",x.update=!0,v!=null&&(x[Y5]=v),s("config",m.measurementId,x),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.app=e}_delete(){return delete ou[this.app.options.appId],Promise.resolve()}}let ou={},c2=[];const u2={};let Rp="dataLayer",bD="gtag",d2,vT,f2=!1;function TD(){const r=[];if(jw()&&r.push("This is a browser extension environment."),$3()||r.push("Cookies are not available."),r.length>0){const e=r.map((n,s)=>`(${s+1}) ${n}`).join(" "),t=ls.create("invalid-analytics-context",{errorInfo:e});zn.warn(t.message)}}function CD(r,e,t){TD();const n=r.options.appId;if(!n)throw ls.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ls.create("no-api-key");if(ou[n]!=null)throw ls.create("already-exists",{id:n});if(!f2){sD(Rp);const{wrappedGtag:i,gtagCore:o}=lD(ou,c2,u2,Rp,bD);vT=i,d2=o,f2=!0}return ou[n]=ED(r,c2,u2,e,d2,Rp,t),new wD(r)}function AD(r=Kg()){r=br(r);const e=jo(r,Mf);return e.isInitialized()?e.getImmediate():SD(r)}function SD(r,e={}){const t=jo(r,Mf);if(t.isInitialized()){const s=t.getImmediate();if(gu(e,t.getOptions()))return s;throw ls.create("already-initialized")}return t.initialize({options:e})}function ND(r,e,t,n){r=br(r),yD(vT,ou[r.app.options.appId],e,t,n).catch(s=>zn.error(s))}const h2="@firebase/analytics",m2="0.10.8";function ID(){hi(new $s(Mf,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return CD(n,s,t)},"PUBLIC")),hi(new $s("analytics-internal",r,"PRIVATE")),ws(h2,m2),ws(h2,m2,"esm2017");function r(e){try{const t=e.getProvider(Mf).getImmediate();return{logEvent:(n,s,i)=>ND(t,n,s,i)}}catch(t){throw ls.create("interop-component-reg-failed",{reason:t})}}}ID();const RD={apiKey:"AIzaSyB88G8-VS5ueUpf47a43nk2OgF1cI4KkLc",authDomain:"sistema-guri.firebaseapp.com",projectId:"sistema-guri",storageBucket:"sistema-guri.firebasestorage.app",messagingSenderId:"713855873383",appId:"1:713855873383:web:b5702c906f242e4446bfc2",measurementId:"G-6C3M9EPV9P"},Gx=Uw(RD),Je=tb(Gx),Na=c5(Gx);AD(Gx);function p2(){const r=qg();return c.jsxs("div",{className:"min-h-screen bg-gray-900",children:[c.jsx("header",{className:"bg-black border-b border-gray-800",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4 sm:py-8",children:[c.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[c.jsx("img",{src:"/images/client_logo.jpeg",alt:"Restaurante JyG",className:"w-12 h-12 sm:w-16 sm:h-16 object-cover rounded-full"}),c.jsxs("div",{className:"text-gray-300 text-sm sm:text-xl font-medium",children:[c.jsx("span",{className:"hidden sm:inline",children:"Restaurante JyG"}),c.jsx("span",{className:"sm:hidden",children:"JyG"})]})]}),c.jsxs("button",{onClick:()=>r("/admin"),className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white text-sm font-semibold rounded-lg hover:from-red-600 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center space-x-2",children:[c.jsx("span",{children:""}),c.jsx("span",{className:"hidden sm:inline",children:"Iniciar Sesin"}),c.jsx("span",{className:"sm:hidden",children:"Admin"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-20",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-8 sm:mb-12",children:c.jsx("div",{className:"mx-auto w-32 h-32 sm:w-40 sm:h-40 mb-6 sm:mb-8 rounded-full overflow-hidden bg-gray-800 shadow-2xl border-4 border-red-500",children:c.jsx("img",{src:"/images/client_logo.jpeg",alt:"Logo del Restaurante",className:"w-full h-full object-cover object-center"})})}),c.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-bold text-white mb-6 sm:mb-8",children:"Restaurante JyG"}),c.jsx("p",{className:"text-base sm:text-xl text-gray-300 mb-8 sm:mb-12 max-w-4xl mx-auto px-4",children:"Disfruta de la mejor gastronoma en un ambiente acogedor y familiar. Nuestros platos estn preparados con ingredientes frescos y recetas tradicionales."})]})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-20",children:[c.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[c.jsx("h2",{className:"text-2xl sm:text-4xl font-bold text-white mb-4",children:"Informacin del Negocio"}),c.jsx("p",{className:"text-base sm:text-xl text-gray-300 px-4",children:"Conoce nuestros horarios, ubicacin y formas de contacto"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8",children:[c.jsx("div",{className:"bg-gray-800 p-6 sm:p-8 rounded-lg border border-gray-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6",children:c.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),c.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-3 sm:mb-4",children:"Horarios"}),c.jsxs("div",{className:"text-gray-300 space-y-2 text-sm sm:text-base",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Martes - Sbado:"})," 18:00 - 23:30"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Lunes y Domingo:"})," Cerrado"]})]})]})}),c.jsx("div",{className:"bg-gray-800 p-6 sm:p-8 rounded-lg border border-gray-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6",children:c.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),c.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-3 sm:mb-4",children:"Ubicacin"}),c.jsxs("div",{className:"text-gray-300 space-y-2 text-sm sm:text-base",children:[c.jsx("p",{children:c.jsx("strong",{children:"Direccin:"})}),c.jsx("p",{className:"text-white font-semibold text-lg",children:"Restaurante JyG"}),c.jsx("p",{children:"Club Gimnacia Guatamb"}),c.jsx("p",{children:c.jsx("strong",{children:"Montecarlo, Misiones"})})]})]})}),c.jsx("div",{className:"bg-gray-800 p-6 sm:p-8 rounded-lg border border-gray-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6",children:c.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),c.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-3 sm:mb-4",children:"Contacto"}),c.jsxs("div",{className:"text-gray-300 space-y-2 text-sm sm:text-base",children:[c.jsx("p",{children:c.jsx("strong",{children:"Telfono:"})}),c.jsx("p",{children:"+54 9 3751 53-0697"}),c.jsx("p",{children:c.jsx("strong",{children:"WhatsApp:"})}),c.jsx("p",{children:"+54 9 3751 53-0697"})]})]})})]})]}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Caractersticas del Sistema"}),c.jsx("p",{className:"text-xl text-gray-300",children:"Descubre cmo nuestro sistema puede mejorar tu restaurante"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"bg-gray-800 p-8 rounded-lg border border-gray-700 hover:border-red-500 transition-colors",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx("span",{className:"text-3xl",children:""})}),c.jsx("h3",{className:"text-2xl font-bold text-red-500 mb-4",children:"Venta Online"}),c.jsx("p",{className:"text-white text-lg mb-4",children:"Impuls tu delivery y simplific tus cobros"}),c.jsx("p",{className:"text-gray-300 mb-6",children:"Administr pedidos a travs de nuestros canales de venta en lnea:"}),c.jsxs("ul",{className:"text-gray-300 space-y-2 text-left",children:[c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"text-red-500 mr-2",children:""}),"Tienda Online"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"text-red-500 mr-2",children:""}),"Carta QR"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"text-red-500 mr-2",children:""}),"Integraciones con PedidosYa y Rappi"]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx("span",{className:"text-red-500 mr-2",children:""}),"Integracin con Mercado Pago"]})]})]})}),c.jsx("div",{className:"bg-gray-800 p-8 rounded-lg border-2 border-red-500",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx("span",{className:"text-3xl",children:""})}),c.jsx("h3",{className:"text-2xl font-bold text-red-500 mb-4",children:"Servicio Eficiente"}),c.jsx("p",{className:"text-white text-lg mb-4",children:"Carg pedidos y visualiz comandas en segundos"}),c.jsx("p",{className:"text-gray-300 mb-6",children:"Reduc tiempos de espera al incorporar tu Monitor de Cocina (Kitchen Display System)."}),c.jsx("a",{href:"#funcionalidades",className:"text-red-500 hover:text-red-400 font-semibold",children:"Ver funcionalidades"})]})}),c.jsx("div",{className:"bg-gray-800 p-8 rounded-lg border border-gray-700 hover:border-red-500 transition-colors",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx("span",{className:"text-3xl",children:""})}),c.jsx("h3",{className:"text-2xl font-bold text-red-500 mb-4",children:"Mejores Resultados"}),c.jsx("p",{className:"text-white text-lg mb-4",children:"Registr ventas, gastos y stock"}),c.jsx("p",{className:"text-gray-300 mb-6",children:"Obten informacin clave para tomar decisiones acertadas."}),c.jsx("a",{href:"#funcionalidades",className:"text-red-500 hover:text-red-400 font-semibold",children:"Ver funcionalidades"})]})})]})]}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-4xl font-bold text-white mb-12",children:"Sguenos en Redes Sociales"}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("a",{href:"https://wa.me/5493751530697",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-8 py-4 bg-green-600 text-white text-lg font-semibold rounded-lg hover:bg-green-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[c.jsx("span",{className:"text-2xl mr-3",children:""}),"WhatsApp"]})})]})}),c.jsx("footer",{className:"bg-black text-white py-16 border-t border-gray-800",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center space-x-4 mb-6",children:c.jsx("img",{src:"/images/guri.png",alt:"Guri Soft",className:"w-20 h-20 object-contain"})}),c.jsx("p",{className:"text-gray-300 mb-4",children:"Sistema de gestin para restaurantes desarrollado con tecnologa de vanguardia. Simplificamos la operacin de tu negocio gastronmico."}),c.jsx("div",{className:"text-red-500 font-semibold",children:"Tecnologa Guri - Soluciones Gastronmicas"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4 text-white",children:"Horarios de Atencin"}),c.jsxs("p",{className:"text-gray-300",children:[c.jsx("strong",{children:"Martes - Sbado:"}),c.jsx("br",{}),"18:00 - 23:30 hrs"]})]})]}),c.jsx("div",{className:"border-t border-gray-800 mt-12 pt-8 text-center",children:c.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[c.jsx("img",{src:"/images/guri.png",alt:"Guri Soft",className:"w-8 h-8 object-contain"}),c.jsxs("span",{className:"text-gray-400",children:[" 2026 Restaurante JyG. Desarrollado por ",c.jsx("a",{href:"https://softtech-system.com",target:"_blank",rel:"noopener noreferrer",className:"text-red-500 font-semibold hover:text-red-400 transition-colors",children:"Soft Tech Solutions"})]})]})})]})})]})}function Vf({src:r,alt:e,className:t="",fallbackText:n="Imagen no disponible",containerClassName:s="",aspectRatio:i="16/9"}){const[o,u]=se.useState(!1),[d,h]=se.useState(!0),m=()=>{console.log(" Imagen cargada exitosamente:",r),h(!1),u(!1)},v=x=>{console.error(" Error cargando imagen:",r),console.error(" Error details:",x),u(!0),h(!1)};return o?c.jsx("div",{className:`flex items-center justify-center bg-gray-100 text-gray-500 text-sm ${s}`,children:c.jsx("span",{children:n})}):c.jsxs("div",{className:`relative overflow-hidden ${s}`,children:[d&&c.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})}),c.jsx("img",{src:r,alt:e,className:`w-full h-full object-cover object-center transition-opacity duration-300 ${d?"opacity-0":"opacity-100"} ${t}`,onLoad:m,onError:v,loading:"lazy",crossOrigin:"anonymous"})]})}function kD({producto:r,onAddToCart:e}){const[t,n]=se.useState(!1),[s,i]=se.useState([]),[o,u]=se.useState([]),d=()=>{const v={...r,ingredientes_removidos:s,agregados:o};if(console.log(" Agregando producto al carrito:",v),console.log(" Precio base del producto:",r.precio),console.log(" Agregados seleccionados:",o),o.length>0){const x=o.reduce((y,E)=>y+(E.precio||0),0);console.log(" Total de agregados:",x),console.log(" Precio total esperado:",r.precio+x)}e(v),i([]),u([]),n(!1)},h=v=>{i(x=>x.includes(v)?x.filter(y=>y!==v):[...x,v])},m=v=>{u(x=>x.find(E=>E.nombre===v.nombre)?x.filter(E=>E.nombre!==v.nombre):[...x,v])};return c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.imagen&&c.jsxs(c.Fragment,{children:[console.log(" ProductCard - URL de imagen:",r.imagen),c.jsx(Vf,{src:r.imagen,alt:r.nombre,containerClassName:"w-full h-48",fallbackText:"Imagen no disponible"})]}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.nombre}),c.jsx("p",{className:"text-gray-600 text-sm mb-3",children:r.descripcion}),c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{className:"text-xl font-bold text-green-600",children:["$",r.precio]}),r.bebida&&c.jsxs("span",{className:"text-sm text-blue-600 font-medium",children:[" Incluye: ",r.bebida]})]}),c.jsx("button",{onClick:()=>n(!t),className:"text-sm text-blue-600 hover:text-blue-800",children:t?"Ocultar opciones":"Personalizar"})]}),t&&c.jsxs("div",{className:"space-y-3 mb-4",children:[r.ingredientes_opcional&&r.ingredientes_opcional.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Ingredientes opcionales:"}),c.jsx("div",{className:"space-y-2",children:r.ingredientes_opcional.map((v,x)=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:s.includes(v),onChange:()=>h(v),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Quitar ",v]})]},x))})]}),r.agregados&&r.agregados.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Agregados disponibles:"}),c.jsx("div",{className:"space-y-2",children:r.agregados.map((v,x)=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:o.some(y=>y.nombre===v.nombre),onChange:()=>m(v),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[v.nombre," (+$",v.precio,")"]})]},x))})]})]}),c.jsx("button",{onClick:d,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Agregar al Carrito"})]})]})}function g2({items:r,onRemove:e,onUpdateQuantity:t,onSubmitOrder:n,isMobile:s=!1}){const i=r.reduce((o,u)=>{let d=u.precio*u.cantidad;if(u.agregados&&u.agregados.length>0){const h=u.agregados.reduce((m,v)=>m+(v.precio||0),0);d+=h*u.cantidad,console.log(" Clculo de total para",u.nombre),console.log(" Precio base:",u.precio,"x",u.cantidad,"=",u.precio*u.cantidad),console.log(" Agregados:",u.agregados.map(m=>`${m.nombre} ($${m.precio})`)),console.log(" Total agregados:",h,"x",u.cantidad,"=",h*u.cantidad),console.log(" Total del item:",d)}return o+d},0);return r.length===0?c.jsxs("div",{className:`${s?"text-center py-8":"bg-white rounded-lg shadow-md p-6"}`,children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tu Carrito"}),c.jsxs("div",{className:`${s?"text-center":"text-center text-gray-500 py-8"}`,children:[c.jsx("p",{className:"text-gray-500",children:"Tu carrito est vaco"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Agrega productos para comenzar"})]})]}):c.jsxs("div",{className:`${s?"":"bg-white rounded-lg shadow-md p-6 sticky top-6"}`,children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tu Carrito"}),c.jsx("div",{className:"space-y-3 mb-6",children:r.map(o=>c.jsxs("div",{className:"border-b border-gray-200 pb-3",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("h3",{className:"font-medium text-gray-900",children:[o.tipo==="bebida"?" ":" ",o.nombre]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["$",o.precio," x ",o.cantidad]}),o.tipo==="bebida"&&c.jsxs("p",{className:`text-xs ${(o.stock||0)<=(o.stock_minimo||5)?"text-red-600":(o.stock||0)<=10?"text-yellow-600":"text-green-600"}`,children:["Stock: ",o.stock||0," disponible"]}),o.tipo!=="bebida"&&o.ingredientes_removidos&&o.ingredientes_removidos.length>0&&c.jsxs("p",{className:"text-xs text-red-600",children:["Sin ",o.ingredientes_removidos.join(", ")]}),o.tipo!=="bebida"&&o.agregados&&o.agregados.length>0&&c.jsxs("p",{className:"text-xs text-green-600",children:["Ms ",o.agregados.map(u=>u.nombre).join(", ")]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>t(o.id,o.cantidad-1),className:`${s?"w-8 h-8":"w-6 h-6"} rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300 flex items-center justify-center`,children:"-"}),c.jsx("span",{className:`${s?"w-10":"w-8"} text-center`,children:o.cantidad}),c.jsx("button",{onClick:()=>t(o.id,o.cantidad+1),disabled:o.tipo==="bebida"&&o.cantidad>=(o.stock||0),className:`${s?"w-8 h-8":"w-6 h-6"} rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300 flex items-center justify-center disabled:bg-gray-100 disabled:cursor-not-allowed`,children:"+"})]})]}),c.jsx("button",{onClick:()=>e(o.id),className:"text-sm text-red-600 hover:text-red-800",children:"Eliminar"})]},o.id))}),c.jsx("div",{className:"border-t border-gray-200 pt-4 mb-6",children:c.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[c.jsx("span",{children:"Total:"}),c.jsxs("span",{className:"text-green-600",children:["$",i.toFixed(2)]})]})}),c.jsx("button",{onClick:n,disabled:r.length===0,className:`w-full bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors ${s?"text-lg font-medium":""}`,children:s?"Finalizar Pedido":"Confirmar Pedido"})]})}function DD({bebida:r,onAddToCart:e}){const[t,n]=se.useState(1),s=()=>{if((r.stock||0)===0){alert(" No hay stock disponible para esta bebida");return}if(t>(r.stock||0)){alert(` Solo hay ${r.stock} unidades disponibles`);return}const d={...r,cantidad:t,tipo:"bebida"};e(d),n(1)},i=()=>{const d=r.stock||0;t<d&&n(h=>h+1)},o=()=>{t>1&&n(d=>d-1)},u=(r.stock||0)>0;return c.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden transition-all duration-200 ${u?"":"opacity-60 grayscale"}`,children:[r.imagen&&c.jsx(Vf,{src:r.imagen,alt:r.nombre,containerClassName:"w-full h-32",fallbackText:"Imagen no disponible"}),c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.nombre}),!u&&c.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full",children:"No disponible"})]}),c.jsx("p",{className:"text-gray-600 text-sm mb-3",children:r.descripcion}),c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("span",{className:"text-xl font-bold text-green-600",children:["$",r.precio]}),u?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:o,className:"w-8 h-8 bg-gray-200 text-gray-700 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",disabled:t<=1,children:"-"}),c.jsx("span",{className:"w-12 text-center font-medium",children:t}),c.jsx("button",{onClick:i,className:"w-8 h-8 bg-gray-200 text-gray-700 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",disabled:t>=(r.stock||0),children:"+"})]}):c.jsx("div",{className:"text-center",children:c.jsx("span",{className:"text-sm text-red-600 font-medium",children:"No disponible"})})]}),c.jsx("div",{className:"mb-3",children:u?c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${(r.stock||0)<=(r.stock_minimo||5)?"bg-red-100 text-red-800":(r.stock||0)<=10?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:["Stock disponible: ",r.stock||0]}),(r.stock||0)<=(r.stock_minimo||5)&&c.jsx("span",{className:"ml-2 text-xs text-red-600",children:" Stock bajo"})]}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm font-medium px-2 py-1 rounded-full bg-red-100 text-red-800",children:" No disponible"}),c.jsx("span",{className:"text-xs text-red-600",children:"Stock agotado"})]})}),c.jsx("button",{onClick:s,disabled:!u,className:`w-full py-2 px-4 rounded-md transition-colors ${u?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:u?"Agregar al Carrito":"No disponible"})]})]})}const yd=r=>{const[e,t]=se.useState(null);return se.useEffect(()=>{const n=()=>{const i=localStorage.getItem(r);if(i)try{const{timestamp:o}=JSON.parse(i),d=Date.now()-o,h=3e5,m=Math.max(0,h-d);t({exists:!0,age:d,remaining:m,expired:d>=h,lastUpdate:new Date(o).toLocaleString()})}catch(o){t({exists:!1,error:o.message})}else t({exists:!1})};n();const s=setInterval(n,3e4);return()=>clearInterval(s)},[r]),e},yT=(r,e,t=3e5,n=[])=>{const[s,i]=se.useState(null),[o,u]=se.useState(!0),[d,h]=se.useState(null),[m,v]=se.useState(!1),x=se.useRef(null),y=se.useRef(null),E=async(B=!1)=>{try{if(u(!0),h(null),!B){const W=localStorage.getItem(r);if(W)try{const{data:N,timestamp:I}=JSON.parse(W);if(Date.now()-I<t){console.log(` Datos cargados desde cach: ${r}`),i(N),u(!1),y.current=I,_(N);return}else console.log(` Cach expirado para: ${r}`)}catch(N){console.warn(` Error parseando cach para ${r}:`,N)}}console.log(` Cargando datos frescos para: ${r}`);const U=await e();try{const W=Date.now();localStorage.setItem(r,JSON.stringify({data:U,timestamp:W})),console.log(` Datos guardados en cach: ${r}`),y.current=W}catch(W){console.warn(` Error guardando en cach para ${r}:`,W)}i(U),u(!1),_(U)}catch(U){console.error(` Error cargando datos para ${r}:`,U),h(U),u(!1);try{const W=localStorage.getItem(r);if(W){const{data:N}=JSON.parse(W);console.log(` Fallback a cach para: ${r}`),i(N),h(null),_(N)}}catch(W){console.error(` Error en fallback para ${r}:`,W)}}},_=B=>{if(n.length===0){console.log(` No hay campos crticos definidos para ${r}, usando solo cach`);return}console.log(` Iniciando listener en tiempo real para campos crticos: ${n.join(", ")}`),v(!0);let U=r.replace("_cache","");U={productos_cache:"productos",bebidas_cache:"bebidas",mesas_cache:"mesas",salas_cache:"salas"}[U]||U;try{const N=ns(jt(Je,U),I=>{const T=I.docs.map(F=>({id:F.id,...F.data()}));let C=T;if((U==="productos"||U==="bebidas")&&(C=T.filter(F=>F.estado!=="inactivo")),w(s,C,n)){console.log(` Cambios crticos detectados en ${r}, actualizando datos`),i(C);try{const F=Date.now();localStorage.setItem(r,JSON.stringify({data:C,timestamp:F})),y.current=F,console.log(` Cach actualizado con cambios crticos: ${r}`)}catch(F){console.warn(" Error actualizando cach:",F)}}else console.log(` No hay cambios crticos en ${r}`)},I=>{console.error(` Error en listener de tiempo real para ${r}:`,I),v(!1)});x.current=N}catch(N){console.error(` Error iniciando listener para ${r}:`,N),v(!1)}},w=(B,U,W)=>{if(!B||!U)return!0;for(const N of W)for(let I=0;I<Math.min(B.length,U.length);I++){const T=B[I],C=U[I];if(!T||!C)return!0;if(N==="stock"){if(T.stock!==C.stock)return console.log(` Cambio de stock detectado: ${T.nombre} ${T.stock}  ${C.stock}`),!0}else if(N==="agregados"){const D=JSON.stringify((T.agregados||[]).sort((O,le)=>O.nombre.localeCompare(le.nombre))),F=JSON.stringify((C.agregados||[]).sort((O,le)=>O.nombre.localeCompare(le.nombre)));if(D!==F)return console.log(` Cambio de agregados detectado: ${T.nombre}`),!0}else if(N==="ingredientes_opcional"){const D=JSON.stringify((T.ingredientes_opcional||[]).sort()),F=JSON.stringify((C.ingredientes_opcional||[]).sort());if(D!==F)return console.log(` Cambio de ingredientes detectado: ${T.nombre}`),!0}else if(N==="precio"&&T.precio!==C.precio)return console.log(` Cambio de precio detectado: ${T.nombre} $${T.precio}  $${C.precio}`),!0}return!1},j=()=>{E(!0)},k=()=>{localStorage.removeItem(r),console.log(` Cach limpiado para: ${r}`)},R=()=>{x.current&&(console.log(` Deteniendo listener en tiempo real para: ${r}`),x.current(),x.current=null,v(!1))};return se.useEffect(()=>(E(),()=>{R()}),[r,t]),{data:s,loading:o,error:d,refetch:j,clearCache:k,isRealtime:m,stopRealtimeListener:R}},PD=()=>yT("productos_cache",async()=>{console.log(" Cargando productos desde Firestore...");const r=jt(Je,"productos"),t=(await os(r)).docs.map(s=>({id:s.id,...s.data()})),n=t.filter(s=>s.estado!=="inactivo");return console.log(` Productos cargados: ${n.length}/${t.length} activos`),n},6e5,["agregados","ingredientes_opcional","precio"]),FD=()=>yT("bebidas_cache",async()=>{console.log(" Cargando bebidas desde Firestore...");const r=jt(Je,"bebidas"),t=(await os(r)).docs.map(s=>({id:s.id,...s.data()})),n=t.filter(s=>s.estado!=="inactivo");return console.log(` Bebidas cargadas: ${n.length}/${t.length} activas`),n},6e5,["stock","precio"]),po=(r,e,t=!0,n=1)=>{try{const s=JSON.parse(localStorage.getItem("firestore_metrics")||"{}"),i=`${r}_${e}`;s[i]||(s[i]={reads:0,errors:0,documents:0,lastRead:null,firstRead:null}),s[i].reads+=1,s[i].documents+=n,s[i].lastRead=new Date().toISOString(),s[i].firstRead||(s[i].firstRead=new Date().toISOString()),t||(s[i].errors+=1),localStorage.setItem("firestore_metrics",JSON.stringify(s)),console.log(` Firestore ${e} en ${r}: ${n} documentos`)}catch(s){console.warn(" Error tracking Firestore metrics:",s)}},Kx=()=>{try{return JSON.parse(localStorage.getItem("firestore_metrics")||"{}")}catch(r){return console.warn(" Error obteniendo mtricas:",r),{}}},Xx=()=>{const r=Kx();let e=0,t=0,n=0;return Object.values(r).forEach(s=>{e+=s.reads||0,t+=s.documents||0,n+=s.errors||0}),{totalReads:e,totalDocuments:t,totalErrors:n,errorRate:e>0?(n/e*100).toFixed(2):0,collections:Object.keys(r).length}},jD=()=>{try{localStorage.removeItem("firestore_metrics"),console.log(" Mtricas de Firestore reseteadas")}catch(r){console.warn(" Error reseteando mtricas:",r)}},_T=()=>{const r=Xx(),e=r.totalReads*3,t=r.totalReads,n=e-t,s=e>0?(n/e*100).toFixed(1):0;return{estimatedWithoutCache:e,actualReads:t,savings:n,savingsPercentage:s,monthlyEstimate:t*30,monthlySavings:n*30}},OD=()=>{const r=Kx(),e=Xx(),t=_T();return JSON.stringify({timestamp:new Date().toISOString(),summary:e,savings:t,detailed:r},null,2)},Yx=()=>{const[r,e]=se.useState([]),[t,n]=se.useState(!0),[s,i]=se.useState(null),[o,u]=se.useState(!1),d=async()=>{try{console.log(" Cargando categoras desde Firestore..."),n(!0),i(null);const _=jt(Je,"categorias"),w=Li(_,Ml("posicion","asc")),k=(await os(w)).docs.map(B=>({id:B.id,...B.data()})),R=k.filter(B=>B.status==="activo");po("categorias","read",!0,k.length),console.log(` Categoras cargadas: ${R.length}/${k.length} activas`),e(R),u(!0)}catch(_){console.error(" Error cargando categoras:",_),i(_.message)}finally{n(!1)}};return se.useEffect(()=>{console.log(" Iniciando listener en tiempo real para categoras...");const _=jt(Je,"categorias"),w=Li(_,Ml("posicion","asc")),j=ns(w,k=>{n(!1),console.log(" Categoras actualizadas en tiempo real");const B=k.docs.map(U=>({id:U.id,...U.data()})).filter(U=>U.status==="activo");e(B),u(!0),console.log(` Categoras actualizadas: ${B.length} activas`)},k=>{console.error(" Error en listener de categoras:",k),i(k.message),n(!1)});return()=>{console.log(" Limpiando listener de categoras..."),j()}},[]),{categorias:r,loading:t,error:s,isRealtime:o,createCategoria:async _=>{try{console.log(" Creando nueva categora:",_);const w=r.length>0?Math.max(...r.map(R=>R.posicion||0)):0,j={..._,posicion:w+1,status:"activo",created_at:new Date},k=await gi(jt(Je,"categorias"),j);return console.log(" Categora creada exitosamente con ID:",k.id),{success:!0,id:k.id}}catch(w){return console.error(" Error creando categora:",w),{success:!1,error:w.message}}},updateCategoria:async(_,w)=>{try{return console.log(" Actualizando categora:",_,w),await pr(At(Je,"categorias",_),{...w,updated_at:new Date}),console.log(" Categora actualizada exitosamente"),{success:!0}}catch(j){return console.error(" Error actualizando categora:",j),{success:!1,error:j.message}}},deleteCategoria:async _=>{try{return console.log(" Eliminando categora:",_),await pr(At(Je,"categorias",_),{status:"inactivo",deleted_at:new Date}),console.log(" Categora eliminada exitosamente"),{success:!0}}catch(w){return console.error(" Error eliminando categora:",w),{success:!1,error:w.message}}},reorderCategorias:async _=>{try{console.log(" Reordenando categoras...");const w=_.map((j,k)=>pr(At(Je,"categorias",j.id),{posicion:k+1,updated_at:new Date}));return await Promise.all(w),console.log(" Categoras reordenadas exitosamente"),{success:!0}}catch(w){return console.error(" Error reordenando categoras:",w),{success:!1,error:w.message}}},getCategoriasByTipo:_=>r.filter(w=>w.tipo===_),getAllCategorias:async()=>{try{console.log(" Cargando todas las categoras (incluyendo inactivas)...");const _=jt(Je,"categorias"),w=Li(_,Ml("posicion","asc")),k=(await os(w)).docs.map(R=>({id:R.id,...R.data()}));return console.log(` Todas las categoras cargadas: ${k.length}`),k}catch(_){return console.error(" Error cargando todas las categoras:",_),[]}},refetch:d}},BD=()=>{const[r,e]=se.useState(!1),[t,n]=se.useState({}),[s,i]=se.useState({}),[o,u]=se.useState({}),[d,h]=se.useState(!1);se.useEffect(()=>{const x=()=>{n(Kx()),i(Xx()),u(_T())};x();const y=setInterval(x,5e3);return()=>clearInterval(y)},[]);const m=()=>{window.confirm("Ests seguro de que quieres hacer rollback? Esto limpiar todos los cachs y volver a los listeners originales.")&&(["productos_cache","bebidas_cache","mesas_cache","salas_cache","usuarios_cache"].forEach(y=>{localStorage.removeItem(y)}),jD(),window.location.reload())},v=()=>{const x=OD(),y=new Blob([x],{type:"application/json"}),E=URL.createObjectURL(y),_=document.createElement("a");_.href=E,_.download=`firestore-metrics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(E)};return r?c.jsxs("div",{className:"fixed bottom-4 right-4 bg-white p-4 rounded-lg shadow-lg border max-w-sm z-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:" Monitoreo Firestore"}),c.jsx("button",{onClick:()=>e(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),c.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:c.jsxs("div",{className:"text-sm space-y-1",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Lecturas totales:"}),c.jsx("span",{className:"font-medium",children:s.totalReads})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Documentos:"}),c.jsx("span",{className:"font-medium",children:s.totalDocuments})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Errores:"}),c.jsx("span",{className:`font-medium ${s.totalErrors>0?"text-red-600":"text-green-600"}`,children:s.totalErrors})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Colecciones:"}),c.jsx("span",{className:"font-medium",children:s.collections})]})]})}),c.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded",children:[c.jsx("h4",{className:"font-medium text-green-800 mb-2",children:" Ahorros Estimados"}),c.jsxs("div",{className:"text-sm space-y-1",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Ahorro:"}),c.jsxs("span",{className:"font-medium text-green-600",children:[o.savingsPercentage,"%"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Lecturas/mes:"}),c.jsx("span",{className:"font-medium",children:o.monthlyEstimate?.toLocaleString()})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Ahorro/mes:"}),c.jsx("span",{className:"font-medium text-green-600",children:o.monthlySavings?.toLocaleString()})]})]})]}),c.jsxs("div",{className:"mb-4 max-h-32 overflow-y-auto",children:[c.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:" Detalles"}),c.jsx("div",{className:"text-xs space-y-1",children:Object.entries(t).map(([x,y])=>c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{className:"truncate",children:[x,":"]}),c.jsx("span",{className:"font-medium",children:y.reads})]},x))})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:v,className:"flex-1 px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600",children:" Exportar"}),c.jsx("button",{onClick:()=>h(!d),className:"flex-1 px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600",children:" Rollback"})]}),d&&c.jsxs("div",{className:"mt-3 p-3 bg-red-50 rounded border border-red-200",children:[c.jsx("p",{className:"text-xs text-red-800 mb-2",children:" Esto limpiar todos los cachs y volver a los listeners originales."}),c.jsx("button",{onClick:m,className:"w-full px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600",children:" Confirmar Rollback"})]}),c.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[c.jsx("div",{children:" Cach activo"}),c.jsx("div",{children:" Fase 1 implementada"})]})]}):c.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-4 right-20 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 z-50",title:"Monitoreo Firestore",children:""})},LD=()=>{const[r,e]=se.useState(!1),[t,n]=se.useState(!1),s=yd("productos_cache"),i=yd("bebidas_cache"),o=yd("mesas_cache"),u=yd("salas_cache"),d=v=>!v||!v.exists?{status:"empty",color:"gray",text:"Sin cach"}:v.expired?{status:"expired",color:"red",text:"Expirado"}:v.remaining<6e4?{status:"expiring",color:"orange",text:"Por expirar"}:{status:"fresh",color:"green",text:"Fresco"},h=v=>v<6e4?`${Math.floor(v/1e3)}s`:`${Math.floor(v/6e4)}m`,m=[{name:"Productos",info:s,key:"productos_cache"},{name:"Bebidas",info:i,key:"bebidas_cache"},{name:"Mesas",info:o,key:"mesas_cache"},{name:"Salas",info:u,key:"salas_cache"}];return r?c.jsxs("div",{className:"fixed bottom-4 right-4 bg-white p-4 rounded-lg shadow-lg border max-w-sm z-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:" Estado del Cach"}),c.jsx("button",{onClick:()=>e(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),c.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:c.jsx("div",{className:"text-sm space-y-1",children:m.map(({name:v,info:x})=>{const y=d(x);return c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{children:[v,":"]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full bg-${y.color}-500`}),c.jsx("span",{className:`text-xs font-medium text-${y.color}-600`,children:y.text})]})]},v)})})}),t&&c.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded",children:[c.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:" Detalles"}),c.jsx("div",{className:"text-xs space-y-2",children:m.map(({name:v,info:x})=>!x||!x.exists?c.jsxs("div",{className:"text-gray-500",children:[v,": Sin datos en cach"]},v):c.jsxs("div",{className:"text-blue-700",children:[c.jsxs("div",{className:"font-medium",children:[v,":"]}),c.jsxs("div",{children:[" Edad: ",h(x.age)]}),c.jsxs("div",{children:[" Restante: ",h(x.remaining)]}),c.jsxs("div",{children:[" ltima actualizacin: ",x.lastUpdate]})]},v))})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>n(!t),className:"flex-1 px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600",children:t?" Ocultar":" Detalles"}),c.jsx("button",{onClick:()=>{m.forEach(({key:v})=>{localStorage.removeItem(v)}),window.location.reload()},className:"flex-1 px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600",children:" Limpiar"})]}),c.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[c.jsx("div",{children:" Cach activo - Fase 1"}),c.jsx("div",{children:" TTL: 10 minutos"})]})]}):c.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-4 right-4 bg-green-600 text-white p-3 rounded-full shadow-lg hover:bg-green-700 z-50",title:"Estado del Cach",children:""})};function MD(){const{salaNombre:r,mesaValor:e,mesaId:t}=ZS(),[n,s]=se.useState(""),[i,o]=se.useState(""),[u,d]=se.useState(""),[h,m]=se.useState([]),[v,x]=se.useState(!0),[y,E]=se.useState([]),[_,w]=se.useState([]),[j,k]=se.useState(!1),[R,B]=se.useState(!1),[U,W]=se.useState(!1),[N,I]=se.useState([]),[T,C]=se.useState([]),[D,F]=se.useState(!1),[O,le]=se.useState(!1),[we,Ie]=se.useState(""),[ie,oe]=se.useState(!1),{data:de,loading:Q,isRealtime:H}=PD(),{data:M,loading:V,isRealtime:P}=FD(),{categorias:G,loading:re}=Yx(),xe=()=>{const fe=[...new Set(de.map(at=>at.categoria).filter(Boolean))],Pe=[...new Set(M.map(at=>at.categoria).filter(Boolean))],et=G.map(at=>at.nombre_categoria);return[...new Set([...fe,...Pe,...et])].sort()},me=fe=>de.filter(Pe=>Pe.categoria===fe).sort((Pe,et)=>Pe.nombre.localeCompare(et.nombre)),Se=fe=>M.filter(Pe=>Pe.categoria===fe).sort((Pe,et)=>Pe.nombre.localeCompare(et.nombre)),Ne=fe=>{const Pe=G.find(et=>et.nombre_categoria===fe);if(Pe?.emoji)return Pe.emoji;switch(fe){case"Principal":return"";case"Postre":return"";case"Bebida":return"";default:return""}};se.useEffect(()=>(r&&e&&t&&(console.log(" URL detectada:",{salaNombre:r,mesaValor:e,mesaId:t}),o(r),s(e),d(t)),nt(),lt(),()=>{console.log(" Limpiando...")}),[r,e,t]),se.useEffect(()=>{if(!u)return;console.log(" Iniciando listener en tiempo real para mesa:",u);const fe=At(Je,"mesas",u),Pe=ns(fe,et=>{if(et.exists()){const Ge={id:et.id,...et.data()};console.log(" Mesa actualizada en tiempo real:",Ge);const yt=y.find(kt=>kt.id===u)?.estado;E(kt=>kt.map(ur=>ur.id===u?Ge:ur)),console.log(" Estado de mesa actualizado localmente:",Ge.estado),yt==="en_curso"&&Ge.estado==="activa"&&(console.log(" Mesa completada - Mostrando notificacin"),oe(!0),setTimeout(()=>{oe(!1)},5e3))}else console.log(" Mesa no encontrada en tiempo real:",u)},et=>{console.error(" Error en listener de mesa:",et)});return()=>{console.log(" Limpiando listener de mesa..."),Pe()}},[u]),se.useEffect(()=>{!Q&&!V&&(x(!1),le(H||P))},[Q,V,H,P]),se.useEffect(()=>{if(!re&&G.length>0&&!we){const fe=xe();fe.length>0&&Ie(fe[0])}},[re,G,we]);const nt=async()=>{try{console.log(" Cargando mesas desde Firestore...");const fe=jt(Je,"mesas"),et=(await os(fe)).docs.map(Ge=>({id:Ge.id,...Ge.data()}));po("mesas","read",!0,et.length),E(et),console.log(` Mesas cargadas: ${et.length}`)}catch(fe){console.error(" Error cargando mesas:",fe),po("mesas","read",!1,0)}},lt=async()=>{try{console.log(" Cargando salas desde Firestore...");const fe=jt(Je,"salas"),et=(await os(fe)).docs.map(Ge=>({id:Ge.id,...Ge.data()}));po("salas","read",!0,et.length),w(et),console.log(` Salas cargadas: ${et.length}`)}catch(fe){console.error(" Error cargando salas:",fe),po("salas","read",!1,0)}},gt=async()=>{if(!n||!i){console.log(" No hay mesa o sala especificada para cargar pedidos");return}console.log(" Cargando pedidos para mesa:",n,"en sala:",i),F(!0);try{const fe=jt(Je,"pedidos"),Pe=Li(fe,su("mesa_id","==",t));console.log(" Ejecutando query:",Pe);const et=await os(Pe);console.log(" Pedidos encontrados:",et.size),po("pedidos","read",!0,et.size);const Ge=et.docs.map(yt=>{const kt=yt.data();return console.log(" Pedido data:",{id:yt.id,...kt}),{id:yt.id,...kt,fecha:kt.timestamp?new Date(kt.timestamp.toDate()).toLocaleString("es-ES"):kt.fecha?new Date(kt.fecha).toLocaleString("es-ES"):"Fecha no disponible"}}),at=Ge.filter(yt=>yt.cobro_pago!=="Cobrado_Cerrado");console.log(" Pedidos filtrados (sin cerrados):",at),console.log(" Pedidos procesados:",Ge),C(at)}catch(fe){console.error(" ERROR cargando pedidos:"),console.error(" Tipo de error:",fe.name),console.error(" Mensaje:",fe.message),console.error(" Cdigo:",fe.code),console.error(" Stack completo:",fe.stack),po("pedidos","read",!1,0);try{console.log(" Intentando cargar todos los pedidos para debug...");const Pe=jt(Je,"pedidos"),et=await os(Pe);console.log(" Total de pedidos en la coleccin:",et.size),et.docs.forEach(Ge=>{const at=Ge.data();console.log(" Pedido en DB:",{id:Ge.id,mesa:at.mesa,mesa_id:at.mesa_id,estado:at.estado,timestamp:at.timestamp})})}catch(Pe){console.error(" Error en debug tambin:",Pe)}}finally{F(!1)}},Le=fe=>{m(Pe=>{const et=(at,yt)=>{if(at.id!==yt.id)return!1;const kt=(at.ingredientes_removidos||[]).sort(),ur=(yt.ingredientes_removidos||[]).sort();if(JSON.stringify(kt)!==JSON.stringify(ur))return!1;const Yr=(at.agregados||[]).sort((Bt,Ht)=>Bt.nombre.localeCompare(Ht.nombre)),ut=(yt.agregados||[]).sort((Bt,Ht)=>Bt.nombre.localeCompare(Ht.nombre));return JSON.stringify(Yr)===JSON.stringify(ut)},Ge=Pe.find(at=>et(at,fe));return Ge?(console.log(" Item idntico encontrado, incrementando cantidad:",Ge.nombre),Pe.map(at=>et(at,fe)?{...at,cantidad:at.cantidad+(fe.cantidad||1)}:at)):(console.log(" Nuevo item agregado al carrito:",fe.nombre,"con personalizaciones nicas"),[...Pe,{...fe,cantidad:fe.cantidad||1}])})},ht=fe=>{m(Pe=>Pe.filter(et=>et.id!==fe))},Ze=(fe,Pe)=>{if(Pe<=0){ht(fe);return}m(et=>et.map(Ge=>Ge.id===fe?{...Ge,cantidad:Pe}:Ge))},Me=(fe,Pe)=>{I(Pe?et=>[...et,fe]:et=>et.filter(Ge=>Ge!==fe))},bt=async()=>{if(N.length===0){alert(" Por favor selecciona al menos un pedido para solicitar la cuenta.");return}try{console.log(" Solicitando cuenta para pedidos:",N);const fe=`cuenta_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Pe=new Date,et=N.map(async Ge=>{const at=At(Je,"pedidos",Ge);await pr(at,{cuenta_solicitada:!0,cuenta_id:fe,timestamp_cuenta_solicitada:Pe,estado_cuenta:"solicitada"})});await Promise.all(et),console.log(" Cuenta solicitada exitosamente. ID:",fe),alert(` Cuenta solicitada para ${N.length} pedido(s).

ID de cuenta: ${fe}

El administrador ser notificado.`),I([]),W(!1),await gt()}catch(fe){console.error(" Error al solicitar cuenta:",fe),alert(" Error al solicitar la cuenta. Por favor intenta nuevamente.")}},ne=async()=>{if(console.log(" Iniciando envo de pedido..."),console.log(" Estado actual del carrito:",h.length,"items"),console.log(" Mesa especificada:",n),console.log(" Estado actual de mesaActual:",ue?.estado||"no encontrada"),!n||h.length===0)return;const fe=prompt(`Quin hace el pedido?

Por favor ingresa tu nombre para que el camarero pueda entregarte el pedido fcilmente.`);if(!fe||fe.trim()===""){alert(" Por favor ingresa tu nombre para continuar con el pedido.");return}const Pe=fe.trim().charAt(0).toUpperCase()+fe.trim().slice(1).toLowerCase();console.log(" Nombre del cliente:",Pe),console.log(" Cliente enviando pedido..."),console.log(" Mesa:",n),console.log(" Carrito:",h),console.log(" Verificando stock disponible...");const et=[];for(const Ge of h)if(Ge.categoria==="Bebida"){const at=M.find(yt=>yt.nombre===Ge.nombre);if(at){const yt=at.stock||0,kt=Ge.cantidad;yt<kt&&et.push(`${Ge.nombre}: Stock insuficiente (${yt} disponible, ${kt} solicitado)`)}}if(et.length>0){alert(` No se puede procesar el pedido:
${et.join(`
`)}`);return}try{const Ge=y.find(ut=>ut.valor_mesa===n||ut.id===t);let at="Sala";Ge?.sala_id&&(at=(await Au(At(Je,"salas",Ge.sala_id))).data()?.nombre_sala||"Sala"),console.log(" Creando pedido para:",{mesa:n,sala:i,nombreSalaReal:at});const yt={mesa:n,mesa_id:t,sala:i,nombre_sala:at,nombre_cliente:Pe,items:h.map(ut=>({nombre:ut.nombre,cantidad:ut.cantidad,precio:ut.precio,categoria:ut.categoria||"Principal",ingredientes_removidos:ut.ingredientes_removidos||[],agregados:ut.agregados||[]})),estado:"pendiente",cobro_pago:"Sin Cobrar",cuenta_procesada:!1,timestamp:Df(),fecha:new Date,total:h.reduce((ut,Bt)=>{let Ht=Bt.precio*Bt.cantidad;if(Bt.agregados&&Bt.agregados.length>0){const wn=Bt.agregados.reduce((kn,Br)=>kn+(Br.precio||0),0);Ht+=wn*Bt.cantidad}return ut+Ht},0)};console.log(" Pedido procesado:",yt),console.log(" Conectando a Firebase...");const kt=await gi(jt(Je,"pedidos"),yt);if(console.log(" Pedido enviado exitosamente con ID:",kt.id),ue&&ue.id)try{const ut=At(Je,"mesas",ue.id);await pr(ut,{contador:Dg(1)}),console.log(" Contador de mesa incrementado:",ue.id)}catch(ut){console.error(" Error al incrementar contador de mesa:",ut)}console.log(" Descontando stock de bebidas...");const ur=[];for(const ut of h)if(ut.categoria==="Bebida"){const Bt=M.find(Ht=>Ht.nombre===ut.nombre);if(Bt)try{const Ht=Math.max(0,(Bt.stock||0)-ut.cantidad);await pr(At(Je,"bebidas",Bt.id),{stock:Ht}),ur.push(`${ut.nombre}: Stock actualizado a ${Ht}`),console.log(` Stock de ${ut.nombre} actualizado: ${Bt.stock}  ${Ht}`)}catch(Ht){console.error(` Error al actualizar stock de ${ut.nombre}:`,Ht),ur.push(`${ut.nombre}: Error al actualizar stock`)}}if(ur.length>0&&console.log(" Resumen de actualizaciones de stock:",ur),ue){console.log(' Actualizando estado de mesa a "En Curso"...'),console.log(" Estado previo de la mesa:",ue.estado),console.log(" Intentando actualizar mesa ID:",ue.id);try{await pr(At(Je,"mesas",ue.id),{estado:"en_curso",ultimo_pedido:Df(),pedidos_recibidos:Dg(1)}),console.log(' Estado de mesa actualizado a "En Curso" exitosamente'),E(ut=>ut.map(Bt=>Bt.id===ue.id?{...Bt,estado:"en_curso"}:Bt))}catch(ut){console.error(" Error al actualizar estado de mesa:",ut),console.error(" Cdigo de error:",ut.code),console.error(" Mensaje de error:",ut.message),ut.code==="permission-denied"?console.log(" Error de permisos: Verifica las reglas de seguridad en Firestore"):ut.code==="not-found"?console.log(" Mesa no encontrada en la base de datos"):ut.code==="unavailable"?console.log(" Error de conectividad: Verifica tu conexin a internet"):ut.code==="failed-precondition"?console.log(" Error de condicin previa: La mesa puede estar siendo actualizada por otro cliente"):ut.code==="aborted"?console.log(" Operacin abortada: Posible conflicto de concurrencia"):console.log(" Error desconocido:",ut.code,"-",ut.message),console.log(" Continuando con el pedido a pesar del error de estado"),console.log(" El pedido se cre exitosamente, solo fall la actualizacin del estado")}}else console.log(" No se pudo actualizar estado: mesaActual no encontrada");m([]),console.log(" Carrito limpiado automticamente"),console.log(" Esperando que Firestore procese el documento..."),await new Promise(ut=>setTimeout(ut,1e3)),console.log(" Recargando pedidos..."),await gt(),console.log(" Pedido completado exitosamente");const Yr=ue?`Pedido enviado con xito! Su mesa (${ue.valor_mesa}) ahora est "En Curso"`:"Pedido enviado con xito!";alert(Yr),k(!1)}catch(Ge){console.error(" ERROR al enviar pedido:"),console.error(" Tipo de error:",Ge.name),console.error(" Mensaje:",Ge.message),console.error(" Cdigo:",Ge.code),console.error(" Stack completo:",Ge.stack),Ge.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):Ge.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):Ge.code==="invalid-argument"?alert(" Error de datos: Verifica que todos los campos tengan el formato correcto"):alert(` Error al enviar el pedido: ${Ge.message}`)}},ue=y.find(fe=>{if(fe.id!==t||fe.valor_mesa.toLowerCase().replace(/\s+/g,"-")!==n)return!1;if(fe.sala_id){const et=_.find(Ge=>Ge.id===fe.sala_id);if(et)return et.nombre_sala.toLowerCase().replace(/\s+/g,"-")===i}return!1});console.log(" Mesa encontrada para:",{mesa:n,sala:i,mesaActual:ue});const wt=ue?(fe=>{if(!fe||!fe.open_close||!fe.open_close.activo)return{enHorario:!0,mensaje:null};const Pe=new Date,et=Pe.getHours().toString().padStart(2,"0")+":"+Pe.getMinutes().toString().padStart(2,"0"),Ge=fe.open_close.hora_apertura,at=fe.open_close.hora_cierre;if(!Ge||!at)return{enHorario:!0,mensaje:null};const yt=Bt=>{const[Ht,wn]=Bt.split(":").map(Number);return Ht*60+wn},kt=yt(et),ur=yt(Ge),Yr=yt(at);return kt>=ur&&kt<=Yr?{enHorario:!0,mensaje:null}:{enHorario:!1,mensaje:kt<ur?`La mesa no est disponible an. La cocina para esta mesa abre a partir de las ${Ge}.`:`La cocina est cerrada. Esta mesa funciona de ${Ge} a ${at}.`}})(ue):{enHorario:!0,mensaje:null},tr=ue&&(ue.estado==="activa"||ue.estado==="en_curso")&&wt.enHorario,rr=ue&&ue.estado==="reservada",En=ue&&ue.estado==="en_curso",Ot=ue&&!wt.enHorario;return v?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx("div",{className:"text-xl",children:"Cargando..."})}):n?ue?rr?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Mesa Reservada"}),c.jsxs("p",{className:"text-gray-600",children:["La presente mesa Nmero ",n," se encuentra reservada."]}),ue?.reservado_por&&c.jsxs("p",{className:"text-gray-600 mt-2",children:[c.jsx("strong",{children:"Reservada por:"})," ",ue.reservado_por]}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Por favor solicite otra mesa."})]})}):Ot?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-red-50",children:c.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[c.jsx("div",{className:"text-6xl mb-6",children:""}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Mesa Fuera de Horario"}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[c.jsx("p",{className:"text-gray-700 text-lg mb-4",children:wt.mensaje}),ue?.open_close&&c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.jsx("strong",{children:"Horarios de operacin:"})}),c.jsxs("p",{className:"text-sm text-gray-700",children:[" ",c.jsx("strong",{children:"Apertura:"})," ",ue.open_close.hora_apertura]}),c.jsxs("p",{className:"text-sm text-gray-700",children:[" ",c.jsx("strong",{children:"Cierre:"})," ",ue.open_close.hora_cierre]})]})]}),c.jsxs("p",{className:"text-gray-500 text-sm",children:["Mesa ",n,"  ",i.charAt(0).toUpperCase()+i.slice(1)]})]})}):tr?de.length===0?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Men No Disponible"}),c.jsx("p",{className:"text-gray-600",children:"An no hay productos en el men"})]})}):(h.reduce((fe,Pe)=>{let et=Pe.precio*Pe.cantidad;if(Pe.agregados&&Pe.agregados.length>0){const Ge=Pe.agregados.reduce((at,yt)=>at+(yt.precio||0),0);et+=Ge*Pe.cantidad}return fe+et},0),c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("img",{src:"/images/client_logo.jpeg",alt:"Logo del Restaurante",className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200"}),c.jsx("div",{className:"flex items-center space-x-2",children:c.jsx("span",{className:"text-lg font-bold text-gray-800",children:"Restaurante JyG"})})]}),c.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[c.jsx("p",{className:"text-sm text-gray-500",children:i!=="sin-sala"?`${i.replace(/-/g," ").toUpperCase()} - Mesa ${ue?.valor_mesa||n}`:`Mesa ${n}`}),O&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-xs text-green-600 font-medium",children:"En tiempo real"})]})]})]}),c.jsxs("div",{className:"lg:hidden flex space-x-2",children:[c.jsx("button",{onClick:()=>W(!0),className:"bg-orange-600 text-white p-3 rounded-full hover:bg-orange-700 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),c.jsx("button",{onClick:()=>{B(!R),R||gt()},className:"bg-green-600 text-white p-3 rounded-full hover:bg-green-700 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),c.jsxs("button",{onClick:()=>k(!j),className:"relative bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition-colors",children:[c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),h.length>0&&c.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center",children:h.reduce((fe,Pe)=>fe+Pe.cantidad,0)})]})]})]})})}),c.jsx("div",{className:"bg-white border-b sticky top-16 z-40",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:re?c.jsx("div",{className:"flex-1 py-3 px-4 text-center text-sm text-gray-500",children:"Cargando categoras..."}):xe().map((fe,Pe)=>c.jsxs("button",{onClick:()=>Ie(fe),className:`flex-1 py-3 px-4 text-center font-medium text-sm transition-colors whitespace-nowrap ${we===fe?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700"}`,children:[Ne(fe)," ",fe]},fe))})})}),En&&c.jsx("div",{className:"mx-4 mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 animate-fade-in",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3 flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:" Tiene un pedido en curso"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-xs text-yellow-600 font-medium",children:"En tiempo real"})]})]}),c.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[c.jsx("p",{children:"Su mesa tiene un pedido siendo preparado. Puede realizar pedidos adicionales."}),c.jsx("p",{className:"mt-1 text-xs text-yellow-600",children:" Este mensaje se actualiza automticamente cuando se cobra la cuenta"})]})]})]})}),ie&&c.jsx("div",{className:"mx-4 mt-4 bg-green-50 border border-green-200 rounded-lg p-4 animate-fade-in",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-green-800",children:" Mesa completada"}),c.jsx("div",{className:"mt-1 text-sm text-green-700",children:c.jsx("p",{children:"Su cuenta ha sido cobrada exitosamente. Gracias por su visita!"})})]})]})}),R&&c.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50",children:c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl p-6 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mis Pedidos"}),c.jsx("button",{onClick:()=>B(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),D?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando pedidos..."})]}):T.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-gray-500",children:"An no has realizado pedidos"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Agrega productos al carrito y haz tu primer pedido!"})]}):c.jsx("div",{className:"space-y-4",children:T.map(fe=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:fe.fecha}),c.jsxs("p",{className:"font-medium text-gray-900",children:["Total: $",fe.total?.toFixed(2)||"0.00"]}),fe.nombre_cliente&&c.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[" Pedido para: ",fe.nombre_cliente]})]}),c.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[c.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium ${fe.estado==="pendiente"?"bg-orange-100 text-orange-800 border border-orange-200":fe.estado==="en_preparacion"?"bg-yellow-100 text-yellow-800 border border-yellow-200":fe.estado==="listo"?"bg-green-100 text-green-800 border border-green-200":fe.estado==="entregado"?"bg-indigo-100 text-indigo-800 border border-indigo-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:[fe.estado==="pendiente"&&c.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),fe.estado==="en_preparacion"&&c.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z",clipRule:"evenodd"})}),fe.estado==="listo"&&c.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),fe.estado==="entregado"&&c.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),fe.estado==="pendiente"?" Pendiente":fe.estado==="en_preparacion"?" En Preparacin":fe.estado==="listo"?" Listo":fe.estado==="entregado"?" Entregado":fe.estado]}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${fe.cobro_pago==="Cobrado"?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:fe.cobro_pago==="Cobrado"?" Cobrado":" Sin Cobrar"}),c.jsx("span",{className:"text-xs text-gray-400",children:fe.timestamp?.toDate?fe.timestamp.toDate().toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):"Hora no disponible"})]})]}),c.jsx("div",{className:"space-y-2",children:fe.items?.map((Pe,et)=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:`${Pe.categoria==="Principal"||Pe.categoria==="Postre"?"font-bold":"font-normal"} text-gray-600`,children:[Pe.cantidad,"x ",Pe.nombre,Pe.categoria&&c.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["(",Pe.categoria,")"]}),Pe.agregados&&Pe.agregados.length>0&&c.jsxs("span",{className:"text-green-600 ml-1",children:["(Ms ",Pe.agregados.map(Ge=>Ge.nombre).join(", "),")"]}),Pe.ingredientes_removidos&&Pe.ingredientes_removidos.length>0&&c.jsxs("span",{className:"text-red-600 ml-1",children:["(Sin ",Pe.ingredientes_removidos.join(", "),")"]})]}),c.jsxs("span",{className:"text-gray-900",children:["$",(()=>{let Ge=Pe.precio*Pe.cantidad;if(Pe.agregados&&Pe.agregados.length>0){const at=Pe.agregados.reduce((yt,kt)=>yt+(kt.precio||0),0);Ge+=at*Pe.cantidad}return Ge.toFixed(2)})()]})]},et))})]},fe.id))})]})}),j&&c.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50",children:c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl p-6 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tu Carrito"}),c.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx(g2,{items:h,onRemove:ht,onUpdateQuantity:Ze,onSubmitOrder:ne,isMobile:!0})]})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2",children:xe().map(fe=>we===fe&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[Ne(fe)," ",fe]}),c.jsx("div",{className:"text-sm text-gray-500",children:c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mr-2",children:[" ",me(fe).length+Se(fe).length," Activos"]})})]}),me(fe).length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Productos"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:me(fe).map(Pe=>c.jsx(kD,{producto:Pe,onAddToCart:Le},Pe.id))})]}),Se(fe).length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Bebidas"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Se(fe).map(Pe=>c.jsx(DD,{bebida:Pe,onAddToCart:Le},Pe.id))})]}),me(fe).length===0&&Se(fe).length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500",children:"No hay elementos disponibles en esta categora"})})]},fe))}),c.jsxs("div",{className:"hidden lg:block lg:col-span-1",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("button",{onClick:()=>W(!0),className:"w-full bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 transition-colors font-medium flex items-center justify-center space-x-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),c.jsx("span",{children:" Pedir Cuenta"})]})}),c.jsx(g2,{items:h,onRemove:ht,onUpdateQuantity:Ze,onSubmitOrder:ne,isMobile:!1})]})]})}),c.jsx("div",{className:"lg:hidden mt-8 pb-6",children:c.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2 px-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("img",{src:"/images/guri.png",alt:"Guri Soft",className:"w-6 h-6 object-contain opacity-60"}),c.jsxs("span",{className:"text-xs text-gray-500",children:["Desarrollado por ",c.jsx("span",{className:"font-semibold",children:"Guri Soft"})]})]}),c.jsx("p",{className:"text-xs text-gray-400 text-center",children:" 2026 Todos los derechos reservados"})]})}),U&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:" Pedir Cuenta"}),c.jsx("button",{onClick:()=>W(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("p",{className:"text-gray-600 mb-4",children:"Seleccione los pedidos que desea incluir en la cuenta:"}),c.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center text-sm text-blue-700",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("span",{children:["Los pedidos marcados con ",c.jsx("span",{className:"font-medium",children:'" Cuenta Solicitada"'})," ya no pueden ser seleccionados."]})]})}),D?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando pedidos..."})]}):T.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-gray-500",children:"An no has realizado pedidos"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Agrega productos al carrito y haz tu primer pedido!"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-3",children:T.map(fe=>c.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg",children:[c.jsx("input",{type:"checkbox",id:`pedido-${fe.id}`,checked:N.includes(fe.id),onChange:Pe=>Me(fe.id,Pe.target.checked),disabled:fe.cuenta_solicitada,className:`w-4 h-4 border-gray-300 rounded focus:ring-orange-500 ${fe.cuenta_solicitada?"text-gray-400 cursor-not-allowed":"text-orange-600"}`}),c.jsx("label",{htmlFor:`pedido-${fe.id}`,className:"flex-1 cursor-pointer",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-medium text-gray-900",children:["Pedido #",fe.id.slice(-6)]}),c.jsx("p",{className:"text-sm text-gray-500",children:fe.fecha}),fe.nombre_cliente&&c.jsxs("p",{className:"text-sm text-blue-600",children:[" ",fe.nombre_cliente]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-bold text-gray-900",children:["$",fe.total?.toFixed(2)||"0.00"]}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${fe.estado==="pendiente"?"bg-yellow-100 text-yellow-800":fe.estado==="en_preparacion"?"bg-orange-100 text-orange-800":fe.estado==="listo"?"bg-green-100 text-green-800":fe.estado==="entregado"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:fe.estado==="pendiente"?" Pendiente":fe.estado==="en_preparacion"?" En Preparacin":fe.estado==="listo"?" Listo":fe.estado==="entregado"?" Entregado":fe.estado}),fe.cuenta_solicitada&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 mt-1",children:" Cuenta Solicitada"})]})]})})]},fe.id))}),N.length>0&&c.jsx("div",{className:"mt-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"font-medium text-orange-800",children:["Pedidos seleccionados: ",N.length]}),c.jsxs("span",{className:"font-bold text-orange-900",children:["Total: $",T.filter(fe=>N.includes(fe.id)).reduce((fe,Pe)=>fe+(Pe.total||0),0).toFixed(2)]})]})})]}),c.jsxs("div",{className:"mt-6 flex space-x-3",children:[c.jsx("button",{onClick:()=>W(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),c.jsx("button",{onClick:bt,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Pedir Cuenta"})]})]})]})})]})):c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Mesa No Disponible"}),c.jsxs("p",{className:"text-gray-600",children:["La mesa ",n," no est disponible en este momento"]})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Mesa No Encontrada"}),c.jsxs("p",{className:"text-gray-600",children:["La mesa ",n," no existe en el sistema"]})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Acceso Invlido"}),c.jsx("p",{className:"text-gray-600",children:"No se especific nmero de mesa"})]})})}const VD="modulepreload",UD=function(r){return"/"+r},x2={},zD=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var o=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=h(t.map(m=>{if(m=UD(m),m in x2)return;x2[m]=!0;const v=m.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const y=document.createElement("link");if(y.rel=v?"stylesheet":VD,v||(y.as="script"),y.crossOrigin="",y.href=m,d&&y.setAttribute("nonce",d),document.head.appendChild(y),v)return new Promise((E,_)=>{y.addEventListener("load",E),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&i(d.reason);return e().catch(i)})};function $D({onLogin:r}){const[e,t]=se.useState({email:"",password:""}),[n,s]=se.useState(!1),[i,o]=se.useState(""),u=async h=>{h.preventDefault(),o(""),s(!0);try{console.log(" Autenticando usuario...");const v=(await Mb(Na,e.email,e.password)).user;console.log(" Usuario autenticado:",v.uid),console.log(" Obteniendo datos del usuario...");const x=await Au(At(Je,"usuarios",v.uid));if(!x.exists())throw new Error("Usuario no encontrado en la base de datos");const y=x.data();if(console.log(" Datos del usuario obtenidos:",y),y.user_rol!=="admin")throw new Error("No tienes permisos de administrador");r({uid:v.uid,email:v.email,...y})}catch(m){console.error(" Error al autenticar:",m),m.code==="auth/user-not-found"?o("Usuario no encontrado"):m.code==="auth/wrong-password"?o("Contrasea incorrecta"):m.code==="auth/invalid-email"?o("Email invlido"):m.code==="auth/too-many-requests"?o("Demasiados intentos fallidos. Intenta ms tarde"):o(m.message)}finally{s(!1)}},d=h=>{t({...e,[h.target.name]:h.target.value})};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"lg:hidden min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-6",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 max-w-md text-center",children:[c.jsx("div",{className:"mb-6",children:c.jsx("img",{src:"/images/guri.png",alt:"Logo",className:"w-20 h-20 mx-auto object-contain"})}),c.jsx("div",{className:"mb-4",children:c.jsx("svg",{className:"w-16 h-16 mx-auto text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Panel de Administracin"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Para acceder al sistema de administracin, por favor usa un dispositivo con una pantalla ms grande."}),c.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-4 rounded",children:c.jsx("p",{className:"text-sm text-orange-800",children:" Se requiere una resolucin mnima de 1024px (tablet o PC)"})})]})}),c.jsxs("div",{className:"hidden lg:flex min-h-screen items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:[c.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center space-x-2 text-xs text-gray-400 opacity-70 hover:opacity-100 transition-opacity duration-200",children:[c.jsx("span",{className:"text-gray-500",children:"Desarrollado por"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("img",{src:"/images/guri.png",alt:"Guri Soft",className:"w-8 h-8 object-contain"}),c.jsx("span",{className:"font-medium text-gray-600",children:"Guri"}),c.jsx("span",{className:"text-gray-500",children:"Soft"})]})]}),c.jsxs("div",{className:"max-w-md w-full space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto w-24 h-24 mb-6 rounded-full overflow-hidden bg-white shadow-lg border-4 border-gray-200",children:c.jsx("img",{src:"/images/client_logo.jpeg",alt:"Logo del Restaurante",className:"w-full h-full object-cover object-center"})}),c.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Acceso Administrativo"}),c.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Ingresa tus credenciales para acceder al panel"})]}),i&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-red-800",children:i})})]})}),c.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[c.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),c.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email",value:e.email,onChange:d})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contrasea"}),c.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contrasea",value:e.password,onChange:d})]})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Iniciando sesin...":"Iniciar Sesin"})})]}),c.jsxs("div",{className:"text-center text-sm text-gray-600",children:[c.jsx("p",{children:"No tienes una cuenta?"}),c.jsx(Rd,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Regstrate aqu"})]})]})]})]})}const _d={cloudName:"daixgcbm4",apiKey:"225954947232248",apiSecret:"2OSK3FGclPTH0-DULApzQGsEPZQ"},HD="https://api.cloudinary.com/v1_1/daixgcbm4/image/upload",WD=r=>{if(!r||typeof r!="string")return null;try{const e=/res\.cloudinary\.com\/[^\/]+\/image\/upload\/(?:v\d+\/)?([^\.]+)/,t=r.match(e);return t&&t[1]?t[1]:null}catch(e){return console.error("Error extrayendo public_id:",e),null}},qD=r=>!r||typeof r!="string"?!1:r.includes("res.cloudinary.com");var Md={exports:{}};function GD(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vd={exports:{}};const KD={},XD=Object.freeze(Object.defineProperty({__proto__:null,default:KD},Symbol.toStringTag,{value:"Module"})),YD=hS(XD);var QD=Vd.exports,v2;function Rt(){return v2||(v2=1,(function(r,e){(function(t,n){r.exports=n()})(QD,function(){var t=t||(function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof up<"u"&&up.crypto&&(i=up.crypto),!i&&typeof GD=="function")try{i=YD}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},u=Object.create||(function(){function k(){}return function(R){var B;return k.prototype=R,B=new k,k.prototype=null,B}})(),d={},h=d.lib={},m=h.Base=(function(){return{extend:function(k){var R=u(this);return k&&R.mixIn(k),(!R.hasOwnProperty("init")||this.init===R.init)&&(R.init=function(){R.$super.init.apply(this,arguments)}),R.init.prototype=R,R.$super=this,R},create:function(){var k=this.extend();return k.init.apply(k,arguments),k},init:function(){},mixIn:function(k){for(var R in k)k.hasOwnProperty(R)&&(this[R]=k[R]);k.hasOwnProperty("toString")&&(this.toString=k.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),v=h.WordArray=m.extend({init:function(k,R){k=this.words=k||[],R!=s?this.sigBytes=R:this.sigBytes=k.length*4},toString:function(k){return(k||y).stringify(this)},concat:function(k){var R=this.words,B=k.words,U=this.sigBytes,W=k.sigBytes;if(this.clamp(),U%4)for(var N=0;N<W;N++){var I=B[N>>>2]>>>24-N%4*8&255;R[U+N>>>2]|=I<<24-(U+N)%4*8}else for(var T=0;T<W;T+=4)R[U+T>>>2]=B[T>>>2];return this.sigBytes+=W,this},clamp:function(){var k=this.words,R=this.sigBytes;k[R>>>2]&=4294967295<<32-R%4*8,k.length=n.ceil(R/4)},clone:function(){var k=m.clone.call(this);return k.words=this.words.slice(0),k},random:function(k){for(var R=[],B=0;B<k;B+=4)R.push(o());return new v.init(R,k)}}),x=d.enc={},y=x.Hex={stringify:function(k){for(var R=k.words,B=k.sigBytes,U=[],W=0;W<B;W++){var N=R[W>>>2]>>>24-W%4*8&255;U.push((N>>>4).toString(16)),U.push((N&15).toString(16))}return U.join("")},parse:function(k){for(var R=k.length,B=[],U=0;U<R;U+=2)B[U>>>3]|=parseInt(k.substr(U,2),16)<<24-U%8*4;return new v.init(B,R/2)}},E=x.Latin1={stringify:function(k){for(var R=k.words,B=k.sigBytes,U=[],W=0;W<B;W++){var N=R[W>>>2]>>>24-W%4*8&255;U.push(String.fromCharCode(N))}return U.join("")},parse:function(k){for(var R=k.length,B=[],U=0;U<R;U++)B[U>>>2]|=(k.charCodeAt(U)&255)<<24-U%4*8;return new v.init(B,R)}},_=x.Utf8={stringify:function(k){try{return decodeURIComponent(escape(E.stringify(k)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(k){return E.parse(unescape(encodeURIComponent(k)))}},w=h.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new v.init,this._nDataBytes=0},_append:function(k){typeof k=="string"&&(k=_.parse(k)),this._data.concat(k),this._nDataBytes+=k.sigBytes},_process:function(k){var R,B=this._data,U=B.words,W=B.sigBytes,N=this.blockSize,I=N*4,T=W/I;k?T=n.ceil(T):T=n.max((T|0)-this._minBufferSize,0);var C=T*N,D=n.min(C*4,W);if(C){for(var F=0;F<C;F+=N)this._doProcessBlock(U,F);R=U.splice(0,C),B.sigBytes-=D}return new v.init(R,D)},clone:function(){var k=m.clone.call(this);return k._data=this._data.clone(),k},_minBufferSize:0});h.Hasher=w.extend({cfg:m.extend(),init:function(k){this.cfg=this.cfg.extend(k),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(k){return this._append(k),this._process(),this},finalize:function(k){k&&this._append(k);var R=this._doFinalize();return R},blockSize:16,_createHelper:function(k){return function(R,B){return new k.init(B).finalize(R)}},_createHmacHelper:function(k){return function(R,B){return new j.HMAC.init(k,B).finalize(R)}}});var j=d.algo={};return d})(Math);return t})})(Vd)),Vd.exports}var Ud={exports:{}},JD=Ud.exports,y2;function kh(){return y2||(y2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(JD,function(t){return(function(n){var s=t,i=s.lib,o=i.Base,u=i.WordArray,d=s.x64={};d.Word=o.extend({init:function(h,m){this.high=h,this.low=m}}),d.WordArray=o.extend({init:function(h,m){h=this.words=h||[],m!=n?this.sigBytes=m:this.sigBytes=h.length*8},toX32:function(){for(var h=this.words,m=h.length,v=[],x=0;x<m;x++){var y=h[x];v.push(y.high),v.push(y.low)}return u.create(v,this.sigBytes)},clone:function(){for(var h=o.clone.call(this),m=h.words=this.words.slice(0),v=m.length,x=0;x<v;x++)m[x]=m[x].clone();return h}})})(),t})})(Ud)),Ud.exports}var zd={exports:{}},ZD=zd.exports,_2;function eP(){return _2||(_2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(ZD,function(t){return(function(){if(typeof ArrayBuffer=="function"){var n=t,s=n.lib,i=s.WordArray,o=i.init,u=i.init=function(d){if(d instanceof ArrayBuffer&&(d=new Uint8Array(d)),(d instanceof Int8Array||typeof Uint8ClampedArray<"u"&&d instanceof Uint8ClampedArray||d instanceof Int16Array||d instanceof Uint16Array||d instanceof Int32Array||d instanceof Uint32Array||d instanceof Float32Array||d instanceof Float64Array)&&(d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength)),d instanceof Uint8Array){for(var h=d.byteLength,m=[],v=0;v<h;v++)m[v>>>2]|=d[v]<<24-v%4*8;o.call(this,m,h)}else o.apply(this,arguments)};u.prototype=i}})(),t.lib.WordArray})})(zd)),zd.exports}var $d={exports:{}},tP=$d.exports,E2;function rP(){return E2||(E2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(tP,function(t){return(function(){var n=t,s=n.lib,i=s.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(d){for(var h=d.words,m=d.sigBytes,v=[],x=0;x<m;x+=2){var y=h[x>>>2]>>>16-x%4*8&65535;v.push(String.fromCharCode(y))}return v.join("")},parse:function(d){for(var h=d.length,m=[],v=0;v<h;v++)m[v>>>1]|=d.charCodeAt(v)<<16-v%2*16;return i.create(m,h*2)}},o.Utf16LE={stringify:function(d){for(var h=d.words,m=d.sigBytes,v=[],x=0;x<m;x+=2){var y=u(h[x>>>2]>>>16-x%4*8&65535);v.push(String.fromCharCode(y))}return v.join("")},parse:function(d){for(var h=d.length,m=[],v=0;v<h;v++)m[v>>>1]|=u(d.charCodeAt(v)<<16-v%2*16);return i.create(m,h*2)}};function u(d){return d<<8&4278255360|d>>>8&16711935}})(),t.enc.Utf16})})($d)),$d.exports}var Hd={exports:{}},nP=Hd.exports,w2;function Mo(){return w2||(w2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(nP,function(t){return(function(){var n=t,s=n.lib,i=s.WordArray,o=n.enc;o.Base64={stringify:function(d){var h=d.words,m=d.sigBytes,v=this._map;d.clamp();for(var x=[],y=0;y<m;y+=3)for(var E=h[y>>>2]>>>24-y%4*8&255,_=h[y+1>>>2]>>>24-(y+1)%4*8&255,w=h[y+2>>>2]>>>24-(y+2)%4*8&255,j=E<<16|_<<8|w,k=0;k<4&&y+k*.75<m;k++)x.push(v.charAt(j>>>6*(3-k)&63));var R=v.charAt(64);if(R)for(;x.length%4;)x.push(R);return x.join("")},parse:function(d){var h=d.length,m=this._map,v=this._reverseMap;if(!v){v=this._reverseMap=[];for(var x=0;x<m.length;x++)v[m.charCodeAt(x)]=x}var y=m.charAt(64);if(y){var E=d.indexOf(y);E!==-1&&(h=E)}return u(d,h,v)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function u(d,h,m){for(var v=[],x=0,y=0;y<h;y++)if(y%4){var E=m[d.charCodeAt(y-1)]<<y%4*2,_=m[d.charCodeAt(y)]>>>6-y%4*2,w=E|_;v[x>>>2]|=w<<24-x%4*8,x++}return i.create(v,x)}})(),t.enc.Base64})})(Hd)),Hd.exports}var Wd={exports:{}},sP=Wd.exports,b2;function iP(){return b2||(b2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(sP,function(t){return(function(){var n=t,s=n.lib,i=s.WordArray,o=n.enc;o.Base64url={stringify:function(d,h){h===void 0&&(h=!0);var m=d.words,v=d.sigBytes,x=h?this._safe_map:this._map;d.clamp();for(var y=[],E=0;E<v;E+=3)for(var _=m[E>>>2]>>>24-E%4*8&255,w=m[E+1>>>2]>>>24-(E+1)%4*8&255,j=m[E+2>>>2]>>>24-(E+2)%4*8&255,k=_<<16|w<<8|j,R=0;R<4&&E+R*.75<v;R++)y.push(x.charAt(k>>>6*(3-R)&63));var B=x.charAt(64);if(B)for(;y.length%4;)y.push(B);return y.join("")},parse:function(d,h){h===void 0&&(h=!0);var m=d.length,v=h?this._safe_map:this._map,x=this._reverseMap;if(!x){x=this._reverseMap=[];for(var y=0;y<v.length;y++)x[v.charCodeAt(y)]=y}var E=v.charAt(64);if(E){var _=d.indexOf(E);_!==-1&&(m=_)}return u(d,m,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function u(d,h,m){for(var v=[],x=0,y=0;y<h;y++)if(y%4){var E=m[d.charCodeAt(y-1)]<<y%4*2,_=m[d.charCodeAt(y)]>>>6-y%4*2,w=E|_;v[x>>>2]|=w<<24-x%4*8,x++}return i.create(v,x)}})(),t.enc.Base64url})})(Wd)),Wd.exports}var qd={exports:{}},aP=qd.exports,T2;function Vo(){return T2||(T2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(aP,function(t){return(function(n){var s=t,i=s.lib,o=i.WordArray,u=i.Hasher,d=s.algo,h=[];(function(){for(var _=0;_<64;_++)h[_]=n.abs(n.sin(_+1))*4294967296|0})();var m=d.MD5=u.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,w){for(var j=0;j<16;j++){var k=w+j,R=_[k];_[k]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}var B=this._hash.words,U=_[w+0],W=_[w+1],N=_[w+2],I=_[w+3],T=_[w+4],C=_[w+5],D=_[w+6],F=_[w+7],O=_[w+8],le=_[w+9],we=_[w+10],Ie=_[w+11],ie=_[w+12],oe=_[w+13],de=_[w+14],Q=_[w+15],H=B[0],M=B[1],V=B[2],P=B[3];H=v(H,M,V,P,U,7,h[0]),P=v(P,H,M,V,W,12,h[1]),V=v(V,P,H,M,N,17,h[2]),M=v(M,V,P,H,I,22,h[3]),H=v(H,M,V,P,T,7,h[4]),P=v(P,H,M,V,C,12,h[5]),V=v(V,P,H,M,D,17,h[6]),M=v(M,V,P,H,F,22,h[7]),H=v(H,M,V,P,O,7,h[8]),P=v(P,H,M,V,le,12,h[9]),V=v(V,P,H,M,we,17,h[10]),M=v(M,V,P,H,Ie,22,h[11]),H=v(H,M,V,P,ie,7,h[12]),P=v(P,H,M,V,oe,12,h[13]),V=v(V,P,H,M,de,17,h[14]),M=v(M,V,P,H,Q,22,h[15]),H=x(H,M,V,P,W,5,h[16]),P=x(P,H,M,V,D,9,h[17]),V=x(V,P,H,M,Ie,14,h[18]),M=x(M,V,P,H,U,20,h[19]),H=x(H,M,V,P,C,5,h[20]),P=x(P,H,M,V,we,9,h[21]),V=x(V,P,H,M,Q,14,h[22]),M=x(M,V,P,H,T,20,h[23]),H=x(H,M,V,P,le,5,h[24]),P=x(P,H,M,V,de,9,h[25]),V=x(V,P,H,M,I,14,h[26]),M=x(M,V,P,H,O,20,h[27]),H=x(H,M,V,P,oe,5,h[28]),P=x(P,H,M,V,N,9,h[29]),V=x(V,P,H,M,F,14,h[30]),M=x(M,V,P,H,ie,20,h[31]),H=y(H,M,V,P,C,4,h[32]),P=y(P,H,M,V,O,11,h[33]),V=y(V,P,H,M,Ie,16,h[34]),M=y(M,V,P,H,de,23,h[35]),H=y(H,M,V,P,W,4,h[36]),P=y(P,H,M,V,T,11,h[37]),V=y(V,P,H,M,F,16,h[38]),M=y(M,V,P,H,we,23,h[39]),H=y(H,M,V,P,oe,4,h[40]),P=y(P,H,M,V,U,11,h[41]),V=y(V,P,H,M,I,16,h[42]),M=y(M,V,P,H,D,23,h[43]),H=y(H,M,V,P,le,4,h[44]),P=y(P,H,M,V,ie,11,h[45]),V=y(V,P,H,M,Q,16,h[46]),M=y(M,V,P,H,N,23,h[47]),H=E(H,M,V,P,U,6,h[48]),P=E(P,H,M,V,F,10,h[49]),V=E(V,P,H,M,de,15,h[50]),M=E(M,V,P,H,C,21,h[51]),H=E(H,M,V,P,ie,6,h[52]),P=E(P,H,M,V,I,10,h[53]),V=E(V,P,H,M,we,15,h[54]),M=E(M,V,P,H,W,21,h[55]),H=E(H,M,V,P,O,6,h[56]),P=E(P,H,M,V,Q,10,h[57]),V=E(V,P,H,M,D,15,h[58]),M=E(M,V,P,H,oe,21,h[59]),H=E(H,M,V,P,T,6,h[60]),P=E(P,H,M,V,Ie,10,h[61]),V=E(V,P,H,M,N,15,h[62]),M=E(M,V,P,H,le,21,h[63]),B[0]=B[0]+H|0,B[1]=B[1]+M|0,B[2]=B[2]+V|0,B[3]=B[3]+P|0},_doFinalize:function(){var _=this._data,w=_.words,j=this._nDataBytes*8,k=_.sigBytes*8;w[k>>>5]|=128<<24-k%32;var R=n.floor(j/4294967296),B=j;w[(k+64>>>9<<4)+15]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,w[(k+64>>>9<<4)+14]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,_.sigBytes=(w.length+1)*4,this._process();for(var U=this._hash,W=U.words,N=0;N<4;N++){var I=W[N];W[N]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return U},clone:function(){var _=u.clone.call(this);return _._hash=this._hash.clone(),_}});function v(_,w,j,k,R,B,U){var W=_+(w&j|~w&k)+R+U;return(W<<B|W>>>32-B)+w}function x(_,w,j,k,R,B,U){var W=_+(w&k|j&~k)+R+U;return(W<<B|W>>>32-B)+w}function y(_,w,j,k,R,B,U){var W=_+(w^j^k)+R+U;return(W<<B|W>>>32-B)+w}function E(_,w,j,k,R,B,U){var W=_+(j^(w|~k))+R+U;return(W<<B|W>>>32-B)+w}s.MD5=u._createHelper(m),s.HmacMD5=u._createHmacHelper(m)})(Math),t.MD5})})(qd)),qd.exports}var Gd={exports:{}},oP=Gd.exports,C2;function ET(){return C2||(C2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(oP,function(t){return(function(){var n=t,s=n.lib,i=s.WordArray,o=s.Hasher,u=n.algo,d=[],h=u.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,v){for(var x=this._hash.words,y=x[0],E=x[1],_=x[2],w=x[3],j=x[4],k=0;k<80;k++){if(k<16)d[k]=m[v+k]|0;else{var R=d[k-3]^d[k-8]^d[k-14]^d[k-16];d[k]=R<<1|R>>>31}var B=(y<<5|y>>>27)+j+d[k];k<20?B+=(E&_|~E&w)+1518500249:k<40?B+=(E^_^w)+1859775393:k<60?B+=(E&_|E&w|_&w)-1894007588:B+=(E^_^w)-899497514,j=w,w=_,_=E<<30|E>>>2,E=y,y=B}x[0]=x[0]+y|0,x[1]=x[1]+E|0,x[2]=x[2]+_|0,x[3]=x[3]+w|0,x[4]=x[4]+j|0},_doFinalize:function(){var m=this._data,v=m.words,x=this._nDataBytes*8,y=m.sigBytes*8;return v[y>>>5]|=128<<24-y%32,v[(y+64>>>9<<4)+14]=Math.floor(x/4294967296),v[(y+64>>>9<<4)+15]=x,m.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var m=o.clone.call(this);return m._hash=this._hash.clone(),m}});n.SHA1=o._createHelper(h),n.HmacSHA1=o._createHmacHelper(h)})(),t.SHA1})})(Gd)),Gd.exports}var Kd={exports:{}},lP=Kd.exports,A2;function Qx(){return A2||(A2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(lP,function(t){return(function(n){var s=t,i=s.lib,o=i.WordArray,u=i.Hasher,d=s.algo,h=[],m=[];(function(){function y(j){for(var k=n.sqrt(j),R=2;R<=k;R++)if(!(j%R))return!1;return!0}function E(j){return(j-(j|0))*4294967296|0}for(var _=2,w=0;w<64;)y(_)&&(w<8&&(h[w]=E(n.pow(_,1/2))),m[w]=E(n.pow(_,1/3)),w++),_++})();var v=[],x=d.SHA256=u.extend({_doReset:function(){this._hash=new o.init(h.slice(0))},_doProcessBlock:function(y,E){for(var _=this._hash.words,w=_[0],j=_[1],k=_[2],R=_[3],B=_[4],U=_[5],W=_[6],N=_[7],I=0;I<64;I++){if(I<16)v[I]=y[E+I]|0;else{var T=v[I-15],C=(T<<25|T>>>7)^(T<<14|T>>>18)^T>>>3,D=v[I-2],F=(D<<15|D>>>17)^(D<<13|D>>>19)^D>>>10;v[I]=C+v[I-7]+F+v[I-16]}var O=B&U^~B&W,le=w&j^w&k^j&k,we=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),Ie=(B<<26|B>>>6)^(B<<21|B>>>11)^(B<<7|B>>>25),ie=N+Ie+O+m[I]+v[I],oe=we+le;N=W,W=U,U=B,B=R+ie|0,R=k,k=j,j=w,w=ie+oe|0}_[0]=_[0]+w|0,_[1]=_[1]+j|0,_[2]=_[2]+k|0,_[3]=_[3]+R|0,_[4]=_[4]+B|0,_[5]=_[5]+U|0,_[6]=_[6]+W|0,_[7]=_[7]+N|0},_doFinalize:function(){var y=this._data,E=y.words,_=this._nDataBytes*8,w=y.sigBytes*8;return E[w>>>5]|=128<<24-w%32,E[(w+64>>>9<<4)+14]=n.floor(_/4294967296),E[(w+64>>>9<<4)+15]=_,y.sigBytes=E.length*4,this._process(),this._hash},clone:function(){var y=u.clone.call(this);return y._hash=this._hash.clone(),y}});s.SHA256=u._createHelper(x),s.HmacSHA256=u._createHmacHelper(x)})(Math),t.SHA256})})(Kd)),Kd.exports}var Xd={exports:{}},cP=Xd.exports,S2;function uP(){return S2||(S2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Qx())})(cP,function(t){return(function(){var n=t,s=n.lib,i=s.WordArray,o=n.algo,u=o.SHA256,d=o.SHA224=u.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var h=u._doFinalize.call(this);return h.sigBytes-=4,h}});n.SHA224=u._createHelper(d),n.HmacSHA224=u._createHmacHelper(d)})(),t.SHA224})})(Xd)),Xd.exports}var Yd={exports:{}},dP=Yd.exports,N2;function wT(){return N2||(N2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),kh())})(dP,function(t){return(function(){var n=t,s=n.lib,i=s.Hasher,o=n.x64,u=o.Word,d=o.WordArray,h=n.algo;function m(){return u.create.apply(u,arguments)}var v=[m(1116352408,3609767458),m(1899447441,602891725),m(3049323471,3964484399),m(3921009573,2173295548),m(961987163,4081628472),m(1508970993,3053834265),m(2453635748,2937671579),m(2870763221,3664609560),m(3624381080,2734883394),m(310598401,1164996542),m(607225278,1323610764),m(1426881987,3590304994),m(1925078388,4068182383),m(2162078206,991336113),m(2614888103,633803317),m(3248222580,3479774868),m(3835390401,2666613458),m(4022224774,944711139),m(264347078,2341262773),m(604807628,2007800933),m(770255983,1495990901),m(1249150122,1856431235),m(1555081692,3175218132),m(1996064986,2198950837),m(2554220882,3999719339),m(2821834349,766784016),m(2952996808,2566594879),m(3210313671,3203337956),m(3336571891,1034457026),m(3584528711,2466948901),m(113926993,3758326383),m(338241895,168717936),m(666307205,1188179964),m(773529912,1546045734),m(1294757372,1522805485),m(1396182291,2643833823),m(1695183700,2343527390),m(1986661051,1014477480),m(2177026350,1206759142),m(2456956037,344077627),m(2730485921,1290863460),m(2820302411,3158454273),m(3259730800,3505952657),m(3345764771,106217008),m(3516065817,3606008344),m(3600352804,1432725776),m(4094571909,1467031594),m(275423344,851169720),m(430227734,3100823752),m(506948616,1363258195),m(659060556,3750685593),m(883997877,3785050280),m(958139571,3318307427),m(1322822218,3812723403),m(1537002063,2003034995),m(1747873779,3602036899),m(1955562222,1575990012),m(2024104815,1125592928),m(2227730452,2716904306),m(2361852424,442776044),m(2428436474,593698344),m(2756734187,3733110249),m(3204031479,2999351573),m(3329325298,3815920427),m(3391569614,3928383900),m(3515267271,566280711),m(3940187606,3454069534),m(4118630271,4000239992),m(116418474,1914138554),m(174292421,2731055270),m(289380356,3203993006),m(460393269,320620315),m(685471733,587496836),m(852142971,1086792851),m(1017036298,365543100),m(1126000580,2618297676),m(1288033470,3409855158),m(1501505948,4234509866),m(1607167915,987167468),m(1816402316,1246189591)],x=[];(function(){for(var E=0;E<80;E++)x[E]=m()})();var y=h.SHA512=i.extend({_doReset:function(){this._hash=new d.init([new u.init(1779033703,4089235720),new u.init(3144134277,2227873595),new u.init(1013904242,4271175723),new u.init(2773480762,1595750129),new u.init(1359893119,2917565137),new u.init(2600822924,725511199),new u.init(528734635,4215389547),new u.init(1541459225,327033209)])},_doProcessBlock:function(E,_){for(var w=this._hash.words,j=w[0],k=w[1],R=w[2],B=w[3],U=w[4],W=w[5],N=w[6],I=w[7],T=j.high,C=j.low,D=k.high,F=k.low,O=R.high,le=R.low,we=B.high,Ie=B.low,ie=U.high,oe=U.low,de=W.high,Q=W.low,H=N.high,M=N.low,V=I.high,P=I.low,G=T,re=C,xe=D,me=F,Se=O,Ne=le,nt=we,lt=Ie,gt=ie,Le=oe,ht=de,Ze=Q,Me=H,bt=M,ne=V,ue=P,Ke=0;Ke<80;Ke++){var wt,tr,rr=x[Ke];if(Ke<16)tr=rr.high=E[_+Ke*2]|0,wt=rr.low=E[_+Ke*2+1]|0;else{var En=x[Ke-15],Ot=En.high,fe=En.low,Pe=(Ot>>>1|fe<<31)^(Ot>>>8|fe<<24)^Ot>>>7,et=(fe>>>1|Ot<<31)^(fe>>>8|Ot<<24)^(fe>>>7|Ot<<25),Ge=x[Ke-2],at=Ge.high,yt=Ge.low,kt=(at>>>19|yt<<13)^(at<<3|yt>>>29)^at>>>6,ur=(yt>>>19|at<<13)^(yt<<3|at>>>29)^(yt>>>6|at<<26),Yr=x[Ke-7],ut=Yr.high,Bt=Yr.low,Ht=x[Ke-16],wn=Ht.high,kn=Ht.low;wt=et+Bt,tr=Pe+ut+(wt>>>0<et>>>0?1:0),wt=wt+ur,tr=tr+kt+(wt>>>0<ur>>>0?1:0),wt=wt+kn,tr=tr+wn+(wt>>>0<kn>>>0?1:0),rr.high=tr,rr.low=wt}var Br=gt&ht^~gt&Me,bn=Le&Ze^~Le&bt,qn=G&xe^G&Se^xe&Se,Dn=re&me^re&Ne^me&Ne,vi=(G>>>28|re<<4)^(G<<30|re>>>2)^(G<<25|re>>>7),us=(re>>>28|G<<4)^(re<<30|G>>>2)^(re<<25|G>>>7),yi=(gt>>>14|Le<<18)^(gt>>>18|Le<<14)^(gt<<23|Le>>>9),Gn=(Le>>>14|gt<<18)^(Le>>>18|gt<<14)^(Le<<23|gt>>>9),Gs=v[Ke],sr=Gs.high,Cs=Gs.low,Wt=ue+Gn,Lr=ne+yi+(Wt>>>0<ue>>>0?1:0),Wt=Wt+bn,Lr=Lr+Br+(Wt>>>0<bn>>>0?1:0),Wt=Wt+Cs,Lr=Lr+sr+(Wt>>>0<Cs>>>0?1:0),Wt=Wt+wt,Lr=Lr+tr+(Wt>>>0<wt>>>0?1:0),ds=us+Dn,Ks=vi+qn+(ds>>>0<us>>>0?1:0);ne=Me,ue=bt,Me=ht,bt=Ze,ht=gt,Ze=Le,Le=lt+Wt|0,gt=nt+Lr+(Le>>>0<lt>>>0?1:0)|0,nt=Se,lt=Ne,Se=xe,Ne=me,xe=G,me=re,re=Wt+ds|0,G=Lr+Ks+(re>>>0<Wt>>>0?1:0)|0}C=j.low=C+re,j.high=T+G+(C>>>0<re>>>0?1:0),F=k.low=F+me,k.high=D+xe+(F>>>0<me>>>0?1:0),le=R.low=le+Ne,R.high=O+Se+(le>>>0<Ne>>>0?1:0),Ie=B.low=Ie+lt,B.high=we+nt+(Ie>>>0<lt>>>0?1:0),oe=U.low=oe+Le,U.high=ie+gt+(oe>>>0<Le>>>0?1:0),Q=W.low=Q+Ze,W.high=de+ht+(Q>>>0<Ze>>>0?1:0),M=N.low=M+bt,N.high=H+Me+(M>>>0<bt>>>0?1:0),P=I.low=P+ue,I.high=V+ne+(P>>>0<ue>>>0?1:0)},_doFinalize:function(){var E=this._data,_=E.words,w=this._nDataBytes*8,j=E.sigBytes*8;_[j>>>5]|=128<<24-j%32,_[(j+128>>>10<<5)+30]=Math.floor(w/4294967296),_[(j+128>>>10<<5)+31]=w,E.sigBytes=_.length*4,this._process();var k=this._hash.toX32();return k},clone:function(){var E=i.clone.call(this);return E._hash=this._hash.clone(),E},blockSize:1024/32});n.SHA512=i._createHelper(y),n.HmacSHA512=i._createHmacHelper(y)})(),t.SHA512})})(Yd)),Yd.exports}var Qd={exports:{}},fP=Qd.exports,I2;function hP(){return I2||(I2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),kh(),wT())})(fP,function(t){return(function(){var n=t,s=n.x64,i=s.Word,o=s.WordArray,u=n.algo,d=u.SHA512,h=u.SHA384=d.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var m=d._doFinalize.call(this);return m.sigBytes-=16,m}});n.SHA384=d._createHelper(h),n.HmacSHA384=d._createHmacHelper(h)})(),t.SHA384})})(Qd)),Qd.exports}var Jd={exports:{}},mP=Jd.exports,R2;function pP(){return R2||(R2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),kh())})(mP,function(t){return(function(n){var s=t,i=s.lib,o=i.WordArray,u=i.Hasher,d=s.x64,h=d.Word,m=s.algo,v=[],x=[],y=[];(function(){for(var w=1,j=0,k=0;k<24;k++){v[w+5*j]=(k+1)*(k+2)/2%64;var R=j%5,B=(2*w+3*j)%5;w=R,j=B}for(var w=0;w<5;w++)for(var j=0;j<5;j++)x[w+5*j]=j+(2*w+3*j)%5*5;for(var U=1,W=0;W<24;W++){for(var N=0,I=0,T=0;T<7;T++){if(U&1){var C=(1<<T)-1;C<32?I^=1<<C:N^=1<<C-32}U&128?U=U<<1^113:U<<=1}y[W]=h.create(N,I)}})();var E=[];(function(){for(var w=0;w<25;w++)E[w]=h.create()})();var _=m.SHA3=u.extend({cfg:u.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],j=0;j<25;j++)w[j]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,j){for(var k=this._state,R=this.blockSize/2,B=0;B<R;B++){var U=w[j+2*B],W=w[j+2*B+1];U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,W=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360;var N=k[B];N.high^=W,N.low^=U}for(var I=0;I<24;I++){for(var T=0;T<5;T++){for(var C=0,D=0,F=0;F<5;F++){var N=k[T+5*F];C^=N.high,D^=N.low}var O=E[T];O.high=C,O.low=D}for(var T=0;T<5;T++)for(var le=E[(T+4)%5],we=E[(T+1)%5],Ie=we.high,ie=we.low,C=le.high^(Ie<<1|ie>>>31),D=le.low^(ie<<1|Ie>>>31),F=0;F<5;F++){var N=k[T+5*F];N.high^=C,N.low^=D}for(var oe=1;oe<25;oe++){var C,D,N=k[oe],de=N.high,Q=N.low,H=v[oe];H<32?(C=de<<H|Q>>>32-H,D=Q<<H|de>>>32-H):(C=Q<<H-32|de>>>64-H,D=de<<H-32|Q>>>64-H);var M=E[x[oe]];M.high=C,M.low=D}var V=E[0],P=k[0];V.high=P.high,V.low=P.low;for(var T=0;T<5;T++)for(var F=0;F<5;F++){var oe=T+5*F,N=k[oe],G=E[oe],re=E[(T+1)%5+5*F],xe=E[(T+2)%5+5*F];N.high=G.high^~re.high&xe.high,N.low=G.low^~re.low&xe.low}var N=k[0],me=y[I];N.high^=me.high,N.low^=me.low}},_doFinalize:function(){var w=this._data,j=w.words;this._nDataBytes*8;var k=w.sigBytes*8,R=this.blockSize*32;j[k>>>5]|=1<<24-k%32,j[(n.ceil((k+1)/R)*R>>>5)-1]|=128,w.sigBytes=j.length*4,this._process();for(var B=this._state,U=this.cfg.outputLength/8,W=U/8,N=[],I=0;I<W;I++){var T=B[I],C=T.high,D=T.low;C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,N.push(D),N.push(C)}return new o.init(N,U)},clone:function(){for(var w=u.clone.call(this),j=w._state=this._state.slice(0),k=0;k<25;k++)j[k]=j[k].clone();return w}});s.SHA3=u._createHelper(_),s.HmacSHA3=u._createHmacHelper(_)})(Math),t.SHA3})})(Jd)),Jd.exports}var Zd={exports:{}},gP=Zd.exports,k2;function xP(){return k2||(k2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(gP,function(t){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(n){var s=t,i=s.lib,o=i.WordArray,u=i.Hasher,d=s.algo,h=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),m=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),v=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),x=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),y=o.create([0,1518500249,1859775393,2400959708,2840853838]),E=o.create([1352829926,1548603684,1836072691,2053994217,0]),_=d.RIPEMD160=u.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(W,N){for(var I=0;I<16;I++){var T=N+I,C=W[T];W[T]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}var D=this._hash.words,F=y.words,O=E.words,le=h.words,we=m.words,Ie=v.words,ie=x.words,oe,de,Q,H,M,V,P,G,re,xe;V=oe=D[0],P=de=D[1],G=Q=D[2],re=H=D[3],xe=M=D[4];for(var me,I=0;I<80;I+=1)me=oe+W[N+le[I]]|0,I<16?me+=w(de,Q,H)+F[0]:I<32?me+=j(de,Q,H)+F[1]:I<48?me+=k(de,Q,H)+F[2]:I<64?me+=R(de,Q,H)+F[3]:me+=B(de,Q,H)+F[4],me=me|0,me=U(me,Ie[I]),me=me+M|0,oe=M,M=H,H=U(Q,10),Q=de,de=me,me=V+W[N+we[I]]|0,I<16?me+=B(P,G,re)+O[0]:I<32?me+=R(P,G,re)+O[1]:I<48?me+=k(P,G,re)+O[2]:I<64?me+=j(P,G,re)+O[3]:me+=w(P,G,re)+O[4],me=me|0,me=U(me,ie[I]),me=me+xe|0,V=xe,xe=re,re=U(G,10),G=P,P=me;me=D[1]+Q+re|0,D[1]=D[2]+H+xe|0,D[2]=D[3]+M+V|0,D[3]=D[4]+oe+P|0,D[4]=D[0]+de+G|0,D[0]=me},_doFinalize:function(){var W=this._data,N=W.words,I=this._nDataBytes*8,T=W.sigBytes*8;N[T>>>5]|=128<<24-T%32,N[(T+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,W.sigBytes=(N.length+1)*4,this._process();for(var C=this._hash,D=C.words,F=0;F<5;F++){var O=D[F];D[F]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return C},clone:function(){var W=u.clone.call(this);return W._hash=this._hash.clone(),W}});function w(W,N,I){return W^N^I}function j(W,N,I){return W&N|~W&I}function k(W,N,I){return(W|~N)^I}function R(W,N,I){return W&I|N&~I}function B(W,N,I){return W^(N|~I)}function U(W,N){return W<<N|W>>>32-N}s.RIPEMD160=u._createHelper(_),s.HmacRIPEMD160=u._createHmacHelper(_)})(),t.RIPEMD160})})(Zd)),Zd.exports}var ef={exports:{}},vP=ef.exports,D2;function Jx(){return D2||(D2=1,(function(r,e){(function(t,n){r.exports=n(Rt())})(vP,function(t){(function(){var n=t,s=n.lib,i=s.Base,o=n.enc,u=o.Utf8,d=n.algo;d.HMAC=i.extend({init:function(h,m){h=this._hasher=new h.init,typeof m=="string"&&(m=u.parse(m));var v=h.blockSize,x=v*4;m.sigBytes>x&&(m=h.finalize(m)),m.clamp();for(var y=this._oKey=m.clone(),E=this._iKey=m.clone(),_=y.words,w=E.words,j=0;j<v;j++)_[j]^=1549556828,w[j]^=909522486;y.sigBytes=E.sigBytes=x,this.reset()},reset:function(){var h=this._hasher;h.reset(),h.update(this._iKey)},update:function(h){return this._hasher.update(h),this},finalize:function(h){var m=this._hasher,v=m.finalize(h);m.reset();var x=m.finalize(this._oKey.clone().concat(v));return x}})})()})})(ef)),ef.exports}var tf={exports:{}},yP=tf.exports,P2;function _P(){return P2||(P2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Qx(),Jx())})(yP,function(t){return(function(){var n=t,s=n.lib,i=s.Base,o=s.WordArray,u=n.algo,d=u.SHA256,h=u.HMAC,m=u.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:d,iterations:25e4}),init:function(v){this.cfg=this.cfg.extend(v)},compute:function(v,x){for(var y=this.cfg,E=h.create(y.hasher,v),_=o.create(),w=o.create([1]),j=_.words,k=w.words,R=y.keySize,B=y.iterations;j.length<R;){var U=E.update(x).finalize(w);E.reset();for(var W=U.words,N=W.length,I=U,T=1;T<B;T++){I=E.finalize(I),E.reset();for(var C=I.words,D=0;D<N;D++)W[D]^=C[D]}_.concat(U),k[0]++}return _.sigBytes=R*4,_}});n.PBKDF2=function(v,x,y){return m.create(y).compute(v,x)}})(),t.PBKDF2})})(tf)),tf.exports}var rf={exports:{}},EP=rf.exports,F2;function Ga(){return F2||(F2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),ET(),Jx())})(EP,function(t){return(function(){var n=t,s=n.lib,i=s.Base,o=s.WordArray,u=n.algo,d=u.MD5,h=u.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:d,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,v){for(var x,y=this.cfg,E=y.hasher.create(),_=o.create(),w=_.words,j=y.keySize,k=y.iterations;w.length<j;){x&&E.update(x),x=E.update(m).finalize(v),E.reset();for(var R=1;R<k;R++)x=E.finalize(x),E.reset();_.concat(x)}return _.sigBytes=j*4,_}});n.EvpKDF=function(m,v,x){return h.create(x).compute(m,v)}})(),t.EvpKDF})})(rf)),rf.exports}var nf={exports:{}},wP=nf.exports,j2;function Xr(){return j2||(j2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Ga())})(wP,function(t){t.lib.Cipher||(function(n){var s=t,i=s.lib,o=i.Base,u=i.WordArray,d=i.BufferedBlockAlgorithm,h=s.enc;h.Utf8;var m=h.Base64,v=s.algo,x=v.EvpKDF,y=i.Cipher=d.extend({cfg:o.extend(),createEncryptor:function(C,D){return this.create(this._ENC_XFORM_MODE,C,D)},createDecryptor:function(C,D){return this.create(this._DEC_XFORM_MODE,C,D)},init:function(C,D,F){this.cfg=this.cfg.extend(F),this._xformMode=C,this._key=D,this.reset()},reset:function(){d.reset.call(this),this._doReset()},process:function(C){return this._append(C),this._process()},finalize:function(C){C&&this._append(C);var D=this._doFinalize();return D},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function C(D){return typeof D=="string"?T:W}return function(D){return{encrypt:function(F,O,le){return C(O).encrypt(D,F,O,le)},decrypt:function(F,O,le){return C(O).decrypt(D,F,O,le)}}}})()});i.StreamCipher=y.extend({_doFinalize:function(){var C=this._process(!0);return C},blockSize:1});var E=s.mode={},_=i.BlockCipherMode=o.extend({createEncryptor:function(C,D){return this.Encryptor.create(C,D)},createDecryptor:function(C,D){return this.Decryptor.create(C,D)},init:function(C,D){this._cipher=C,this._iv=D}}),w=E.CBC=(function(){var C=_.extend();C.Encryptor=C.extend({processBlock:function(F,O){var le=this._cipher,we=le.blockSize;D.call(this,F,O,we),le.encryptBlock(F,O),this._prevBlock=F.slice(O,O+we)}}),C.Decryptor=C.extend({processBlock:function(F,O){var le=this._cipher,we=le.blockSize,Ie=F.slice(O,O+we);le.decryptBlock(F,O),D.call(this,F,O,we),this._prevBlock=Ie}});function D(F,O,le){var we,Ie=this._iv;Ie?(we=Ie,this._iv=n):we=this._prevBlock;for(var ie=0;ie<le;ie++)F[O+ie]^=we[ie]}return C})(),j=s.pad={},k=j.Pkcs7={pad:function(C,D){for(var F=D*4,O=F-C.sigBytes%F,le=O<<24|O<<16|O<<8|O,we=[],Ie=0;Ie<O;Ie+=4)we.push(le);var ie=u.create(we,O);C.concat(ie)},unpad:function(C){var D=C.words[C.sigBytes-1>>>2]&255;C.sigBytes-=D}};i.BlockCipher=y.extend({cfg:y.cfg.extend({mode:w,padding:k}),reset:function(){var C;y.reset.call(this);var D=this.cfg,F=D.iv,O=D.mode;this._xformMode==this._ENC_XFORM_MODE?C=O.createEncryptor:(C=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==C?this._mode.init(this,F&&F.words):(this._mode=C.call(O,this,F&&F.words),this._mode.__creator=C)},_doProcessBlock:function(C,D){this._mode.processBlock(C,D)},_doFinalize:function(){var C,D=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(D.pad(this._data,this.blockSize),C=this._process(!0)):(C=this._process(!0),D.unpad(C)),C},blockSize:128/32});var R=i.CipherParams=o.extend({init:function(C){this.mixIn(C)},toString:function(C){return(C||this.formatter).stringify(this)}}),B=s.format={},U=B.OpenSSL={stringify:function(C){var D,F=C.ciphertext,O=C.salt;return O?D=u.create([1398893684,1701076831]).concat(O).concat(F):D=F,D.toString(m)},parse:function(C){var D,F=m.parse(C),O=F.words;return O[0]==1398893684&&O[1]==1701076831&&(D=u.create(O.slice(2,4)),O.splice(0,4),F.sigBytes-=16),R.create({ciphertext:F,salt:D})}},W=i.SerializableCipher=o.extend({cfg:o.extend({format:U}),encrypt:function(C,D,F,O){O=this.cfg.extend(O);var le=C.createEncryptor(F,O),we=le.finalize(D),Ie=le.cfg;return R.create({ciphertext:we,key:F,iv:Ie.iv,algorithm:C,mode:Ie.mode,padding:Ie.padding,blockSize:C.blockSize,formatter:O.format})},decrypt:function(C,D,F,O){O=this.cfg.extend(O),D=this._parse(D,O.format);var le=C.createDecryptor(F,O).finalize(D.ciphertext);return le},_parse:function(C,D){return typeof C=="string"?D.parse(C,this):C}}),N=s.kdf={},I=N.OpenSSL={execute:function(C,D,F,O,le){if(O||(O=u.random(64/8)),le)var we=x.create({keySize:D+F,hasher:le}).compute(C,O);else var we=x.create({keySize:D+F}).compute(C,O);var Ie=u.create(we.words.slice(D),F*4);return we.sigBytes=D*4,R.create({key:we,iv:Ie,salt:O})}},T=i.PasswordBasedCipher=W.extend({cfg:W.cfg.extend({kdf:I}),encrypt:function(C,D,F,O){O=this.cfg.extend(O);var le=O.kdf.execute(F,C.keySize,C.ivSize,O.salt,O.hasher);O.iv=le.iv;var we=W.encrypt.call(this,C,D,le.key,O);return we.mixIn(le),we},decrypt:function(C,D,F,O){O=this.cfg.extend(O),D=this._parse(D,O.format);var le=O.kdf.execute(F,C.keySize,C.ivSize,D.salt,O.hasher);O.iv=le.iv;var we=W.decrypt.call(this,C,D,le.key,O);return we}})})()})})(nf)),nf.exports}var sf={exports:{}},bP=sf.exports,O2;function TP(){return O2||(O2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(bP,function(t){return t.mode.CFB=(function(){var n=t.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,o){var u=this._cipher,d=u.blockSize;s.call(this,i,o,d,u),this._prevBlock=i.slice(o,o+d)}}),n.Decryptor=n.extend({processBlock:function(i,o){var u=this._cipher,d=u.blockSize,h=i.slice(o,o+d);s.call(this,i,o,d,u),this._prevBlock=h}});function s(i,o,u,d){var h,m=this._iv;m?(h=m.slice(0),this._iv=void 0):h=this._prevBlock,d.encryptBlock(h,0);for(var v=0;v<u;v++)i[o+v]^=h[v]}return n})(),t.mode.CFB})})(sf)),sf.exports}var af={exports:{}},CP=af.exports,B2;function AP(){return B2||(B2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(CP,function(t){return t.mode.CTR=(function(){var n=t.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,o){var u=this._cipher,d=u.blockSize,h=this._iv,m=this._counter;h&&(m=this._counter=h.slice(0),this._iv=void 0);var v=m.slice(0);u.encryptBlock(v,0),m[d-1]=m[d-1]+1|0;for(var x=0;x<d;x++)i[o+x]^=v[x]}});return n.Decryptor=s,n})(),t.mode.CTR})})(af)),af.exports}var of={exports:{}},SP=of.exports,L2;function NP(){return L2||(L2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(SP,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=(function(){var n=t.lib.BlockCipherMode.extend();function s(u){if((u>>24&255)===255){var d=u>>16&255,h=u>>8&255,m=u&255;d===255?(d=0,h===255?(h=0,m===255?m=0:++m):++h):++d,u=0,u+=d<<16,u+=h<<8,u+=m}else u+=1<<24;return u}function i(u){return(u[0]=s(u[0]))===0&&(u[1]=s(u[1])),u}var o=n.Encryptor=n.extend({processBlock:function(u,d){var h=this._cipher,m=h.blockSize,v=this._iv,x=this._counter;v&&(x=this._counter=v.slice(0),this._iv=void 0),i(x);var y=x.slice(0);h.encryptBlock(y,0);for(var E=0;E<m;E++)u[d+E]^=y[E]}});return n.Decryptor=o,n})(),t.mode.CTRGladman})})(of)),of.exports}var lf={exports:{}},IP=lf.exports,M2;function RP(){return M2||(M2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(IP,function(t){return t.mode.OFB=(function(){var n=t.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,o){var u=this._cipher,d=u.blockSize,h=this._iv,m=this._keystream;h&&(m=this._keystream=h.slice(0),this._iv=void 0),u.encryptBlock(m,0);for(var v=0;v<d;v++)i[o+v]^=m[v]}});return n.Decryptor=s,n})(),t.mode.OFB})})(lf)),lf.exports}var cf={exports:{}},kP=cf.exports,V2;function DP(){return V2||(V2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(kP,function(t){return t.mode.ECB=(function(){var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n})(),t.mode.ECB})})(cf)),cf.exports}var uf={exports:{}},PP=uf.exports,U2;function FP(){return U2||(U2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(PP,function(t){return t.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,o=s*4,u=o-i%o,d=i+u-1;n.clamp(),n.words[d>>>2]|=u<<24-d%4*8,n.sigBytes+=u},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},t.pad.Ansix923})})(uf)),uf.exports}var df={exports:{}},jP=df.exports,z2;function OP(){return z2||(z2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(jP,function(t){return t.pad.Iso10126={pad:function(n,s){var i=s*4,o=i-n.sigBytes%i;n.concat(t.lib.WordArray.random(o-1)).concat(t.lib.WordArray.create([o<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},t.pad.Iso10126})})(df)),df.exports}var ff={exports:{}},BP=ff.exports,$2;function LP(){return $2||($2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(BP,function(t){return t.pad.Iso97971={pad:function(n,s){n.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(n,s)},unpad:function(n){t.pad.ZeroPadding.unpad(n),n.sigBytes--}},t.pad.Iso97971})})(ff)),ff.exports}var hf={exports:{}},MP=hf.exports,H2;function VP(){return H2||(H2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(MP,function(t){return t.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},t.pad.ZeroPadding})})(hf)),hf.exports}var mf={exports:{}},UP=mf.exports,W2;function zP(){return W2||(W2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})(UP,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})})(mf)),mf.exports}var pf={exports:{}},$P=pf.exports,q2;function HP(){return q2||(q2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Xr())})($P,function(t){return(function(n){var s=t,i=s.lib,o=i.CipherParams,u=s.enc,d=u.Hex,h=s.format;h.Hex={stringify:function(m){return m.ciphertext.toString(d)},parse:function(m){var v=d.parse(m);return o.create({ciphertext:v})}}})(),t.format.Hex})})(pf)),pf.exports}var gf={exports:{}},WP=gf.exports,G2;function qP(){return G2||(G2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Mo(),Vo(),Ga(),Xr())})(WP,function(t){return(function(){var n=t,s=n.lib,i=s.BlockCipher,o=n.algo,u=[],d=[],h=[],m=[],v=[],x=[],y=[],E=[],_=[],w=[];(function(){for(var R=[],B=0;B<256;B++)B<128?R[B]=B<<1:R[B]=B<<1^283;for(var U=0,W=0,B=0;B<256;B++){var N=W^W<<1^W<<2^W<<3^W<<4;N=N>>>8^N&255^99,u[U]=N,d[N]=U;var I=R[U],T=R[I],C=R[T],D=R[N]*257^N*16843008;h[U]=D<<24|D>>>8,m[U]=D<<16|D>>>16,v[U]=D<<8|D>>>24,x[U]=D;var D=C*16843009^T*65537^I*257^U*16843008;y[N]=D<<24|D>>>8,E[N]=D<<16|D>>>16,_[N]=D<<8|D>>>24,w[N]=D,U?(U=I^R[R[R[C^I]]],W^=R[R[W]]):U=W=1}})();var j=[0,1,2,4,8,16,32,64,128,27,54],k=o.AES=i.extend({_doReset:function(){var R;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var B=this._keyPriorReset=this._key,U=B.words,W=B.sigBytes/4,N=this._nRounds=W+6,I=(N+1)*4,T=this._keySchedule=[],C=0;C<I;C++)C<W?T[C]=U[C]:(R=T[C-1],C%W?W>6&&C%W==4&&(R=u[R>>>24]<<24|u[R>>>16&255]<<16|u[R>>>8&255]<<8|u[R&255]):(R=R<<8|R>>>24,R=u[R>>>24]<<24|u[R>>>16&255]<<16|u[R>>>8&255]<<8|u[R&255],R^=j[C/W|0]<<24),T[C]=T[C-W]^R);for(var D=this._invKeySchedule=[],F=0;F<I;F++){var C=I-F;if(F%4)var R=T[C];else var R=T[C-4];F<4||C<=4?D[F]=R:D[F]=y[u[R>>>24]]^E[u[R>>>16&255]]^_[u[R>>>8&255]]^w[u[R&255]]}}},encryptBlock:function(R,B){this._doCryptBlock(R,B,this._keySchedule,h,m,v,x,u)},decryptBlock:function(R,B){var U=R[B+1];R[B+1]=R[B+3],R[B+3]=U,this._doCryptBlock(R,B,this._invKeySchedule,y,E,_,w,d);var U=R[B+1];R[B+1]=R[B+3],R[B+3]=U},_doCryptBlock:function(R,B,U,W,N,I,T,C){for(var D=this._nRounds,F=R[B]^U[0],O=R[B+1]^U[1],le=R[B+2]^U[2],we=R[B+3]^U[3],Ie=4,ie=1;ie<D;ie++){var oe=W[F>>>24]^N[O>>>16&255]^I[le>>>8&255]^T[we&255]^U[Ie++],de=W[O>>>24]^N[le>>>16&255]^I[we>>>8&255]^T[F&255]^U[Ie++],Q=W[le>>>24]^N[we>>>16&255]^I[F>>>8&255]^T[O&255]^U[Ie++],H=W[we>>>24]^N[F>>>16&255]^I[O>>>8&255]^T[le&255]^U[Ie++];F=oe,O=de,le=Q,we=H}var oe=(C[F>>>24]<<24|C[O>>>16&255]<<16|C[le>>>8&255]<<8|C[we&255])^U[Ie++],de=(C[O>>>24]<<24|C[le>>>16&255]<<16|C[we>>>8&255]<<8|C[F&255])^U[Ie++],Q=(C[le>>>24]<<24|C[we>>>16&255]<<16|C[F>>>8&255]<<8|C[O&255])^U[Ie++],H=(C[we>>>24]<<24|C[F>>>16&255]<<16|C[O>>>8&255]<<8|C[le&255])^U[Ie++];R[B]=oe,R[B+1]=de,R[B+2]=Q,R[B+3]=H},keySize:256/32});n.AES=i._createHelper(k)})(),t.AES})})(gf)),gf.exports}var xf={exports:{}},GP=xf.exports,K2;function KP(){return K2||(K2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Mo(),Vo(),Ga(),Xr())})(GP,function(t){return(function(){var n=t,s=n.lib,i=s.WordArray,o=s.BlockCipher,u=n.algo,d=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],m=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],v=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],x=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],y=u.DES=o.extend({_doReset:function(){for(var j=this._key,k=j.words,R=[],B=0;B<56;B++){var U=d[B]-1;R[B]=k[U>>>5]>>>31-U%32&1}for(var W=this._subKeys=[],N=0;N<16;N++){for(var I=W[N]=[],T=m[N],B=0;B<24;B++)I[B/6|0]|=R[(h[B]-1+T)%28]<<31-B%6,I[4+(B/6|0)]|=R[28+(h[B+24]-1+T)%28]<<31-B%6;I[0]=I[0]<<1|I[0]>>>31;for(var B=1;B<7;B++)I[B]=I[B]>>>(B-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var C=this._invSubKeys=[],B=0;B<16;B++)C[B]=W[15-B]},encryptBlock:function(j,k){this._doCryptBlock(j,k,this._subKeys)},decryptBlock:function(j,k){this._doCryptBlock(j,k,this._invSubKeys)},_doCryptBlock:function(j,k,R){this._lBlock=j[k],this._rBlock=j[k+1],E.call(this,4,252645135),E.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),E.call(this,1,1431655765);for(var B=0;B<16;B++){for(var U=R[B],W=this._lBlock,N=this._rBlock,I=0,T=0;T<8;T++)I|=v[T][((N^U[T])&x[T])>>>0];this._lBlock=N,this._rBlock=W^I}var C=this._lBlock;this._lBlock=this._rBlock,this._rBlock=C,E.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),E.call(this,16,65535),E.call(this,4,252645135),j[k]=this._lBlock,j[k+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function E(j,k){var R=(this._lBlock>>>j^this._rBlock)&k;this._rBlock^=R,this._lBlock^=R<<j}function _(j,k){var R=(this._rBlock>>>j^this._lBlock)&k;this._lBlock^=R,this._rBlock^=R<<j}n.DES=o._createHelper(y);var w=u.TripleDES=o.extend({_doReset:function(){var j=this._key,k=j.words;if(k.length!==2&&k.length!==4&&k.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var R=k.slice(0,2),B=k.length<4?k.slice(0,2):k.slice(2,4),U=k.length<6?k.slice(0,2):k.slice(4,6);this._des1=y.createEncryptor(i.create(R)),this._des2=y.createEncryptor(i.create(B)),this._des3=y.createEncryptor(i.create(U))},encryptBlock:function(j,k){this._des1.encryptBlock(j,k),this._des2.decryptBlock(j,k),this._des3.encryptBlock(j,k)},decryptBlock:function(j,k){this._des3.decryptBlock(j,k),this._des2.encryptBlock(j,k),this._des1.decryptBlock(j,k)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(w)})(),t.TripleDES})})(xf)),xf.exports}var vf={exports:{}},XP=vf.exports,X2;function YP(){return X2||(X2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Mo(),Vo(),Ga(),Xr())})(XP,function(t){return(function(){var n=t,s=n.lib,i=s.StreamCipher,o=n.algo,u=o.RC4=i.extend({_doReset:function(){for(var m=this._key,v=m.words,x=m.sigBytes,y=this._S=[],E=0;E<256;E++)y[E]=E;for(var E=0,_=0;E<256;E++){var w=E%x,j=v[w>>>2]>>>24-w%4*8&255;_=(_+y[E]+j)%256;var k=y[E];y[E]=y[_],y[_]=k}this._i=this._j=0},_doProcessBlock:function(m,v){m[v]^=d.call(this)},keySize:256/32,ivSize:0});function d(){for(var m=this._S,v=this._i,x=this._j,y=0,E=0;E<4;E++){v=(v+1)%256,x=(x+m[v])%256;var _=m[v];m[v]=m[x],m[x]=_,y|=m[(m[v]+m[x])%256]<<24-E*8}return this._i=v,this._j=x,y}n.RC4=i._createHelper(u);var h=o.RC4Drop=u.extend({cfg:u.cfg.extend({drop:192}),_doReset:function(){u._doReset.call(this);for(var m=this.cfg.drop;m>0;m--)d.call(this)}});n.RC4Drop=i._createHelper(h)})(),t.RC4})})(vf)),vf.exports}var yf={exports:{}},QP=yf.exports,Y2;function JP(){return Y2||(Y2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Mo(),Vo(),Ga(),Xr())})(QP,function(t){return(function(){var n=t,s=n.lib,i=s.StreamCipher,o=n.algo,u=[],d=[],h=[],m=o.Rabbit=i.extend({_doReset:function(){for(var x=this._key.words,y=this.cfg.iv,E=0;E<4;E++)x[E]=(x[E]<<8|x[E]>>>24)&16711935|(x[E]<<24|x[E]>>>8)&4278255360;var _=this._X=[x[0],x[3]<<16|x[2]>>>16,x[1],x[0]<<16|x[3]>>>16,x[2],x[1]<<16|x[0]>>>16,x[3],x[2]<<16|x[1]>>>16],w=this._C=[x[2]<<16|x[2]>>>16,x[0]&4294901760|x[1]&65535,x[3]<<16|x[3]>>>16,x[1]&4294901760|x[2]&65535,x[0]<<16|x[0]>>>16,x[2]&4294901760|x[3]&65535,x[1]<<16|x[1]>>>16,x[3]&4294901760|x[0]&65535];this._b=0;for(var E=0;E<4;E++)v.call(this);for(var E=0;E<8;E++)w[E]^=_[E+4&7];if(y){var j=y.words,k=j[0],R=j[1],B=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,U=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,W=B>>>16|U&4294901760,N=U<<16|B&65535;w[0]^=B,w[1]^=W,w[2]^=U,w[3]^=N,w[4]^=B,w[5]^=W,w[6]^=U,w[7]^=N;for(var E=0;E<4;E++)v.call(this)}},_doProcessBlock:function(x,y){var E=this._X;v.call(this),u[0]=E[0]^E[5]>>>16^E[3]<<16,u[1]=E[2]^E[7]>>>16^E[5]<<16,u[2]=E[4]^E[1]>>>16^E[7]<<16,u[3]=E[6]^E[3]>>>16^E[1]<<16;for(var _=0;_<4;_++)u[_]=(u[_]<<8|u[_]>>>24)&16711935|(u[_]<<24|u[_]>>>8)&4278255360,x[y+_]^=u[_]},blockSize:128/32,ivSize:64/32});function v(){for(var x=this._X,y=this._C,E=0;E<8;E++)d[E]=y[E];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<d[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<d[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<d[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<d[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<d[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<d[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<d[6]>>>0?1:0)|0,this._b=y[7]>>>0<d[7]>>>0?1:0;for(var E=0;E<8;E++){var _=x[E]+y[E],w=_&65535,j=_>>>16,k=((w*w>>>17)+w*j>>>15)+j*j,R=((_&4294901760)*_|0)+((_&65535)*_|0);h[E]=k^R}x[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,x[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,x[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,x[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,x[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,x[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,x[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,x[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.Rabbit=i._createHelper(m)})(),t.Rabbit})})(yf)),yf.exports}var _f={exports:{}},ZP=_f.exports,Q2;function eF(){return Q2||(Q2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Mo(),Vo(),Ga(),Xr())})(ZP,function(t){return(function(){var n=t,s=n.lib,i=s.StreamCipher,o=n.algo,u=[],d=[],h=[],m=o.RabbitLegacy=i.extend({_doReset:function(){var x=this._key.words,y=this.cfg.iv,E=this._X=[x[0],x[3]<<16|x[2]>>>16,x[1],x[0]<<16|x[3]>>>16,x[2],x[1]<<16|x[0]>>>16,x[3],x[2]<<16|x[1]>>>16],_=this._C=[x[2]<<16|x[2]>>>16,x[0]&4294901760|x[1]&65535,x[3]<<16|x[3]>>>16,x[1]&4294901760|x[2]&65535,x[0]<<16|x[0]>>>16,x[2]&4294901760|x[3]&65535,x[1]<<16|x[1]>>>16,x[3]&4294901760|x[0]&65535];this._b=0;for(var w=0;w<4;w++)v.call(this);for(var w=0;w<8;w++)_[w]^=E[w+4&7];if(y){var j=y.words,k=j[0],R=j[1],B=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,U=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,W=B>>>16|U&4294901760,N=U<<16|B&65535;_[0]^=B,_[1]^=W,_[2]^=U,_[3]^=N,_[4]^=B,_[5]^=W,_[6]^=U,_[7]^=N;for(var w=0;w<4;w++)v.call(this)}},_doProcessBlock:function(x,y){var E=this._X;v.call(this),u[0]=E[0]^E[5]>>>16^E[3]<<16,u[1]=E[2]^E[7]>>>16^E[5]<<16,u[2]=E[4]^E[1]>>>16^E[7]<<16,u[3]=E[6]^E[3]>>>16^E[1]<<16;for(var _=0;_<4;_++)u[_]=(u[_]<<8|u[_]>>>24)&16711935|(u[_]<<24|u[_]>>>8)&4278255360,x[y+_]^=u[_]},blockSize:128/32,ivSize:64/32});function v(){for(var x=this._X,y=this._C,E=0;E<8;E++)d[E]=y[E];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<d[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<d[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<d[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<d[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<d[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<d[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<d[6]>>>0?1:0)|0,this._b=y[7]>>>0<d[7]>>>0?1:0;for(var E=0;E<8;E++){var _=x[E]+y[E],w=_&65535,j=_>>>16,k=((w*w>>>17)+w*j>>>15)+j*j,R=((_&4294901760)*_|0)+((_&65535)*_|0);h[E]=k^R}x[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,x[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,x[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,x[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,x[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,x[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,x[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,x[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.RabbitLegacy=i._createHelper(m)})(),t.RabbitLegacy})})(_f)),_f.exports}var Ef={exports:{}},tF=Ef.exports,J2;function rF(){return J2||(J2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),Mo(),Vo(),Ga(),Xr())})(tF,function(t){return(function(){var n=t,s=n.lib,i=s.BlockCipher,o=n.algo;const u=16,d=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],h=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var m={pbox:[],sbox:[]};function v(w,j){let k=j>>24&255,R=j>>16&255,B=j>>8&255,U=j&255,W=w.sbox[0][k]+w.sbox[1][R];return W=W^w.sbox[2][B],W=W+w.sbox[3][U],W}function x(w,j,k){let R=j,B=k,U;for(let W=0;W<u;++W)R=R^w.pbox[W],B=v(w,R)^B,U=R,R=B,B=U;return U=R,R=B,B=U,B=B^w.pbox[u],R=R^w.pbox[u+1],{left:R,right:B}}function y(w,j,k){let R=j,B=k,U;for(let W=u+1;W>1;--W)R=R^w.pbox[W],B=v(w,R)^B,U=R,R=B,B=U;return U=R,R=B,B=U,B=B^w.pbox[1],R=R^w.pbox[0],{left:R,right:B}}function E(w,j,k){for(let N=0;N<4;N++){w.sbox[N]=[];for(let I=0;I<256;I++)w.sbox[N][I]=h[N][I]}let R=0;for(let N=0;N<u+2;N++)w.pbox[N]=d[N]^j[R],R++,R>=k&&(R=0);let B=0,U=0,W=0;for(let N=0;N<u+2;N+=2)W=x(w,B,U),B=W.left,U=W.right,w.pbox[N]=B,w.pbox[N+1]=U;for(let N=0;N<4;N++)for(let I=0;I<256;I+=2)W=x(w,B,U),B=W.left,U=W.right,w.sbox[N][I]=B,w.sbox[N][I+1]=U;return!0}var _=o.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,j=w.words,k=w.sigBytes/4;E(m,j,k)}},encryptBlock:function(w,j){var k=x(m,w[j],w[j+1]);w[j]=k.left,w[j+1]=k.right},decryptBlock:function(w,j){var k=y(m,w[j],w[j+1]);w[j]=k.left,w[j+1]=k.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(_)})(),t.Blowfish})})(Ef)),Ef.exports}var nF=Md.exports,Z2;function sF(){return Z2||(Z2=1,(function(r,e){(function(t,n,s){r.exports=n(Rt(),kh(),eP(),rP(),Mo(),iP(),Vo(),ET(),Qx(),uP(),wT(),hP(),pP(),xP(),Jx(),_P(),Ga(),Xr(),TP(),AP(),NP(),RP(),DP(),FP(),OP(),LP(),VP(),zP(),HP(),qP(),KP(),YP(),JP(),eF(),rF())})(nF,function(t){return t})})(Md)),Md.exports}var iF=sF();const aF=rh(iF),oF=()=>{const[r,e]=se.useState(!1),[t,n]=se.useState(0),[s,i]=se.useState(null),o=(v,x=600,y=450,E=.8)=>new Promise(_=>{const w=document.createElement("canvas"),j=w.getContext("2d"),k=new Image;k.onload=()=>{let{width:R,height:B}=k;R>B?R>x&&(B=B*x/R,R=x):B>y&&(R=R*y/B,B=y),w.width=R,w.height=B,j.drawImage(k,0,0,R,B),w.toBlob(U=>{_(U)},"image/jpeg",E)},k.src=URL.createObjectURL(v)}),u=async v=>{if(!v)throw new Error("No se ha seleccionado ningn archivo");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(v.type))throw new Error("Tipo de archivo no vlido. Solo se permiten JPG, PNG y WebP");const y=5*1024*1024;if(v.size>y)throw new Error("El archivo es demasiado grande. Mximo 5MB. Se optimizar automticamente.");e(!0),i(null),n(10);try{console.log(" Tamao original:",(v.size/1024).toFixed(2),"KB");let E=v;v.size>200*1024&&(console.log(" Optimizando imagen..."),n(20),E=await o(v,600,450,.8),console.log(" Tamao optimizado:",(E.size/1024).toFixed(2),"KB"));const _=new FormData;_.append("file",E),_.append("upload_preset","ml_default"),_.get("upload_preset")||(_.append("api_key",_d.apiKey),_.append("timestamp",Math.round(new Date().getTime()/1e3))),n(50);const w=await fetch(HD,{method:"POST",body:_});if(!w.ok){const k=await w.json().catch(()=>({}));throw console.error("Error de Cloudinary:",k),new Error(`Error en la subida: ${w.statusText} - ${k.error?.message||"Preset no encontrado"}`)}const j=await w.json();if(j.error)throw new Error(j.error.message);return n(100),console.log(" Imagen subida:",{tamao:(j.bytes/1024).toFixed(2)+" KB",dimensiones:`${j.width}x${j.height}`,formato:j.format}),{url:j.secure_url,publicId:j.public_id,width:j.width,height:j.height,format:j.format,bytes:j.bytes}}catch(E){throw i(E.message),E}finally{e(!1)}},d=v=>{const x=Math.round(new Date().getTime()/1e3),y={...v,timestamp:x},E=Object.keys(y).sort().map(w=>`${w}=${y[w]}`).join("&"),_=aF.SHA1(E+_d.apiSecret).toString();return{timestamp:x,signature:_}},h=async v=>{try{console.log(" Eliminando imagen de Cloudinary:",v);const{timestamp:x,signature:y}=d({public_id:v}),E=await fetch(`https://api.cloudinary.com/v1_1/${_d.cloudName}/image/destroy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({public_id:v,api_key:_d.apiKey,timestamp:x,signature:y})});if(!E.ok){const w=await E.json().catch(()=>({}));throw new Error(`Error al eliminar la imagen: ${w.error?.message||E.statusText}`)}const _=await E.json();return console.log(" Imagen eliminada exitosamente:",_),_}catch(x){throw console.error(" Error eliminando imagen:",x),x}};return{uploadImage:u,deleteImage:h,deleteImageByUrl:async v=>{try{if(!qD(v))return console.log(" URL no es de Cloudinary, no se puede eliminar:",v),null;const x=WD(v);return x?await h(x):(console.log(" No se pudo extraer public_id de la URL:",v),null)}catch(x){throw console.error(" Error eliminando imagen por URL:",x),x}},uploading:r,uploadProgress:t,error:s}};function lF({productos:r,bebidas:e}){const[t,n]=se.useState("productos"),[s,i]=se.useState(!1),[o,u]=se.useState(!1),[d,h]=se.useState(null),[m,v]=se.useState(null),{categorias:x,loading:y}=Yx(),[E,_]=se.useState("upload"),[w,j]=se.useState(null),[k,R]=se.useState(""),[B,U]=se.useState("upload"),[W,N]=se.useState(null),[I,T]=se.useState(""),{uploadImage:C,deleteImageByUrl:D,uploading:F,uploadProgress:O,error:le}=oF(),we=ne=>{const ue=ne.target.files[0];if(ue){j(ue);const Ke=new FileReader;Ke.onload=wt=>{R(wt.target.result)},Ke.readAsDataURL(ue)}},Ie=ne=>{const ue=ne.target.files[0];if(ue){N(ue);const Ke=new FileReader;Ke.onload=wt=>{T(wt.target.result)},Ke.readAsDataURL(ue)}},ie=async()=>{if(!w)return null;try{return(await C(w)).url}catch(ne){throw console.error("Error subiendo imagen:",ne),ne}},oe=async()=>{if(!W)return null;try{return(await C(W)).url}catch(ne){throw console.error("Error subiendo imagen de bebida:",ne),ne}},de=()=>{_("upload"),j(null),R("")},Q=()=>{U("upload"),N(null),T("")},H=async()=>{if(!d||!d.imagen){alert("No hay imagen para eliminar");return}if(window.confirm("Ests seguro de que quieres eliminar la imagen actual?"))try{console.log(" Eliminando imagen actual:",d.imagen),await D(d.imagen),console.log(" Imagen eliminada exitosamente"),await pr(At(Je,"productos",d.id),{imagen:""}),h({...d,imagen:""}),de(),alert("Imagen eliminada exitosamente. Ahora puedes subir una nueva imagen.")}catch(ne){console.error(" Error eliminando imagen:",ne),alert("Error al eliminar la imagen")}},M=async()=>{if(!m||!m.imagen){alert("No hay imagen para eliminar");return}if(window.confirm("Ests seguro de que quieres eliminar la imagen actual?"))try{console.log(" Eliminando imagen actual de bebida:",m.imagen),await D(m.imagen),console.log(" Imagen de bebida eliminada exitosamente"),await pr(At(Je,"bebidas",m.id),{imagen:""}),v({...m,imagen:""}),Q(),alert("Imagen eliminada exitosamente. Ahora puedes subir una nueva imagen.")}catch(ne){console.error(" Error eliminando imagen de bebida:",ne),alert("Error al eliminar la imagen")}},[V,P]=se.useState({nombre:"",descripcion:"",precio:0,imagen:"",categoria:"",ingredientes_opcional:[],agregados:[],precio_promo:0,id_menu:"",bebida:"",cupon:"",estado:"activo"}),[G,re]=se.useState({nombre:"",descripcion:"",precio:0,imagen:"",categoria:"Bebida",estado:"activo",stock:0,stock_minimo:5}),xe=async ne=>{ne.preventDefault(),console.log(" Iniciando envo de producto..."),console.log(" Datos del producto a guardar:",V);try{console.log(" Conectando a Firebase...");let ue={...V};if(E==="upload"&&w){console.log(" Subiendo imagen a Cloudinary...");const Ke=await ie();if(ue.imagen=Ke,console.log(" Imagen subida exitosamente:",Ke),d&&d.imagen&&d.imagen!==Ke)try{console.log(" Eliminando imagen anterior:",d.imagen),await D(d.imagen),console.log(" Imagen anterior eliminada exitosamente")}catch(wt){console.warn(" No se pudo eliminar la imagen anterior:",wt.message)}}if(d)console.log(" Actualizando producto existente:",d.id),await pr(At(Je,"productos",d.id),ue),console.log(" Producto actualizado exitosamente"),h(null);else{console.log(" Creando nuevo producto...");const Ke=await gi(jt(Je,"productos"),ue);console.log(" Producto creado exitosamente con ID:",Ke.id)}console.log(" Limpiando formulario..."),P({nombre:"",descripcion:"",precio:0,imagen:"",categoria:"Principal",ingredientes_opcional:[],agregados:[],precio_promo:0,id_menu:"",bebida:"",cupon:"",estado:"activo"}),de(),i(!1),console.log(" Proceso completado exitosamente")}catch(ue){console.error(" ERROR al guardar producto:"),console.error(" Tipo de error:",ue.name),console.error(" Mensaje:",ue.message),console.error(" Cdigo:",ue.code),console.error(" Stack completo:",ue.stack),ue.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):ue.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):ue.code==="invalid-argument"?alert(" Error de datos: Verifica que todos los campos tengan el formato correcto"):alert(` Error al guardar el producto: ${ue.message}`)}},me=async ne=>{ne.preventDefault(),console.log(" Iniciando envo de bebida..."),console.log(" Datos de la bebida a guardar:",G);try{console.log(" Conectando a Firebase...");let ue={...G};if(B==="upload"&&W){console.log(" Subiendo imagen de bebida a Cloudinary...");const Ke=await oe();if(ue.imagen=Ke,console.log(" Imagen de bebida subida exitosamente:",Ke),m&&m.imagen&&m.imagen!==Ke)try{console.log(" Eliminando imagen anterior de bebida:",m.imagen),await D(m.imagen),console.log(" Imagen anterior de bebida eliminada exitosamente")}catch(wt){console.warn(" No se pudo eliminar la imagen anterior de bebida:",wt.message)}}if(m)console.log(" Actualizando bebida existente:",m.id),await pr(At(Je,"bebidas",m.id),ue),console.log(" Bebida actualizada exitosamente"),v(null);else{console.log(" Creando nueva bebida...");const Ke=await gi(jt(Je,"bebidas"),ue);console.log(" Bebida creada exitosamente con ID:",Ke.id)}console.log(" Limpiando formulario..."),re({nombre:"",descripcion:"",precio:0,imagen:"",categoria:"Bebida",estado:"activo",stock:0,stock_minimo:5}),Q(),u(!1),console.log(" Proceso completado exitosamente")}catch(ue){console.error(" ERROR al guardar bebida:"),console.error(" Tipo de error:",ue.name),console.error(" Mensaje:",ue.message),console.error(" Cdigo:",ue.code),console.error(" Stack completo:",ue.stack),ue.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):ue.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):ue.code==="invalid-argument"?alert(" Error de datos: Verifica que todos los campos tengan el formato correcto"):alert(` Error al guardar la bebida: ${ue.message}`)}},Se=ne=>{h(ne),P({nombre:ne.nombre||"",descripcion:ne.descripcion||"",precio:ne.precio||0,imagen:ne.imagen||"",categoria:ne.categoria||"",ingredientes_opcional:ne.ingredientes_opcional||[],agregados:ne.agregados||[],precio_promo:ne.precio_promo||0,id_menu:ne.id_menu||"",bebida:ne.bebida||"",cupon:ne.cupon||"",estado:ne.estado||"activo"}),i(!0)},Ne=ne=>{v(ne),re({nombre:ne.nombre||"",descripcion:ne.descripcion||"",precio:ne.precio||0,imagen:ne.imagen||"",categoria:ne.categoria||"Bebida",estado:ne.estado||"activo",stock:ne.stock||0,stock_minimo:ne.stock_minimo||5}),u(!0)},nt=async ne=>{if(window.confirm("Ests seguro de que quieres eliminar este producto?")){console.log(" Iniciando eliminacin de producto:",ne);try{const ue=r.find(Ke=>Ke.id===ne);if(ue&&ue.imagen)try{console.log(" Eliminando imagen del producto:",ue.imagen),await D(ue.imagen),console.log(" Imagen del producto eliminada exitosamente")}catch(Ke){console.warn(" No se pudo eliminar la imagen del producto:",Ke.message)}console.log(" Conectando a Firebase para eliminar..."),await Ma(At(Je,"productos",ne)),console.log(" Producto eliminado exitosamente")}catch(ue){console.error(" ERROR al eliminar producto:"),console.error(" Tipo de error:",ue.name),console.error(" Mensaje:",ue.message),console.error(" Cdigo:",ue.code),ue.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):ue.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):alert(` Error al eliminar el producto: ${ue.message}`)}}},lt=async ne=>{if(window.confirm("Ests seguro de que quieres eliminar esta bebida?")){console.log(" Iniciando eliminacin de bebida:",ne);try{const ue=e.find(Ke=>Ke.id===ne);if(ue&&ue.imagen)try{console.log(" Eliminando imagen de la bebida:",ue.imagen),await D(ue.imagen),console.log(" Imagen de la bebida eliminada exitosamente")}catch(Ke){console.warn(" No se pudo eliminar la imagen de la bebida:",Ke.message)}console.log(" Conectando a Firebase para eliminar..."),await Ma(At(Je,"bebidas",ne)),console.log(" Bebida eliminada exitosamente")}catch(ue){console.error(" ERROR al eliminar bebida:"),console.error(" Tipo de error:",ue.name),console.error(" Mensaje:",ue.message),console.error(" Cdigo:",ue.code),ue.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):ue.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):alert(` Error al eliminar la bebida: ${ue.message}`)}}},gt=()=>{P(ne=>({...ne,ingredientes_opcional:[...ne.ingredientes_opcional,""]}))},Le=ne=>{P(ue=>({...ue,ingredientes_opcional:ue.ingredientes_opcional.filter((Ke,wt)=>wt!==ne)}))},ht=(ne,ue)=>{P(Ke=>({...Ke,ingredientes_opcional:Ke.ingredientes_opcional.map((wt,tr)=>tr===ne?ue:wt)}))},Ze=()=>{P(ne=>({...ne,agregados:[...ne.agregados,{nombre:"",precio:0}]}))},Me=ne=>{P(ue=>({...ue,agregados:ue.agregados.filter((Ke,wt)=>wt!==ne)}))},bt=(ne,ue,Ke)=>{P(wt=>({...wt,agregados:wt.agregados.map((tr,rr)=>rr===ne?{...tr,[ue]:Ke}:tr)}))};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsxs("button",{onClick:()=>n("productos"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="productos"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Productos (",r.length,")"]}),c.jsxs("button",{onClick:()=>n("bebidas"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="bebidas"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Bebidas (",e.length,")"]})]})}),t==="productos"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestin de Productos"}),c.jsx("button",{onClick:()=>{i(!s),h(null),P({nombre:"",descripcion:"",precio:0,imagen:"",categoria:"Principal",ingredientes_opcional:[],agregados:[],precio_promo:0,id_menu:"",bebida:"",cupon:""})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:s?"Cancelar":"Nuevo Producto"})]}),s&&c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:d?"Editar Producto":"Nuevo Producto"}),c.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),c.jsx("input",{type:"text",value:V.nombre,onChange:ne=>P(ue=>({...ue,nombre:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),c.jsxs("select",{value:V.categoria,onChange:ne=>P(ue=>({...ue,categoria:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:y,children:[c.jsx("option",{value:"",children:y?"Cargando categoras...":"Seleccionar categora"}),c.jsx("option",{value:"Principal",children:" Principal"}),c.jsx("option",{value:"Postre",children:" Postre"}),c.jsx("option",{value:"Bebida",children:" Bebida"}),x.map(ne=>c.jsxs("option",{value:ne.nombre_categoria,children:[ne.emoji||""," ",ne.nombre_categoria]},ne.id))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),c.jsx("textarea",{value:V.descripcion,onChange:ne=>P(ue=>({...ue,descripcion:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"3"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio"}),c.jsx("input",{type:"number",value:V.precio,onChange:ne=>P(ue=>({...ue,precio:parseFloat(ne.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",step:"0.01",min:"0",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio Promo"}),c.jsx("input",{type:"number",value:V.precio_promo,onChange:ne=>P(ue=>({...ue,precio_promo:parseFloat(ne.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",step:"0.01",min:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Men"}),c.jsx("input",{type:"text",value:V.id_menu,onChange:ne=>P(ue=>({...ue,id_menu:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bebida"}),c.jsxs("select",{value:V.bebida,onChange:ne=>P(ue=>({...ue,bebida:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Seleccionar bebida"}),e.map(ne=>c.jsx("option",{value:ne.nombre,children:ne.nombre},ne.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cupn"}),c.jsx("input",{type:"text",value:V.cupon,onChange:ne=>P(ue=>({...ue,cupon:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Nmero de cupn"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{value:V.estado,onChange:ne=>P(ue=>({...ue,estado:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"activo",children:" Activo"}),c.jsx("option",{value:"inactivo",children:" Inactivo"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen del Producto"}),c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"flex space-x-4 items-center",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"imageSource",value:"upload",checked:E==="upload",onChange:ne=>_(ne.target.value),className:"mr-2"}),c.jsx("span",{className:"text-sm",children:"Subir imagen"})]}),d&&d.imagen&&c.jsx("button",{type:"button",onClick:H,className:"ml-4 px-3 py-1 bg-red-500 text-white text-sm rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:" Eliminar Imagen"})]})}),d&&d.imagen&&c.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Imagen actual:"}),c.jsx("img",{src:d.imagen,alt:"Imagen actual",className:"w-32 h-32 object-cover rounded-lg border border-gray-300",onError:ne=>{ne.target.style.display="none",ne.target.nextSibling.style.display="block"}}),c.jsx("div",{style:{display:"none"},className:"w-32 h-32 bg-gray-200 rounded-lg border border-gray-300 flex items-center justify-center",children:c.jsx("span",{className:"text-gray-500 text-sm",children:"Imagen no disponible"})})]}),E==="upload"&&c.jsxs("div",{children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:[c.jsx("p",{className:"text-blue-800 text-sm font-medium mb-1",children:" Especificaciones de imagen:"}),c.jsxs("ul",{className:"text-blue-700 text-xs space-y-1",children:[c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Tamao mximo:"})," 5MB"]}),c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Dimensiones:"})," Mximo 600x450px (se redimensiona automticamente)"]}),c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Formatos:"})," JPG, PNG, WebP"]}),c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Optimizacin:"})," Se comprime automticamente para mejor rendimiento"]})]})]}),d&&d.imagen?c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("span",{className:"text-yellow-600",children:""}),c.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"El producto ya tiene una imagen"})]}),c.jsx("p",{className:"text-yellow-700 text-xs",children:'Para subir una nueva imagen, primero debes eliminar la imagen actual usando el botn " Eliminar Imagen".'})]}):c.jsx("input",{type:"file",accept:"image/*",onChange:we,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),k&&c.jsx("div",{className:"mt-3",children:c.jsx("img",{src:k,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"})}),F&&c.jsxs("div",{className:"mt-3",children:[c.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${O}%`}})}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Subiendo imagen... ",O,"%"]})]}),le&&c.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:c.jsx("p",{className:"text-sm text-red-600",children:le})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ingredientes Opcionales"}),V.ingredientes_opcional.map((ne,ue)=>c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("input",{type:"text",value:ne,onChange:Ke=>ht(ue,Ke.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del ingrediente"}),c.jsx("button",{type:"button",onClick:()=>Le(ue),className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"-"})]},ue)),c.jsx("button",{type:"button",onClick:gt,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"+ Agregar Ingrediente"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agregados Disponibles"}),V.agregados.map((ne,ue)=>c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("input",{type:"text",value:ne.nombre,onChange:Ke=>bt(ue,"nombre",Ke.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del agregado"}),c.jsx("input",{type:"number",value:ne.precio,onChange:Ke=>bt(ue,"precio",parseFloat(Ke.target.value)||0),className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Precio",step:"0.01",min:"0"}),c.jsx("button",{type:"button",onClick:()=>Me(ue),className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"-"})]},ue)),c.jsx("button",{type:"button",onClick:Ze,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"+ Agregar Adicional"})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>{i(!1),h(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),c.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[d?"Actualizar":"Crear"," Producto"]})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(ne=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[ne.imagen&&c.jsx(Vf,{src:ne.imagen,alt:ne.nombre,containerClassName:"w-full h-32 rounded-md mb-3",fallbackText:"Sin imagen"}),c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:ne.nombre}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ne.estado==="activo"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ne.estado==="activo"?" Activo":" Inactivo"})]}),c.jsx("p",{className:"text-gray-600 text-sm mb-2",children:ne.descripcion}),c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("span",{className:"text-lg font-bold text-green-600",children:["$",ne.precio]}),ne.precio_promo>0&&c.jsxs("span",{className:"text-sm text-red-600",children:["Promo: $",ne.precio_promo]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Se(ne),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>nt(ne.id),className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",children:"Eliminar"})]})]},ne.id))})]}),t==="bebidas"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestin de Bebidas"}),c.jsx("button",{onClick:()=>{u(!o),v(null),re({nombre:"",descripcion:"",precio:0,imagen:"",categoria:"Bebida",estado:"activo"})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:o?"Cancelar":"Nueva Bebida"})]}),o&&c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:m?"Editar Bebida":"Nueva Bebida"}),c.jsxs("form",{onSubmit:me,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),c.jsx("input",{type:"text",value:G.nombre,onChange:ne=>re(ue=>({...ue,nombre:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),c.jsx("textarea",{value:G.descripcion,onChange:ne=>re(ue=>({...ue,descripcion:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"3"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio"}),c.jsx("input",{type:"number",value:G.precio,onChange:ne=>re(ue=>({...ue,precio:parseFloat(ne.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",step:"0.01",min:"0",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),c.jsxs("select",{value:G.categoria,onChange:ne=>re(ue=>({...ue,categoria:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:y,children:[c.jsx("option",{value:"",children:y?"Cargando categoras...":"Seleccionar categora"}),c.jsx("option",{value:"Principal",children:" Principal"}),c.jsx("option",{value:"Postre",children:" Postre"}),c.jsx("option",{value:"Bebida",children:" Bebida"}),x.map(ne=>c.jsxs("option",{value:ne.nombre_categoria,children:[ne.emoji||""," ",ne.nombre_categoria]},ne.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{value:G.estado,onChange:ne=>re(ue=>({...ue,estado:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[c.jsx("option",{value:"activo",children:"Activo"}),c.jsx("option",{value:"inactivo",children:"Inactivo"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen de la Bebida"}),c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"flex space-x-4 items-center",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"drinkImageSource",value:"upload",checked:B==="upload",onChange:ne=>U(ne.target.value),className:"mr-2"}),c.jsx("span",{className:"text-sm",children:"Subir imagen"})]}),m&&m.imagen&&c.jsx("button",{type:"button",onClick:M,className:"ml-4 px-3 py-1 bg-red-500 text-white text-sm rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:" Eliminar Imagen"})]})}),m&&m.imagen&&c.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Imagen actual:"}),c.jsx("img",{src:m.imagen,alt:"Imagen actual",className:"w-32 h-32 object-cover rounded-lg border border-gray-300",onError:ne=>{ne.target.style.display="none",ne.target.nextSibling.style.display="block"}}),c.jsx("div",{style:{display:"none"},className:"w-32 h-32 bg-gray-200 rounded-lg border border-gray-300 flex items-center justify-center",children:c.jsx("span",{className:"text-gray-500 text-sm",children:"Imagen no disponible"})})]}),B==="upload"&&c.jsxs("div",{children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:[c.jsx("p",{className:"text-blue-800 text-sm font-medium mb-1",children:" Especificaciones de imagen:"}),c.jsxs("ul",{className:"text-blue-700 text-xs space-y-1",children:[c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Tamao mximo:"})," 5MB"]}),c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Dimensiones:"})," Mximo 600x450px (se redimensiona automticamente)"]}),c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Formatos:"})," JPG, PNG, WebP"]}),c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Optimizacin:"})," Se comprime automticamente para mejor rendimiento"]})]})]}),m&&m.imagen?c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("span",{className:"text-yellow-600",children:""}),c.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"La bebida ya tiene una imagen"})]}),c.jsx("p",{className:"text-yellow-700 text-xs",children:'Para subir una nueva imagen, primero debes eliminar la imagen actual usando el botn " Eliminar Imagen".'})]}):c.jsx("input",{type:"file",accept:"image/*",onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),I&&c.jsx("div",{className:"mt-3",children:c.jsx("img",{src:I,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"})}),F&&c.jsxs("div",{className:"mt-3",children:[c.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${O}%`}})}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Subiendo imagen... ",O,"%"]})]}),le&&c.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:c.jsx("p",{className:"text-sm text-red-600",children:le})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),c.jsx("input",{type:"number",value:G.stock,onChange:ne=>re(ue=>({...ue,stock:parseInt(ne.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:"0",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Mnimo"}),c.jsx("input",{type:"number",value:G.stock_minimo,onChange:ne=>re(ue=>({...ue,stock_minimo:parseInt(ne.target.value)||5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:"0",required:!0})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>{u(!1),v(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),c.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[m?"Actualizar":"Crear"," Bebida"]})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(ne=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[ne.imagen&&c.jsx(Vf,{src:ne.imagen,alt:ne.nombre,containerClassName:"w-full h-32 rounded-md mb-3",fallbackText:"Sin imagen"}),c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:ne.nombre}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ne.estado==="activo"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ne.estado==="activo"?" Activo":" Inactivo"})]}),c.jsx("p",{className:"text-gray-600 text-sm mb-2",children:ne.descripcion}),c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("span",{className:"text-lg font-bold text-green-600",children:["$",ne.precio]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${ne.stock<=(ne.stock_minimo||5)?"bg-red-100 text-red-800":ne.stock<=10?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:["Stock: ",ne.stock||0]}),ne.stock<=(ne.stock_minimo||5)&&c.jsx("span",{className:"text-xs text-red-600",children:" Stock bajo"})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Ne(ne),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>lt(ne.id),className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",children:"Eliminar"})]})]},ne.id))})]})]})}const cF=[{id:"plato",emoji:"",label:"General"},{id:"hamburguesa",emoji:"",label:"Hamburguesas"},{id:"pizza",emoji:"",label:"Pizza"},{id:"pastas",emoji:"",label:"Pastas"},{id:"bebida",emoji:"",label:"Bebidas"},{id:"postre",emoji:"",label:"Postres"},{id:"ensalada",emoji:"",label:"Ensaladas"},{id:"caf",emoji:"",label:"Caf"}];function uF(){const{categorias:r,loading:e,error:t,createCategoria:n,updateCategoria:s,deleteCategoria:i,getAllCategorias:o}=Yx(),[u,d]=se.useState(!1),[h,m]=se.useState(null),[v,x]=se.useState([]),[y,E]=se.useState(!1),[_,w]=se.useState({nombre_categoria:"",tipo:"Principal",emoji:"",descripcion:""});se.useEffect(()=>{(async()=>{const C=await o();x(C)})()},[o]);const j=async T=>{if(T.preventDefault(),!_.nombre_categoria.trim()){alert("Por favor ingresa un nombre para la categora");return}const C={nombre_categoria:_.nombre_categoria.trim(),tipo:_.tipo,emoji:_.emoji,descripcion:_.descripcion.trim()};let D;if(h?D=await s(h.id,C):D=await n(C),D.success){w({nombre_categoria:"",tipo:"Principal",emoji:"",descripcion:""}),d(!1),m(null);const F=await o();x(F)}else alert(`Error: ${D.error}`)},k=T=>{m(T),w({nombre_categoria:T.nombre_categoria,tipo:T.tipo,emoji:T.emoji||"",descripcion:T.descripcion||""}),d(!0)},R=async T=>{if(window.confirm(`Ests seguro de que quieres eliminar la categora "${T.nombre_categoria}"?`)){const C=await i(T.id);if(C.success){const D=await o();x(D)}else alert(`Error: ${C.error}`)}},B=async T=>{const C=T.status==="activo"?"inactivo":"activo",D=await s(T.id,{status:C});if(D.success){const F=await o();x(F)}else alert(`Error: ${D.error}`)},U=()=>{w({nombre_categoria:"",tipo:"Principal",emoji:"",descripcion:""}),d(!1),m(null)},W=T=>{switch(T){case"Principal":return"";case"Postre":return"";case"Bebida":return"";default:return""}},N=T=>{switch(T){case"Principal":return"bg-blue-100 text-blue-800";case"Postre":return"bg-pink-100 text-pink-800";case"Bebida":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};if(e)return c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(t)return c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:c.jsxs("p",{className:"text-red-800",children:["Error cargando categoras: ",t]})});const I=y?v:r;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestin de Categoras"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Organiza tu men con categoras personalizadas"})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>E(!y),className:`px-4 py-2 rounded-md text-sm font-medium ${y?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:y?"Solo Activas":"Ver Todas"}),c.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Nueva Categora"})]})]}),u&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:h?"Editar Categora":"Nueva Categora"}),c.jsxs("form",{onSubmit:j,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Categora"}),c.jsx("input",{type:"text",value:_.nombre_categoria,onChange:T=>w(C=>({...C,nombre_categoria:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Entradas, Platos Fuertes, etc.",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),c.jsxs("select",{value:_.tipo,onChange:T=>w(C=>({...C,tipo:T.target.value,emoji:W(T.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[c.jsx("option",{value:"Principal",children:" Principal"}),c.jsx("option",{value:"Postre",children:" Postre"}),c.jsx("option",{value:"Bebida",children:" Bebida"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emoji"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:cF.map(T=>c.jsxs("button",{type:"button",onClick:()=>w(C=>({...C,emoji:T.emoji})),className:`flex flex-col items-center justify-center p-2 border rounded-md hover:bg-gray-100 transition ${_.emoji===T.emoji?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[c.jsx("span",{className:"text-2xl",children:T.emoji}),c.jsx("span",{className:"text-xs text-gray-600 mt-1",children:T.label})]},T.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posicin"}),c.jsx("input",{type:"number",value:h?.posicion||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500",placeholder:"Se asigna automticamente"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin (Opcional)"}),c.jsx("textarea",{value:_.descripcion,onChange:T=>w(C=>({...C,descripcion:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Descripcin de la categora..."})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),c.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[h?"Actualizar":"Crear"," Categora"]})]})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Categoras ",y?"(Todas)":"(Activas)"]})}),c.jsx("div",{className:"divide-y divide-gray-200",children:I.length===0?c.jsxs("div",{className:"px-6 py-8 text-center text-gray-500",children:["No hay categoras ",y?"":"activas"," disponibles"]}):I.map(T=>c.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-2xl",children:T.emoji||W(T.tipo)}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900",children:T.nombre_categoria}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${N(T.tipo)}`,children:T.tipo}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${T.status==="activo"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.status==="activo"?"Activa":"Inactiva"})]}),T.descripcion&&c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:T.descripcion}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Posicin: ",T.posicion||"N/A"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>B(T),className:`px-3 py-1 text-xs font-medium rounded-md ${T.status==="activo"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:T.status==="activo"?"Desactivar":"Activar"}),c.jsx("button",{onClick:()=>k(T),className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-md hover:bg-blue-200",children:"Editar"}),c.jsx("button",{onClick:()=>R(T),className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-md hover:bg-red-200",children:"Eliminar"})]})]})},T.id))})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:" Informacin sobre Categoras"}),c.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[c.jsx("li",{children:" Las categoras se ordenan automticamente por posicin"}),c.jsx("li",{children:" Solo las categoras activas aparecen en el men del cliente"}),c.jsx("li",{children:" Los productos se ordenan alfabticamente dentro de cada categora"}),c.jsx("li",{children:" Puedes crear categoras personalizadas adems de las predeterminadas"})]})]})]})}const bT=()=>{const r=se.useRef(null),e=se.useRef(null),t=se.useCallback(()=>{try{if(r.current){const i=r.current.cloneNode();i.currentTime=0,i.volume=.7,document.body.appendChild(i),i.play().then(()=>{i.addEventListener("ended",()=>{document.body.removeChild(i)})}).catch(o=>{console.warn("No se pudo reproducir el sonido de pedido:",o),document.body.contains(i)&&document.body.removeChild(i)})}}catch(i){console.warn("Error reproduciendo sonido de pedido:",i)}},[]),n=se.useCallback(()=>{try{if(e.current){const i=e.current.cloneNode();i.currentTime=0,i.volume=.7,document.body.appendChild(i),i.play().then(()=>{i.addEventListener("ended",()=>{document.body.removeChild(i)})}).catch(o=>{console.warn("No se pudo reproducir el sonido de cuenta:",o),document.body.contains(i)&&document.body.removeChild(i)})}}catch(i){console.warn("Error reproduciendo sonido de cuenta:",i)}},[]);return{playPedidoSound:t,playCuentaSound:n,AudioElements:()=>c.jsxs("div",{style:{display:"none"},children:[c.jsx("audio",{ref:r,src:"/sounds/pedido.mp3",preload:"auto",volume:.7}),c.jsx("audio",{ref:e,src:"/sounds/cuenta.mp3",preload:"auto",volume:.7})]})}},Lg=r=>{if(!r)return{elapsedMinutes:0,urgencyLevel:"normal"};const e=new Date,t=r.toDate?r.toDate():new Date(r),n=e-t,s=Math.floor(n/(1e3*60));let i="normal";return s>=25?i="urgent":s>=15&&(i="attention"),{elapsedMinutes:s,urgencyLevel:i}};function dF(r){const[e,t]=se.useState(0),[n,s]=se.useState(""),[i,o]=se.useState(""),[u,d]=se.useState("");return se.useEffect(()=>{if(!r)return;const h=()=>{const{elapsedMinutes:v}=Lg(r);if(t(v),v<1)d("Recin recibido");else if(v===1)d("1 minuto");else if(v<60)d(`${v} minutos`);else{const x=Math.floor(v/60),y=v%60;d(`${x}h ${y}m`)}v<=14?(s("text-green-600"),o("normal")):v<=24?(s("text-orange-500"),o("attention")):(s("text-red-600"),o("urgent"))};h();const m=setInterval(h,6e4);return()=>clearInterval(m)},[r]),{elapsedMinutes:e,colorClass:n,urgencyLevel:i,formattedTime:u}}function TT({orders:r,onUpdateStatus:e,onDeleteOrder:t,mesas:n=[],salas:s=[],title:i=" Panel de Pedidos",showCompletedOrders:o=!1}){const[u,d]=se.useState(!1),{playPedidoSound:h,AudioElements:m}=bT(),v=se.useRef(r.length),[x,y]=se.useState({mesa:"",nombre_cliente:"",items:[{nombre:"",cantidad:1,precio:0}],estado:"pendiente"});se.useEffect(()=>{!o&&r.length>v.current&&(console.log(" Nuevo pedido detectado! Reproduciendo sonido..."),h()),v.current=r.length},[r.length,o,h]);const[E,_]=se.useState(""),[w,j]=se.useState([]),[k,R]=se.useState(1),B=10,[U,W]=se.useState({tipo:"todos",fechaDesde:"",fechaHasta:"",ao:new Date().getFullYear(),mes:new Date().getMonth()+1,dia:new Date().getDate()}),N=(P,G)=>{e(P,G)},I=P=>{window.confirm("Ests seguro de que quieres eliminar este pedido?")&&t(P)},T=P=>{j(G=>G.includes(P)?G.filter(re=>re!==P):[...G,P])},C=()=>{w.length===de.length?j([]):j(de.map(P=>P.id))},D=()=>{w.length!==0&&window.confirm(`Ests seguro de que quieres eliminar ${w.length} pedidos seleccionados?`)&&(w.forEach(P=>t(P)),j([]))},F=P=>{_(P.target.value),R(1)},O=P=>{const G=new Date,re=new Date(G.getFullYear(),G.getMonth(),G.getDate());switch(P){case"hoy":return{desde:re,hasta:new Date(re.getTime()+1440*60*1e3-1)};case"ayer":const xe=new Date(re.getTime()-1440*60*1e3);return{desde:xe,hasta:new Date(xe.getTime()+1440*60*1e3-1)};case"semana":const me=new Date(re);return me.setDate(re.getDate()-re.getDay()),{desde:me,hasta:new Date(me.getTime()+10080*60*1e3-1)};case"mes":return{desde:new Date(U.ao,U.mes-1,1),hasta:new Date(U.ao,U.mes,0,23,59,59)};case"ao":return{desde:new Date(U.ao,0,1),hasta:new Date(U.ao,11,31,23,59,59)};case"dia":return{desde:new Date(U.ao,U.mes-1,U.dia),hasta:new Date(U.ao,U.mes-1,U.dia,23,59,59)};case"personalizado":return{desde:U.fechaDesde?new Date(U.fechaDesde):null,hasta:U.fechaHasta?new Date(U.fechaHasta+"T23:59:59"):null};default:return{desde:null,hasta:null}}},le=(P,G,re)=>!G&&!re?!0:!(G&&P<G||re&&P>re),we=()=>{y(P=>({...P,items:[...P.items,{nombre:"",cantidad:1,precio:0}]}))},Ie=P=>{y(G=>({...G,items:G.items.filter((re,xe)=>xe!==P)}))},ie=(P,G,re)=>{y(xe=>({...xe,items:xe.items.map((me,Se)=>Se===P?{...me,[G]:re}:me)}))},oe=async()=>{console.log(" Iniciando creacin de pedido..."),console.log(" Datos del pedido a crear:",x);try{const P={...x,timestamp:Df(),total:x.items.reduce((re,xe)=>re+xe.precio*xe.cantidad,0)};console.log(" Pedido procesado:",P),console.log(" Conectando a Firebase...");const G=await gi(jt(Je,"pedidos"),P);console.log(" Pedido creado exitosamente con ID:",G.id),console.log(" Limpiando formulario..."),y({mesa:"",nombre_cliente:"",items:[{nombre:"",cantidad:1,precio:0}],estado:"pendiente"}),d(!1),console.log(" Proceso completado exitosamente")}catch(P){console.error(" ERROR al crear pedido:"),console.error(" Tipo de error:",P.name),console.error(" Mensaje:",P.message),console.error(" Cdigo:",P.code),console.error(" Stack completo:",P.stack),P.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):P.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):P.code==="invalid-argument"?alert(" Error de datos: Verifica que todos los campos tengan el formato correcto"):alert(` Error al crear el pedido: ${P.message}`)}};r.filter(P=>P.estado==="pendiente");const de=r.filter(P=>{if(o){if(P.estado!=="entregado")return!1;if(E){const G=E.toLowerCase();if(!(P.mesa.toLowerCase().includes(G)||P.items.some(xe=>xe.nombre.toLowerCase().includes(G))||P.total&&P.total.toString().includes(E)||P.nombre_cliente&&P.nombre_cliente.toLowerCase().includes(G)))return!1}if(U.tipo!=="todos"){const G=P.timestamp?.toDate?P.timestamp.toDate():new Date(P.timestamp),{desde:re,hasta:xe}=O(U.tipo);if(!le(G,re,xe))return!1}return!0}return!0}).sort((P,G)=>{const re=P.timestamp?.toDate?P.timestamp.toDate():new Date(P.timestamp);return(G.timestamp?.toDate?G.timestamp.toDate():new Date(G.timestamp))-re}),Q=Math.ceil(de.length/B),H=(k-1)*B,M=H+B,V=de.slice(H,M);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:i}),!o&&r.filter(P=>{if(P.estado!=="pendiente")return!1;const{elapsedMinutes:G}=Lg(P.timestamp);return G>=25}).length>0&&c.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-red-100 text-red-800 rounded-full animate-pulse",children:[c.jsx("span",{className:"text-sm font-medium",children:""}),c.jsxs("span",{className:"text-sm font-medium",children:[r.filter(P=>{if(P.estado!=="pendiente")return!1;const{elapsedMinutes:G}=Lg(P.timestamp);return G>=25}).length," pedidos urgentes"]})]})]}),!o&&c.jsx("button",{onClick:()=>d(!u),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:u?"Cancelar":"Nuevo Pedido"})]}),u&&!o&&c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Crear Nuevo Pedido"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesa"}),c.jsx("input",{type:"text",value:x.mesa,onChange:P=>y(G=>({...G,mesa:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Nmero de mesa"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Cliente"}),c.jsx("input",{type:"text",value:x.nombre_cliente,onChange:P=>y(G=>({...G,nombre_cliente:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del cliente"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{value:x.estado,onChange:P=>y(G=>({...G,estado:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"pendiente",children:"Pendiente"}),c.jsx("option",{value:"en_preparacion",children:"En Preparacin"}),c.jsx("option",{value:"listo",children:"Listo"}),c.jsx("option",{value:"entregado",children:"Entregado"})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Items del Pedido"}),x.items.map((P,G)=>c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("input",{type:"text",value:P.nombre,onChange:re=>ie(G,"nombre",re.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del producto"}),c.jsx("input",{type:"number",value:P.cantidad,onChange:re=>ie(G,"cantidad",parseInt(re.target.value)||1),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Cant",min:"1"}),c.jsx("input",{type:"number",value:P.precio,onChange:re=>ie(G,"precio",parseFloat(re.target.value)||0),className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Precio",step:"0.01",min:"0"}),c.jsx("button",{onClick:()=>Ie(G),className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"-"})]},G)),c.jsx("button",{onClick:we,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"+ Agregar Item"})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),c.jsx("button",{onClick:oe,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Crear Pedido"})]})]}),o&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[c.jsxs("div",{className:"flex-1 max-w-md",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Buscar Pedidos"}),c.jsx("input",{type:"text",value:E,onChange:F,placeholder:"Buscar por mesa, producto, cliente o total...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:C,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:w.length===de.length?" Deseleccionar Todo":" Seleccionar Todo"}),w.length>0&&c.jsxs("button",{onClick:D,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[" Eliminar Seleccionados (",w.length,")"]})]})]}),c.jsx("div",{className:"border-t border-gray-200 pt-4",children:c.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Filtrar por Perodo"}),c.jsxs("select",{value:U.tipo,onChange:P=>{W(G=>({...G,tipo:P.target.value})),R(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:" Todos los pedidos"}),c.jsx("option",{value:"hoy",children:" Hoy"}),c.jsx("option",{value:"ayer",children:" Ayer"}),c.jsx("option",{value:"semana",children:" Esta semana"}),c.jsx("option",{value:"mes",children:" Este mes"}),c.jsx("option",{value:"ao",children:" Este ao"}),c.jsx("option",{value:"dia",children:" Da especfico"}),c.jsx("option",{value:"personalizado",children:" Rango personalizado"})]})]}),U.tipo==="mes"&&c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ao"}),c.jsx("select",{value:U.ao,onChange:P=>{W(G=>({...G,ao:parseInt(P.target.value)})),R(1)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:5},(P,G)=>new Date().getFullYear()-2+G).map(P=>c.jsx("option",{value:P,children:P},P))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mes"}),c.jsx("select",{value:U.mes,onChange:P=>{W(G=>({...G,mes:parseInt(P.target.value)})),R(1)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:12},(P,G)=>G+1).map(P=>c.jsx("option",{value:P,children:new Date(0,P-1).toLocaleString("es-ES",{month:"long"})},P))})]})]}),U.tipo==="ao"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ao"}),c.jsx("select",{value:U.ao,onChange:P=>{W(G=>({...G,ao:parseInt(P.target.value)})),R(1)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:5},(P,G)=>new Date().getFullYear()-2+G).map(P=>c.jsx("option",{value:P,children:P},P))})]}),U.tipo==="dia"&&c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ao"}),c.jsx("select",{value:U.ao,onChange:P=>{W(G=>({...G,ao:parseInt(P.target.value)})),R(1)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:3},(P,G)=>new Date().getFullYear()-1+G).map(P=>c.jsx("option",{value:P,children:P},P))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mes"}),c.jsx("select",{value:U.mes,onChange:P=>{W(G=>({...G,mes:parseInt(P.target.value)})),R(1)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:12},(P,G)=>G+1).map(P=>c.jsx("option",{value:P,children:new Date(0,P-1).toLocaleString("es-ES",{month:"long"})},P))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Da"}),c.jsx("select",{value:U.dia,onChange:P=>{W(G=>({...G,dia:parseInt(P.target.value)})),R(1)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:31},(P,G)=>G+1).map(P=>c.jsx("option",{value:P,children:P},P))})]})]}),U.tipo==="personalizado"&&c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),c.jsx("input",{type:"date",value:U.fechaDesde,onChange:P=>{W(G=>({...G,fechaDesde:P.target.value})),R(1)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),c.jsx("input",{type:"date",value:U.fechaHasta,onChange:P=>{W(G=>({...G,fechaHasta:P.target.value})),R(1)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]})})]}),c.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Mostrando ",de.length," pedidos entregados",E&&` que coinciden con "${E}"`,U.tipo!=="todos"&&c.jsxs("span",{className:"ml-2 text-blue-600",children:[" ",U.tipo==="hoy"?"de hoy":U.tipo==="ayer"?"de ayer":U.tipo==="semana"?"de esta semana":U.tipo==="mes"?`de ${new Date(0,U.mes-1).toLocaleString("es-ES",{month:"long"})} ${U.ao}`:U.tipo==="ao"?`de ${U.ao}`:U.tipo==="dia"?`del ${U.dia}/${U.mes}/${U.ao}`:U.tipo==="personalizado"?"del rango seleccionado":""]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[" Historial de Pedidos Entregados",c.jsx("span",{className:"ml-2 text-sm font-normal text-gray-500",children:"(Ordenados cronolgicamente - ms recientes primero)"})]})}),V.length===0?c.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:E||U.tipo!=="todos"?"No se encontraron pedidos que coincidan con los filtros aplicados":"No hay pedidos entregados"}):c.jsx("div",{className:"divide-y divide-gray-200",children:V.map(P=>c.jsx(fF,{order:P,onDelete:I,isSelected:w.includes(P.id),onSelect:T,mesas:n,salas:s},P.id))})]}),Q>1&&c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"text-sm text-gray-700",children:["Pgina ",k," de ",Q," (",de.length," pedidos total)"]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>R(Math.max(1,k-1)),disabled:k===1,className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:" Anterior"}),Array.from({length:Q},(P,G)=>G+1).map(P=>c.jsx("button",{onClick:()=>R(P),className:`px-3 py-2 text-sm border rounded-md ${k===P?"bg-blue-600 text-white border-blue-600":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:P},P)),c.jsx("button",{onClick:()=>R(Math.min(Q,k+1)),disabled:k===Q,className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente "})]})]})})]}),!o&&c.jsx("div",{className:"bg-white rounded-lg shadow-md",children:c.jsxs("div",{className:"space-y-4 p-6",children:[r.filter(P=>P.estado!=="entregado").map(P=>c.jsx(hF,{order:P,onStatusChange:N,onDelete:I,mesas:n,salas:s},P.id)),r.filter(P=>P.estado!=="entregado").length===0&&c.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No hay pedidos activos"})]})}),c.jsx(m,{})]})}function fF({order:r,onDelete:e,isSelected:t,onSelect:n,mesas:s,salas:i=[]}){const o=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleString("es-ES"):"N/A",u=r.valor_mesa||r.mesa,d=r.valor_sala||"Sala",m=s.find(x=>r.mesa_id&&x.id===r.mesa_id||x.valor_mesa===r.mesa)?.reservado_por||"",v=m.length>0;return c.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("input",{type:"checkbox",checked:t,onChange:()=>n(r.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[c.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["Mesa ",u,d!=="Sala"&&c.jsxs("span",{className:"ml-1 text-xs opacity-75",children:["- ",d]})]}),c.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"ENTREGADO"}),v&&c.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:[" RESERVADA: ",m]})]}),c.jsx("div",{className:"space-y-1 mb-2",children:r.items.map((x,y)=>c.jsxs("div",{className:"text-sm text-gray-600",children:[x.cantidad,"x ",x.nombre," - $",x.precio]},y))}),c.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[m&&c.jsxs("div",{children:[" Mesa Reservada por: ",m]}),r.nombre_cliente&&c.jsxs("div",{className:"text-indigo-600 font-medium",children:[" Pedido para: ",r.nombre_cliente]}),c.jsxs("div",{children:["Total: $",r.total?.toFixed(2)||"0.00"]}),c.jsxs("div",{children:["Entregado: ",o(r.timestamp)]})]})]}),c.jsx("button",{onClick:()=>e(r.id),className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",children:" Eliminar"})]})})}function hF({order:r,onStatusChange:e,onDelete:t,mesas:n,salas:s=[]}){const i=E=>E?(E.toDate?E.toDate():new Date(E)).toLocaleString("es-ES"):"N/A",{elapsedMinutes:o,urgencyLevel:u,formattedTime:d}=dF(r.timestamp),h=r.valor_mesa||r.mesa,m=r.valor_sala||"Sala",x=n.find(E=>r.mesa_id&&E.id===r.mesa_id||E.valor_mesa===r.mesa)?.reservado_por||"",y=x.length>0;return se.useEffect(()=>{r.items.some(_=>_.ingredientes_removidos&&_.ingredientes_removidos.length>0||_.agregados&&_.agregados.length>0)&&(console.log(" Pedido personalizado detectado:",r.id),r.items.forEach((_,w)=>{_.ingredientes_removidos&&_.ingredientes_removidos.length>0&&console.log(`   Item ${w+1} (${_.nombre}) - Sin:`,_.ingredientes_removidos),_.agregados&&_.agregados.length>0&&console.log(`   Item ${w+1} (${_.nombre}) - Con:`,_.agregados.map(j=>j.nombre))}))},[r]),c.jsx("div",{className:`px-6 py-4 transition-all duration-300 rounded-lg shadow-sm border ${u==="urgent"?"bg-red-50 border-l-4 border-red-400 border-red-200":u==="attention"?"bg-orange-50 border-l-4 border-orange-400 border-orange-200":"bg-white border-gray-200"}`,children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[c.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["Mesa ",h,m!=="Sala"&&c.jsxs("span",{className:"ml-1 text-xs opacity-75",children:["- ",m]})]}),c.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${r.estado==="pendiente"?"bg-yellow-100 text-yellow-800":r.estado==="en_preparacion"?"bg-orange-100 text-orange-800":r.estado==="listo"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.estado.replace("_"," ").toUpperCase()}),y&&c.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:[" RESERVADA: ",x]}),u==="urgent"&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 animate-pulse",children:" URGENTE"}),u==="attention"&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:" ATENCIN"}),r.items.some(_=>_.ingredientes_removidos&&_.ingredientes_removidos.length>0||_.agregados&&_.agregados.length>0)?c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:" PERSONALIZADO"}):null]}),c.jsx("div",{className:"space-y-2 mb-3",children:r.items.map((E,_)=>c.jsxs("div",{children:[c.jsxs("div",{className:`${E.categoria==="Principal"||E.categoria==="Postre"?"text-4xl font-bold":"text-sm font-normal"} text-gray-600`,children:[E.cantidad,"x ",E.nombre," - $",E.precio,E.categoria&&c.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",E.categoria,")"]})]}),E.ingredientes_removidos&&E.ingredientes_removidos.length>0&&c.jsxs("div",{className:"ml-4 text-lg text-red-600 font-medium",children:["Sin ",E.ingredientes_removidos.join(", ")]}),E.agregados&&E.agregados.length>0&&c.jsxs("div",{className:"ml-4 text-lg text-green-600 font-medium",children:["Ms ",E.agregados.map(w=>w.nombre).join(", ")]})]},_))}),y&&x&&c.jsxs("div",{className:"mt-2 text-sm text-purple-600 font-medium",children:[" Mesa Reservada por: ",x]}),r.nombre_cliente&&c.jsxs("div",{className:"mt-2 text-sm text-indigo-600 font-medium",children:[" Pedido para: ",r.nombre_cliente]}),c.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Total: $",r.total?.toFixed(2)||"0.00"," |",i(r.timestamp)]}),c.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:["Pedido recibido ",d]})]}),c.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[c.jsx("div",{className:"flex justify-center items-center",children:c.jsxs("div",{className:`flex flex-col items-center space-y-2 p-3 rounded-xl transition-all duration-300 ${u==="urgent"?"bg-red-50 border-2 border-red-200 shadow-lg animate-pulse":u==="attention"?"bg-orange-50 border-2 border-orange-200 shadow-md":"bg-green-50 border-2 border-green-200 shadow-sm"}`,children:[c.jsx("svg",{className:"w-10 h-10",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),c.jsxs("span",{className:"text-2xl font-bold",children:[o," min"]}),c.jsx("span",{className:"text-xs font-medium opacity-75",children:"Tiempo de espera"}),c.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-bold ${u==="urgent"?"bg-red-200 text-red-800":u==="attention"?"bg-orange-200 text-orange-800":"bg-green-200 text-green-800"}`,children:u==="urgent"?"URGENTE":u==="attention"?"ATENCIN":"NORMAL"})]})}),c.jsxs("div",{className:"flex flex-col space-y-2",children:[c.jsxs("select",{value:r.estado,onChange:E=>e(r.id,E.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"pendiente",children:"Pendiente"}),c.jsx("option",{value:"en_preparacion",children:"En Preparacin"}),c.jsx("option",{value:"listo",children:"Listo"}),c.jsx("option",{value:"entregado",children:"Entregado"})]}),c.jsx("div",{className:"text-xs text-gray-400 text-center",children:"Solo administradores"})]})]})]})})}var Sl={},kp,eE;function mF(){return eE||(eE=1,kp=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),kp}var Dp={},Ea={},tE;function Uo(){if(tE)return Ea;tE=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Ea.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},Ea.getSymbolTotalCodewords=function(n){return e[n]},Ea.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n},Ea.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},Ea.isKanjiModeEnabled=function(){return typeof r<"u"},Ea.toSJIS=function(n){return r(n)},Ea}var Pp={},rE;function Zx(){return rE||(rE=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return e(n)}catch{return s}}})(Pp)),Pp}var Fp,nE;function pF(){if(nE)return Fp;nE=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Fp=r,Fp}var jp,sE;function gF(){if(sE)return jp;sE=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,t,n,s){const i=e*this.size+t;this.data[i]=n,s&&(this.reservedBit[i]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},jp=r,jp}var Op={},iE;function xF(){return iE||(iE=1,(function(r){const e=Uo().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=e(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,u=[i-7];for(let d=1;d<s-1;d++)u[d]=u[d-1]-o;return u.push(6),u.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),o=i.length;for(let u=0;u<o;u++)for(let d=0;d<o;d++)u===0&&d===0||u===0&&d===o-1||u===o-1&&d===0||s.push([i[u],i[d]]);return s}})(Op)),Op}var Bp={},aE;function vF(){if(aE)return Bp;aE=1;const r=Uo().getSymbolSize,e=7;return Bp.getPositions=function(n){const s=r(n);return[[0,0],[s-e,0],[0,s-e]]},Bp}var Lp={},oE;function yF(){return oE||(oE=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let o=0,u=0,d=0,h=null,m=null;for(let v=0;v<i;v++){u=d=0,h=m=null;for(let x=0;x<i;x++){let y=s.get(v,x);y===h?u++:(u>=5&&(o+=e.N1+(u-5)),h=y,u=1),y=s.get(x,v),y===m?d++:(d>=5&&(o+=e.N1+(d-5)),m=y,d=1)}u>=5&&(o+=e.N1+(u-5)),d>=5&&(o+=e.N1+(d-5))}return o},r.getPenaltyN2=function(s){const i=s.size;let o=0;for(let u=0;u<i-1;u++)for(let d=0;d<i-1;d++){const h=s.get(u,d)+s.get(u,d+1)+s.get(u+1,d)+s.get(u+1,d+1);(h===4||h===0)&&o++}return o*e.N2},r.getPenaltyN3=function(s){const i=s.size;let o=0,u=0,d=0;for(let h=0;h<i;h++){u=d=0;for(let m=0;m<i;m++)u=u<<1&2047|s.get(h,m),m>=10&&(u===1488||u===93)&&o++,d=d<<1&2047|s.get(m,h),m>=10&&(d===1488||d===93)&&o++}return o*e.N3},r.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let d=0;d<o;d++)i+=s.data[d];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function t(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const o=i.size;for(let u=0;u<o;u++)for(let d=0;d<o;d++)i.isReserved(d,u)||i.xor(d,u,t(s,d,u))},r.getBestMask=function(s,i){const o=Object.keys(r.Patterns).length;let u=0,d=1/0;for(let h=0;h<o;h++){i(h),r.applyMask(h,s);const m=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(h,s),m<d&&(d=m,u=h)}return u}})(Lp)),Lp}var Ed={},lE;function CT(){if(lE)return Ed;lE=1;const r=Zx(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ed.getBlocksCount=function(s,i){switch(i){case r.L:return e[(s-1)*4+0];case r.M:return e[(s-1)*4+1];case r.Q:return e[(s-1)*4+2];case r.H:return e[(s-1)*4+3];default:return}},Ed.getTotalCodewordsCount=function(s,i){switch(i){case r.L:return t[(s-1)*4+0];case r.M:return t[(s-1)*4+1];case r.Q:return t[(s-1)*4+2];case r.H:return t[(s-1)*4+3];default:return}},Ed}var Mp={},Wc={},cE;function _F(){if(cE)return Wc;cE=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let n=1;for(let s=0;s<255;s++)r[s]=n,e[n]=s,n<<=1,n&256&&(n^=285);for(let s=255;s<512;s++)r[s]=r[s-255]})(),Wc.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},Wc.exp=function(n){return r[n]},Wc.mul=function(n,s){return n===0||s===0?0:r[e[n]+e[s]]},Wc}var uE;function EF(){return uE||(uE=1,(function(r){const e=_F();r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let u=0;u<s.length;u++)i[o+u]^=e.mul(n[o],s[u]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let d=0;d<s.length;d++)i[d]^=e.mul(s[d],o);let u=0;for(;u<i.length&&i[u]===0;)u++;i=i.slice(u)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(Mp)),Mp}var Vp,dE;function wF(){if(dE)return Vp;dE=1;const r=EF();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(n.length+this.degree);s.set(n);const i=r.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const u=new Uint8Array(this.degree);return u.set(i,o),u}return i},Vp=e,Vp}var Up={},zp={},$p={},fE;function AT(){return fE||(fE=1,$p.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),$p}var ii={},hE;function ST(){if(hE)return ii;hE=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;ii.KANJI=new RegExp(t,"g"),ii.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ii.BYTE=new RegExp(n,"g"),ii.NUMERIC=new RegExp(r,"g"),ii.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+t+"$"),i=new RegExp("^"+r+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ii.testKanji=function(d){return s.test(d)},ii.testNumeric=function(d){return i.test(d)},ii.testAlphanumeric=function(d){return o.test(d)},ii}var mE;function zo(){return mE||(mE=1,(function(r){const e=AT(),t=ST();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return t.testNumeric(i)?r.NUMERIC:t.testAlphanumeric(i)?r.ALPHANUMERIC:t.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,o){if(r.isValid(i))return i;try{return n(i)}catch{return o}}})(zp)),zp}var pE;function bF(){return pE||(pE=1,(function(r){const e=Uo(),t=CT(),n=Zx(),s=zo(),i=AT(),o=7973,u=e.getBCHDigit(o);function d(x,y,E){for(let _=1;_<=40;_++)if(y<=r.getCapacity(_,E,x))return _}function h(x,y){return s.getCharCountIndicator(x,y)+4}function m(x,y){let E=0;return x.forEach(function(_){const w=h(_.mode,y);E+=w+_.getBitsLength()}),E}function v(x,y){for(let E=1;E<=40;E++)if(m(x,E)<=r.getCapacity(E,y,s.MIXED))return E}r.from=function(y,E){return i.isValid(y)?parseInt(y,10):E},r.getCapacity=function(y,E,_){if(!i.isValid(y))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=s.BYTE);const w=e.getSymbolTotalCodewords(y),j=t.getTotalCodewordsCount(y,E),k=(w-j)*8;if(_===s.MIXED)return k;const R=k-h(_,y);switch(_){case s.NUMERIC:return Math.floor(R/10*3);case s.ALPHANUMERIC:return Math.floor(R/11*2);case s.KANJI:return Math.floor(R/13);case s.BYTE:default:return Math.floor(R/8)}},r.getBestVersionForData=function(y,E){let _;const w=n.from(E,n.M);if(Array.isArray(y)){if(y.length>1)return v(y,w);if(y.length===0)return 1;_=y[0]}else _=y;return d(_.mode,_.getLength(),w)},r.getEncodedBits=function(y){if(!i.isValid(y)||y<7)throw new Error("Invalid QR Code version");let E=y<<12;for(;e.getBCHDigit(E)-u>=0;)E^=o<<e.getBCHDigit(E)-u;return y<<12|E}})(Up)),Up}var Hp={},gE;function TF(){if(gE)return Hp;gE=1;const r=Uo(),e=1335,t=21522,n=r.getBCHDigit(e);return Hp.getEncodedBits=function(i,o){const u=i.bit<<3|o;let d=u<<10;for(;r.getBCHDigit(d)-n>=0;)d^=e<<r.getBCHDigit(d)-n;return(u<<10|d)^t},Hp}var Wp={},qp,xE;function CF(){if(xE)return qp;xE=1;const r=zo();function e(t){this.mode=r.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),n.put(o,10);const u=this.data.length-s;u>0&&(i=this.data.substr(s),o=parseInt(i,10),n.put(o,u*3+1))},qp=e,qp}var Gp,vE;function AF(){if(vE)return Gp;vE=1;const r=zo(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=r.ALPHANUMERIC,this.data=n}return t.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=e.indexOf(this.data[i])*45;o+=e.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(e.indexOf(this.data[i]),6)},Gp=t,Gp}var Kp,yE;function SF(){if(yE)return Kp;yE=1;const r=zo();function e(t){this.mode=r.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let n=0,s=this.data.length;n<s;n++)t.put(this.data[n],8)},Kp=e,Kp}var Xp,_E;function NF(){if(_E)return Xp;_E=1;const r=zo(),e=Uo();function t(n){this.mode=r.KANJI,this.data=n}return t.getBitsLength=function(s){return s*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let s;for(s=0;s<this.data.length;s++){let i=e.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),n.put(i,13)}},Xp=t,Xp}var Yp={exports:{}},EE;function IF(){return EE||(EE=1,(function(r){var e={single_source_shortest_paths:function(t,n,s){var i={},o={};o[n]=0;var u=e.PriorityQueue.make();u.push(n,0);for(var d,h,m,v,x,y,E,_,w;!u.empty();){d=u.pop(),h=d.value,v=d.cost,x=t[h]||{};for(m in x)x.hasOwnProperty(m)&&(y=x[m],E=v+y,_=o[m],w=typeof o[m]>"u",(w||_>E)&&(o[m]=E,u.push(m,E),i[m]=h))}if(typeof s<"u"&&typeof o[s]>"u"){var j=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(j)}return i},extract_shortest_path_from_predecessor_list:function(t,n){for(var s=[],i=n;i;)s.push(i),t[i],i=t[i];return s.reverse(),s},find_path:function(t,n,s){var i=e.single_source_shortest_paths(t,n,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,s={},i;t=t||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=t.sorter||n.default_sorter,s},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var s={value:t,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(Yp)),Yp.exports}var wE;function RF(){return wE||(wE=1,(function(r){const e=zo(),t=CF(),n=AF(),s=SF(),i=NF(),o=ST(),u=Uo(),d=IF();function h(j){return unescape(encodeURIComponent(j)).length}function m(j,k,R){const B=[];let U;for(;(U=j.exec(R))!==null;)B.push({data:U[0],index:U.index,mode:k,length:U[0].length});return B}function v(j){const k=m(o.NUMERIC,e.NUMERIC,j),R=m(o.ALPHANUMERIC,e.ALPHANUMERIC,j);let B,U;return u.isKanjiModeEnabled()?(B=m(o.BYTE,e.BYTE,j),U=m(o.KANJI,e.KANJI,j)):(B=m(o.BYTE_KANJI,e.BYTE,j),U=[]),k.concat(R,B,U).sort(function(N,I){return N.index-I.index}).map(function(N){return{data:N.data,mode:N.mode,length:N.length}})}function x(j,k){switch(k){case e.NUMERIC:return t.getBitsLength(j);case e.ALPHANUMERIC:return n.getBitsLength(j);case e.KANJI:return i.getBitsLength(j);case e.BYTE:return s.getBitsLength(j)}}function y(j){return j.reduce(function(k,R){const B=k.length-1>=0?k[k.length-1]:null;return B&&B.mode===R.mode?(k[k.length-1].data+=R.data,k):(k.push(R),k)},[])}function E(j){const k=[];for(let R=0;R<j.length;R++){const B=j[R];switch(B.mode){case e.NUMERIC:k.push([B,{data:B.data,mode:e.ALPHANUMERIC,length:B.length},{data:B.data,mode:e.BYTE,length:B.length}]);break;case e.ALPHANUMERIC:k.push([B,{data:B.data,mode:e.BYTE,length:B.length}]);break;case e.KANJI:k.push([B,{data:B.data,mode:e.BYTE,length:h(B.data)}]);break;case e.BYTE:k.push([{data:B.data,mode:e.BYTE,length:h(B.data)}])}}return k}function _(j,k){const R={},B={start:{}};let U=["start"];for(let W=0;W<j.length;W++){const N=j[W],I=[];for(let T=0;T<N.length;T++){const C=N[T],D=""+W+T;I.push(D),R[D]={node:C,lastCount:0},B[D]={};for(let F=0;F<U.length;F++){const O=U[F];R[O]&&R[O].node.mode===C.mode?(B[O][D]=x(R[O].lastCount+C.length,C.mode)-x(R[O].lastCount,C.mode),R[O].lastCount+=C.length):(R[O]&&(R[O].lastCount=C.length),B[O][D]=x(C.length,C.mode)+4+e.getCharCountIndicator(C.mode,k))}}U=I}for(let W=0;W<U.length;W++)B[U[W]].end=0;return{map:B,table:R}}function w(j,k){let R;const B=e.getBestModeForData(j);if(R=e.from(k,B),R!==e.BYTE&&R.bit<B.bit)throw new Error('"'+j+'" cannot be encoded with mode '+e.toString(R)+`.
 Suggested mode is: `+e.toString(B));switch(R===e.KANJI&&!u.isKanjiModeEnabled()&&(R=e.BYTE),R){case e.NUMERIC:return new t(j);case e.ALPHANUMERIC:return new n(j);case e.KANJI:return new i(j);case e.BYTE:return new s(j)}}r.fromArray=function(k){return k.reduce(function(R,B){return typeof B=="string"?R.push(w(B,null)):B.data&&R.push(w(B.data,B.mode)),R},[])},r.fromString=function(k,R){const B=v(k,u.isKanjiModeEnabled()),U=E(B),W=_(U,R),N=d.find_path(W.map,"start","end"),I=[];for(let T=1;T<N.length-1;T++)I.push(W.table[N[T]].node);return r.fromArray(y(I))},r.rawSplit=function(k){return r.fromArray(v(k,u.isKanjiModeEnabled()))}})(Wp)),Wp}var bE;function kF(){if(bE)return Dp;bE=1;const r=Uo(),e=Zx(),t=pF(),n=gF(),s=xF(),i=vF(),o=yF(),u=CT(),d=wF(),h=bF(),m=TF(),v=zo(),x=RF();function y(W,N){const I=W.size,T=i.getPositions(N);for(let C=0;C<T.length;C++){const D=T[C][0],F=T[C][1];for(let O=-1;O<=7;O++)if(!(D+O<=-1||I<=D+O))for(let le=-1;le<=7;le++)F+le<=-1||I<=F+le||(O>=0&&O<=6&&(le===0||le===6)||le>=0&&le<=6&&(O===0||O===6)||O>=2&&O<=4&&le>=2&&le<=4?W.set(D+O,F+le,!0,!0):W.set(D+O,F+le,!1,!0))}}function E(W){const N=W.size;for(let I=8;I<N-8;I++){const T=I%2===0;W.set(I,6,T,!0),W.set(6,I,T,!0)}}function _(W,N){const I=s.getPositions(N);for(let T=0;T<I.length;T++){const C=I[T][0],D=I[T][1];for(let F=-2;F<=2;F++)for(let O=-2;O<=2;O++)F===-2||F===2||O===-2||O===2||F===0&&O===0?W.set(C+F,D+O,!0,!0):W.set(C+F,D+O,!1,!0)}}function w(W,N){const I=W.size,T=h.getEncodedBits(N);let C,D,F;for(let O=0;O<18;O++)C=Math.floor(O/3),D=O%3+I-8-3,F=(T>>O&1)===1,W.set(C,D,F,!0),W.set(D,C,F,!0)}function j(W,N,I){const T=W.size,C=m.getEncodedBits(N,I);let D,F;for(D=0;D<15;D++)F=(C>>D&1)===1,D<6?W.set(D,8,F,!0):D<8?W.set(D+1,8,F,!0):W.set(T-15+D,8,F,!0),D<8?W.set(8,T-D-1,F,!0):D<9?W.set(8,15-D-1+1,F,!0):W.set(8,15-D-1,F,!0);W.set(T-8,8,1,!0)}function k(W,N){const I=W.size;let T=-1,C=I-1,D=7,F=0;for(let O=I-1;O>0;O-=2)for(O===6&&O--;;){for(let le=0;le<2;le++)if(!W.isReserved(C,O-le)){let we=!1;F<N.length&&(we=(N[F]>>>D&1)===1),W.set(C,O-le,we),D--,D===-1&&(F++,D=7)}if(C+=T,C<0||I<=C){C-=T,T=-T;break}}}function R(W,N,I){const T=new t;I.forEach(function(le){T.put(le.mode.bit,4),T.put(le.getLength(),v.getCharCountIndicator(le.mode,W)),le.write(T)});const C=r.getSymbolTotalCodewords(W),D=u.getTotalCodewordsCount(W,N),F=(C-D)*8;for(T.getLengthInBits()+4<=F&&T.put(0,4);T.getLengthInBits()%8!==0;)T.putBit(0);const O=(F-T.getLengthInBits())/8;for(let le=0;le<O;le++)T.put(le%2?17:236,8);return B(T,W,N)}function B(W,N,I){const T=r.getSymbolTotalCodewords(N),C=u.getTotalCodewordsCount(N,I),D=T-C,F=u.getBlocksCount(N,I),O=T%F,le=F-O,we=Math.floor(T/F),Ie=Math.floor(D/F),ie=Ie+1,oe=we-Ie,de=new d(oe);let Q=0;const H=new Array(F),M=new Array(F);let V=0;const P=new Uint8Array(W.buffer);for(let Se=0;Se<F;Se++){const Ne=Se<le?Ie:ie;H[Se]=P.slice(Q,Q+Ne),M[Se]=de.encode(H[Se]),Q+=Ne,V=Math.max(V,Ne)}const G=new Uint8Array(T);let re=0,xe,me;for(xe=0;xe<V;xe++)for(me=0;me<F;me++)xe<H[me].length&&(G[re++]=H[me][xe]);for(xe=0;xe<oe;xe++)for(me=0;me<F;me++)G[re++]=M[me][xe];return G}function U(W,N,I,T){let C;if(Array.isArray(W))C=x.fromArray(W);else if(typeof W=="string"){let we=N;if(!we){const Ie=x.rawSplit(W);we=h.getBestVersionForData(Ie,I)}C=x.fromString(W,we||40)}else throw new Error("Invalid data");const D=h.getBestVersionForData(C,I);if(!D)throw new Error("The amount of data is too big to be stored in a QR Code");if(!N)N=D;else if(N<D)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+D+`.
`);const F=R(N,I,C),O=r.getSymbolSize(N),le=new n(O);return y(le,N),E(le),_(le,N),j(le,I,0),N>=7&&w(le,N),k(le,F),isNaN(T)&&(T=o.getBestMask(le,j.bind(null,le,I))),o.applyMask(T,le),j(le,I,T),{modules:le,version:N,errorCorrectionLevel:I,maskPattern:T,segments:C}}return Dp.create=function(N,I){if(typeof N>"u"||N==="")throw new Error("No input text");let T=e.M,C,D;return typeof I<"u"&&(T=e.from(I.errorCorrectionLevel,e.M),C=h.from(I.version),D=o.from(I.maskPattern),I.toSJISFunc&&r.setToSJISFunction(I.toSJISFunc)),U(N,C,T,D)},Dp}var Qp={},Jp={},TE;function NT(){return TE||(TE=1,(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const o=s.modules.size,u=s.modules.data,d=r.getScale(o,i),h=Math.floor((o+i.margin*2)*d),m=i.margin*d,v=[i.color.light,i.color.dark];for(let x=0;x<h;x++)for(let y=0;y<h;y++){let E=(x*h+y)*4,_=i.color.light;if(x>=m&&y>=m&&x<h-m&&y<h-m){const w=Math.floor((x-m)/d),j=Math.floor((y-m)/d);_=v[u[w*o+j]?1:0]}n[E++]=_.r,n[E++]=_.g,n[E++]=_.b,n[E]=_.a}}})(Jp)),Jp}var CE;function DF(){return CE||(CE=1,(function(r){const e=NT();function t(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,o,u){let d=u,h=o;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),o||(h=n()),d=e.getOptions(d);const m=e.getImageWidth(i.modules.size,d),v=h.getContext("2d"),x=v.createImageData(m,m);return e.qrToImageData(x.data,i,d),t(v,h,m),v.putImageData(x,0,0),h},r.renderToDataURL=function(i,o,u){let d=u;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),d||(d={});const h=r.render(i,o,d),m=d.type||"image/png",v=d.rendererOpts||{};return h.toDataURL(m,v.quality)}})(Qp)),Qp}var Zp={},AE;function PF(){if(AE)return Zp;AE=1;const r=NT();function e(s,i){const o=s.a/255,u=i+'="'+s.hex+'"';return o<1?u+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':u}function t(s,i,o){let u=s+i;return typeof o<"u"&&(u+=" "+o),u}function n(s,i,o){let u="",d=0,h=!1,m=0;for(let v=0;v<s.length;v++){const x=Math.floor(v%i),y=Math.floor(v/i);!x&&!h&&(h=!0),s[v]?(m++,v>0&&x>0&&s[v-1]||(u+=h?t("M",x+o,.5+y+o):t("m",d,0),d=0,h=!1),x+1<i&&s[v+1]||(u+=t("h",m),m=0)):d++}return u}return Zp.render=function(i,o,u){const d=r.getOptions(o),h=i.modules.size,m=i.modules.data,v=h+d.margin*2,x=d.color.light.a?"<path "+e(d.color.light,"fill")+' d="M0 0h'+v+"v"+v+'H0z"/>':"",y="<path "+e(d.color.dark,"stroke")+' d="'+n(m,h,d.margin)+'"/>',E='viewBox="0 0 '+v+" "+v+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(d.width?'width="'+d.width+'" height="'+d.width+'" ':"")+E+' shape-rendering="crispEdges">'+x+y+`</svg>
`;return typeof u=="function"&&u(null,w),w},Zp}var SE;function FF(){if(SE)return Sl;SE=1;const r=mF(),e=kF(),t=DF(),n=PF();function s(i,o,u,d,h){const m=[].slice.call(arguments,1),v=m.length,x=typeof m[v-1]=="function";if(!x&&!r())throw new Error("Callback required as last argument");if(x){if(v<2)throw new Error("Too few arguments provided");v===2?(h=u,u=o,o=d=void 0):v===3&&(o.getContext&&typeof h>"u"?(h=d,d=void 0):(h=d,d=u,u=o,o=void 0))}else{if(v<1)throw new Error("Too few arguments provided");return v===1?(u=o,o=d=void 0):v===2&&!o.getContext&&(d=u,u=o,o=void 0),new Promise(function(y,E){try{const _=e.create(u,d);y(i(_,o,d))}catch(_){E(_)}})}try{const y=e.create(u,d);h(null,i(y,o,d))}catch(y){h(y)}}return Sl.create=e.create,Sl.toCanvas=s.bind(null,t.render),Sl.toDataURL=s.bind(null,t.renderToDataURL),Sl.toString=s.bind(null,function(i,o,u){return n.render(i,u)}),Sl}var jF=FF();const OF=rh(jF);function BF({mesas:r,setMesas:e,salas:t=[],usuarios:n=[]}){const[s,i]=se.useState(!1),[o,u]=se.useState(null),[d,h]=se.useState("todas"),[m,v]=se.useState({});se.useEffect(()=>{const T=async()=>{const C={};for(const D of r){const F=await R(D);F&&(C[D.id]=F)}v(C)};r.length>0&&T()},[r,t]);const[x,y]=se.useState({valor_mesa:"",posicion:"",estado:"activa",reservado_por:"",sala_id:"",personal_asignado:"",qr_code_data:"",contador:0,open_close:{hora_apertura:"",hora_cierre:"",activo:!1}}),E=async T=>{T.preventDefault(),console.log(" Iniciando envo de mesa..."),console.log(" Datos de la mesa a guardar:",x);try{if(console.log(" Conectando a Firebase..."),o){if(console.log(" Actualizando mesa existente:",o.id),r.find(ie=>ie.valor_mesa===x.valor_mesa&&ie.sala_id===x.sala_id&&ie.id!==o.id)){const ie=t.find(de=>de.id===x.sala_id),oe=ie?ie.nombre_sala:"Sala desconocida";alert(` Error: Ya existe otra mesa con nombre/valor "${x.valor_mesa}" en la sala "${oe}". Por favor, elige un nombre diferente.`);return}const D=r.find(ie=>ie.id===o.id),F=t.find(ie=>ie.id===x.sala_id),O=F?F.nombre_sala.toLowerCase().replace(/\s+/g,"-"):"sin-sala",le=x.valor_mesa?x.valor_mesa.toLowerCase().replace(/\s+/g,"-"):"sin-mesa",we=`${window.location.origin}/menu/${O}/${le}/${o.id}`,Ie={...x,qr_code_data:we};await pr(At(Je,"mesas",o.id),Ie),console.log(" Mesa actualizada exitosamente con nueva URL:",we),u(null)}else{if(console.log(" Creando nueva mesa..."),r.find(ie=>ie.valor_mesa===x.valor_mesa&&ie.sala_id===x.sala_id)){const ie=t.find(de=>de.id===x.sala_id),oe=ie?ie.nombre_sala:"Sala desconocida";alert(` Error: La mesa con nombre/valor "${x.valor_mesa}" ya existe en la sala "${oe}". Por favor, elige un nombre diferente.`);return}const D={...x},F=await gi(jt(Je,"mesas"),D);console.log(" Mesa creada exitosamente con ID:",F.id);const O=t.find(ie=>ie.id===x.sala_id),le=O?O.nombre_sala.toLowerCase().replace(/\s+/g,"-"):"sin-sala",we=x.valor_mesa?x.valor_mesa.toLowerCase().replace(/\s+/g,"-"):"sin-mesa",Ie=`${window.location.origin}/menu/${le}/${we}/${F.id}`;await pr(At(Je,"mesas",F.id),{qr_code_data:Ie}),console.log(" URL del QR guardada:",Ie)}console.log(" Limpiando formulario..."),y({valor_mesa:"",posicion:"",estado:"activa",reservado_por:"",sala_id:"",personal_asignado:"",qr_code_data:"",contador:0,open_close:{hora_apertura:"",hora_cierre:"",activo:!1}}),i(!1),console.log(" Proceso completado exitosamente")}catch(C){console.error(" ERROR al guardar mesa:"),console.error(" Tipo de error:",C.name),console.error(" Mensaje:",C.message),console.error(" Cdigo:",C.code),console.error(" Stack completo:",C.stack),C.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):C.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):C.code==="invalid-argument"?alert(" Error de datos: Verifica que todos los campos tengan el formato correcto"):alert(` Error al guardar la mesa: ${C.message}`)}},_=T=>{u(T),y({valor_mesa:T.valor_mesa||"",posicion:T.posicion||"",estado:T.estado||"activa",reservado_por:T.reservado_por||"",sala_id:T.sala_id||"",personal_asignado:T.personal_asignado||"",qr_code_data:T.qr_code_data||"",contador:T.contador||0,open_close:T.open_close||{hora_apertura:"",hora_cierre:"",activo:!1}}),i(!0)},w=async(T,C,D="")=>{console.log(" Cambiando estado de mesa:",T,"a:",C);try{const F={estado:C};C==="reservada"&&D?F.reservado_por=D:C==="inactiva"&&(F.reservado_por=""),await pr(At(Je,"mesas",T),F),console.log(" Estado de mesa actualizado exitosamente"),e(O=>O.map(le=>le.id===T?C==="inactiva"?{...le,estado:C,reservado_por:""}:{...le,estado:C}:le))}catch(F){console.error(" ERROR al cambiar estado de mesa:",F),alert(`Error al cambiar estado: ${F.message}`)}},j=async T=>{if(window.confirm("Ests seguro de que quieres eliminar esta mesa?")){console.log(" Iniciando eliminacin de mesa:",T);try{console.log(" Conectando a Firebase para eliminar..."),await Ma(At(Je,"mesas",T)),console.log(" Mesa eliminada exitosamente")}catch(C){console.error(" ERROR al eliminar mesa:"),console.error(" Tipo de error:",C.name),console.error(" Mensaje:",C.message),console.error(" Cdigo:",C.code),C.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):C.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):alert(` Error al eliminar la mesa: ${C.message}`)}}},k=T=>{const C=window.location.origin,D=t.find(le=>le.id===T.sala_id),F=D?D.nombre_sala.toLowerCase().replace(/\s+/g,"-"):"sin-sala",O=T.valor_mesa?T.valor_mesa.toLowerCase().replace(/\s+/g,"-"):"sin-mesa";return`${C}/menu/${F}/${O}/${T.id}`},R=async T=>{try{const C=k(T);return await OF.toDataURL(C,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}})}catch(C){return console.error("Error generando QR:",C),null}},B=async T=>{try{const C=await R(T);if(C){const D=document.createElement("a");D.download=`QR-Mesa-${T.valor_mesa}-${T.sala_id}.png`,D.href=C,D.click()}}catch(C){console.error("Error descargando QR:",C),alert("Error al descargar el cdigo QR")}},U=T=>{navigator.clipboard.writeText(T).then(()=>{alert("URL copiada al portapapeles")}).catch(()=>{const C=document.createElement("textarea");C.value=T,document.body.appendChild(C),C.select(),document.execCommand("copy"),document.body.removeChild(C),alert("URL copiada al portapapeles")})},W=r.filter(T=>d==="todas"?!0:T.sala_id===d),N=T=>{switch(T){case"activa":return"bg-green-100 text-green-800";case"inactiva":return"bg-red-100 text-red-800";case"en_curso":return"bg-yellow-100 text-yellow-800";case"reservada":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},I=T=>{switch(T){case"activa":return"Activa";case"inactiva":return"Inactiva";case"en_curso":return"En Curso";case"reservada":return"Reservada";default:return T}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestin de Mesas"}),c.jsx("button",{onClick:()=>{i(!s),u(null),y({valor_mesa:"",posicion:"",estado:"activa",reservado_por:"",sala_id:"",personal_asignado:"",qr_code_data:"",contador:0,open_close:{hora_apertura:"",hora_cierre:"",activo:!1}})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:s?"Cancelar":"Nueva Mesa"})]}),c.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:" Filtrar por Sala:"}),c.jsxs("select",{value:d,onChange:T=>h(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todas",children:"Todas las Salas"}),t.filter(T=>T.estado_sala==="activa").map(T=>c.jsx("option",{value:T.id,children:T.nombre_sala},T.id))]}),c.jsx("div",{className:"text-sm text-gray-500",children:d==="todas"?`Mostrando ${W.length} de ${r.length} mesas`:`Mostrando ${W.length} mesas de ${t.find(T=>T.id===d)?.nombre_sala||"Sala Seleccionada"}`})]})}),s&&c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:o?"Editar Mesa":"Nueva Mesa"}),c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero/Nombre de Mesa *"}),c.jsx("input",{type:"text",value:x.valor_mesa,onChange:T=>y(C=>({...C,valor_mesa:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 1, A, Terraza 1",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sala *"}),c.jsxs("select",{value:x.sala_id,onChange:T=>y(C=>({...C,sala_id:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[c.jsx("option",{value:"",children:"Seleccionar sala..."}),t.filter(T=>T.estado_sala==="activa").map(T=>c.jsx("option",{value:T.id,children:T.nombre_sala},T.id))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{value:x.estado,onChange:T=>y(C=>({...C,estado:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"activa",children:"Activa"}),c.jsx("option",{value:"inactiva",children:"Inactiva"}),c.jsx("option",{value:"en_curso",children:"En Curso"}),c.jsx("option",{value:"reservada",children:"Reservada"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Personal Asignado (Opcional)"}),c.jsxs("select",{value:x.personal_asignado,onChange:T=>y(C=>({...C,personal_asignado:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Sin asignar"}),n.filter(C=>C.user_rol==="mozo").map(C=>c.jsxs("option",{value:C.user_name,children:[" ",C.user_name]},C.id))]}),n.filter(T=>T.user_rol==="mozo").length===0?c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:' No hay usuarios con rol "mozo" registrados'}):c.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" ",n.filter(T=>T.user_rol==="mozo").length," mozo(s) disponible(s)"]})]})]}),x.estado==="reservada"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Persona que Reserva"}),c.jsx("input",{type:"text",value:x.reservado_por,onChange:T=>y(C=>({...C,reservado_por:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Juan Prez",required:x.estado==="reservada"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posicin/Ubicacin"}),c.jsx("input",{type:"text",value:x.posicion,onChange:T=>y(C=>({...C,posicion:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Interior, Terraza, Bar, etc."})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("input",{type:"checkbox",id:"horarioActivo",checked:x.open_close.activo,onChange:T=>y(C=>({...C,open_close:{...C.open_close,activo:T.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"horarioActivo",className:"text-sm font-medium text-gray-700",children:" Configurar horarios de operacin para esta mesa"})]}),x.open_close.activo&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora de Apertura"}),c.jsx("input",{type:"time",value:x.open_close.hora_apertura,onChange:T=>y(C=>({...C,open_close:{...C.open_close,hora_apertura:T.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora de Cierre"}),c.jsx("input",{type:"time",value:x.open_close.hora_cierre,onChange:T=>y(C=>({...C,open_close:{...C.open_close,hora_cierre:T.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),c.jsx("div",{className:"md:col-span-2",children:c.jsxs("p",{className:"text-xs text-gray-600",children:[" ",c.jsx("strong",{children:"Nota:"})," Si configuras horarios, los clientes vern un mensaje cuando escaneen el QR fuera del horario de operacin. Si no configuras horarios, la mesa estar disponible las 24 horas (segn su estado)."]})})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>{i(!1),u(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),c.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[o?"Actualizar":"Crear"," Mesa"]})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(T=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Mesa ",T.valor_mesa]}),c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(T.estado)}`,children:I(T.estado)})]}),T.posicion&&c.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:[c.jsx("span",{className:"font-medium",children:"Ubicacin:"})," ",T.posicion]}),T.sala_id&&c.jsxs("p",{className:"text-blue-600 text-sm mb-2",children:[c.jsx("span",{className:"font-medium",children:"Sala:"})," ",t.find(C=>C.id===T.sala_id)?.nombre_sala||"Sala no encontrada"]}),T.personal_asignado&&c.jsxs("p",{className:"text-green-600 text-sm mb-2",children:[c.jsx("span",{className:"font-medium",children:" Mozo:"})," ",T.personal_asignado]}),T.estado==="reservada"&&T.reservado_por&&c.jsxs("p",{className:"text-orange-600 text-sm mb-3",children:[c.jsx("span",{className:"font-medium",children:"Reservada por:"})," ",T.reservado_por]}),T.open_close&&T.open_close.activo&&T.open_close.hora_apertura&&T.open_close.hora_cierre&&c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:[c.jsx("p",{className:"text-blue-800 text-sm font-medium mb-1",children:" Horarios de Operacin:"}),c.jsxs("p",{className:"text-blue-700 text-sm",children:[c.jsx("span",{className:"font-medium",children:"Apertura:"})," ",T.open_close.hora_apertura]}),c.jsxs("p",{className:"text-blue-700 text-sm",children:[c.jsx("span",{className:"font-medium",children:"Cierre:"})," ",T.open_close.hora_cierre]})]}),c.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Cdigo QR"}),m[T.id]?c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[c.jsx("img",{src:m[T.id],alt:`QR para Mesa ${T.valor_mesa}`,className:"w-24 h-24 border border-gray-300 rounded"}),c.jsx("button",{onClick:()=>B(T),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:" Descargar QR"})]}):c.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded flex items-center justify-center",children:c.jsx("span",{className:"text-gray-500 text-xs",children:"Generando..."})})]})}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cambiar Estado:"}),c.jsx("div",{className:"flex space-x-2",children:c.jsxs("select",{value:T.estado,onChange:C=>{const D=C.target.value;if(D==="reservada"){const F=prompt("Nombre de la persona que reserva:");F&&w(T.id,D,F)}else w(T.id,D)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[c.jsx("option",{value:"activa",children:"Activa"}),c.jsx("option",{value:"inactiva",children:"Inactiva"}),c.jsx("option",{value:"en_curso",children:"En Curso"}),c.jsx("option",{value:"reservada",children:"Reservada"})]})})]}),c.jsxs("div",{className:"space-y-2 mb-4",children:[c.jsx("div",{className:"text-sm",children:c.jsx("span",{className:"font-medium",children:"URL del QR:"})}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"text",value:k(T),readOnly:!0,className:"flex-1 px-2 py-1 text-xs border border-gray-300 rounded bg-gray-50"}),c.jsx("button",{onClick:()=>U(k(T)),className:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Copiar"})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>_(T),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>j(T.id),className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",children:"Eliminar"})]})]},T.id))}),W.length===0&&r.length>0&&c.jsxs("div",{className:"text-center py-12 text-gray-500",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay mesas en esta sala"}),c.jsx("p",{className:"text-gray-500 text-lg",children:d==="todas"?"No hay mesas configuradas":`No hay mesas en ${t.find(T=>T.id===d)?.nombre_sala||"la sala seleccionada"}`}),c.jsx("p",{className:"text-gray-400 text-sm",children:d==="todas"?"Crea tu primera mesa para comenzar":"Cambia el filtro o crea una mesa en esta sala"})]}),r.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("p",{className:"text-gray-500 text-lg",children:"No hay mesas configuradas"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Crea tu primera mesa para comenzar"})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Informacin sobre Cdigos QR"}),c.jsxs("div",{className:"text-blue-800 text-sm space-y-2",children:[c.jsx("p",{children:c.jsx("strong",{children:"Estado de las Mesas:"})}),c.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Activa:"})," Mesa disponible para clientes"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Inactiva:"})," Mesa no disponible temporalmente"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"En Curso:"})," Mesa con pedido en preparacin"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Reservada:"})," Mesa reservada para clientes especficos"]})]}),c.jsxs("p",{className:"mt-3",children:[c.jsx("strong",{children:"Nota:"}),' Las mesas "Activa" y "En Curso" son accesibles para clientes. Las "Reservadas" muestran mensaje de reserva.']})]})]})]})}function LF({salas:r,setSalas:e}){const[t,n]=se.useState(!1),[s,i]=se.useState(null),[o,u]=se.useState({nombre_sala:"",numero_posicion:1,estado_sala:"activa",reserva_sala:""}),d=async y=>{y.preventDefault(),console.log(" Iniciando envo de sala..."),console.log(" Datos de la sala a guardar:",o);try{if(console.log(" Conectando a Firebase..."),s)console.log(" Actualizando sala existente:",s.id),await pr(At(Je,"salas",s.id),o),console.log(" Sala actualizada exitosamente"),i(null);else{console.log(" Creando nueva sala...");const E=await gi(jt(Je,"salas"),{...o,id_sala:""});await pr(At(Je,"salas",E.id),{id_sala:E.id}),console.log(" Sala creada exitosamente con ID:",E.id)}console.log(" Limpiando formulario..."),u({nombre_sala:"",numero_posicion:1,estado_sala:"activa",reserva_sala:""}),n(!1),console.log(" Proceso completado exitosamente")}catch(E){console.error(" ERROR al guardar sala:"),console.error(" Tipo de error:",E.name),console.error(" Mensaje:",E.message),console.error(" Cdigo:",E.code),E.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):E.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):alert(` Error al guardar la sala: ${E.message}`)}},h=y=>{console.log(" Editando sala:",y),i(y),u({nombre_sala:y.nombre_sala||"",numero_posicion:y.numero_posicion||1,estado_sala:y.estado_sala||"activa",reserva_sala:y.reserva_sala||""}),n(!0)},m=async y=>{if(window.confirm("Ests seguro de que quieres eliminar esta sala? Esto tambin eliminar todas las mesas asociadas.")){console.log(" Iniciando eliminacin de sala:",y);try{console.log(" Conectando a Firebase para eliminar..."),await Ma(At(Je,"salas",y)),console.log(" Sala eliminada exitosamente")}catch(E){console.error(" ERROR al eliminar sala:"),console.error(" Tipo de error:",E.name),console.error(" Mensaje:",E.message),console.error(" Cdigo:",E.code),E.code==="permission-denied"?alert(" Error de permisos: Verifica las reglas de seguridad en Firestore"):E.code==="unavailable"?alert(" Error de conectividad: Verifica tu conexin a internet y la configuracin de Firebase"):alert(` Error al eliminar la sala: ${E.message}`)}}},v=y=>{switch(y){case"activa":return"bg-green-100 text-green-800";case"inactiva":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=y=>{switch(y){case"activa":return"Activa";case"inactiva":return"Inactiva";default:return y}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestin de Salas"}),c.jsx("button",{onClick:()=>{n(!t),i(null),u({nombre_sala:"",numero_posicion:1,estado_sala:"activa",reserva_sala:""})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:t?"Cancelar":"Nueva Sala"})]}),t&&c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s?"Editar Sala":"Nueva Sala"}),c.jsxs("form",{onSubmit:d,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Sala *"}),c.jsx("input",{type:"text",value:o.nombre_sala,onChange:y=>u(E=>({...E,nombre_sala:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Sala Principal, Terraza, VIP",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Posicin *"}),c.jsx("input",{type:"number",min:"1",value:o.numero_posicion,onChange:y=>u(E=>({...E,numero_posicion:parseInt(y.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado *"}),c.jsxs("select",{value:o.estado_sala,onChange:y=>u(E=>({...E,estado_sala:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"activa",children:"Activa"}),c.jsx("option",{value:"inactiva",children:"Inactiva"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reserva de Sala (Opcional)"}),c.jsx("input",{type:"text",value:o.reserva_sala,onChange:y=>u(E=>({...E,reserva_sala:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Empresa XYZ, Evento Especial"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>{n(!1),i(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),c.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[s?"Actualizar":"Crear"," Sala"]})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(y=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y.nombre_sala}),c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(y.estado_sala)}`,children:x(y.estado_sala)})]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Posicin:"})," ",y.numero_posicion]}),y.reserva_sala&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Reservada por:"})," ",y.reserva_sala]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"ID:"})," ",y.id_sala||y.id]})]}),c.jsxs("div",{className:"mt-4 flex space-x-2",children:[c.jsx("button",{onClick:()=>h(y),className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"Editar"}),c.jsx("button",{onClick:()=>m(y.id),className:"flex-1 px-3 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700",children:"Eliminar"})]})]},y.id))}),r.length===0&&c.jsxs("div",{className:"text-center py-12 text-gray-500",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay salas configuradas"}),c.jsx("p",{className:"text-gray-600",children:"Crea tu primera sala para comenzar a organizar las mesas del restaurante."})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:" Cmo usar Gestin de Salas"}),c.jsxs("div",{className:"text-blue-800 text-sm space-y-2",children:[c.jsxs("p",{children:[c.jsx("strong",{children:" Crear Sala:"})," Define el nombre, posicin y estado de la sala"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Reserva de Sala:"})," Asigna la sala a una organizacin o evento especial"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Posicin:"})," Nmero para ordenar las salas en el sistema"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Estado:"})," Activa (disponible) o Inactiva (no disponible)"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Mesas:"})," Una vez creada la sala, podrs crear mesas dentro de ella"]})]})]})]})}function MF({mesas:r,onStatusChange:e,salas:t=[]}){console.log(" ComedorView iniciando con props:",{mesas:r,onStatusChange:e,salas:t});const[n,s]=se.useState("grid"),[i,o]=se.useState(100),[u,d]=se.useState(""),[h,m]=se.useState("normal"),[v,x]=se.useState("todas"),[y,E]=se.useState({}),[_,w]=se.useState(!1),[j,k]=se.useState(null),[R,B]=se.useState([]),{playCuentaSound:U,AudioElements:W}=bT();if(!r||!Array.isArray(r))return console.error(" ComedorView: mesas invlido:",r),c.jsxs("div",{className:"p-8 text-center bg-red-50 border border-red-200 rounded-lg",children:[c.jsx("div",{className:"text-red-600 text-lg mb-4",children:" Error: No se pudieron cargar las mesas"}),c.jsxs("div",{className:"text-gray-600",children:["mesas: ",JSON.stringify(r)]})]});if(!e||typeof e!="function")return console.error(" ComedorView: onStatusChange invlido:",e),c.jsxs("div",{className:"p-8 text-center bg-red-50 border border-red-200 rounded-lg",children:[c.jsx("div",{className:"text-red-600 text-lg mb-4",children:" Error: Funcin de cambio de estado no disponible"}),c.jsxs("div",{className:"text-gray-600",children:["onStatusChange: ",typeof e]})]});console.log(" ComedorView renderizando con:",{mesasCount:r.length,selectedLayout:n,zoom:i,viewMode:h}),se.useEffect(()=>{console.log(" ComedorView: Iniciando listener de cuentas solicitadas...");const ie=Li(jt(Je,"pedidos"),su("cuenta_solicitada","==",!0)),oe=ns(ie,de=>{console.log(" Snapshot recibido:",de.docs.length,"documentos");const Q={};let H=!1;de.docs.forEach(M=>{const V={id:M.id,...M.data()},P=V.mesa.toLowerCase().replace(/\s+/g,"-"),re=(V.sala||V.nombre_sala||"sin_sala").toLowerCase().replace(/\s+/g,"-"),xe=`${P}_${re}`;console.log(" Procesando pedido:",{id:V.id,mesa:V.mesa,sala:V.sala,nombre_sala:V.nombre_sala,mesaKey:xe,cuenta_solicitada:V.cuenta_solicitada,estado_cuenta:V.estado_cuenta}),V.cuenta_solicitada&&V.cobro_pago!=="Cobrado_Cerrado"&&(V.estado_cuenta==="solicitada"||V.estado_cuenta==="procesada"||V.estado_cuenta==="cobrada")?(Q[xe]||(Q[xe]=[]),Q[xe].push(V),console.log(" Pedido agregado a cuentas:",V.id,"para mesa:",xe),V.estado_cuenta==="solicitada"&&!y[xe]&&(H=!0,console.log(" Nueva cuenta solicitada detectada!"))):console.log(" Pedido no cumple criterios:",V.id,{cuenta_solicitada:V.cuenta_solicitada,estado_cuenta:V.estado_cuenta,cobro_pago:V.cobro_pago})}),H&&(console.log(" Reproduciendo sonido de cuenta solicitada..."),U()),console.log(" Cuentas finales:",Q),E(Q)},de=>{console.error(" Error en listener de cuentas:",de)});return()=>{console.log(" ComedorView: Limpiando listener de cuentas..."),oe()}},[]);const N=ie=>{try{console.log(" Generando comanda para pedidos procesados...");let oe=`
==========================
     COMANDO DE CUENTA
==========================
Fecha: ${new Date().toLocaleString("es-ES")}
Mesa: ${j.mesa}
==========================

PEDIDOS PROCESADOS:
==========================
`,de=0;ie.forEach((H,M)=>{oe+=`
Pedido #${M+1}
--------------------
`,H.items.forEach(V=>{const P=V.nombre.length>20?V.nombre.substring(0,17)+"...":V.nombre;oe+=`${V.cantidad}x ${P}
$${V.precio}
`}),oe+=`Subtotal: $${H.total.toFixed(2)}
--------------------
`,de+=H.total}),oe+=`
==========================
TOTAL: $${de.toFixed(2)}
==========================
Estado: PROCESADA
Lista para Cobro
==========================
`;const Q=window.open("","_blank");Q.document.write(`
        <html>
          <head>
            <title>Comanda - Mesa ${j.mesa}</title>
            <style>
              @page {
                size: 38mm auto;
                margin: 0;
              }
              body { 
                font-family: 'Courier New', monospace; 
                font-size: 10px; 
                margin: 0;
                padding: 5px;
                line-height: 1.2;
                width: 38mm;
                max-width: 38mm;
              }
              pre {
                margin: 0;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-size: 10px;
              }
              @media print {
                body { 
                  margin: 0; 
                  padding: 2px;
                  width: 38mm;
                }
                pre {
                  font-size: 9px;
                }
              }
            </style>
          </head>
          <body>
            <pre>${oe}</pre>
          </body>
        </html>
      `),Q.document.close(),Q.focus(),setTimeout(()=>{Q.print(),Q.close()},500),console.log(" Comanda generada exitosamente para 38mm")}catch(oe){console.error(" Error al generar comanda:",oe)}},I=ie=>{try{console.log(" Generando comprobante de cobro...");let oe=`
==========================
   COMPROBANTE DE COBRO
==========================
Fecha: ${new Date().toLocaleString("es-ES")}
Mesa: ${j.mesa}
==========================

PEDIDOS COBRADOS:
==========================
`,de=0;ie.forEach((H,M)=>{oe+=`
Pedido #${M+1}
--------------------
`,H.items.forEach(V=>{const P=V.nombre.length>20?V.nombre.substring(0,17)+"...":V.nombre;oe+=`${V.cantidad}x ${P}
$${V.precio}
`}),oe+=`Subtotal: $${H.total.toFixed(2)}
--------------------
`,de+=H.total}),oe+=`
==========================
TOTAL COBRADO: $${de.toFixed(2)}
==========================
Estado: COBRADO
Pago Confirmado
==========================
Fecha: ${new Date().toLocaleString("es-ES")}
==========================
`;const Q=window.open("","_blank");Q.document.write(`
        <html>
          <head>
            <title>Comprobante de Cobro - Mesa ${j.mesa}</title>
            <style>
              @page {
                size: 38mm auto;
                margin: 0;
              }
              body { 
                font-family: 'Courier New', monospace; 
                font-size: 10px; 
                margin: 0;
                padding: 5px;
                line-height: 1.2;
                width: 38mm;
                max-width: 38mm;
              }
              pre {
                margin: 0;
                white-space: pre-wrap;
                word-wrap: break-word;
                font-size: 10px;
              }
              @media print {
                body { 
                  margin: 0; 
                  padding: 2px;
                  width: 38mm;
                }
                pre {
                  font-size: 9px;
                }
              }
            </style>
          </head>
          <body>
            <pre>${oe}</pre>
          </body>
        </html>
      `),Q.document.close(),Q.focus(),setTimeout(()=>{Q.print(),Q.close()},500),console.log(" Comprobante de cobro generado exitosamente para 38mm")}catch(oe){console.error(" Error al generar comprobante de cobro:",oe)}},T=r.filter(ie=>v!=="todas"&&ie.sala_id!==v?!1:ie.valor_mesa.toLowerCase().includes(u.toLowerCase())||ie.posicion&&ie.posicion.toLowerCase().includes(u.toLowerCase())||ie.reservado_por&&ie.reservado_por.toLowerCase().includes(u.toLowerCase())||ie.personal_asignado&&ie.personal_asignado.toLowerCase().includes(u.toLowerCase())),C=ie=>{switch(ie){case"activa":return"bg-green-500 border-green-600";case"inactiva":return"bg-red-500 border-red-600";case"en_curso":return"bg-yellow-500 border-yellow-600";case"reservada":return"bg-orange-500 border-orange-600";default:return"bg-gray-500 border-gray-600"}},D=ie=>{switch(ie){case"activa":return"Activa";case"inactiva":return"Inactiva";case"en_curso":return"En Curso";case"reservada":return"Reservada";default:return ie}},F=ie=>{const oe=h==="compact";return c.jsxs("div",{className:`
          relative rounded-lg shadow-lg border-2 transition-all duration-200 hover:scale-105 cursor-pointer group
          ${C(ie.estado)}
          ${ie.estado==="inactiva"?"opacity-60":"opacity-100"}
          ${oe?"p-2":"p-4"}
        `,children:[(()=>{const de=ie.valor_mesa.toLowerCase().replace(/\s+/g,"-"),H=(ie.sala_id&&t.find(V=>V.id===ie.sala_id)?.nombre_sala||"sin_sala").toLowerCase().replace(/\s+/g,"-"),M=`${de}_${H}`;return y[M]&&y[M].length>0})()&&c.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-2 cursor-pointer hover:bg-red-600 transition-colors z-20",onClick:de=>{de.stopPropagation();const Q=ie.valor_mesa.toLowerCase().replace(/\s+/g,"-"),M=(ie.sala_id&&t.find(P=>P.id===ie.sala_id)?.nombre_sala||"sin_sala").toLowerCase().replace(/\s+/g,"-"),V=`${Q}_${M}`;k({mesa:ie.valor_mesa,mesaKey:V,pedidos:y[V]}),w(!0)},title:`Cuenta solicitada - ${(()=>{const de=ie.valor_mesa.toLowerCase().replace(/\s+/g,"-"),H=(ie.sala_id&&t.find(V=>V.id===ie.sala_id)?.nombre_sala||"sin_sala").toLowerCase().replace(/\s+/g,"-"),M=`${de}_${H}`;return y[M]?.length||0})()} pedido(s)`,children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M9 11h.01M9 8h.01M9 5h.01M9 2h.01M12 2h.01M15 2h.01M18 2h.01M21 2h.01M21 5h.01M21 8h.01M21 11h.01M21 14h.01M21 17h.01M21 20h.01M18 20h.01M15 20h.01M12 20h.01M9 20h.01M6 20h.01M3 20h.01M3 17h.01M3 14h.01M3 11h.01M3 8h.01M3 5h.01M3 2h.01"})})}),c.jsx("div",{className:"text-center mb-2",children:c.jsxs("h3",{className:`font-bold text-white ${oe?"text-sm":"text-lg"}`,children:["Mesa ",ie.valor_mesa]})}),c.jsx("div",{className:"text-center mb-2",children:c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-white text-gray-800 ${oe?"text-xs px-1 py-0.5":""}`,children:D(ie.estado)})}),c.jsxs("div",{className:"text-center text-white text-sm",children:[ie.posicion&&c.jsxs("p",{className:`mb-1 ${oe?"text-xs":""}`,children:[" ",ie.posicion]}),ie.estado==="reservada"&&ie.reservado_por&&c.jsxs("p",{className:`mb-1 ${oe?"text-xs":""}`,children:[" ",ie.reservado_por]})]}),c.jsx("div",{className:"mt-3",children:c.jsxs("select",{value:ie.estado,onChange:de=>O(ie,de.target.value),className:`w-full px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-blue-500 ${oe?"text-xs px-1 py-0.5":""}`,onClick:de=>de.stopPropagation(),children:[c.jsx("option",{value:"activa",children:"Activa"}),c.jsx("option",{value:"inactiva",children:"Inactiva"}),c.jsx("option",{value:"en_curso",children:"En Curso"}),c.jsx("option",{value:"reservada",children:"Reservada"})]})}),c.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"font-semibold mb-1",children:["Mesa ",ie.valor_mesa]}),c.jsxs("div",{children:["Estado: ",D(ie.estado)]}),ie.posicion&&c.jsxs("div",{children:["Ubicacin: ",ie.posicion]}),ie.estado==="reservada"&&ie.reservado_por&&c.jsxs("div",{children:["Reservada por: ",ie.reservado_por]}),c.jsx("div",{className:"text-xs text-gray-300 mt-1",children:"Click para cambiar estado"})]}),c.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]},ie.id)},O=(ie,oe)=>{if(console.log(" Cambiando estado de mesa:",ie.valor_mesa,"de",ie.estado,"a",oe),oe!==ie.estado)if(oe==="reservada"){const de=prompt("Nombre de la persona que reserva:");if(de)e(ie.id,oe,de);else return}else e(ie.id,oe)},le=()=>{const ie=h==="compact",oe=ie?"grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5";return c.jsx("div",{className:`grid ${oe} gap-${ie?"2":"4"}`,children:T.map(F)})},Ie=(()=>{const ie=r.length,oe=r.filter(re=>re.estado==="activa").length,de=r.filter(re=>re.estado==="en_curso").length,Q=r.filter(re=>re.estado==="reservada").length,H=r.filter(re=>re.estado==="inactiva").length,M=Object.values(y).reduce((re,xe)=>re+xe.length,0),V=Object.values(y).reduce((re,xe)=>re+xe.filter(me=>!me.estado_cuenta||me.estado_cuenta==="solicitada").length,0),P=Object.values(y).reduce((re,xe)=>re+xe.filter(me=>me.estado_cuenta==="procesada").length,0),G=Object.values(y).reduce((re,xe)=>re+xe.filter(me=>me.estado_cuenta==="cobrada").length,0);return{total:ie,activas:oe,enCurso:de,reservadas:Q,inactivas:H,totalCuentas:M,cuentasPendientes:V,cuentasProcesadas:P,cuentasCobradas:G}})();return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Mi Comedor"}),c.jsx("p",{className:"text-gray-600",children:"Visualizacin grfica de las mesas del restaurante"})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[c.jsxs("div",{className:"flex gap-3 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),c.jsx("span",{className:"text-gray-700",children:Ie.activas})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),c.jsx("span",{className:"text-gray-700",children:Ie.enCurso})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),c.jsx("span",{className:"text-gray-700",children:Ie.reservadas})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),c.jsx("span",{className:"text-gray-700",children:Ie.inactivas})]}),c.jsx("div",{className:"text-gray-500",children:"|"}),c.jsxs("div",{className:"text-gray-700 font-medium",children:["Total: ",Ie.total]}),c.jsx("div",{className:"text-gray-500",children:"|"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),c.jsx("span",{className:"text-gray-700",children:Ie.cuentasPendientes})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),c.jsx("span",{className:"text-gray-700",children:Ie.cuentasProcesadas})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),c.jsx("span",{className:"text-gray-700",children:Ie.cuentasCobradas})]}),c.jsxs("div",{className:"text-gray-700 font-medium",children:[" Cuentas: ",Ie.totalCuentas]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("select",{value:v,onChange:ie=>x(ie.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todas",children:"Todas las Salas"}),t.filter(ie=>ie.estado_sala==="activa").map(ie=>c.jsx("option",{value:ie.id,children:ie.nombre_sala},ie.id))]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar mesa...",value:u,onChange:ie=>d(ie.target.value),className:"pl-8 pr-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),c.jsx("div",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400",children:""})]}),c.jsxs("select",{value:h,onChange:ie=>m(ie.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"normal",children:"Vista Normal"}),c.jsx("option",{value:"compact",children:"Vista Compacta"})]})]})]}),u&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:c.jsxs("div",{className:"text-blue-800 text-sm",children:[' Bsqueda: "',u,'" - ',T.length," mesa",T.length!==1?"s":""," encontrada",T.length!==1?"s":"",c.jsx("button",{onClick:()=>d(""),className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"Limpiar bsqueda"})]})}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[v==="todas"?"Mesas del Restaurante":`Mesas de ${t.find(ie=>ie.id===v)?.nombre_sala||"Sala Seleccionada"}`,u&&` - Filtradas por "${u}"`]}),c.jsxs("div",{className:"text-sm text-gray-500",children:[T.length," de ",r.length," mesas"]})]}),T.length>0?le():c.jsx("div",{className:"text-center py-12 text-gray-500",children:u?"No se encontraron mesas con esa bsqueda":"No hay mesas configuradas"})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:" Cmo usar Mi Comedor"}),c.jsxs("div",{className:"text-blue-800 text-sm space-y-2",children:[c.jsxs("p",{children:[c.jsx("strong",{children:" Select de estado:"})," Cambia el estado directamente desde el dropdown"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Hover:"})," Pasa el mouse sobre una mesa para ver detalles"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Bsqueda:"})," Encuentra mesas por nmero, ubicacin o cliente"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Vista compacta:"})," Cambia a vista compacta para ver ms mesas"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Colores:"})," Cada estado tiene su color distintivo"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Campanita :"})," Indica cuentas solicitadas por mesa"]})]})]}),_&&j&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[" Cuenta Solicitada - Mesa ",j.mesa]}),c.jsx("button",{onClick:()=>{w(!1),k(null)},className:"text-gray-400 hover:text-gray-600",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:`mb-4 p-3 border rounded-lg ${j.pedidos[0]?.estado_cuenta==="procesada"?"bg-green-50 border-green-200":j.pedidos[0]?.estado_cuenta==="cobrada"?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200"}`,children:[c.jsxs("div",{className:`flex items-center ${j.pedidos[0]?.estado_cuenta==="procesada"?"text-green-800":j.pedidos[0]?.estado_cuenta==="cobrada"?"text-blue-800":"text-orange-800"}`,children:[j.pedidos[0]?.estado_cuenta==="procesada"?c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):j.pedidos[0]?.estado_cuenta==="cobrada"?c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}):c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium",children:j.pedidos[0]?.estado_cuenta==="procesada"?` Cuenta procesada - Lista para cobro (${j.pedidos.length} pedido(s))`:j.pedidos[0]?.estado_cuenta==="cobrada"?` Cuenta cobrada - Pago confirmado (${j.pedidos.length} pedido(s))`:` Cliente solicit cuenta para ${j.pedidos.length} pedido(s)`})]}),j.pedidos[0]?.timestamp_cuenta_solicitada&&c.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[" Solicitada: ",(()=>{const ie=j.pedidos[0].timestamp_cuenta_solicitada,oe=ie.toDate?ie.toDate():new Date(ie),Q=new Date-oe,H=Math.floor(Q/6e4);if(H<1)return"Hace menos de 1 minuto";if(H<60)return`Hace ${H} minuto(s)`;const M=Math.floor(H/60);return M<24?`Hace ${M} hora(s)`:`Hace ${Math.floor(M/24)} da(s)`})()]})]}),(()=>{const ie=j.pedidos.filter(Q=>Q.cobro_pago!=="Cobrado"&&Q.cuenta_procesada===!1),oe=j.pedidos.filter(Q=>Q.cobro_pago!=="Cobrado"&&Q.cuenta_procesada===!0),de=j.pedidos.filter(Q=>Q.cobro_pago==="Cobrado");return c.jsxs("div",{className:"space-y-6",children:[ie.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pedidos Pendientes de Procesamiento (",ie.length,")"]}),c.jsx("div",{className:"space-y-4",children:ie.map(Q=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("input",{type:"checkbox",id:`pedido-${Q.id}`,checked:R.includes(Q.id),onChange:H=>{if(Q.cobro_pago==="Cobrado"){console.log(" Pedido ya cobrado, no se puede seleccionar:",Q.id.slice(-6));return}console.log(" Cambiando seleccin del pedido:",Q.id.slice(-6),"checked:",H.target.checked),H.target.checked?B(M=>[...M,Q.id]):B(M=>M.filter(V=>V!==Q.id))},disabled:Q.cobro_pago==="Cobrado",className:`mt-1 w-4 h-4 border-gray-300 rounded focus:ring-blue-500 ${Q.cobro_pago==="Cobrado"?"text-gray-400 cursor-not-allowed opacity-50":"text-blue-600"}`,title:Q.cobro_pago==="Cobrado"?"Este pedido ya fue cobrado":"Seleccionar para cobro"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("p",{className:"font-medium text-gray-900",children:["Pedido #",Q.id.slice(-6)]}),Q.cobro_pago==="Cobrado"&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Cobrado"})]}),c.jsxs("div",{className:"text-xs text-gray-400",children:["Estado: ",Q.estado_cuenta," | Cobro: ",Q.cobro_pago||"Sin Cobrar"]}),c.jsx("p",{className:"text-sm text-gray-500",children:Q.timestamp_cuenta_solicitada?.toDate?Q.timestamp_cuenta_solicitada.toDate().toLocaleString("es-ES"):"Fecha no disponible"}),Q.nombre_cliente&&c.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[" Cliente: ",Q.nombre_cliente]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["ID Cuenta: ",Q.cuenta_id]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-bold text-gray-900",children:["$",Q.total?.toFixed(2)||"0.00"]}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Q.estado==="pendiente"?"bg-yellow-100 text-yellow-800":Q.estado==="en_preparacion"?"bg-orange-100 text-orange-800":Q.estado==="listo"?"bg-green-100 text-green-800":Q.estado==="entregado"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:Q.estado==="pendiente"?" Pendiente":Q.estado==="en_preparacion"?" En Preparacin":Q.estado==="listo"?" Listo":Q.estado==="entregado"?" Entregado":Q.estado})]})]}),c.jsx("div",{className:"space-y-2",children:Q.items?.map((H,M)=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:[H.cantidad,"x ",H.nombre,H.agregados&&H.agregados.length>0&&c.jsxs("span",{className:"text-green-600 ml-1",children:["(+",H.agregados.map(V=>V.nombre).join(", "),")"]})]}),c.jsxs("span",{className:"text-gray-900",children:["$",(()=>{let V=H.precio*H.cantidad;if(H.agregados&&H.agregados.length>0){const P=H.agregados.reduce((G,re)=>G+(re.precio||0),0);V+=P*H.cantidad}return V.toFixed(2)})()]})]},M))})]},Q.id))}),ie.length>0&&c.jsx("div",{className:"mt-4 flex space-x-3",children:c.jsx("button",{onClick:async()=>{try{const Q=ie.filter(V=>R.includes(V.id));if(Q.length===0){alert("Selecciona al menos un pedido para procesar");return}if(!confirm(`Procesar ${Q.length} pedido(s) seleccionado(s)?`))return;const M=Q.map(async V=>{const P=At(Je,"pedidos",V.id);await pr(P,{estado_cuenta:"procesada",cuenta_procesada:!0,timestamp_procesada:new Date,procesado_por:"admin"})});await Promise.all(M),N(Q),alert(` ${Q.length} pedido(s) procesado(s) exitosamente

 Comanda generada para impresin`),B([]),w(!1),k(null)}catch(Q){console.error("Error al procesar pedidos:",Q),alert(" Error al procesar los pedidos")}},className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:" Procesar Seleccionados"})})]}),oe.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pedidos Listos para Cobrar (",oe.length,")"]}),c.jsx("div",{className:"space-y-4",children:oe.map(Q=>c.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("input",{type:"checkbox",id:`pedido-procesado-${Q.id}`,checked:R.includes(Q.id),onChange:H=>{console.log(" Cambiando seleccin del pedido procesado:",Q.id.slice(-6),"checked:",H.target.checked),H.target.checked?B(M=>[...M,Q.id]):B(M=>M.filter(V=>V!==Q.id))},className:"mt-1 w-4 h-4 border-gray-300 rounded focus:ring-blue-500 text-blue-600",title:"Seleccionar para cobro"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("p",{className:"font-medium text-gray-900",children:["Pedido #",Q.id.slice(-6)]}),c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:" Procesado"})]}),c.jsxs("div",{className:"text-xs text-gray-400",children:["Estado: ",Q.estado_cuenta," | Procesado: ",Q.cuenta_procesada?"S":"No"]}),c.jsx("p",{className:"text-sm text-gray-500",children:Q.timestamp_cuenta_solicitada?.toDate?Q.timestamp_cuenta_solicitada.toDate().toLocaleString("es-ES"):"Fecha no disponible"}),Q.nombre_cliente&&c.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[" Cliente: ",Q.nombre_cliente]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-bold text-gray-900",children:["$",Q.total?.toFixed(2)||"0.00"]}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Q.estado==="pendiente"?"bg-yellow-100 text-yellow-800":Q.estado==="en_preparacion"?"bg-orange-100 text-orange-800":Q.estado==="listo"?"bg-green-100 text-green-800":Q.estado==="entregado"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:Q.estado==="pendiente"?" Pendiente":Q.estado==="en_preparacion"?" En Preparacin":Q.estado==="listo"?" Listo":Q.estado==="entregado"?" Entregado":Q.estado})]})]}),c.jsx("div",{className:"space-y-2",children:Q.items?.map((H,M)=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:[H.cantidad,"x ",H.nombre,H.agregados&&H.agregados.length>0&&c.jsxs("span",{className:"text-green-600 ml-1",children:["(+",H.agregados.map(V=>V.nombre).join(", "),")"]})]}),c.jsxs("span",{className:"text-gray-900",children:["$",(()=>{let V=H.precio*H.cantidad;if(H.agregados&&H.agregados.length>0){const P=H.agregados.reduce((G,re)=>G+(re.precio||0),0);V+=P*H.cantidad}return V.toFixed(2)})()]})]},M))})]},Q.id))}),oe.length>0&&c.jsx("div",{className:"mt-4 flex space-x-3",children:c.jsx("button",{onClick:async()=>{try{const Q=oe.filter(P=>R.includes(P.id));if(Q.length===0){alert("Selecciona al menos un pedido para cobrar");return}const H=Q.reduce((P,G)=>P+(G.total||0),0);if(!confirm(`Cobrar ${Q.length} pedido(s) por $${H.toFixed(2)}?`))return;const V=Q.map(async P=>{const G=At(Je,"pedidos",P.id);await pr(G,{estado_cuenta:"cobrada",timestamp_cobrada:new Date,cobrado_por:"admin",cobro_pago:"Cobrado"});const re={...P,estado_cuenta:"cobrada",timestamp_cobrada:new Date,cobrado_por:"admin",cobro_pago:"Cobrado",fecha_cobrado:new Date,motivo_cobro:"cuenta_procesada_lote",mesa_original:P.mesa,sala_original:P.sala||P.nombre_sala,pedido_original_id:P.id};await gi(jt(Je,"cobrados"),re)});await Promise.all(V),I(Q),alert(` ${Q.length} pedido(s) cobrado(s) exitosamente

 Comprobante generado para impresin`),B([]),w(!1),k(null)}catch(Q){console.error("Error al cobrar pedidos:",Q),alert(" Error al cobrar los pedidos")}},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:" Cobrar Seleccionados"})})]}),de.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Pedidos Ya Cobrados (",de.length,")"]}),c.jsx("div",{className:"space-y-4",children:de.map(Q=>c.jsxs("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"mt-1 w-4 h-4 flex items-center justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("p",{className:"font-medium text-gray-900",children:["Pedido #",Q.id.slice(-6)]}),c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Cobrado"})]}),c.jsxs("div",{className:"text-xs text-gray-400",children:["Estado: ",Q.estado_cuenta," | Cobro: ",Q.cobro_pago]}),c.jsx("p",{className:"text-sm text-gray-500",children:Q.timestamp_cuenta_solicitada?.toDate?Q.timestamp_cuenta_solicitada.toDate().toLocaleString("es-ES"):"Fecha no disponible"}),Q.nombre_cliente&&c.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[" Cliente: ",Q.nombre_cliente]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-bold text-gray-900",children:["$",Q.total?.toFixed(2)||"0.00"]}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Q.estado==="pendiente"?"bg-yellow-100 text-yellow-800":Q.estado==="en_preparacion"?"bg-orange-100 text-orange-800":Q.estado==="listo"?"bg-green-100 text-green-800":Q.estado==="entregado"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:Q.estado==="pendiente"?" Pendiente":Q.estado==="en_preparacion"?" En Preparacin":Q.estado==="listo"?" Listo":Q.estado==="entregado"?" Entregado":Q.estado})]})]}),c.jsx("div",{className:"space-y-2",children:Q.items?.map((H,M)=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:[H.cantidad,"x ",H.nombre,H.agregados&&H.agregados.length>0&&c.jsxs("span",{className:"text-green-600 ml-1",children:["(+",H.agregados.map(V=>V.nombre).join(", "),")"]})]}),c.jsxs("span",{className:"text-gray-900",children:["$",(()=>{let V=H.precio*H.cantidad;if(H.agregados&&H.agregados.length>0){const P=H.agregados.reduce((G,re)=>G+(re.precio||0),0);V+=P*H.cantidad}return V.toFixed(2)})()]})]},M))})]},Q.id))})]})]})})(),c.jsx("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Total de la Cuenta:"}),c.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["$",j.pedidos.reduce((ie,oe)=>ie+(oe.total||0),0).toFixed(2)]})]})}),c.jsxs("div",{className:"mt-6 flex space-x-3",children:[c.jsx("button",{onClick:()=>{w(!1),k(null),B([])},className:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"}),(()=>{const ie=j.mesaKey,oe=y[ie]||[],de=r.find(P=>{const G=P.valor_mesa.toLowerCase().replace(/\s+/g,"-"),xe=(P.sala_id&&t.find(Se=>Se.id===P.sala_id)?.nombre_sala||"sin_sala").toLowerCase().replace(/\s+/g,"-");return`${G}_${xe}`===ie}),Q=oe.filter(P=>P.estado_cuenta==="cobrada"&&P.cobro_pago==="Cobrado"),H=de?.contador||0,M=Q.length;console.log(" Debug Cerrar Mesa (Nueva Lgica):",{mesaKey:ie,contadorMesa:H,totalPedidosCobrados:M,todosLosPedidosMesa:oe.length,pedidos:oe.map(P=>({id:P.id.slice(-6),estado_cuenta:P.estado_cuenta,cobro_pago:P.cobro_pago}))});const V=M===H&&H>0;return console.log(" Puede cerrar mesa:",V),V&&c.jsx("button",{onClick:async()=>{try{if(console.log(" Cerrando mesa:",j.mesa),!confirm(`Confirmar cierre de Mesa ${j.mesa}?

Esto mover todos los pedidos cobrados al historial y cambiar el estado de la mesa a "Activa".`))return;const G=j.mesa.toLowerCase().replace(/\s+/g,"-"),re=Li(jt(Je,"pedidos"),su("mesa","==",G),su("cobro_pago","==","Cobrado")),me=(await os(re)).docs.map(nt=>({id:nt.id,...nt.data()}));console.log(" Pedidos cobrados a cerrar:",me);const Se=me.map(async nt=>{console.log(" Cerrando pedido:",nt.id);const lt={...nt,cobro_pago:"Cobrado_Cerrado",fecha_cerrado:new Date,motivo_cierre:"mesa_cerrada",mesa_original:nt.mesa,sala_original:nt.sala||nt.nombre_sala,pedido_original_id:nt.id};await gi(jt(Je,"historial"),lt),console.log(" Pedido agregado a historial:",nt.id);const gt=At(Je,"pedidos",nt.id);await Ma(gt),console.log(" Pedido eliminado de pedidos activos:",nt.id)});await Promise.all(Se);const Ne=r.find(nt=>nt.valor_mesa===j.mesa);Ne&&(await pr(At(Je,"mesas",Ne.id),{estado:"activa",contador:0}),console.log(' Mesa cambiada a estado "Activa" y contador reseteado')),console.log(" Mesa cerrada exitosamente"),alert(` Mesa ${j.mesa} cerrada exitosamente

Todos los pedidos han sido movidos al historial.`),w(!1),k(null)}catch(P){console.error(" Error al cerrar mesa:",P),alert(` Error al cerrar la mesa:

${P.message}

Por favor intenta nuevamente.`)}},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:" Cerrar Mesa"})})()]})]})]})}),c.jsx(W,{})]})}function VF(){const[r,e]=se.useState(!0),[t,n]=se.useState(null);return se.useEffect(()=>{console.log(" ReportesDashboard: Componente montado"),e(!1)},[]),r?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Cargando reportes..."})]})}):t?c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Error en Reportes"}),c.jsx("p",{className:"text-red-700",children:t})]})}):c.jsxs("div",{className:"space-y-6 p-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Dashboard de Reportes"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Anlisis completo del rendimiento del restaurante"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:" Sistema de Reportes"}),c.jsx("p",{className:"text-gray-600",children:"El sistema de reportes est funcionando correctamente. Aqu podrs ver:"}),c.jsxs("ul",{className:"mt-4 space-y-2 text-gray-600",children:[c.jsx("li",{children:"  Estadsticas de ventas"}),c.jsx("li",{children:"  Productos ms vendidos"}),c.jsx("li",{children:"  Anlisis por mesas"}),c.jsx("li",{children:"  Alertas de stock"}),c.jsx("li",{children:"  Anlisis temporal"})]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:" Estado del Sistema"}),c.jsxs("div",{className:"text-blue-800 text-sm space-y-1",children:[c.jsx("p",{children:" Componente montado correctamente"}),c.jsx("p",{children:" Firebase configurado"}),c.jsx("p",{children:" Estado inicializado"}),c.jsx("p",{children:" Renderizado exitoso"})]})]}),c.jsx("div",{className:"text-center",children:c.jsx("button",{onClick:()=>alert(" El sistema de reportes est funcionando!"),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:" Probar Sistema"})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Uf={};Uf.version="0.18.5";var IT=1252,UF=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],RT=function(r){UF.indexOf(r)!=-1&&(IT=r)};function zF(){RT(1252)}var Iu=function(r){RT(r)};function $F(){Iu(1200),zF()}var wd=function(e){return String.fromCharCode(e)},NE=function(e){return String.fromCharCode(e)},zf,ka="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ru(r){for(var e="",t=0,n=0,s=0,i=0,o=0,u=0,d=0,h=0;h<r.length;)t=r.charCodeAt(h++),i=t>>2,n=r.charCodeAt(h++),o=(t&3)<<4|n>>4,s=r.charCodeAt(h++),u=(n&15)<<2|s>>6,d=s&63,isNaN(n)?u=d=64:isNaN(s)&&(d=64),e+=ka.charAt(i)+ka.charAt(o)+ka.charAt(u)+ka.charAt(d);return e}function Gi(r){var e="",t=0,n=0,s=0,i=0,o=0,u=0,d=0;r=r.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<r.length;)i=ka.indexOf(r.charAt(h++)),o=ka.indexOf(r.charAt(h++)),t=i<<2|o>>4,e+=String.fromCharCode(t),u=ka.indexOf(r.charAt(h++)),n=(o&15)<<4|u>>2,u!==64&&(e+=String.fromCharCode(n)),d=ka.indexOf(r.charAt(h++)),s=(u&3)<<6|d,d!==64&&(e+=String.fromCharCode(s));return e}var $t=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Yi=(function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Ro(r){return $t?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function IE(r){return $t?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var Vs=function(e){return $t?Yi(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function Dh(r){if(typeof ArrayBuffer>"u")return Vs(r);for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),n=0;n!=r.length;++n)t[n]=r.charCodeAt(n)&255;return e}function Zu(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],t=0;t<r.length;++t)e[t]=String.fromCharCode(r[t]);return e.join("")}function HF(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var sn=$t?function(r){return Buffer.concat(r.map(function(e){return Buffer.isBuffer(e)?e:Yi(e)}))}:function(r){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<r.length;++e)t+=r[e].length;var n=new Uint8Array(t),s=0;for(e=0,t=0;e<r.length;t+=s,++e)if(s=r[e].length,r[e]instanceof Uint8Array)n.set(r[e],t);else{if(typeof r[e]=="string")throw"wtf";n.set(new Uint8Array(r[e]),t)}return n}return[].concat.apply([],r.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function WF(r){for(var e=[],t=0,n=r.length+250,s=Ro(r.length+255),i=0;i<r.length;++i){var o=r.charCodeAt(i);if(o<128)s[t++]=o;else if(o<2048)s[t++]=192|o>>6&31,s[t++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var u=r.charCodeAt(++i)&1023;s[t++]=240|o>>8&7,s[t++]=128|o>>2&63,s[t++]=128|u>>6&15|(o&3)<<4,s[t++]=128|u&63}else s[t++]=224|o>>12&15,s[t++]=128|o>>6&63,s[t++]=128|o&63;t>n&&(e.push(s.slice(0,t)),t=0,s=Ro(65535),n=65530)}return e.push(s.slice(0,t)),sn(e)}var lu=/\u0000/g,bd=/[\u0001-\u0006]/g;function $l(r){for(var e="",t=r.length-1;t>=0;)e+=r.charAt(t--);return e}function Us(r,e){var t=""+r;return t.length>=e?t:vr("0",e-t.length)+t}function e1(r,e){var t=""+r;return t.length>=e?t:vr(" ",e-t.length)+t}function $f(r,e){var t=""+r;return t.length>=e?t:t+vr(" ",e-t.length)}function qF(r,e){var t=""+Math.round(r);return t.length>=e?t:vr("0",e-t.length)+t}function GF(r,e){var t=""+r;return t.length>=e?t:vr("0",e-t.length)+t}var RE=Math.pow(2,32);function Nl(r,e){if(r>RE||r<-RE)return qF(r,e);var t=Math.round(r);return GF(t,e)}function Hf(r,e){return e=e||0,r.length>=7+e&&(r.charCodeAt(e)|32)===103&&(r.charCodeAt(e+1)|32)===101&&(r.charCodeAt(e+2)|32)===110&&(r.charCodeAt(e+3)|32)===101&&(r.charCodeAt(e+4)|32)===114&&(r.charCodeAt(e+5)|32)===97&&(r.charCodeAt(e+6)|32)===108}var kE=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],eg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function KF(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"/ "hh""mm""ss" "',r}var yr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},DE={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},XF={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Wf(r,e,t){for(var n=r<0?-1:1,s=r*n,i=0,o=1,u=0,d=1,h=0,m=0,v=Math.floor(s);h<e&&(v=Math.floor(s),u=v*o+i,m=v*h+d,!(s-v<5e-8));)s=1/(s-v),i=o,o=u,d=h,h=m;if(m>e&&(h>e?(m=d,u=i):(m=h,u=o)),!t)return[0,n*u,m];var x=Math.floor(n*u/m);return[x,n*u-x*m,m]}function Td(r,e,t){if(r>2958465||r<0)return null;var n=r|0,s=Math.floor(86400*(r-n)),i=0,o=[],u={D:n,T:s,u:86400*(r-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(u.u)<1e-6&&(u.u=0),e&&e.date1904&&(n+=1462),u.u>.9999&&(u.u=0,++s==86400&&(u.T=s=0,++n,++u.D)),n===60)o=t?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=t?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var d=new Date(1900,0,1);d.setDate(d.getDate()+n-1),o=[d.getFullYear(),d.getMonth()+1,d.getDate()],i=d.getDay(),n<60&&(i=(i+6)%7),t&&(i=rj(d,o))}return u.y=o[0],u.m=o[1],u.d=o[2],u.S=s%60,s=Math.floor(s/60),u.M=s%60,s=Math.floor(s/60),u.H=s,u.q=i,u}var kT=new Date(1899,11,31,0,0,0),YF=kT.getTime(),QF=new Date(1900,2,1,0,0,0);function DT(r,e){var t=r.getTime();return e?t-=1461*24*60*60*1e3:r>=QF&&(t+=1440*60*1e3),(t-(YF+(r.getTimezoneOffset()-kT.getTimezoneOffset())*6e4))/(1440*60*1e3)}function t1(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function JF(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function ZF(r){var e=r<0?12:11,t=t1(r.toFixed(12));return t.length<=e||(t=r.toPrecision(10),t.length<=e)?t:r.toExponential(5)}function ej(r){var e=t1(r.toFixed(11));return e.length>(r<0?12:11)||e==="0"||e==="-0"?r.toPrecision(6):e}function tj(r){var e=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),t;return e>=-4&&e<=-1?t=r.toPrecision(10+e):Math.abs(e)<=9?t=ZF(r):e===10?t=r.toFixed(10).substr(0,12):t=ej(r),t1(JF(t.toUpperCase()))}function Mg(r,e){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):tj(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return Va(14,DT(r,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+r)}function rj(r,e){e[0]-=581;var t=r.getDay();return r<60&&(t=(t+6)%7),t}function nj(r,e,t,n){var s="",i=0,o=0,u=t.y,d,h=0;switch(r){case 98:u=t.y+543;case 121:switch(e.length){case 1:case 2:d=u%100,h=2;break;default:d=u%1e4,h=4;break}break;case 109:switch(e.length){case 1:case 2:d=t.m,h=e.length;break;case 3:return eg[t.m-1][1];case 5:return eg[t.m-1][0];default:return eg[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:d=t.d,h=e.length;break;case 3:return kE[t.q][0];default:return kE[t.q][1]}break;case 104:switch(e.length){case 1:case 2:d=1+(t.H+11)%12,h=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:d=t.H,h=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:d=t.M,h=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Us(t.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(t.S+t.u)),i>=60*o&&(i=0),e==="s"?i===0?"0":""+i/o:(s=Us(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":d=t.D*24+t.H;break;case"[m]":case"[mm]":d=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":d=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}h=e.length===3?1:2;break;case 101:d=u,h=1;break}var m=h>0?Us(d,h):"";return m}function Da(r){var e=3;if(r.length<=e)return r;for(var t=r.length%e,n=r.substr(0,t);t!=r.length;t+=e)n+=(n.length>0?",":"")+r.substr(t,e);return n}var PT=/%/g;function sj(r,e,t){var n=e.replace(PT,""),s=e.length-n.length;return Vi(r,n,t*Math.pow(10,2*s))+vr("%",s)}function ij(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Vi(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function FT(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+FT(r,-e);var s=r.indexOf(".");s===-1&&(s=r.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),t=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),t.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+i):t+="E+"+(o-i);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,s)+"."+t.substr(2+s),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,d,h,m){return d+h+m.substr(0,(s+i)%s)+"."+m.substr(i)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var jT=/# (\?+)( ?)\/( ?)(\d+)/;function aj(r,e,t){var n=parseInt(r[4],10),s=Math.round(e*n),i=Math.floor(s/n),o=s-i*n,u=n;return t+(i===0?"":""+i)+" "+(o===0?vr(" ",r[1].length+1+r[4].length):e1(o,r[1].length)+r[2]+"/"+r[3]+Us(u,r[4].length))}function oj(r,e,t){return t+(e===0?"":""+e)+vr(" ",r[1].length+2+r[4].length)}var OT=/^#*0*\.([0#]+)/,BT=/\).*[0#]/,LT=/\(###\) ###\\?-####/;function Sn(r){for(var e="",t,n=0;n!=r.length;++n)switch(t=r.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function PE(r,e){var t=Math.pow(10,e);return""+Math.round(r*t)/t}function FE(r,e){var t=r-Math.floor(r),n=Math.pow(10,e);return e<(""+Math.round(t*n)).length?0:Math.round(t*n)}function lj(r,e){return e<(""+Math.round((r-Math.floor(r))*Math.pow(10,e))).length?1:0}function cj(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function _s(r,e,t){if(r.charCodeAt(0)===40&&!e.match(BT)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?_s("n",n,t):"("+_s("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return ij(r,e,t);if(e.indexOf("%")!==-1)return sj(r,e,t);if(e.indexOf("E")!==-1)return FT(e,t);if(e.charCodeAt(0)===36)return"$"+_s(r,e.substr(e.charAt(1)==" "?2:1),t);var s,i,o,u,d=Math.abs(t),h=t<0?"-":"";if(e.match(/^00+$/))return h+Nl(d,e.length);if(e.match(/^[#?]+$/))return s=Nl(t,0),s==="0"&&(s=""),s.length>e.length?s:Sn(e.substr(0,e.length-s.length))+s;if(i=e.match(jT))return aj(i,d,h);if(e.match(/^#+0+$/))return h+Nl(d,e.length-e.indexOf("0"));if(i=e.match(OT))return s=PE(t,i[1].length).replace(/^([^\.]+)$/,"$1."+Sn(i[1])).replace(/\.$/,"."+Sn(i[1])).replace(/\.(\d*)$/,function(E,_){return"."+_+vr("0",Sn(i[1]).length-_.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return h+PE(d,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return h+Da(Nl(d,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+_s(r,e,-t):Da(""+(Math.floor(t)+lj(t,i[1].length)))+"."+Us(FE(t,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return _s(r,e.replace(/^#,#*,/,""),t);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=$l(_s(r,e.replace(/[\\-]/g,""),t)),o=0,$l($l(e.replace(/\\/g,"")).replace(/[0#]/g,function(E){return o<s.length?s.charAt(o++):E==="0"?"0":""}));if(e.match(LT))return s=_s(r,"##########",t),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var m="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),u=Wf(d,Math.pow(10,o)-1,!1),s=""+h,m=Vi("n",i[1],u[1]),m.charAt(m.length-1)==" "&&(m=m.substr(0,m.length-1)+"0"),s+=m+i[2]+"/"+i[3],m=$f(u[2],o),m.length<i[4].length&&(m=Sn(i[4].substr(i[4].length-m.length))+m),s+=m,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),u=Wf(d,Math.pow(10,o)-1,!0),h+(u[0]||(u[1]?"":"0"))+" "+(u[1]?e1(u[1],o)+i[2]+"/"+i[3]+$f(u[2],o):vr(" ",2*o+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=Nl(t,0),e.length<=s.length?s:Sn(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+t.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var v=e.indexOf(".")-o,x=e.length-s.length-v;return Sn(e.substr(0,v)+s+e.substr(e.length-x))}if(i=e.match(/^00,000\.([#0]*0)$/))return o=FE(t,i[1].length),t<0?"-"+_s(r,e,-t):Da(cj(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(E){return"00,"+(E.length<3?Us(0,3-E.length):"")+E})+"."+Us(o,i[1].length);switch(e){case"###,##0.00":return _s(r,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var y=Da(Nl(d,0));return y!=="0"?h+y:"";case"###,###.00":return _s(r,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return _s(r,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function uj(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Vi(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function dj(r,e,t){var n=e.replace(PT,""),s=e.length-n.length;return Vi(r,n,t*Math.pow(10,2*s))+vr("%",s)}function MT(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+MT(r,-e);var s=r.indexOf(".");s===-1&&(s=r.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),t=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!t.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+i):t+="E+"+(o-i),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,d,h,m){return d+h+m.substr(0,(s+i)%s)+"."+m.substr(i)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function ai(r,e,t){if(r.charCodeAt(0)===40&&!e.match(BT)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?ai("n",n,t):"("+ai("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return uj(r,e,t);if(e.indexOf("%")!==-1)return dj(r,e,t);if(e.indexOf("E")!==-1)return MT(e,t);if(e.charCodeAt(0)===36)return"$"+ai(r,e.substr(e.charAt(1)==" "?2:1),t);var s,i,o,u,d=Math.abs(t),h=t<0?"-":"";if(e.match(/^00+$/))return h+Us(d,e.length);if(e.match(/^[#?]+$/))return s=""+t,t===0&&(s=""),s.length>e.length?s:Sn(e.substr(0,e.length-s.length))+s;if(i=e.match(jT))return oj(i,d,h);if(e.match(/^#+0+$/))return h+Us(d,e.length-e.indexOf("0"));if(i=e.match(OT))return s=(""+t).replace(/^([^\.]+)$/,"$1."+Sn(i[1])).replace(/\.$/,"."+Sn(i[1])),s=s.replace(/\.(\d*)$/,function(E,_){return"."+_+vr("0",Sn(i[1]).length-_.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return h+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return h+Da(""+d);if(i=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+ai(r,e,-t):Da(""+t)+"."+vr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return ai(r,e.replace(/^#,#*,/,""),t);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=$l(ai(r,e.replace(/[\\-]/g,""),t)),o=0,$l($l(e.replace(/\\/g,"")).replace(/[0#]/g,function(E){return o<s.length?s.charAt(o++):E==="0"?"0":""}));if(e.match(LT))return s=ai(r,"##########",t),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var m="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),u=Wf(d,Math.pow(10,o)-1,!1),s=""+h,m=Vi("n",i[1],u[1]),m.charAt(m.length-1)==" "&&(m=m.substr(0,m.length-1)+"0"),s+=m+i[2]+"/"+i[3],m=$f(u[2],o),m.length<i[4].length&&(m=Sn(i[4].substr(i[4].length-m.length))+m),s+=m,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),u=Wf(d,Math.pow(10,o)-1,!0),h+(u[0]||(u[1]?"":"0"))+" "+(u[1]?e1(u[1],o)+i[2]+"/"+i[3]+$f(u[2],o):vr(" ",2*o+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+t,e.length<=s.length?s:Sn(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+t.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var v=e.indexOf(".")-o,x=e.length-s.length-v;return Sn(e.substr(0,v)+s+e.substr(e.length-x))}if(i=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+ai(r,e,-t):Da(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(E){return"00,"+(E.length<3?Us(0,3-E.length):"")+E})+"."+Us(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var y=Da(""+d);return y!=="0"?h+y:"";default:if(e.match(/\.[0#?]*$/))return ai(r,e.slice(0,e.lastIndexOf(".")),t)+Sn(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Vi(r,e,t){return(t|0)===t?ai(r,e,t):_s(r,e,t)}function fj(r){for(var e=[],t=!1,n=0,s=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=r.substr(s,n-s),s=n+1}if(e[e.length]=r.substr(s),t===!0)throw new Error("Format |"+r+"| unterminated string ");return e}var VT=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function UT(r){for(var e=0,t="",n="";e<r.length;)switch(t=r.charAt(e)){case"G":Hf(r,e)&&(e+=6),e++;break;case'"':for(;r.charCodeAt(++e)!==34&&e<r.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(r.charAt(e+1)==="1"||r.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(r.substr(e,3).toUpperCase()==="A/P"||r.substr(e,5).toUpperCase()==="AM/PM"||r.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=t;r.charAt(e++)!=="]"&&e<r.length;)n+=r.charAt(e);if(n.match(VT))return!0;break;case".":case"0":case"#":for(;e<r.length&&("0#?.,E+-%".indexOf(t=r.charAt(++e))>-1||t=="\\"&&r.charAt(e+1)=="-"&&"0#".indexOf(r.charAt(e+2))>-1););break;case"?":for(;r.charAt(++e)===t;);break;case"*":++e,(r.charAt(e)==" "||r.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<r.length&&"0123456789".indexOf(r.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function hj(r,e,t,n){for(var s=[],i="",o=0,u="",d="t",h,m,v,x="H";o<r.length;)switch(u=r.charAt(o)){case"G":if(!Hf(r,o))throw new Error("unrecognized character "+u+" in "+r);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(v=r.charCodeAt(++o))!==34&&o<r.length;)i+=String.fromCharCode(v);s[s.length]={t:"t",v:i},++o;break;case"\\":var y=r.charAt(++o),E=y==="("||y===")"?y:"t";s[s.length]={t:E,v:y},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:e},++o;break;case"B":case"b":if(r.charAt(o+1)==="1"||r.charAt(o+1)==="2"){if(h==null&&(h=Td(e,t,r.charAt(o+1)==="2"),h==null))return"";s[s.length]={t:"X",v:r.substr(o,2)},d=u,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||h==null&&(h=Td(e,t),h==null))return"";for(i=u;++o<r.length&&r.charAt(o).toLowerCase()===u;)i+=u;u==="m"&&d.toLowerCase()==="h"&&(u="M"),u==="h"&&(u=x),s[s.length]={t:u,v:i},d=u;break;case"A":case"a":case"":var _={t:u,v:u};if(h==null&&(h=Td(e,t)),r.substr(o,3).toUpperCase()==="A/P"?(h!=null&&(_.v=h.H>=12?"P":"A"),_.t="T",x="h",o+=3):r.substr(o,5).toUpperCase()==="AM/PM"?(h!=null&&(_.v=h.H>=12?"PM":"AM"),_.t="T",o+=5,x="h"):r.substr(o,5).toUpperCase()==="/"?(h!=null&&(_.v=h.H>=12?"":""),_.t="T",o+=5,x="h"):(_.t="t",++o),h==null&&_.t==="T")return"";s[s.length]=_,d=u;break;case"[":for(i=u;r.charAt(o++)!=="]"&&o<r.length;)i+=r.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(VT)){if(h==null&&(h=Td(e,t),h==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},d=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",UT(r)||(s[s.length]={t:"t",v:i}));break;case".":if(h!=null){for(i=u;++o<r.length&&(u=r.charAt(o))==="0";)i+=u;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=u;++o<r.length&&"0#?.,E+-%".indexOf(u=r.charAt(o))>-1;)i+=u;s[s.length]={t:"n",v:i};break;case"?":for(i=u;r.charAt(++o)===u;)i+=u;s[s.length]={t:u,v:i},d=u;break;case"*":++o,(r.charAt(o)==" "||r.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":u,v:u},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=u;o<r.length&&"0123456789".indexOf(r.charAt(++o))>-1;)i+=r.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:u,v:u},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(u)===-1)throw new Error("unrecognized character "+u+" in "+r);s[s.length]={t:"t",v:u},++o;break}var w=0,j=0,k;for(o=s.length-1,d="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=x,d="h",w<1&&(w=1);break;case"s":(k=s[o].v.match(/\.0+$/))&&(j=Math.max(j,k[0].length-1)),w<3&&(w=3);case"d":case"y":case"M":case"e":d=s[o].t;break;case"m":d==="s"&&(s[o].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&s[o].v.match(/[Hh]/)&&(w=1),w<2&&s[o].v.match(/[Mm]/)&&(w=2),w<3&&s[o].v.match(/[Ss]/)&&(w=3)}switch(w){case 0:break;case 1:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M),h.M>=60&&(h.M=0,++h.H);break;case 2:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M);break}var R="",B;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=nj(s[o].t.charCodeAt(0),s[o].v,h,j),s[o].t="t";break;case"n":case"?":for(B=o+1;s[B]!=null&&((u=s[B].t)==="?"||u==="D"||(u===" "||u==="t")&&s[B+1]!=null&&(s[B+1].t==="?"||s[B+1].t==="t"&&s[B+1].v==="/")||s[o].t==="("&&(u===" "||u==="n"||u===")")||u==="t"&&(s[B].v==="/"||s[B].v===" "&&s[B+1]!=null&&s[B+1].t=="?"));)s[o].v+=s[B].v,s[B]={v:"",t:";"},++B;R+=s[o].v,o=B-1;break;case"G":s[o].t="t",s[o].v=Mg(e,t);break}var U="",W,N;if(R.length>0){R.charCodeAt(0)==40?(W=e<0&&R.charCodeAt(0)===45?-e:e,N=Vi("n",R,W)):(W=e<0&&n>1?-e:e,N=Vi("n",R,W),W<0&&s[0]&&s[0].t=="t"&&(N=N.substr(1),s[0].v="-"+s[0].v)),B=N.length-1;var I=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){I=o;break}var T=s.length;if(I===s.length&&N.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(B>=s[o].v.length-1?(B-=s[o].v.length,s[o].v=N.substr(B+1,s[o].v.length)):B<0?s[o].v="":(s[o].v=N.substr(0,B+1),B=-1),s[o].t="t",T=o);B>=0&&T<s.length&&(s[T].v=N.substr(0,B+1)+s[T].v)}else if(I!==s.length&&N.indexOf("E")===-1){for(B=N.indexOf(".")-1,o=I;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(m=s[o].v.indexOf(".")>-1&&o===I?s[o].v.indexOf(".")-1:s[o].v.length-1,U=s[o].v.substr(m+1);m>=0;--m)B>=0&&(s[o].v.charAt(m)==="0"||s[o].v.charAt(m)==="#")&&(U=N.charAt(B--)+U);s[o].v=U,s[o].t="t",T=o}for(B>=0&&T<s.length&&(s[T].v=N.substr(0,B+1)+s[T].v),B=N.indexOf(".")+1,o=I;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==I)){for(m=s[o].v.indexOf(".")>-1&&o===I?s[o].v.indexOf(".")+1:0,U=s[o].v.substr(0,m);m<s[o].v.length;++m)B<N.length&&(U+=N.charAt(B++));s[o].v=U,s[o].t="t",T=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(W=n>1&&e<0&&o>0&&s[o-1].v==="-"?-e:e,s[o].v=Vi(s[o].t,s[o].v,W),s[o].t="t");var C="";for(o=0;o!==s.length;++o)s[o]!=null&&(C+=s[o].v);return C}var jE=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function OE(r,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(r==t)return!0;break;case">":if(r>t)return!0;break;case"<":if(r<t)return!0;break;case"<>":if(r!=t)return!0;break;case">=":if(r>=t)return!0;break;case"<=":if(r<=t)return!0;break}return!1}function mj(r,e){var t=fj(r),n=t.length,s=t[n-1].indexOf("@");if(n<4&&s>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||s>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=s>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=s>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=s>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var i=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,i];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var o=t[0].match(jE),u=t[1].match(jE);return OE(e,o)?[n,t[0]]:OE(e,u)?[n,t[1]]:[n,t[o!=null&&u!=null?2:1]]}return[n,i]}function Va(r,e,t){t==null&&(t={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&t.dateNF?n=t.dateNF:n=r;break;case"number":r==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:yr)[r],n==null&&(n=t.table&&t.table[DE[r]]||yr[DE[r]]),n==null&&(n=XF[r]||"General");break}if(Hf(n,0))return Mg(e,t);e instanceof Date&&(e=DT(e,t.date1904));var s=mj(n,e);if(Hf(s[1]))return Mg(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return hj(s[1],e,t,s[0])}function zT(r,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(yr[t]==null){e<0&&(e=t);continue}if(yr[t]==r){e=t;break}}e<0&&(e=391)}return yr[e]=r,e}function Ph(r){for(var e=0;e!=392;++e)r[e]!==void 0&&zT(r[e],e)}function Fh(){yr=KF()}var $T=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function pj(r){var e=typeof r=="number"?yr[r]:r;return e=e.replace($T,"(\\d+)"),new RegExp("^"+e+"$")}function gj(r,e,t){var n=-1,s=-1,i=-1,o=-1,u=-1,d=-1;(e.match($T)||[]).forEach(function(v,x){var y=parseInt(t[x+1],10);switch(v.toLowerCase().charAt(0)){case"y":n=y;break;case"d":i=y;break;case"h":o=y;break;case"s":d=y;break;case"m":o>=0?u=y:s=y;break}}),d>=0&&u==-1&&s>=0&&(u=s,s=-1);var h=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);h.length==7&&(h="0"+h),h.length==8&&(h="20"+h);var m=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return o==-1&&u==-1&&d==-1?h:n==-1&&s==-1&&i==-1?m:h+"T"+m}var xj=(function(){var r={};r.version="1.2.0";function e(){for(var N=0,I=new Array(256),T=0;T!=256;++T)N=T,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,I[T]=N;return typeof Int32Array<"u"?new Int32Array(I):I}var t=e();function n(N){var I=0,T=0,C=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)D[C]=N[C];for(C=0;C!=256;++C)for(T=N[C],I=256+C;I<4096;I+=256)T=D[I]=T>>>8^N[T&255];var F=[];for(C=1;C!=16;++C)F[C-1]=typeof Int32Array<"u"?D.subarray(C*256,C*256+256):D.slice(C*256,C*256+256);return F}var s=n(t),i=s[0],o=s[1],u=s[2],d=s[3],h=s[4],m=s[5],v=s[6],x=s[7],y=s[8],E=s[9],_=s[10],w=s[11],j=s[12],k=s[13],R=s[14];function B(N,I){for(var T=I^-1,C=0,D=N.length;C<D;)T=T>>>8^t[(T^N.charCodeAt(C++))&255];return~T}function U(N,I){for(var T=I^-1,C=N.length-15,D=0;D<C;)T=R[N[D++]^T&255]^k[N[D++]^T>>8&255]^j[N[D++]^T>>16&255]^w[N[D++]^T>>>24]^_[N[D++]]^E[N[D++]]^y[N[D++]]^x[N[D++]]^v[N[D++]]^m[N[D++]]^h[N[D++]]^d[N[D++]]^u[N[D++]]^o[N[D++]]^i[N[D++]]^t[N[D++]];for(C+=15;D<C;)T=T>>>8^t[(T^N[D++])&255];return~T}function W(N,I){for(var T=I^-1,C=0,D=N.length,F=0,O=0;C<D;)F=N.charCodeAt(C++),F<128?T=T>>>8^t[(T^F)&255]:F<2048?(T=T>>>8^t[(T^(192|F>>6&31))&255],T=T>>>8^t[(T^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,O=N.charCodeAt(C++)&1023,T=T>>>8^t[(T^(240|F>>8&7))&255],T=T>>>8^t[(T^(128|F>>2&63))&255],T=T>>>8^t[(T^(128|O>>6&15|(F&3)<<4))&255],T=T>>>8^t[(T^(128|O&63))&255]):(T=T>>>8^t[(T^(224|F>>12&15))&255],T=T>>>8^t[(T^(128|F>>6&63))&255],T=T>>>8^t[(T^(128|F&63))&255]);return~T}return r.table=t,r.bstr=B,r.buf=U,r.str=W,r})(),Zt=(function(){var e={};e.version="1.2.1";function t(q,J){for(var X=q.split("/"),Y=J.split("/"),Z=0,ee=0,ge=Math.min(X.length,Y.length);Z<ge;++Z){if(ee=X[Z].length-Y[Z].length)return ee;if(X[Z]!=Y[Z])return X[Z]<Y[Z]?-1:1}return X.length-Y.length}function n(q){if(q.charAt(q.length-1)=="/")return q.slice(0,-1).indexOf("/")===-1?q:n(q.slice(0,-1));var J=q.lastIndexOf("/");return J===-1?q:q.slice(0,J+1)}function s(q){if(q.charAt(q.length-1)=="/")return s(q.slice(0,-1));var J=q.lastIndexOf("/");return J===-1?q:q.slice(J+1)}function i(q,J){typeof J=="string"&&(J=new Date(J));var X=J.getHours();X=X<<6|J.getMinutes(),X=X<<5|J.getSeconds()>>>1,q.write_shift(2,X);var Y=J.getFullYear()-1980;Y=Y<<4|J.getMonth()+1,Y=Y<<5|J.getDate(),q.write_shift(2,Y)}function o(q){var J=q.read_shift(2)&65535,X=q.read_shift(2)&65535,Y=new Date,Z=X&31;X>>>=5;var ee=X&15;X>>>=4,Y.setMilliseconds(0),Y.setFullYear(X+1980),Y.setMonth(ee-1),Y.setDate(Z);var ge=J&31;J>>>=5;var Ce=J&63;return J>>>=6,Y.setHours(J),Y.setMinutes(Ce),Y.setSeconds(ge<<1),Y}function u(q){rs(q,0);for(var J={},X=0;q.l<=q.length-4;){var Y=q.read_shift(2),Z=q.read_shift(2),ee=q.l+Z,ge={};switch(Y){case 21589:X=q.read_shift(1),X&1&&(ge.mtime=q.read_shift(4)),Z>5&&(X&2&&(ge.atime=q.read_shift(4)),X&4&&(ge.ctime=q.read_shift(4))),ge.mtime&&(ge.mt=new Date(ge.mtime*1e3));break}q.l=ee,J[Y]=ge}return J}var d;function h(){return d||(d={})}function m(q,J){if(q[0]==80&&q[1]==75)return kn(q,J);if((q[0]|32)==109&&(q[1]|32)==105)return Gs(q,J);if(q.length<512)throw new Error("CFB file size "+q.length+" < 512");var X=3,Y=512,Z=0,ee=0,ge=0,Ce=0,ve=0,_e=[],Ee=q.slice(0,512);rs(Ee,0);var je=v(Ee);switch(X=je[0],X){case 3:Y=512;break;case 4:Y=4096;break;case 0:if(je[1]==0)return kn(q,J);default:throw new Error("Major Version: Expected 3 or 4 saw "+X)}Y!==512&&(Ee=q.slice(0,Y),rs(Ee,28));var He=q.slice(0,Y);x(Ee,X);var Xe=Ee.read_shift(4,"i");if(X===3&&Xe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Xe);Ee.l+=4,ge=Ee.read_shift(4,"i"),Ee.l+=4,Ee.chk("00100000","Mini Stream Cutoff Size: "),Ce=Ee.read_shift(4,"i"),Z=Ee.read_shift(4,"i"),ve=Ee.read_shift(4,"i"),ee=Ee.read_shift(4,"i");for(var Ue=-1,Be=0;Be<109&&(Ue=Ee.read_shift(4,"i"),!(Ue<0));++Be)_e[Be]=Ue;var mt=y(q,Y);w(ve,ee,mt,Y,_e);var zt=k(mt,ge,_e,Y);zt[ge].name="!Directory",Z>0&&Ce!==O&&(zt[Ce].name="!MiniFAT"),zt[_e[0]].name="!FAT",zt.fat_addrs=_e,zt.ssz=Y;var Lt={},qt=[],As=[],Xs=[];R(ge,zt,mt,qt,Z,Lt,As,Ce),E(As,Xs,qt),qt.shift();var Kn={FileIndex:As,FullPaths:Xs};return J&&J.raw&&(Kn.raw={header:He,sectors:mt}),Kn}function v(q){if(q[q.l]==80&&q[q.l+1]==75)return[0,0];q.chk(le,"Header Signature: "),q.l+=16;var J=q.read_shift(2,"u");return[q.read_shift(2,"u"),J]}function x(q,J){var X=9;switch(q.l+=2,X=q.read_shift(2)){case 9:if(J!=3)throw new Error("Sector Shift: Expected 9 saw "+X);break;case 12:if(J!=4)throw new Error("Sector Shift: Expected 12 saw "+X);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+X)}q.chk("0600","Mini Sector Shift: "),q.chk("000000000000","Reserved: ")}function y(q,J){for(var X=Math.ceil(q.length/J)-1,Y=[],Z=1;Z<X;++Z)Y[Z-1]=q.slice(Z*J,(Z+1)*J);return Y[X-1]=q.slice(X*J),Y}function E(q,J,X){for(var Y=0,Z=0,ee=0,ge=0,Ce=0,ve=X.length,_e=[],Ee=[];Y<ve;++Y)_e[Y]=Ee[Y]=Y,J[Y]=X[Y];for(;Ce<Ee.length;++Ce)Y=Ee[Ce],Z=q[Y].L,ee=q[Y].R,ge=q[Y].C,_e[Y]===Y&&(Z!==-1&&_e[Z]!==Z&&(_e[Y]=_e[Z]),ee!==-1&&_e[ee]!==ee&&(_e[Y]=_e[ee])),ge!==-1&&(_e[ge]=Y),Z!==-1&&Y!=_e[Y]&&(_e[Z]=_e[Y],Ee.lastIndexOf(Z)<Ce&&Ee.push(Z)),ee!==-1&&Y!=_e[Y]&&(_e[ee]=_e[Y],Ee.lastIndexOf(ee)<Ce&&Ee.push(ee));for(Y=1;Y<ve;++Y)_e[Y]===Y&&(ee!==-1&&_e[ee]!==ee?_e[Y]=_e[ee]:Z!==-1&&_e[Z]!==Z&&(_e[Y]=_e[Z]));for(Y=1;Y<ve;++Y)if(q[Y].type!==0){if(Ce=Y,Ce!=_e[Ce])do Ce=_e[Ce],J[Y]=J[Ce]+"/"+J[Y];while(Ce!==0&&_e[Ce]!==-1&&Ce!=_e[Ce]);_e[Y]=-1}for(J[0]+="/",Y=1;Y<ve;++Y)q[Y].type!==2&&(J[Y]+="/")}function _(q,J,X){for(var Y=q.start,Z=q.size,ee=[],ge=Y;X&&Z>0&&ge>=0;)ee.push(J.slice(ge*F,ge*F+F)),Z-=F,ge=go(X,ge*4);return ee.length===0?Ae(0):sn(ee).slice(0,q.size)}function w(q,J,X,Y,Z){var ee=O;if(q===O){if(J!==0)throw new Error("DIFAT chain shorter than expected")}else if(q!==-1){var ge=X[q],Ce=(Y>>>2)-1;if(!ge)return;for(var ve=0;ve<Ce&&(ee=go(ge,ve*4))!==O;++ve)Z.push(ee);w(go(ge,Y-4),J-1,X,Y,Z)}}function j(q,J,X,Y,Z){var ee=[],ge=[];Z||(Z=[]);var Ce=Y-1,ve=0,_e=0;for(ve=J;ve>=0;){Z[ve]=!0,ee[ee.length]=ve,ge.push(q[ve]);var Ee=X[Math.floor(ve*4/Y)];if(_e=ve*4&Ce,Y<4+_e)throw new Error("FAT boundary crossed: "+ve+" 4 "+Y);if(!q[Ee])break;ve=go(q[Ee],_e)}return{nodes:ee,data:HE([ge])}}function k(q,J,X,Y){var Z=q.length,ee=[],ge=[],Ce=[],ve=[],_e=Y-1,Ee=0,je=0,He=0,Xe=0;for(Ee=0;Ee<Z;++Ee)if(Ce=[],He=Ee+J,He>=Z&&(He-=Z),!ge[He]){ve=[];var Ue=[];for(je=He;je>=0;){Ue[je]=!0,ge[je]=!0,Ce[Ce.length]=je,ve.push(q[je]);var Be=X[Math.floor(je*4/Y)];if(Xe=je*4&_e,Y<4+Xe)throw new Error("FAT boundary crossed: "+je+" 4 "+Y);if(!q[Be]||(je=go(q[Be],Xe),Ue[je]))break}ee[He]={nodes:Ce,data:HE([ve])}}return ee}function R(q,J,X,Y,Z,ee,ge,Ce){for(var ve=0,_e=Y.length?2:0,Ee=J[q].data,je=0,He=0,Xe;je<Ee.length;je+=128){var Ue=Ee.slice(je,je+128);rs(Ue,64),He=Ue.read_shift(2),Xe=a1(Ue,0,He-_e),Y.push(Xe);var Be={name:Xe,type:Ue.read_shift(1),color:Ue.read_shift(1),L:Ue.read_shift(4,"i"),R:Ue.read_shift(4,"i"),C:Ue.read_shift(4,"i"),clsid:Ue.read_shift(16),state:Ue.read_shift(4,"i"),start:0,size:0},mt=Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2);mt!==0&&(Be.ct=B(Ue,Ue.l-8));var zt=Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2);zt!==0&&(Be.mt=B(Ue,Ue.l-8)),Be.start=Ue.read_shift(4,"i"),Be.size=Ue.read_shift(4,"i"),Be.size<0&&Be.start<0&&(Be.size=Be.type=0,Be.start=O,Be.name=""),Be.type===5?(ve=Be.start,Z>0&&ve!==O&&(J[ve].name="!StreamData")):Be.size>=4096?(Be.storage="fat",J[Be.start]===void 0&&(J[Be.start]=j(X,Be.start,J.fat_addrs,J.ssz)),J[Be.start].name=Be.name,Be.content=J[Be.start].data.slice(0,Be.size)):(Be.storage="minifat",Be.size<0?Be.size=0:ve!==O&&Be.start!==O&&J[ve]&&(Be.content=_(Be,J[ve].data,(J[Ce]||{}).data))),Be.content&&rs(Be.content,0),ee[Xe]=Be,ge.push(Be)}}function B(q,J){return new Date((is(q,J+4)/1e7*Math.pow(2,32)+is(q,J)/1e7-11644473600)*1e3)}function U(q,J){return h(),m(d.readFileSync(q),J)}function W(q,J){var X=J&&J.type;switch(X||$t&&Buffer.isBuffer(q)&&(X="buffer"),X||"base64"){case"file":return U(q,J);case"base64":return m(Vs(Gi(q)),J);case"binary":return m(Vs(q),J)}return m(q,J)}function N(q,J){var X=J||{},Y=X.root||"Root Entry";if(q.FullPaths||(q.FullPaths=[]),q.FileIndex||(q.FileIndex=[]),q.FullPaths.length!==q.FileIndex.length)throw new Error("inconsistent CFB structure");q.FullPaths.length===0&&(q.FullPaths[0]=Y+"/",q.FileIndex[0]={name:Y,type:5}),X.CLSID&&(q.FileIndex[0].clsid=X.CLSID),I(q)}function I(q){var J="Sh33tJ5";if(!Zt.find(q,"/"+J)){var X=Ae(4);X[0]=55,X[1]=X[3]=50,X[2]=54,q.FileIndex.push({name:J,type:2,content:X,size:4,L:69,R:69,C:69}),q.FullPaths.push(q.FullPaths[0]+J),T(q)}}function T(q,J){N(q);for(var X=!1,Y=!1,Z=q.FullPaths.length-1;Z>=0;--Z){var ee=q.FileIndex[Z];switch(ee.type){case 0:Y?X=!0:(q.FileIndex.pop(),q.FullPaths.pop());break;case 1:case 2:case 5:Y=!0,isNaN(ee.R*ee.L*ee.C)&&(X=!0),ee.R>-1&&ee.L>-1&&ee.R==ee.L&&(X=!0);break;default:X=!0;break}}if(!(!X&&!J)){var ge=new Date(1987,1,19),Ce=0,ve=Object.create?Object.create(null):{},_e=[];for(Z=0;Z<q.FullPaths.length;++Z)ve[q.FullPaths[Z]]=!0,q.FileIndex[Z].type!==0&&_e.push([q.FullPaths[Z],q.FileIndex[Z]]);for(Z=0;Z<_e.length;++Z){var Ee=n(_e[Z][0]);Y=ve[Ee],Y||(_e.push([Ee,{name:s(Ee).replace("/",""),type:1,clsid:Ie,ct:ge,mt:ge,content:null}]),ve[Ee]=!0)}for(_e.sort(function(Xe,Ue){return t(Xe[0],Ue[0])}),q.FullPaths=[],q.FileIndex=[],Z=0;Z<_e.length;++Z)q.FullPaths[Z]=_e[Z][0],q.FileIndex[Z]=_e[Z][1];for(Z=0;Z<_e.length;++Z){var je=q.FileIndex[Z],He=q.FullPaths[Z];if(je.name=s(He).replace("/",""),je.L=je.R=je.C=-(je.color=1),je.size=je.content?je.content.length:0,je.start=0,je.clsid=je.clsid||Ie,Z===0)je.C=_e.length>1?1:-1,je.size=0,je.type=5;else if(He.slice(-1)=="/"){for(Ce=Z+1;Ce<_e.length&&n(q.FullPaths[Ce])!=He;++Ce);for(je.C=Ce>=_e.length?-1:Ce,Ce=Z+1;Ce<_e.length&&n(q.FullPaths[Ce])!=n(He);++Ce);je.R=Ce>=_e.length?-1:Ce,je.type=1}else n(q.FullPaths[Z+1]||"")==n(He)&&(je.R=Z+1),je.type=2}}}function C(q,J){var X=J||{};if(X.fileType=="mad")return sr(q,X);switch(T(q),X.fileType){case"zip":return bn(q,X)}var Y=(function(Xe){for(var Ue=0,Be=0,mt=0;mt<Xe.FileIndex.length;++mt){var zt=Xe.FileIndex[mt];if(zt.content){var Lt=zt.content.length;Lt>0&&(Lt<4096?Ue+=Lt+63>>6:Be+=Lt+511>>9)}}for(var qt=Xe.FullPaths.length+3>>2,As=Ue+7>>3,Xs=Ue+127>>7,Kn=As+Be+qt+Xs,_r=Kn+127>>7,Qi=_r<=109?0:Math.ceil((_r-109)/127);Kn+_r+Qi+127>>7>_r;)Qi=++_r<=109?0:Math.ceil((_r-109)/127);var ir=[1,Qi,_r,Xs,qt,Be,Ue,0];return Xe.FileIndex[0].size=Ue<<6,ir[7]=(Xe.FileIndex[0].start=ir[0]+ir[1]+ir[2]+ir[3]+ir[4]+ir[5])+(ir[6]+7>>3),ir})(q),Z=Ae(Y[7]<<9),ee=0,ge=0;{for(ee=0;ee<8;++ee)Z.write_shift(1,we[ee]);for(ee=0;ee<8;++ee)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),ee=0;ee<3;++ee)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,Y[2]),Z.write_shift(4,Y[0]+Y[1]+Y[2]+Y[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,Y[3]?Y[0]+Y[1]+Y[2]-1:O),Z.write_shift(4,Y[3]),Z.write_shift(-4,Y[1]?Y[0]-1:O),Z.write_shift(4,Y[1]),ee=0;ee<109;++ee)Z.write_shift(-4,ee<Y[2]?Y[1]+ee:-1)}if(Y[1])for(ge=0;ge<Y[1];++ge){for(;ee<236+ge*127;++ee)Z.write_shift(-4,ee<Y[2]?Y[1]+ee:-1);Z.write_shift(-4,ge===Y[1]-1?O:ge+1)}var Ce=function(Xe){for(ge+=Xe;ee<ge-1;++ee)Z.write_shift(-4,ee+1);Xe&&(++ee,Z.write_shift(-4,O))};for(ge=ee=0,ge+=Y[1];ee<ge;++ee)Z.write_shift(-4,ie.DIFSECT);for(ge+=Y[2];ee<ge;++ee)Z.write_shift(-4,ie.FATSECT);Ce(Y[3]),Ce(Y[4]);for(var ve=0,_e=0,Ee=q.FileIndex[0];ve<q.FileIndex.length;++ve)Ee=q.FileIndex[ve],Ee.content&&(_e=Ee.content.length,!(_e<4096)&&(Ee.start=ge,Ce(_e+511>>9)));for(Ce(Y[6]+7>>3);Z.l&511;)Z.write_shift(-4,ie.ENDOFCHAIN);for(ge=ee=0,ve=0;ve<q.FileIndex.length;++ve)Ee=q.FileIndex[ve],Ee.content&&(_e=Ee.content.length,!(!_e||_e>=4096)&&(Ee.start=ge,Ce(_e+63>>6)));for(;Z.l&511;)Z.write_shift(-4,ie.ENDOFCHAIN);for(ee=0;ee<Y[4]<<2;++ee){var je=q.FullPaths[ee];if(!je||je.length===0){for(ve=0;ve<17;++ve)Z.write_shift(4,0);for(ve=0;ve<3;++ve)Z.write_shift(4,-1);for(ve=0;ve<12;++ve)Z.write_shift(4,0);continue}Ee=q.FileIndex[ee],ee===0&&(Ee.start=Ee.size?Ee.start-1:O);var He=ee===0&&X.root||Ee.name;if(_e=2*(He.length+1),Z.write_shift(64,He,"utf16le"),Z.write_shift(2,_e),Z.write_shift(1,Ee.type),Z.write_shift(1,Ee.color),Z.write_shift(-4,Ee.L),Z.write_shift(-4,Ee.R),Z.write_shift(-4,Ee.C),Ee.clsid)Z.write_shift(16,Ee.clsid,"hex");else for(ve=0;ve<4;++ve)Z.write_shift(4,0);Z.write_shift(4,Ee.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,Ee.start),Z.write_shift(4,Ee.size),Z.write_shift(4,0)}for(ee=1;ee<q.FileIndex.length;++ee)if(Ee=q.FileIndex[ee],Ee.size>=4096)if(Z.l=Ee.start+1<<9,$t&&Buffer.isBuffer(Ee.content))Ee.content.copy(Z,Z.l,0,Ee.size),Z.l+=Ee.size+511&-512;else{for(ve=0;ve<Ee.size;++ve)Z.write_shift(1,Ee.content[ve]);for(;ve&511;++ve)Z.write_shift(1,0)}for(ee=1;ee<q.FileIndex.length;++ee)if(Ee=q.FileIndex[ee],Ee.size>0&&Ee.size<4096)if($t&&Buffer.isBuffer(Ee.content))Ee.content.copy(Z,Z.l,0,Ee.size),Z.l+=Ee.size+63&-64;else{for(ve=0;ve<Ee.size;++ve)Z.write_shift(1,Ee.content[ve]);for(;ve&63;++ve)Z.write_shift(1,0)}if($t)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function D(q,J){var X=q.FullPaths.map(function(ve){return ve.toUpperCase()}),Y=X.map(function(ve){var _e=ve.split("/");return _e[_e.length-(ve.slice(-1)=="/"?2:1)]}),Z=!1;J.charCodeAt(0)===47?(Z=!0,J=X[0].slice(0,-1)+J):Z=J.indexOf("/")!==-1;var ee=J.toUpperCase(),ge=Z===!0?X.indexOf(ee):Y.indexOf(ee);if(ge!==-1)return q.FileIndex[ge];var Ce=!ee.match(bd);for(ee=ee.replace(lu,""),Ce&&(ee=ee.replace(bd,"!")),ge=0;ge<X.length;++ge)if((Ce?X[ge].replace(bd,"!"):X[ge]).replace(lu,"")==ee||(Ce?Y[ge].replace(bd,"!"):Y[ge]).replace(lu,"")==ee)return q.FileIndex[ge];return null}var F=64,O=-2,le="d0cf11e0a1b11ae1",we=[208,207,17,224,161,177,26,225],Ie="00000000000000000000000000000000",ie={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:le,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ie,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function oe(q,J,X){h();var Y=C(q,X);d.writeFileSync(J,Y)}function de(q){for(var J=new Array(q.length),X=0;X<q.length;++X)J[X]=String.fromCharCode(q[X]);return J.join("")}function Q(q,J){var X=C(q,J);switch(J&&J.type||"buffer"){case"file":return h(),d.writeFileSync(J.filename,X),X;case"binary":return typeof X=="string"?X:de(X);case"base64":return Ru(typeof X=="string"?X:de(X));case"buffer":if($t)return Buffer.isBuffer(X)?X:Yi(X);case"array":return typeof X=="string"?Vs(X):X}return X}var H;function M(q){try{var J=q.InflateRaw,X=new J;if(X._processChunk(new Uint8Array([3,0]),X._finishFlushFlag),X.bytesRead)H=q;else throw new Error("zlib does not expose bytesRead")}catch(Y){console.error("cannot use native zlib: "+(Y.message||Y))}}function V(q,J){if(!H)return Ht(q,J);var X=H.InflateRaw,Y=new X,Z=Y._processChunk(q.slice(q.l),Y._finishFlushFlag);return q.l+=Y.bytesRead,Z}function P(q){return H?H.deflateRawSync(q):Ge(q)}var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],xe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(q){var J=(q<<1|q<<11)&139536|(q<<5|q<<15)&558144;return(J>>16|J>>8|J)&255}for(var Se=typeof Uint8Array<"u",Ne=Se?new Uint8Array(256):[],nt=0;nt<256;++nt)Ne[nt]=me(nt);function lt(q,J){var X=Ne[q&255];return J<=8?X>>>8-J:(X=X<<8|Ne[q>>8&255],J<=16?X>>>16-J:(X=X<<8|Ne[q>>16&255],X>>>24-J))}function gt(q,J){var X=J&7,Y=J>>>3;return(q[Y]|(X<=6?0:q[Y+1]<<8))>>>X&3}function Le(q,J){var X=J&7,Y=J>>>3;return(q[Y]|(X<=5?0:q[Y+1]<<8))>>>X&7}function ht(q,J){var X=J&7,Y=J>>>3;return(q[Y]|(X<=4?0:q[Y+1]<<8))>>>X&15}function Ze(q,J){var X=J&7,Y=J>>>3;return(q[Y]|(X<=3?0:q[Y+1]<<8))>>>X&31}function Me(q,J){var X=J&7,Y=J>>>3;return(q[Y]|(X<=1?0:q[Y+1]<<8))>>>X&127}function bt(q,J,X){var Y=J&7,Z=J>>>3,ee=(1<<X)-1,ge=q[Z]>>>Y;return X<8-Y||(ge|=q[Z+1]<<8-Y,X<16-Y)||(ge|=q[Z+2]<<16-Y,X<24-Y)||(ge|=q[Z+3]<<24-Y),ge&ee}function ne(q,J,X){var Y=J&7,Z=J>>>3;return Y<=5?q[Z]|=(X&7)<<Y:(q[Z]|=X<<Y&255,q[Z+1]=(X&7)>>8-Y),J+3}function ue(q,J,X){var Y=J&7,Z=J>>>3;return X=(X&1)<<Y,q[Z]|=X,J+1}function Ke(q,J,X){var Y=J&7,Z=J>>>3;return X<<=Y,q[Z]|=X&255,X>>>=8,q[Z+1]=X,J+8}function wt(q,J,X){var Y=J&7,Z=J>>>3;return X<<=Y,q[Z]|=X&255,X>>>=8,q[Z+1]=X&255,q[Z+2]=X>>>8,J+16}function tr(q,J){var X=q.length,Y=2*X>J?2*X:J+5,Z=0;if(X>=J)return q;if($t){var ee=IE(Y);if(q.copy)q.copy(ee);else for(;Z<q.length;++Z)ee[Z]=q[Z];return ee}else if(Se){var ge=new Uint8Array(Y);if(ge.set)ge.set(q);else for(;Z<X;++Z)ge[Z]=q[Z];return ge}return q.length=Y,q}function rr(q){for(var J=new Array(q),X=0;X<q;++X)J[X]=0;return J}function En(q,J,X){var Y=1,Z=0,ee=0,ge=0,Ce=0,ve=q.length,_e=Se?new Uint16Array(32):rr(32);for(ee=0;ee<32;++ee)_e[ee]=0;for(ee=ve;ee<X;++ee)q[ee]=0;ve=q.length;var Ee=Se?new Uint16Array(ve):rr(ve);for(ee=0;ee<ve;++ee)_e[Z=q[ee]]++,Y<Z&&(Y=Z),Ee[ee]=0;for(_e[0]=0,ee=1;ee<=Y;++ee)_e[ee+16]=Ce=Ce+_e[ee-1]<<1;for(ee=0;ee<ve;++ee)Ce=q[ee],Ce!=0&&(Ee[ee]=_e[Ce+16]++);var je=0;for(ee=0;ee<ve;++ee)if(je=q[ee],je!=0)for(Ce=lt(Ee[ee],Y)>>Y-je,ge=(1<<Y+4-je)-1;ge>=0;--ge)J[Ce|ge<<je]=je&15|ee<<4;return Y}var Ot=Se?new Uint16Array(512):rr(512),fe=Se?new Uint16Array(32):rr(32);if(!Se){for(var Pe=0;Pe<512;++Pe)Ot[Pe]=0;for(Pe=0;Pe<32;++Pe)fe[Pe]=0}(function(){for(var q=[],J=0;J<32;J++)q.push(5);En(q,fe,32);var X=[];for(J=0;J<=143;J++)X.push(8);for(;J<=255;J++)X.push(9);for(;J<=279;J++)X.push(7);for(;J<=287;J++)X.push(8);En(X,Ot,288)})();var et=(function(){for(var J=Se?new Uint8Array(32768):[],X=0,Y=0;X<xe.length-1;++X)for(;Y<xe[X+1];++Y)J[Y]=X;for(;Y<32768;++Y)J[Y]=29;var Z=Se?new Uint8Array(259):[];for(X=0,Y=0;X<re.length-1;++X)for(;Y<re[X+1];++Y)Z[Y]=X;function ee(Ce,ve){for(var _e=0;_e<Ce.length;){var Ee=Math.min(65535,Ce.length-_e),je=_e+Ee==Ce.length;for(ve.write_shift(1,+je),ve.write_shift(2,Ee),ve.write_shift(2,~Ee&65535);Ee-- >0;)ve[ve.l++]=Ce[_e++]}return ve.l}function ge(Ce,ve){for(var _e=0,Ee=0,je=Se?new Uint16Array(32768):[];Ee<Ce.length;){var He=Math.min(65535,Ce.length-Ee);if(He<10){for(_e=ne(ve,_e,+(Ee+He==Ce.length)),_e&7&&(_e+=8-(_e&7)),ve.l=_e/8|0,ve.write_shift(2,He),ve.write_shift(2,~He&65535);He-- >0;)ve[ve.l++]=Ce[Ee++];_e=ve.l*8;continue}_e=ne(ve,_e,+(Ee+He==Ce.length)+2);for(var Xe=0;He-- >0;){var Ue=Ce[Ee];Xe=(Xe<<5^Ue)&32767;var Be=-1,mt=0;if((Be=je[Xe])&&(Be|=Ee&-32768,Be>Ee&&(Be-=32768),Be<Ee))for(;Ce[Be+mt]==Ce[Ee+mt]&&mt<250;)++mt;if(mt>2){Ue=Z[mt],Ue<=22?_e=Ke(ve,_e,Ne[Ue+1]>>1)-1:(Ke(ve,_e,3),_e+=5,Ke(ve,_e,Ne[Ue-23]>>5),_e+=3);var zt=Ue<8?0:Ue-4>>2;zt>0&&(wt(ve,_e,mt-re[Ue]),_e+=zt),Ue=J[Ee-Be],_e=Ke(ve,_e,Ne[Ue]>>3),_e-=3;var Lt=Ue<4?0:Ue-2>>1;Lt>0&&(wt(ve,_e,Ee-Be-xe[Ue]),_e+=Lt);for(var qt=0;qt<mt;++qt)je[Xe]=Ee&32767,Xe=(Xe<<5^Ce[Ee])&32767,++Ee;He-=mt-1}else Ue<=143?Ue=Ue+48:_e=ue(ve,_e,1),_e=Ke(ve,_e,Ne[Ue]),je[Xe]=Ee&32767,++Ee}_e=Ke(ve,_e,0)-1}return ve.l=(_e+7)/8|0,ve.l}return function(ve,_e){return ve.length<8?ee(ve,_e):ge(ve,_e)}})();function Ge(q){var J=Ae(50+Math.floor(q.length*1.1)),X=et(q,J);return J.slice(0,X)}var at=Se?new Uint16Array(32768):rr(32768),yt=Se?new Uint16Array(32768):rr(32768),kt=Se?new Uint16Array(128):rr(128),ur=1,Yr=1;function ut(q,J){var X=Ze(q,J)+257;J+=5;var Y=Ze(q,J)+1;J+=5;var Z=ht(q,J)+4;J+=4;for(var ee=0,ge=Se?new Uint8Array(19):rr(19),Ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ve=1,_e=Se?new Uint8Array(8):rr(8),Ee=Se?new Uint8Array(8):rr(8),je=ge.length,He=0;He<Z;++He)ge[G[He]]=ee=Le(q,J),ve<ee&&(ve=ee),_e[ee]++,J+=3;var Xe=0;for(_e[0]=0,He=1;He<=ve;++He)Ee[He]=Xe=Xe+_e[He-1]<<1;for(He=0;He<je;++He)(Xe=ge[He])!=0&&(Ce[He]=Ee[Xe]++);var Ue=0;for(He=0;He<je;++He)if(Ue=ge[He],Ue!=0){Xe=Ne[Ce[He]]>>8-Ue;for(var Be=(1<<7-Ue)-1;Be>=0;--Be)kt[Xe|Be<<Ue]=Ue&7|He<<3}var mt=[];for(ve=1;mt.length<X+Y;)switch(Xe=kt[Me(q,J)],J+=Xe&7,Xe>>>=3){case 16:for(ee=3+gt(q,J),J+=2,Xe=mt[mt.length-1];ee-- >0;)mt.push(Xe);break;case 17:for(ee=3+Le(q,J),J+=3;ee-- >0;)mt.push(0);break;case 18:for(ee=11+Me(q,J),J+=7;ee-- >0;)mt.push(0);break;default:mt.push(Xe),ve<Xe&&(ve=Xe);break}var zt=mt.slice(0,X),Lt=mt.slice(X);for(He=X;He<286;++He)zt[He]=0;for(He=Y;He<30;++He)Lt[He]=0;return ur=En(zt,at,286),Yr=En(Lt,yt,30),J}function Bt(q,J){if(q[0]==3&&!(q[1]&3))return[Ro(J),2];for(var X=0,Y=0,Z=IE(J||1<<18),ee=0,ge=Z.length>>>0,Ce=0,ve=0;(Y&1)==0;){if(Y=Le(q,X),X+=3,Y>>>1)Y>>1==1?(Ce=9,ve=5):(X=ut(q,X),Ce=ur,ve=Yr);else{X&7&&(X+=8-(X&7));var _e=q[X>>>3]|q[(X>>>3)+1]<<8;if(X+=32,_e>0)for(!J&&ge<ee+_e&&(Z=tr(Z,ee+_e),ge=Z.length);_e-- >0;)Z[ee++]=q[X>>>3],X+=8;continue}for(;;){!J&&ge<ee+32767&&(Z=tr(Z,ee+32767),ge=Z.length);var Ee=bt(q,X,Ce),je=Y>>>1==1?Ot[Ee]:at[Ee];if(X+=je&15,je>>>=4,(je>>>8&255)===0)Z[ee++]=je;else{if(je==256)break;je-=257;var He=je<8?0:je-4>>2;He>5&&(He=0);var Xe=ee+re[je];He>0&&(Xe+=bt(q,X,He),X+=He),Ee=bt(q,X,ve),je=Y>>>1==1?fe[Ee]:yt[Ee],X+=je&15,je>>>=4;var Ue=je<4?0:je-2>>1,Be=xe[je];for(Ue>0&&(Be+=bt(q,X,Ue),X+=Ue),!J&&ge<Xe&&(Z=tr(Z,Xe+100),ge=Z.length);ee<Xe;)Z[ee]=Z[ee-Be],++ee}}}return J?[Z,X+7>>>3]:[Z.slice(0,ee),X+7>>>3]}function Ht(q,J){var X=q.slice(q.l||0),Y=Bt(X,J);return q.l+=Y[1],Y[0]}function wn(q,J){if(q)typeof console<"u"&&console.error(J);else throw new Error(J)}function kn(q,J){var X=q;rs(X,0);var Y=[],Z=[],ee={FileIndex:Y,FullPaths:Z};N(ee,{root:J.root});for(var ge=X.length-4;(X[ge]!=80||X[ge+1]!=75||X[ge+2]!=5||X[ge+3]!=6)&&ge>=0;)--ge;X.l=ge+4,X.l+=4;var Ce=X.read_shift(2);X.l+=6;var ve=X.read_shift(4);for(X.l=ve,ge=0;ge<Ce;++ge){X.l+=20;var _e=X.read_shift(4),Ee=X.read_shift(4),je=X.read_shift(2),He=X.read_shift(2),Xe=X.read_shift(2);X.l+=8;var Ue=X.read_shift(4),Be=u(X.slice(X.l+je,X.l+je+He));X.l+=je+He+Xe;var mt=X.l;X.l=Ue+4,Br(X,_e,Ee,ee,Be),X.l=mt}return ee}function Br(q,J,X,Y,Z){q.l+=2;var ee=q.read_shift(2),ge=q.read_shift(2),Ce=o(q);if(ee&8257)throw new Error("Unsupported ZIP encryption");for(var ve=q.read_shift(4),_e=q.read_shift(4),Ee=q.read_shift(4),je=q.read_shift(2),He=q.read_shift(2),Xe="",Ue=0;Ue<je;++Ue)Xe+=String.fromCharCode(q[q.l++]);if(He){var Be=u(q.slice(q.l,q.l+He));(Be[21589]||{}).mt&&(Ce=Be[21589].mt),((Z||{})[21589]||{}).mt&&(Ce=Z[21589].mt)}q.l+=He;var mt=q.slice(q.l,q.l+_e);switch(ge){case 8:mt=V(q,Ee);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ge)}var zt=!1;ee&8&&(ve=q.read_shift(4),ve==134695760&&(ve=q.read_shift(4),zt=!0),_e=q.read_shift(4),Ee=q.read_shift(4)),_e!=J&&wn(zt,"Bad compressed size: "+J+" != "+_e),Ee!=X&&wn(zt,"Bad uncompressed size: "+X+" != "+Ee),Wt(Y,Xe,mt,{unsafe:!0,mt:Ce})}function bn(q,J){var X=J||{},Y=[],Z=[],ee=Ae(1),ge=X.compression?8:0,Ce=0,ve=0,_e=0,Ee=0,je=0,He=q.FullPaths[0],Xe=He,Ue=q.FileIndex[0],Be=[],mt=0;for(ve=1;ve<q.FullPaths.length;++ve)if(Xe=q.FullPaths[ve].slice(He.length),Ue=q.FileIndex[ve],!(!Ue.size||!Ue.content||Xe=="Sh33tJ5")){var zt=Ee,Lt=Ae(Xe.length);for(_e=0;_e<Xe.length;++_e)Lt.write_shift(1,Xe.charCodeAt(_e)&127);Lt=Lt.slice(0,Lt.l),Be[je]=xj.buf(Ue.content,0);var qt=Ue.content;ge==8&&(qt=P(qt)),ee=Ae(30),ee.write_shift(4,67324752),ee.write_shift(2,20),ee.write_shift(2,Ce),ee.write_shift(2,ge),Ue.mt?i(ee,Ue.mt):ee.write_shift(4,0),ee.write_shift(-4,Be[je]),ee.write_shift(4,qt.length),ee.write_shift(4,Ue.content.length),ee.write_shift(2,Lt.length),ee.write_shift(2,0),Ee+=ee.length,Y.push(ee),Ee+=Lt.length,Y.push(Lt),Ee+=qt.length,Y.push(qt),ee=Ae(46),ee.write_shift(4,33639248),ee.write_shift(2,0),ee.write_shift(2,20),ee.write_shift(2,Ce),ee.write_shift(2,ge),ee.write_shift(4,0),ee.write_shift(-4,Be[je]),ee.write_shift(4,qt.length),ee.write_shift(4,Ue.content.length),ee.write_shift(2,Lt.length),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(4,0),ee.write_shift(4,zt),mt+=ee.l,Z.push(ee),mt+=Lt.length,Z.push(Lt),++je}return ee=Ae(22),ee.write_shift(4,101010256),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,je),ee.write_shift(2,je),ee.write_shift(4,mt),ee.write_shift(4,Ee),ee.write_shift(2,0),sn([sn(Y),sn(Z),ee])}var qn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Dn(q,J){if(q.ctype)return q.ctype;var X=q.name||"",Y=X.match(/\.([^\.]+)$/);return Y&&qn[Y[1]]||J&&(Y=(X=J).match(/[\.\\]([^\.\\])+$/),Y&&qn[Y[1]])?qn[Y[1]]:"application/octet-stream"}function vi(q){for(var J=Ru(q),X=[],Y=0;Y<J.length;Y+=76)X.push(J.slice(Y,Y+76));return X.join(`\r
`)+`\r
`}function us(q){var J=q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(_e){var Ee=_e.charCodeAt(0).toString(16).toUpperCase();return"="+(Ee.length==1?"0"+Ee:Ee)});J=J.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),J.charAt(0)==`
`&&(J="=0D"+J.slice(1)),J=J.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var X=[],Y=J.split(`\r
`),Z=0;Z<Y.length;++Z){var ee=Y[Z];if(ee.length==0){X.push("");continue}for(var ge=0;ge<ee.length;){var Ce=76,ve=ee.slice(ge,ge+Ce);ve.charAt(Ce-1)=="="?Ce--:ve.charAt(Ce-2)=="="?Ce-=2:ve.charAt(Ce-3)=="="&&(Ce-=3),ve=ee.slice(ge,ge+Ce),ge+=Ce,ge<ee.length&&(ve+="="),X.push(ve)}}return X.join(`\r
`)}function yi(q){for(var J=[],X=0;X<q.length;++X){for(var Y=q[X];X<=q.length&&Y.charAt(Y.length-1)=="=";)Y=Y.slice(0,Y.length-1)+q[++X];J.push(Y)}for(var Z=0;Z<J.length;++Z)J[Z]=J[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(ee){return String.fromCharCode(parseInt(ee.slice(1),16))});return Vs(J.join(`\r
`))}function Gn(q,J,X){for(var Y="",Z="",ee="",ge,Ce=0;Ce<10;++Ce){var ve=J[Ce];if(!ve||ve.match(/^\s*$/))break;var _e=ve.match(/^(.*?):\s*([^\s].*)$/);if(_e)switch(_e[1].toLowerCase()){case"content-location":Y=_e[2].trim();break;case"content-type":ee=_e[2].trim();break;case"content-transfer-encoding":Z=_e[2].trim();break}}switch(++Ce,Z.toLowerCase()){case"base64":ge=Vs(Gi(J.slice(Ce).join("")));break;case"quoted-printable":ge=yi(J.slice(Ce));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var Ee=Wt(q,Y.slice(X.length),ge,{unsafe:!0});ee&&(Ee.ctype=ee)}function Gs(q,J){if(de(q.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var X=J&&J.root||"",Y=($t&&Buffer.isBuffer(q)?q.toString("binary"):de(q)).split(`\r
`),Z=0,ee="";for(Z=0;Z<Y.length;++Z)if(ee=Y[Z],!!/^Content-Location:/i.test(ee)&&(ee=ee.slice(ee.indexOf("file")),X||(X=ee.slice(0,ee.lastIndexOf("/")+1)),ee.slice(0,X.length)!=X))for(;X.length>0&&(X=X.slice(0,X.length-1),X=X.slice(0,X.lastIndexOf("/")+1),ee.slice(0,X.length)!=X););var ge=(Y[1]||"").match(/boundary="(.*?)"/);if(!ge)throw new Error("MAD cannot find boundary");var Ce="--"+(ge[1]||""),ve=[],_e=[],Ee={FileIndex:ve,FullPaths:_e};N(Ee);var je,He=0;for(Z=0;Z<Y.length;++Z){var Xe=Y[Z];Xe!==Ce&&Xe!==Ce+"--"||(He++&&Gn(Ee,Y.slice(je,Z),X),je=Z)}return Ee}function sr(q,J){var X=J||{},Y=X.boundary||"SheetJS";Y="------="+Y;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Y.slice(2)+'"',"","",""],ee=q.FullPaths[0],ge=ee,Ce=q.FileIndex[0],ve=1;ve<q.FullPaths.length;++ve)if(ge=q.FullPaths[ve].slice(ee.length),Ce=q.FileIndex[ve],!(!Ce.size||!Ce.content||ge=="Sh33tJ5")){ge=ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(mt){return"_x"+mt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(mt){return"_u"+mt.charCodeAt(0).toString(16)+"_"});for(var _e=Ce.content,Ee=$t&&Buffer.isBuffer(_e)?_e.toString("binary"):de(_e),je=0,He=Math.min(1024,Ee.length),Xe=0,Ue=0;Ue<=He;++Ue)(Xe=Ee.charCodeAt(Ue))>=32&&Xe<128&&++je;var Be=je>=He*4/5;Z.push(Y),Z.push("Content-Location: "+(X.root||"file:///C:/SheetJS/")+ge),Z.push("Content-Transfer-Encoding: "+(Be?"quoted-printable":"base64")),Z.push("Content-Type: "+Dn(Ce,ge)),Z.push(""),Z.push(Be?us(Ee):vi(Ee))}return Z.push(Y+`--\r
`),Z.join(`\r
`)}function Cs(q){var J={};return N(J,q),J}function Wt(q,J,X,Y){var Z=Y&&Y.unsafe;Z||N(q);var ee=!Z&&Zt.find(q,J);if(!ee){var ge=q.FullPaths[0];J.slice(0,ge.length)==ge?ge=J:(ge.slice(-1)!="/"&&(ge+="/"),ge=(ge+J).replace("//","/")),ee={name:s(J),type:2},q.FileIndex.push(ee),q.FullPaths.push(ge),Z||Zt.utils.cfb_gc(q)}return ee.content=X,ee.size=X?X.length:0,Y&&(Y.CLSID&&(ee.clsid=Y.CLSID),Y.mt&&(ee.mt=Y.mt),Y.ct&&(ee.ct=Y.ct)),ee}function Lr(q,J){N(q);var X=Zt.find(q,J);if(X){for(var Y=0;Y<q.FileIndex.length;++Y)if(q.FileIndex[Y]==X)return q.FileIndex.splice(Y,1),q.FullPaths.splice(Y,1),!0}return!1}function ds(q,J,X){N(q);var Y=Zt.find(q,J);if(Y){for(var Z=0;Z<q.FileIndex.length;++Z)if(q.FileIndex[Z]==Y)return q.FileIndex[Z].name=s(X),q.FullPaths[Z]=X,!0}return!1}function Ks(q){T(q,!0)}return e.find=D,e.read=W,e.parse=m,e.write=Q,e.writeFile=oe,e.utils={cfb_new:Cs,cfb_add:Wt,cfb_del:Lr,cfb_mov:ds,cfb_gc:Ks,ReadShift:uu,CheckField:oC,prep_blob:rs,bconcat:sn,use_zlib:M,_deflateRaw:Ge,_inflateRaw:Ht,consts:ie},e})();function vj(r){return typeof r=="string"?Dh(r):Array.isArray(r)?HF(r):r}function e0(r,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=Dh(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(r,e)}var n=t=="utf8"?Du(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,r);if(typeof Blob<"u"){var s=new Blob([vj(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,r);if(typeof saveAs<"u")return saveAs(s,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:r,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=r,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var u=File(r);return u.open("w"),u.encoding="binary",Array.isArray(e)&&(e=Zu(e)),u.write(e),u.close(),e}catch(d){if(!d.message||!d.message.match(/onstruct/))throw d}throw new Error("cannot save file "+r)}function un(r){for(var e=Object.keys(r),t=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(r,e[n])&&t.push(e[n]);return t}function BE(r,e){for(var t=[],n=un(r),s=0;s!==n.length;++s)t[r[n[s]][e]]==null&&(t[r[n[s]][e]]=n[s]);return t}function r1(r){for(var e=[],t=un(r),n=0;n!==t.length;++n)e[r[t[n]]]=t[n];return e}function jh(r){for(var e=[],t=un(r),n=0;n!==t.length;++n)e[r[t[n]]]=parseInt(t[n],10);return e}function yj(r){for(var e=[],t=un(r),n=0;n!==t.length;++n)e[r[t[n]]]==null&&(e[r[t[n]]]=[]),e[r[t[n]]].push(t[n]);return e}var qf=new Date(1899,11,30,0,0,0);function Hn(r,e){var t=r.getTime(),n=qf.getTime()+(r.getTimezoneOffset()-qf.getTimezoneOffset())*6e4;return(t-n)/(1440*60*1e3)}var HT=new Date,_j=qf.getTime()+(HT.getTimezoneOffset()-qf.getTimezoneOffset())*6e4,LE=HT.getTimezoneOffset();function WT(r){var e=new Date;return e.setTime(r*24*60*60*1e3+_j),e.getTimezoneOffset()!==LE&&e.setTime(e.getTime()+(e.getTimezoneOffset()-LE)*6e4),e}var ME=new Date("2017-02-19T19:06:09.000Z"),qT=isNaN(ME.getFullYear())?new Date("2/19/17"):ME,Ej=qT.getFullYear()==2017;function Rn(r,e){var t=new Date(r);if(Ej)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(r instanceof Date)return r;if(qT.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return r.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var s=r.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return r.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Oh(r,e){if($t&&Buffer.isBuffer(r))return r.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[]/g,function(i){return t[i]||i})}catch{}for(var n=[],s=0;s!=r.length;++s)n.push(String.fromCharCode(r[s]));return n.join("")}function Wn(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=Wn(r[t]));return e}function vr(r,e){for(var t="";t.length<e;)t+=r;return t}function Ui(r){var e=Number(r);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(r))return e;var t=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return t=-t,i}),!isNaN(e=Number(n)))?e/t:e}var wj=["january","february","march","april","may","june","july","august","september","october","november","december"];function ku(r){var e=new Date(r),t=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return t;var o=r.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&wj.indexOf(o)==-1)return t}else if(o.match(/[a-z]/))return t;return n<0||n>8099?t:(s>0||i>1)&&n!=101?e:r.match(/[^-0-9:,\/\\]/)?t:e}function Tt(r,e,t){if(r.FullPaths){if(typeof t=="string"){var n;return $t?n=Yi(t):n=WF(t),Zt.utils.cfb_add(r,e,n)}Zt.utils.cfb_add(r,e,t)}else r.file(e,t)}function n1(){return Zt.utils.cfb_new()}var Dr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,bj={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},s1=r1(bj),i1=/[&<>'"]/g,Tj=/[\u0000-\u0008\u000b-\u001f]/g;function Yt(r){var e=r+"";return e.replace(i1,function(t){return s1[t]}).replace(Tj,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function VE(r){return Yt(r).replace(/ /g,"_x0020_")}var GT=/[\u0000-\u001f]/g;function Cj(r){var e=r+"";return e.replace(i1,function(t){return s1[t]}).replace(/\n/g,"<br/>").replace(GT,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function Aj(r){var e=r+"";return e.replace(i1,function(t){return s1[t]}).replace(GT,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function Sj(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function Nj(r){switch(r){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function tg(r){for(var e="",t=0,n=0,s=0,i=0,o=0,u=0;t<r.length;){if(n=r.charCodeAt(t++),n<128){e+=String.fromCharCode(n);continue}if(s=r.charCodeAt(t++),n>191&&n<224){o=(n&31)<<6,o|=s&63,e+=String.fromCharCode(o);continue}if(i=r.charCodeAt(t++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=r.charCodeAt(t++),u=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(u>>>10&1023)),e+=String.fromCharCode(56320+(u&1023))}return e}function UE(r){var e=Ro(2*r.length),t,n,s=1,i=0,o=0,u;for(n=0;n<r.length;n+=s)s=1,(u=r.charCodeAt(n))<128?t=u:u<224?(t=(u&31)*64+(r.charCodeAt(n+1)&63),s=2):u<240?(t=(u&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),s=3):(s=4,t=(u&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),t-=65536,o=55296+(t>>>10&1023),t=56320+(t&1023)),o!==0&&(e[i++]=o&255,e[i++]=o>>>8,o=0),e[i++]=t%256,e[i++]=t>>>8;return e.slice(0,i).toString("ucs2")}function zE(r){return Yi(r,"binary").toString("utf8")}var Cd="foo bar baz",cu=$t&&(zE(Cd)==tg(Cd)&&zE||UE(Cd)==tg(Cd)&&UE)||tg,Du=$t?function(r){return Yi(r,"utf8").toString("binary")}:function(r){for(var e=[],t=0,n=0,s=0;t<r.length;)switch(n=r.charCodeAt(t++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=r.charCodeAt(t++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Ij=(function(){var r=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<r.length;++s)n=n.replace(r[s][0],r[s][1]);return n}})(),KT=/(^\s|\s$|\n)/;function an(r,e){return"<"+r+(e.match(KT)?' xml:space="preserve"':"")+">"+e+"</"+r+">"}function Pu(r){return un(r).map(function(e){return" "+e+'="'+r[e]+'"'}).join("")}function $e(r,e,t){return"<"+r+(t!=null?Pu(t):"")+(e!=null?(e.match(KT)?' xml:space="preserve"':"")+">"+e+"</"+r:"/")+">"}function Vg(r,e){try{return r.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function Rj(r,e){switch(typeof r){case"string":var t=$e("vt:lpwstr",Yt(r));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return $e((r|0)==r?"vt:i4":"vt:r8",Yt(String(r)));case"boolean":return $e("vt:bool",r?"true":"false")}if(r instanceof Date)return $e("vt:filetime",Vg(r));throw new Error("Unable to serialize "+r)}var Wr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},lc=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ss={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function kj(r,e){for(var t=1-2*(r[e+7]>>>7),n=((r[e+7]&127)<<4)+(r[e+6]>>>4&15),s=r[e+6]&15,i=5;i>=0;--i)s=s*256+r[e+i];return n==2047?s==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),t*Math.pow(2,n-52)*s)}function Dj(r,e,t){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,o=n?-e:e;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var u=0;u<=5;++u,i/=256)r[t+u]=i&255;r[t+6]=(s&15)<<4|i&15,r[t+7]=s>>4|n}var $E=function(r){for(var e=[],t=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var s=0,i=r[0][n].length;s<i;s+=t)e.push.apply(e,r[0][n].slice(s,s+t));return e},HE=$t?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(e){return Buffer.isBuffer(e)?e:Yi(e)})):$E(r)}:$E,WE=function(r,e,t){for(var n=[],s=e;s<t;s+=2)n.push(String.fromCharCode(Zc(r,s)));return n.join("").replace(lu,"")},a1=$t?function(r,e,t){return Buffer.isBuffer(r)?r.toString("utf16le",e,t).replace(lu,""):WE(r,e,t)}:WE,qE=function(r,e,t){for(var n=[],s=e;s<e+t;++s)n.push(("0"+r[s].toString(16)).slice(-2));return n.join("")},XT=$t?function(r,e,t){return Buffer.isBuffer(r)?r.toString("hex",e,e+t):qE(r,e,t)}:qE,GE=function(r,e,t){for(var n=[],s=e;s<t;s++)n.push(String.fromCharCode(Fl(r,s)));return n.join("")},t0=$t?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):GE(e,t,n)}:GE,YT=function(r,e){var t=is(r,e);return t>0?t0(r,e+4,e+4+t-1):""},QT=YT,JT=function(r,e){var t=is(r,e);return t>0?t0(r,e+4,e+4+t-1):""},ZT=JT,eC=function(r,e){var t=2*is(r,e);return t>0?t0(r,e+4,e+4+t-1):""},tC=eC,rC=function(e,t){var n=is(e,t);return n>0?a1(e,t+4,t+4+n):""},nC=rC,sC=function(r,e){var t=is(r,e);return t>0?t0(r,e+4,e+4+t):""},iC=sC,aC=function(r,e){return kj(r,e)},Gf=aC,o1=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};$t&&(QT=function(e,t){if(!Buffer.isBuffer(e))return YT(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},ZT=function(e,t){if(!Buffer.isBuffer(e))return JT(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},tC=function(e,t){if(!Buffer.isBuffer(e))return eC(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},nC=function(e,t){if(!Buffer.isBuffer(e))return rC(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},iC=function(e,t){if(!Buffer.isBuffer(e))return sC(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},Gf=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):aC(e,t)},o1=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Fl=function(r,e){return r[e]},Zc=function(r,e){return r[e+1]*256+r[e]},Pj=function(r,e){var t=r[e+1]*256+r[e];return t<32768?t:(65535-t+1)*-1},is=function(r,e){return r[e+3]*(1<<24)+(r[e+2]<<16)+(r[e+1]<<8)+r[e]},go=function(r,e){return r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]},Fj=function(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]};function uu(r,e){var t="",n,s,i=[],o,u,d,h;switch(e){case"dbcs":if(h=this.l,$t&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*r).toString("utf16le");else for(d=0;d<r;++d)t+=String.fromCharCode(Zc(this,h)),h+=2;r*=2;break;case"utf8":t=t0(this,this.l,this.l+r);break;case"utf16le":r*=2,t=a1(this,this.l,this.l+r);break;case"wstr":return uu.call(this,r,"dbcs");case"lpstr-ansi":t=QT(this,this.l),r=4+is(this,this.l);break;case"lpstr-cp":t=ZT(this,this.l),r=4+is(this,this.l);break;case"lpwstr":t=tC(this,this.l),r=4+2*is(this,this.l);break;case"lpp4":r=4+is(this,this.l),t=nC(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+is(this,this.l),t=iC(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,t="";(o=Fl(this,this.l+r++))!==0;)i.push(wd(o));t=i.join("");break;case"_wstr":for(r=0,t="";(o=Zc(this,this.l+r))!==0;)i.push(wd(o)),r+=2;r+=2,t=i.join("");break;case"dbcs-cont":for(t="",h=this.l,d=0;d<r;++d){if(this.lens&&this.lens.indexOf(h)!==-1)return o=Fl(this,h),this.l=h+1,u=uu.call(this,r-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+u;i.push(wd(Zc(this,h))),h+=2}t=i.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(t="",h=this.l,d=0;d!=r;++d){if(this.lens&&this.lens.indexOf(h)!==-1)return o=Fl(this,h),this.l=h+1,u=uu.call(this,r-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+u;i.push(wd(Fl(this,h))),h+=1}t=i.join("");break;default:switch(r){case 1:return n=Fl(this,this.l),this.l++,n;case 2:return n=(e==="i"?Pj:Zc)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(r>0?go:Fj)(this,this.l),this.l+=4,n):(s=is(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return r==8?s=Gf(this,this.l):s=Gf([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;r=8;case 16:t=XT(this,this.l,r);break}}return this.l+=r,t}var jj=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24&255},Oj=function(r,e,t){r[t]=e&255,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255},Bj=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255};function Lj(r,e,t){var n=0,s=0;if(t==="dbcs"){for(s=0;s!=e.length;++s)Bj(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(t==="hex"){for(;s<r;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(t==="utf16le"){var i=Math.min(this.l+r,this.length);for(s=0;s<Math.min(e.length,r);++s){var o=e.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,jj(this,e,this.l);break;case 8:if(n=8,t==="f"){Dj(this,e,this.l);break}case 16:break;case-4:n=4,Oj(this,e,this.l);break}return this.l+=n,this}function oC(r,e){var t=XT(this,this.l,r.length>>1);if(t!==r)throw new Error(e+"Expected "+r+" saw "+t);this.l+=r.length>>1}function rs(r,e){r.l=e,r.read_shift=uu,r.chk=oC,r.write_shift=Lj}function xi(r,e){r.l+=e}function Ae(r){var e=Ro(r);return rs(e,0),e}function $n(){var r=[],e=$t?256:2048,t=function(h){var m=Ae(h);return rs(m,0),m},n=t(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n),n=null)},i=function(h){return n&&h<n.length-n.l?n:(s(),n=t(Math.max(h+1,e)))},o=function(){return s(),sn(r)},u=function(h){s(),n=h,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:u,end:o,_bufs:r}}function ke(r,e,t,n){var s=+e,i;if(!isNaN(s)){n||(n=kM[s].p||(t||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=r.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var u=0;u!=4;++u)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&o1(t)&&r.push(t)}}function du(r,e,t){var n=Wn(r);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function KE(r,e,t){var n=Wn(r);return n.s=du(n.s,e.s,t),n.e=du(n.e,e.s,t),n}function fu(r,e){if(r.cRel&&r.c<0)for(r=Wn(r);r.c<0;)r.c+=e>8?16384:256;if(r.rRel&&r.r<0)for(r=Wn(r);r.r<0;)r.r+=e>8?1048576:e>5?65536:16384;var t=Jt(r);return!r.cRel&&r.cRel!=null&&(t=Uj(t)),!r.rRel&&r.rRel!=null&&(t=Mj(t)),t}function rg(r,e){return r.s.r==0&&!r.s.rRel&&r.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+vn(r.s.c)+":"+(r.e.cRel?"":"$")+vn(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(e.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+cn(r.s.r)+":"+(r.e.rRel?"":"$")+cn(r.e.r):fu(r.s,e.biff)+":"+fu(r.e,e.biff)}function l1(r){return parseInt(Vj(r),10)-1}function cn(r){return""+(r+1)}function Mj(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Vj(r){return r.replace(/\$(\d+)$/,"$1")}function c1(r){for(var e=zj(r),t=0,n=0;n!==e.length;++n)t=26*t+e.charCodeAt(n)-64;return t-1}function vn(r){if(r<0)throw new Error("invalid column "+r);var e="";for(++r;r;r=Math.floor((r-1)/26))e=String.fromCharCode((r-1)%26+65)+e;return e}function Uj(r){return r.replace(/^([A-Z])/,"$$$1")}function zj(r){return r.replace(/^\$([A-Z])/,"$1")}function $j(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function qr(r){for(var e=0,t=0,n=0;n<r.length;++n){var s=r.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(t=26*t+(s-64))}return{c:t-1,r:e-1}}function Jt(r){for(var e=r.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(r.r+1)}function cs(r){var e=r.indexOf(":");return e==-1?{s:qr(r),e:qr(r)}:{s:qr(r.slice(0,e)),e:qr(r.slice(e+1))}}function kr(r,e){return typeof e>"u"||typeof e=="number"?kr(r.s,r.e):(typeof r!="string"&&(r=Jt(r)),typeof e!="string"&&(e=Jt(e)),r==e?r:r+":"+e)}function cr(r){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,s=0,i=r.length;for(t=0;n<i&&!((s=r.charCodeAt(n)-64)<1||s>26);++n)t=26*t+s;for(e.s.c=--t,t=0;n<i&&!((s=r.charCodeAt(n)-48)<0||s>9);++n)t=10*t+s;if(e.s.r=--t,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,t=0;n!=i&&!((s=r.charCodeAt(n)-64)<1||s>26);++n)t=26*t+s;for(e.e.c=--t,t=0;n!=i&&!((s=r.charCodeAt(n)-48)<0||s>9);++n)t=10*t+s;return e.e.r=--t,e}function XE(r,e){var t=r.t=="d"&&e instanceof Date;if(r.z!=null)try{return r.w=Va(r.z,t?Hn(e):e)}catch{}try{return r.w=Va((r.XF||{}).numFmtId||(t?14:0),t?Hn(e):e)}catch{return""+e}}function Ki(r,e,t){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&t&&t.dateNF&&(r.z=t.dateNF),r.t=="e"?r0[r.v]||r.v:e==null?XE(r,r.v):XE(r,e))}function $o(r,e){var t=e&&e.sheet?e.sheet:"Sheet1",n={};return n[t]=r,{SheetNames:[t],Sheets:n}}function lC(r,e,t){var n=t||{},s=r?Array.isArray(r):n.dense,i=r||(s?[]:{}),o=0,u=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var d=typeof n.origin=="string"?qr(n.origin):n.origin;o=d.r,u=d.c}i["!ref"]||(i["!ref"]="A1:A1")}var h={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var m=cr(i["!ref"]);h.s.c=m.s.c,h.s.r=m.s.r,h.e.c=Math.max(h.e.c,m.e.c),h.e.r=Math.max(h.e.r,m.e.r),o==-1&&(h.e.r=o=m.e.r+1)}for(var v=0;v!=e.length;++v)if(e[v]){if(!Array.isArray(e[v]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=e[v].length;++x)if(!(typeof e[v][x]>"u")){var y={v:e[v][x]},E=o+v,_=u+x;if(h.s.r>E&&(h.s.r=E),h.s.c>_&&(h.s.c=_),h.e.r<E&&(h.e.r=E),h.e.c<_&&(h.e.c=_),e[v][x]&&typeof e[v][x]=="object"&&!Array.isArray(e[v][x])&&!(e[v][x]instanceof Date))y=e[v][x];else if(Array.isArray(y.v)&&(y.f=e[v][x][1],y.v=y.v[0]),y.v===null)if(y.f)y.t="n";else if(n.nullError)y.t="e",y.v=0;else if(n.sheetStubs)y.t="z";else continue;else typeof y.v=="number"?y.t="n":typeof y.v=="boolean"?y.t="b":y.v instanceof Date?(y.z=n.dateNF||yr[14],n.cellDates?(y.t="d",y.w=Va(y.z,Hn(y.v))):(y.t="n",y.v=Hn(y.v),y.w=Va(y.z,y.v))):y.t="s";if(s)i[E]||(i[E]=[]),i[E][_]&&i[E][_].z&&(y.z=i[E][_].z),i[E][_]=y;else{var w=Jt({c:_,r:E});i[w]&&i[w].z&&(y.z=i[w].z),i[w]=y}}}return h.s.c<1e7&&(i["!ref"]=kr(h)),i}function cc(r,e){return lC(null,r,e)}function Hj(r){return r.read_shift(4,"i")}function zs(r,e){return e||(e=Ae(4)),e.write_shift(4,r),e}function yn(r){var e=r.read_shift(4);return e===0?"":r.read_shift(e,"dbcs")}function Gr(r,e){var t=!1;return e==null&&(t=!0,e=Ae(4+2*r.length)),e.write_shift(4,r.length),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}function Wj(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function qj(r,e){return e||(e=Ae(4)),e.write_shift(2,0),e.write_shift(2,0),e}function u1(r,e){var t=r.l,n=r.read_shift(1),s=yn(r),i=[],o={t:s,h:s};if((n&1)!==0){for(var u=r.read_shift(4),d=0;d!=u;++d)i.push(Wj(r));o.r=i}else o.r=[{ich:0,ifnt:0}];return r.l=t+e,o}function Gj(r,e){var t=!1;return e==null&&(t=!0,e=Ae(15+4*r.t.length)),e.write_shift(1,0),Gr(r.t,e),t?e.slice(0,e.l):e}var Kj=u1;function Xj(r,e){var t=!1;return e==null&&(t=!0,e=Ae(23+4*r.t.length)),e.write_shift(1,1),Gr(r.t,e),e.write_shift(4,1),qj({},e),t?e.slice(0,e.l):e}function Ts(r){var e=r.read_shift(4),t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:e,iStyleRef:t}}function Ho(r,e){return e==null&&(e=Ae(8)),e.write_shift(-4,r.c),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}function Wo(r){var e=r.read_shift(2);return e+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:e}}function qo(r,e){return e==null&&(e=Ae(4)),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}var Yj=yn,cC=Gr;function d1(r){var e=r.read_shift(4);return e===0||e===4294967295?"":r.read_shift(e,"dbcs")}function Kf(r,e){var t=!1;return e==null&&(t=!0,e=Ae(127)),e.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}var Qj=yn,Ug=d1,f1=Kf;function uC(r){var e=r.slice(r.l,r.l+4),t=e[0]&1,n=e[0]&2;r.l+=4;var s=n===0?Gf([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):go(e,0)>>2;return t?s/100:s}function dC(r,e){e==null&&(e=Ae(4));var t=0,n=0,s=r*100;if(r==(r|0)&&r>=-536870912&&r<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,t=1),n)e.write_shift(-4,((t?s:r)<<2)+(t+2));else throw new Error("unsupported RkNumber "+r)}function fC(r){var e={s:{},e:{}};return e.s.r=r.read_shift(4),e.e.r=r.read_shift(4),e.s.c=r.read_shift(4),e.e.c=r.read_shift(4),e}function Jj(r,e){return e||(e=Ae(16)),e.write_shift(4,r.s.r),e.write_shift(4,r.e.r),e.write_shift(4,r.s.c),e.write_shift(4,r.e.c),e}var Go=fC,uc=Jj;function dc(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function ko(r,e){return(e||Ae(8)).write_shift(8,r,"f")}function Zj(r){var e={},t=r.read_shift(1),n=t>>>1,s=r.read_shift(1),i=r.read_shift(2,"i"),o=r.read_shift(1),u=r.read_shift(1),d=r.read_shift(1);switch(r.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var h=l9[s];h&&(e.rgb=aw(h));break;case 2:e.rgb=aw([o,u,d]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function Xf(r,e){if(e||(e=Ae(8)),!r||r.auto)return e.write_shift(4,0),e.write_shift(4,0),e;r.index!=null?(e.write_shift(1,2),e.write_shift(1,r.index)):r.theme!=null?(e.write_shift(1,6),e.write_shift(1,r.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=r.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!r.rgb||r.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=r.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function e9(r){var e=r.read_shift(1);r.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function t9(r,e){e||(e=Ae(2));var t=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var hC=2,ts=3,Ad=11,Yf=19,Sd=64,r9=65,n9=71,s9=4108,i9=4126,rn=80,YE={1:{n:"CodePage",t:hC},2:{n:"Category",t:rn},3:{n:"PresentationFormat",t:rn},4:{n:"ByteCount",t:ts},5:{n:"LineCount",t:ts},6:{n:"ParagraphCount",t:ts},7:{n:"SlideCount",t:ts},8:{n:"NoteCount",t:ts},9:{n:"HiddenCount",t:ts},10:{n:"MultimediaClipCount",t:ts},11:{n:"ScaleCrop",t:Ad},12:{n:"HeadingPairs",t:s9},13:{n:"TitlesOfParts",t:i9},14:{n:"Manager",t:rn},15:{n:"Company",t:rn},16:{n:"LinksUpToDate",t:Ad},17:{n:"CharacterCount",t:ts},19:{n:"SharedDoc",t:Ad},22:{n:"HyperlinksChanged",t:Ad},23:{n:"AppVersion",t:ts,p:"version"},24:{n:"DigSig",t:r9},26:{n:"ContentType",t:rn},27:{n:"ContentStatus",t:rn},28:{n:"Language",t:rn},29:{n:"Version",t:rn},255:{},2147483648:{n:"Locale",t:Yf},2147483651:{n:"Behavior",t:Yf},1919054434:{}},QE={1:{n:"CodePage",t:hC},2:{n:"Title",t:rn},3:{n:"Subject",t:rn},4:{n:"Author",t:rn},5:{n:"Keywords",t:rn},6:{n:"Comments",t:rn},7:{n:"Template",t:rn},8:{n:"LastAuthor",t:rn},9:{n:"RevNumber",t:rn},10:{n:"EditTime",t:Sd},11:{n:"LastPrinted",t:Sd},12:{n:"CreatedDate",t:Sd},13:{n:"ModifiedDate",t:Sd},14:{n:"PageCount",t:ts},15:{n:"WordCount",t:ts},16:{n:"CharCount",t:ts},17:{n:"Thumbnail",t:n9},18:{n:"Application",t:rn},19:{n:"DocSecurity",t:ts},255:{},2147483648:{n:"Locale",t:Yf},2147483651:{n:"Behavior",t:Yf},1919054434:{}};function a9(r){return r.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var o9=a9([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),l9=Wn(o9),r0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},c9={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Nd={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function mC(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function pC(r,e){var t=yj(c9),n=[],s;n[n.length]=Dr,n[n.length]=$e("Types",null,{xmlns:Wr.CT,"xmlns:xsd":Wr.xsd,"xmlns:xsi":Wr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(d){return $e("Default",null,{Extension:d[0],ContentType:d[1]})}));var i=function(d){r[d]&&r[d].length>0&&(s=r[d][0],n[n.length]=$e("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Nd[d][e.bookType]||Nd[d].xlsx}))},o=function(d){(r[d]||[]).forEach(function(h){n[n.length]=$e("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:Nd[d][e.bookType]||Nd[d].xlsx})})},u=function(d){(r[d]||[]).forEach(function(h){n[n.length]=$e("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:t[d][0]})})};return i("workbooks"),o("sheets"),o("charts"),u("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(u),u("vba"),u("comments"),u("threadedcomments"),u("drawings"),o("metadata"),u("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Vt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function gC(r){var e=r.lastIndexOf("/");return r.slice(0,e+1)+"_rels/"+r.slice(e+1)+".rels"}function Hl(r){var e=[Dr,$e("Relationships",null,{xmlns:Wr.RELS})];return un(r["!id"]).forEach(function(t){e[e.length]=$e("Relationship",null,r["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Xt(r,e,t,n,s,i){if(s||(s={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),e<0)for(e=r["!idx"];r["!id"]["rId"+e];++e);if(r["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=t,[Vt.HLINK,Vt.XPATH,Vt.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),r["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return r["!id"][s.Id]=s,r[("/"+s.Target).replace("//","/")]=s,e}function u9(r){var e=[Dr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<r.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+r[t][0]+'" manifest:media-type="'+r[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function JE(r,e,t){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function d9(r,e){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function f9(r){var e=[Dr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=r.length;++t)e.push(JE(r[t][0],r[t][1])),e.push(d9("",r[t][0]));return e.push(JE("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function xC(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Uf.version+"</meta:generator></office:meta></office:document-meta>"}var _o=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function ng(r,e,t,n,s){s[r]!=null||e==null||e===""||(s[r]=e,e=Yt(e),n[n.length]=t?$e(r,e,t):an(r,e))}function vC(r,e){var t=e||{},n=[Dr,$e("cp:coreProperties",null,{"xmlns:cp":Wr.CORE_PROPS,"xmlns:dc":Wr.dc,"xmlns:dcterms":Wr.dcterms,"xmlns:dcmitype":Wr.dcmitype,"xmlns:xsi":Wr.xsi})],s={};if(!r&&!t.Props)return n.join("");r&&(r.CreatedDate!=null&&ng("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:Vg(r.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),r.ModifiedDate!=null&&ng("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:Vg(r.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=_o.length;++i){var o=_o[i],u=t.Props&&t.Props[o[1]]!=null?t.Props[o[1]]:r?r[o[1]]:null;u===!0?u="1":u===!1?u="0":typeof u=="number"&&(u=String(u)),u!=null&&ng(o[0],u,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Wl=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],yC=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function _C(r){var e=[],t=$e;return r||(r={}),r.Application="SheetJS",e[e.length]=Dr,e[e.length]=$e("Properties",null,{xmlns:Wr.EXT_PROPS,"xmlns:vt":Wr.vt}),Wl.forEach(function(n){if(r[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Yt(String(r[n[1]]));break;case"bool":s=r[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=t(n[0],s))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",r.SheetNames.map(function(n){return"<vt:lpstr>"+Yt(n)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function EC(r){var e=[Dr,$e("Properties",null,{xmlns:Wr.CUST_PROPS,"xmlns:vt":Wr.vt})];if(!r)return e.join("");var t=1;return un(r).forEach(function(s){++t,e[e.length]=$e("property",Rj(r[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Yt(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var ZE={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function h9(r,e){var t=[];return un(ZE).map(function(n){for(var s=0;s<_o.length;++s)if(_o[s][1]==n)return _o[s];for(s=0;s<Wl.length;++s)if(Wl[s][1]==n)return Wl[s];throw n}).forEach(function(n){if(r[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:r[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),t.push(an(ZE[n[1]]||n[1],s))}}),$e("DocumentProperties",t.join(""),{xmlns:ss.o})}function m9(r,e){var t=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return r&&un(r).forEach(function(i){if(Object.prototype.hasOwnProperty.call(r,i)){for(var o=0;o<_o.length;++o)if(i==_o[o][1])return;for(o=0;o<Wl.length;++o)if(i==Wl[o][1])return;for(o=0;o<t.length;++o)if(i==t[o])return;var u=r[i],d="string";typeof u=="number"?(d="float",u=String(u)):u===!0||u===!1?(d="boolean",u=u?"1":"0"):u=String(u),s.push($e(VE(i),u,{"dt:dt":d}))}}),e&&un(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)&&!(r&&Object.prototype.hasOwnProperty.call(r,i))){var o=e[i],u="string";typeof o=="number"?(u="float",o=String(o)):o===!0||o===!1?(u="boolean",o=o?"1":"0"):o instanceof Date?(u="dateTime.tz",o=o.toISOString()):o=String(o),s.push($e(VE(i),o,{"dt:dt":u}))}}),"<"+n+' xmlns="'+ss.o+'">'+s.join("")+"</"+n+">"}function p9(r){var e=typeof r=="string"?new Date(Date.parse(r)):r,t=e.getTime()/1e3+11644473600,n=t%Math.pow(2,32),s=(t-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=Ae(8);return o.write_shift(4,n),o.write_shift(4,s),o}function ew(r,e){var t=Ae(4),n=Ae(4);switch(t.write_shift(4,r==80?31:r),r){case 3:n.write_shift(-4,e);break;case 5:n=Ae(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=p9(e);break;case 31:case 80:for(n=Ae(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+e)}return sn([t,n])}var wC=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function g9(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function tw(r,e,t){var n=Ae(8),s=[],i=[],o=8,u=0,d=Ae(8),h=Ae(8);if(d.write_shift(4,2),d.write_shift(4,1200),h.write_shift(4,1),i.push(d),s.push(h),o+=8+d.length,!e){h=Ae(8),h.write_shift(4,0),s.unshift(h);var m=[Ae(4)];for(m[0].write_shift(4,r.length),u=0;u<r.length;++u){var v=r[u][0];for(d=Ae(8+2*(v.length+1)+(v.length%2?0:2)),d.write_shift(4,u+2),d.write_shift(4,v.length+1),d.write_shift(0,v,"dbcs");d.l!=d.length;)d.write_shift(1,0);m.push(d)}d=sn(m),i.unshift(d),o+=8+d.length}for(u=0;u<r.length;++u)if(!(e&&!e[r[u][0]])&&!(wC.indexOf(r[u][0])>-1||yC.indexOf(r[u][0])>-1)&&r[u][1]!=null){var x=r[u][1],y=0;if(e){y=+e[r[u][0]];var E=t[y];if(E.p=="version"&&typeof x=="string"){var _=x.split(".");x=(+_[0]<<16)+(+_[1]||0)}d=ew(E.t,x)}else{var w=g9(x);w==-1&&(w=31,x=String(x)),d=ew(w,x)}i.push(d),h=Ae(8),h.write_shift(4,e?y:2+u),s.push(h),o+=8+d.length}var j=8*(i.length+1);for(u=0;u<i.length;++u)s[u].write_shift(4,j),j+=i[u].length;return n.write_shift(4,o),n.write_shift(4,i.length),sn([n].concat(s).concat(i))}function rw(r,e,t,n,s,i){var o=Ae(s?68:48),u=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Zt.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,s?68:48);var d=tw(r,t,n);if(u.push(d),s){var h=tw(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+d.length),u.push(h)}return sn(u)}function x9(r,e){e||(e=Ae(r));for(var t=0;t<r;++t)e.write_shift(1,0);return e}function v9(r,e){return r.read_shift(e)===1}function Nn(r,e){return e||(e=Ae(2)),e.write_shift(2,+!!r),e}function bC(r){return r.read_shift(2,"u")}function Es(r,e){return e||(e=Ae(2)),e.write_shift(2,r),e}function TC(r,e,t){return t||(t=Ae(2)),t.write_shift(1,e=="e"?+r:+!!r),t.write_shift(1,e=="e"?1:0),t}function CC(r,e,t){var n=r.read_shift(t&&t.biff>=12?2:1),s="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var i=r.read_shift(1);i&&(s="dbcs-cont")}else t.biff==12&&(s="wstr");t.biff>=2&&t.biff<=5&&(s="cpstr");var o=n?r.read_shift(n,s):"";return o}function y9(r){var e=r.t||"",t=Ae(3);t.write_shift(2,e.length),t.write_shift(1,1);var n=Ae(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[t,n];return sn(s)}function _9(r,e,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return r.read_shift(e,"cpstr");if(t.biff>=12)return r.read_shift(e,"dbcs-cont")}var s=r.read_shift(1);return s===0?n=r.read_shift(e,"sbcs-cont"):n=r.read_shift(e,"dbcs-cont"),n}function E9(r,e,t){var n=r.read_shift(t&&t.biff==2?1:2);return n===0?(r.l++,""):_9(r,n,t)}function w9(r,e,t){if(t.biff>5)return E9(r,e,t);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,t.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function AC(r,e,t){return t||(t=Ae(3+2*r.length)),t.write_shift(2,r.length),t.write_shift(1,1),t.write_shift(31,r,"utf16le"),t}function nw(r,e){e||(e=Ae(6+r.length*2)),e.write_shift(4,1+r.length);for(var t=0;t<r.length;++t)e.write_shift(2,r.charCodeAt(t));return e.write_shift(2,0),e}function b9(r){var e=Ae(512),t=0,n=r.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}e.write_shift(4,2),e.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(t=0;t<o.length;++t)e.write_shift(4,o[t]);if(i==28)n=n.slice(1),nw(n,e);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<o.length;++t)e.write_shift(1,parseInt(o[t],16));var u=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(u.length+1)),t=0;t<u.length;++t)e.write_shift(2,u.charCodeAt(t));e.write_shift(2,0),i&8&&nw(s>-1?n.slice(s+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<o.length;++t)e.write_shift(1,parseInt(o[t],16));for(var d=0;n.slice(d*3,d*3+3)=="../"||n.slice(d*3,d*3+3)=="..\\";)++d;for(e.write_shift(2,d),e.write_shift(4,n.length-3*d+1),t=0;t<n.length-3*d;++t)e.write_shift(1,n.charCodeAt(t+3*d)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Do(r,e,t,n){return n||(n=Ae(6)),n.write_shift(2,r),n.write_shift(2,e),n.write_shift(2,t||0),n}function T9(r,e,t){var n=t.biff>8?4:2,s=r.read_shift(n),i=r.read_shift(n,"i"),o=r.read_shift(n,"i");return[s,i,o]}function C9(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2),s=r.read_shift(2);return{s:{c:n,r:e},e:{c:s,r:t}}}function SC(r,e){return e||(e=Ae(8)),e.write_shift(2,r.s.r),e.write_shift(2,r.e.r),e.write_shift(2,r.s.c),e.write_shift(2,r.e.c),e}function h1(r,e,t){var n=1536,s=16;switch(t.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ae(s);return i.write_shift(2,n),i.write_shift(2,e),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function A9(r,e){var t=!e||e.biff==8,n=Ae(t?112:54);for(n.write_shift(e.biff==8?2:1,7),t&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(t?0:536870912));n.l<n.length;)n.write_shift(1,t?0:32);return n}function S9(r,e){var t=!e||e.biff>=8?2:1,n=Ae(8+t*r.name.length);n.write_shift(4,r.pos),n.write_shift(1,r.hs||0),n.write_shift(1,r.dt),n.write_shift(1,r.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(t*r.name.length,r.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function N9(r,e){var t=Ae(8);t.write_shift(4,r.Count),t.write_shift(4,r.Unique);for(var n=[],s=0;s<r.length;++s)n[s]=y9(r[s]);var i=sn([t].concat(n));return i.parts=[t.length].concat(n.map(function(o){return o.length})),i}function I9(){var r=Ae(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function R9(r){var e=Ae(18),t=1718;return r&&r.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function k9(r,e){var t=r.name||"Arial",n=e&&e.biff==5,s=n?15+t.length:16+2*t.length,i=Ae(s);return i.write_shift(2,r.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,t.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le"),i}function D9(r,e,t,n){var s=Ae(10);return Do(r,e,n,s),s.write_shift(4,t),s}function P9(r,e,t,n,s){var i=!s||s.biff==8,o=Ae(8+ +i+(1+i)*t.length);return Do(r,e,n,o),o.write_shift(2,t.length),i&&o.write_shift(1,1),o.write_shift((1+i)*t.length,t,i?"utf16le":"sbcs"),o}function F9(r,e,t,n){var s=t&&t.biff==5;n||(n=Ae(s?3+e.length:5+2*e.length)),n.write_shift(2,r),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function j9(r,e){var t=e.biff==8||!e.biff?4:2,n=Ae(2*t+6);return n.write_shift(t,r.s.r),n.write_shift(t,r.e.r+1),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c+1),n.write_shift(2,0),n}function sw(r,e,t,n){var s=t&&t.biff==5;n||(n=Ae(s?16:20)),n.write_shift(2,0),r.style?(n.write_shift(2,r.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,r.numFmtId||0),n.write_shift(2,e<<4));var i=0;return r.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function O9(r){var e=Ae(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function B9(r,e,t,n,s,i){var o=Ae(8);return Do(r,e,n,o),TC(t,i,o),o}function L9(r,e,t,n){var s=Ae(14);return Do(r,e,n,s),ko(t,s),s}function M9(r,e,t){if(t.biff<8)return V9(r,e,t);for(var n=[],s=r.l+e,i=r.read_shift(t.biff>8?4:2);i--!==0;)n.push(T9(r,t.biff>8?12:6,t));if(r.l!=s)throw new Error("Bad ExternSheet: "+r.l+" != "+s);return n}function V9(r,e,t){r[r.l+1]==3&&r[r.l]++;var n=CC(r,e,t);return n.charCodeAt(0)==3?n.slice(1):n}function U9(r){var e=Ae(2+r.length*8);e.write_shift(2,r.length);for(var t=0;t<r.length;++t)SC(r[t],e);return e}function z9(r){var e=Ae(24),t=qr(r[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return sn([e,b9(r[1])])}function $9(r){var e=r[1].Tooltip,t=Ae(10+2*(e.length+1));t.write_shift(2,2048);var n=qr(r[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var s=0;s<e.length;++s)t.write_shift(2,e.charCodeAt(s));return t.write_shift(2,0),t}function H9(r){return r||(r=Ae(4)),r.write_shift(2,1),r.write_shift(2,1),r}function W9(r,e,t){if(!t.cellStyles)return xi(r,e);var n=t&&t.biff>=12?4:2,s=r.read_shift(n),i=r.read_shift(n),o=r.read_shift(n),u=r.read_shift(n),d=r.read_shift(2);n==2&&(r.l+=2);var h={s,e:i,w:o,ixfe:u,flags:d};return(t.biff>=5||!t.biff)&&(h.level=d>>8&7),h}function q9(r,e){var t=Ae(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,r.width*256),t.write_shift(2,0);var n=0;return r.hidden&&(n|=1),t.write_shift(1,n),n=r.level||0,t.write_shift(1,n),t.write_shift(2,0),t}function G9(r){for(var e=Ae(2*r),t=0;t<r;++t)e.write_shift(2,t+1);return e}function K9(r,e,t){var n=Ae(15);return s0(n,r,e),n.write_shift(8,t,"f"),n}function X9(r,e,t){var n=Ae(9);return s0(n,r,e),n.write_shift(2,t),n}var Y9=(function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=r1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(u,d){var h=[],m=Ro(1);switch(d.type){case"base64":m=Vs(Gi(u));break;case"binary":m=Vs(u);break;case"buffer":case"array":m=u;break}rs(m,0);var v=m.read_shift(1),x=!!(v&136),y=!1,E=!1;switch(v){case 2:break;case 3:break;case 48:y=!0,x=!0;break;case 49:y=!0,x=!0;break;case 131:break;case 139:break;case 140:E=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+v.toString(16))}var _=0,w=521;v==2&&(_=m.read_shift(2)),m.l+=3,v!=2&&(_=m.read_shift(4)),_>1048576&&(_=1e6),v!=2&&(w=m.read_shift(2));var j=m.read_shift(2),k=d.codepage||1252;v!=2&&(m.l+=16,m.read_shift(1),m[m.l]!==0&&(k=r[m[m.l]]),m.l+=1,m.l+=2),E&&(m.l+=36);for(var R=[],B={},U=Math.min(m.length,v==2?521:w-10-(y?264:0)),W=E?32:11;m.l<U&&m[m.l]!=13;)switch(B={},B.name=zf.utils.decode(k,m.slice(m.l,m.l+W)).replace(/[\u0000\r\n].*$/g,""),m.l+=W,B.type=String.fromCharCode(m.read_shift(1)),v!=2&&!E&&(B.offset=m.read_shift(4)),B.len=m.read_shift(1),v==2&&(B.offset=m.read_shift(2)),B.dec=m.read_shift(1),B.name.length&&R.push(B),v!=2&&(m.l+=E?13:14),B.type){case"B":(!y||B.len!=8)&&d.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(m[m.l]!==13&&(m.l=w-1),m.read_shift(1)!==13)throw new Error("DBF Terminator not found "+m.l+" "+m[m.l]);m.l=w;var N=0,I=0;for(h[0]=[],I=0;I!=R.length;++I)h[0][I]=R[I].name;for(;_-- >0;){if(m[m.l]===42){m.l+=j;continue}for(++m.l,h[++N]=[],I=0,I=0;I!=R.length;++I){var T=m.slice(m.l,m.l+R[I].len);m.l+=R[I].len,rs(T,0);var C=zf.utils.decode(k,T);switch(R[I].type){case"C":C.trim().length&&(h[N][I]=C.replace(/\s+$/,""));break;case"D":C.length===8?h[N][I]=new Date(+C.slice(0,4),+C.slice(4,6)-1,+C.slice(6,8)):h[N][I]=C;break;case"F":h[N][I]=parseFloat(C.trim());break;case"+":case"I":h[N][I]=E?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(C.trim().toUpperCase()){case"Y":case"T":h[N][I]=!0;break;case"N":case"F":h[N][I]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+C+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+v.toString(16));h[N][I]="##MEMO##"+(E?parseInt(C.trim(),10):T.read_shift(4));break;case"N":C=C.replace(/\u0000/g,"").trim(),C&&C!="."&&(h[N][I]=+C||0);break;case"@":h[N][I]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":h[N][I]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":h[N][I]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":h[N][I]=-T.read_shift(-8,"f");break;case"B":if(y&&R[I].len==8){h[N][I]=T.read_shift(8,"f");break}case"G":case"P":T.l+=R[I].len;break;case"0":if(R[I].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+R[I].type)}}}if(v!=2&&m.l<m.length&&m[m.l++]!=26)throw new Error("DBF EOF Marker missing "+(m.l-1)+" of "+m.length+" "+m[m.l-1].toString(16));return d&&d.sheetRows&&(h=h.slice(0,d.sheetRows)),d.DBF=R,h}function n(u,d){var h=d||{};h.dateNF||(h.dateNF="yyyymmdd");var m=cc(t(u,h),h);return m["!cols"]=h.DBF.map(function(v){return{wch:v.len,DBF:v}}),delete h.DBF,m}function s(u,d){try{return $o(n(u,d),d)}catch(h){if(d&&d.WTF)throw h}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(u,d){var h=d||{};if(+h.codepage>=0&&Iu(+h.codepage),h.type=="string")throw new Error("Cannot write DBF to JS string");var m=$n(),v=th(u,{header:1,raw:!0,cellDates:!0}),x=v[0],y=v.slice(1),E=u["!cols"]||[],_=0,w=0,j=0,k=1;for(_=0;_<x.length;++_){if(((E[_]||{}).DBF||{}).name){x[_]=E[_].DBF.name,++j;continue}if(x[_]!=null){if(++j,typeof x[_]=="number"&&(x[_]=x[_].toString(10)),typeof x[_]!="string")throw new Error("DBF Invalid column name "+x[_]+" |"+typeof x[_]+"|");if(x.indexOf(x[_])!==_){for(w=0;w<1024;++w)if(x.indexOf(x[_]+"_"+w)==-1){x[_]+="_"+w;break}}}}var R=cr(u["!ref"]),B=[],U=[],W=[];for(_=0;_<=R.e.c-R.s.c;++_){var N="",I="",T=0,C=[];for(w=0;w<y.length;++w)y[w][_]!=null&&C.push(y[w][_]);if(C.length==0||x[_]==null){B[_]="?";continue}for(w=0;w<C.length;++w){switch(typeof C[w]){case"number":I="B";break;case"string":I="C";break;case"boolean":I="L";break;case"object":I=C[w]instanceof Date?"D":"C";break;default:I="C"}T=Math.max(T,String(C[w]).length),N=N&&N!=I?"C":I}T>250&&(T=250),I=((E[_]||{}).DBF||{}).type,I=="C"&&E[_].DBF.len>T&&(T=E[_].DBF.len),N=="B"&&I=="N"&&(N="N",W[_]=E[_].DBF.dec,T=E[_].DBF.len),U[_]=N=="C"||I=="N"?T:i[N]||0,k+=U[_],B[_]=N}var D=m.next(32);for(D.write_shift(4,318902576),D.write_shift(4,y.length),D.write_shift(2,296+32*j),D.write_shift(2,k),_=0;_<4;++_)D.write_shift(4,0);for(D.write_shift(4,0|(+e[IT]||3)<<8),_=0,w=0;_<x.length;++_)if(x[_]!=null){var F=m.next(32),O=(x[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,O,"sbcs"),F.write_shift(1,B[_]=="?"?"C":B[_],"sbcs"),F.write_shift(4,w),F.write_shift(1,U[_]||i[B[_]]||0),F.write_shift(1,W[_]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),w+=U[_]||i[B[_]]||0}var le=m.next(264);for(le.write_shift(4,13),_=0;_<65;++_)le.write_shift(4,0);for(_=0;_<y.length;++_){var we=m.next(k);for(we.write_shift(1,0),w=0;w<x.length;++w)if(x[w]!=null)switch(B[w]){case"L":we.write_shift(1,y[_][w]==null?63:y[_][w]?84:70);break;case"B":we.write_shift(8,y[_][w]||0,"f");break;case"N":var Ie="0";for(typeof y[_][w]=="number"&&(Ie=y[_][w].toFixed(W[w]||0)),j=0;j<U[w]-Ie.length;++j)we.write_shift(1,32);we.write_shift(1,Ie,"sbcs");break;case"D":y[_][w]?(we.write_shift(4,("0000"+y[_][w].getFullYear()).slice(-4),"sbcs"),we.write_shift(2,("00"+(y[_][w].getMonth()+1)).slice(-2),"sbcs"),we.write_shift(2,("00"+y[_][w].getDate()).slice(-2),"sbcs")):we.write_shift(8,"00000000","sbcs");break;case"C":var ie=String(y[_][w]!=null?y[_][w]:"").slice(0,U[w]);for(we.write_shift(1,ie,"sbcs"),j=0;j<U[w]-ie.length;++j)we.write_shift(1,32);break}}return m.next(1).write_shift(1,26),m.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}})(),Q9=(function(){var r={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+un(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(x,y){var E=r[y];return typeof E=="number"?NE(E):E},n=function(x,y,E){var _=y.charCodeAt(0)-32<<4|E.charCodeAt(0)-48;return _==59?x:NE(_)};r["|"]=254;function s(x,y){switch(y.type){case"base64":return i(Gi(x),y);case"binary":return i(x,y);case"buffer":return i($t&&Buffer.isBuffer(x)?x.toString("binary"):Zu(x),y);case"array":return i(Oh(x),y)}throw new Error("Unrecognized type "+y.type)}function i(x,y){var E=x.split(/[\n\r]+/),_=-1,w=-1,j=0,k=0,R=[],B=[],U=null,W={},N=[],I=[],T=[],C=0,D;for(+y.codepage>=0&&Iu(+y.codepage);j!==E.length;++j){C=0;var F=E[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,t),O=F.replace(/;;/g,"\0").split(";").map(function(G){return G.replace(/\u0000/g,";")}),le=O[0],we;if(F.length>0)switch(le){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&B.push(F.slice(3).replace(/;;/g,";"));break;case"C":var Ie=!1,ie=!1,oe=!1,de=!1,Q=-1,H=-1;for(k=1;k<O.length;++k)switch(O[k].charAt(0)){case"A":break;case"X":w=parseInt(O[k].slice(1))-1,ie=!0;break;case"Y":for(_=parseInt(O[k].slice(1))-1,ie||(w=0),D=R.length;D<=_;++D)R[D]=[];break;case"K":we=O[k].slice(1),we.charAt(0)==='"'?we=we.slice(1,we.length-1):we==="TRUE"?we=!0:we==="FALSE"?we=!1:isNaN(Ui(we))?isNaN(ku(we).getDate())||(we=Rn(we)):(we=Ui(we),U!==null&&UT(U)&&(we=WT(we))),Ie=!0;break;case"E":de=!0;var M=XO(O[k].slice(1),{r:_,c:w});R[_][w]=[R[_][w],M];break;case"S":oe=!0,R[_][w]=[R[_][w],"S5S"];break;case"G":break;case"R":Q=parseInt(O[k].slice(1))-1;break;case"C":H=parseInt(O[k].slice(1))-1;break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+F)}if(Ie&&(R[_][w]&&R[_][w].length==2?R[_][w][0]=we:R[_][w]=we,U=null),oe){if(de)throw new Error("SYLK shared formula cannot have own formula");var V=Q>-1&&R[Q][H];if(!V||!V[1])throw new Error("SYLK shared formula cannot find base");R[_][w][1]=YO(V[1],{r:_-Q,c:w-H})}break;case"F":var P=0;for(k=1;k<O.length;++k)switch(O[k].charAt(0)){case"X":w=parseInt(O[k].slice(1))-1,++P;break;case"Y":for(_=parseInt(O[k].slice(1))-1,D=R.length;D<=_;++D)R[D]=[];break;case"M":C=parseInt(O[k].slice(1))/20;break;case"F":break;case"G":break;case"P":U=B[parseInt(O[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=O[k].slice(1).split(" "),D=parseInt(T[0],10);D<=parseInt(T[1],10);++D)C=parseInt(T[2],10),I[D-1]=C===0?{hidden:!0}:{wch:C},m1(I[D-1]);break;case"C":w=parseInt(O[k].slice(1))-1,I[w]||(I[w]={});break;case"R":_=parseInt(O[k].slice(1))-1,N[_]||(N[_]={}),C>0?(N[_].hpt=C,N[_].hpx=DC(C)):C===0&&(N[_].hidden=!0);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+F)}P<1&&(U=null);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+F)}}return N.length>0&&(W["!rows"]=N),I.length>0&&(W["!cols"]=I),y&&y.sheetRows&&(R=R.slice(0,y.sheetRows)),[R,W]}function o(x,y){var E=s(x,y),_=E[0],w=E[1],j=cc(_,y);return un(w).forEach(function(k){j[k]=w[k]}),j}function u(x,y){return $o(o(x,y),y)}function d(x,y,E,_){var w="C;Y"+(E+1)+";X"+(_+1)+";K";switch(x.t){case"n":w+=x.v||0,x.f&&!x.F&&(w+=";E"+g1(x.f,{r:E,c:_}));break;case"b":w+=x.v?"TRUE":"FALSE";break;case"e":w+=x.w||x.v;break;case"d":w+='"'+(x.w||x.v)+'"';break;case"s":w+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return w}function h(x,y){y.forEach(function(E,_){var w="F;W"+(_+1)+" "+(_+1)+" ";E.hidden?w+="0":(typeof E.width=="number"&&!E.wpx&&(E.wpx=Qf(E.width)),typeof E.wpx=="number"&&!E.wch&&(E.wch=Jf(E.wpx)),typeof E.wch=="number"&&(w+=Math.round(E.wch))),w.charAt(w.length-1)!=" "&&x.push(w)})}function m(x,y){y.forEach(function(E,_){var w="F;";E.hidden?w+="M0;":E.hpt?w+="M"+20*E.hpt+";":E.hpx&&(w+="M"+20*Zf(E.hpx)+";"),w.length>2&&x.push(w+"R"+(_+1))})}function v(x,y){var E=["ID;PWXL;N;E"],_=[],w=cr(x["!ref"]),j,k=Array.isArray(x),R=`\r
`;E.push("P;PGeneral"),E.push("F;P0;DG0G8;M255"),x["!cols"]&&h(E,x["!cols"]),x["!rows"]&&m(E,x["!rows"]),E.push("B;Y"+(w.e.r-w.s.r+1)+";X"+(w.e.c-w.s.c+1)+";D"+[w.s.c,w.s.r,w.e.c,w.e.r].join(" "));for(var B=w.s.r;B<=w.e.r;++B)for(var U=w.s.c;U<=w.e.c;++U){var W=Jt({r:B,c:U});j=k?(x[B]||[])[U]:x[W],!(!j||j.v==null&&(!j.f||j.F))&&_.push(d(j,x,B,U))}return E.join(R)+R+_.join(R)+R+"E"+R}return{to_workbook:u,to_sheet:o,from_sheet:v}})(),J9=(function(){function r(i,o){switch(o.type){case"base64":return e(Gi(i),o);case"binary":return e(i,o);case"buffer":return e($t&&Buffer.isBuffer(i)?i.toString("binary"):Zu(i),o);case"array":return e(Oh(i),o)}throw new Error("Unrecognized type "+o.type)}function e(i,o){for(var u=i.split(`
`),d=-1,h=-1,m=0,v=[];m!==u.length;++m){if(u[m].trim()==="BOT"){v[++d]=[],h=0;continue}if(!(d<0)){var x=u[m].trim().split(","),y=x[0],E=x[1];++m;for(var _=u[m]||"";(_.match(/["]/g)||[]).length&1&&m<u.length-1;)_+=`
`+u[++m];switch(_=_.trim(),+y){case-1:if(_==="BOT"){v[++d]=[],h=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?v[d][h]=!0:_==="FALSE"?v[d][h]=!1:isNaN(Ui(E))?isNaN(ku(E).getDate())?v[d][h]=E:v[d][h]=Rn(E):v[d][h]=Ui(E),++h;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),v[d][h++]=_!==""?_:null;break}if(_==="EOD")break}}return o&&o.sheetRows&&(v=v.slice(0,o.sheetRows)),v}function t(i,o){return cc(r(i,o),o)}function n(i,o){return $o(t(i,o),o)}var s=(function(){var i=function(d,h,m,v,x){d.push(h),d.push(m+","+v),d.push('"'+x.replace(/"/g,'""')+'"')},o=function(d,h,m,v){d.push(h+","+m),d.push(h==1?'"'+v.replace(/"/g,'""')+'"':v)};return function(d){var h=[],m=cr(d["!ref"]),v,x=Array.isArray(d);i(h,"TABLE",0,1,"sheetjs"),i(h,"VECTORS",0,m.e.r-m.s.r+1,""),i(h,"TUPLES",0,m.e.c-m.s.c+1,""),i(h,"DATA",0,0,"");for(var y=m.s.r;y<=m.e.r;++y){o(h,-1,0,"BOT");for(var E=m.s.c;E<=m.e.c;++E){var _=Jt({r:y,c:E});if(v=x?(d[y]||[])[E]:d[_],!v){o(h,1,0,"");continue}switch(v.t){case"n":var w=v.w;!w&&v.v!=null&&(w=v.v),w==null?v.f&&!v.F?o(h,1,0,"="+v.f):o(h,1,0,""):o(h,0,w,"V");break;case"b":o(h,0,v.v?1:0,v.v?"TRUE":"FALSE");break;case"s":o(h,1,0,isNaN(v.v)?v.v:'="'+v.v+'"');break;case"d":v.w||(v.w=Va(v.z||yr[14],Hn(Rn(v.v)))),o(h,0,v.w,"V");break;default:o(h,1,0,"")}}}o(h,-1,0,"EOD");var j=`\r
`,k=h.join(j);return k}})();return{to_workbook:n,to_sheet:t,from_sheet:s}})(),NC=(function(){function r(v){return v.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(v){return v.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(v,x){for(var y=v.split(`
`),E=-1,_=-1,w=0,j=[];w!==y.length;++w){var k=y[w].trim().split(":");if(k[0]==="cell"){var R=qr(k[1]);if(j.length<=R.r)for(E=j.length;E<=R.r;++E)j[E]||(j[E]=[]);switch(E=R.r,_=R.c,k[2]){case"t":j[E][_]=r(k[3]);break;case"v":j[E][_]=+k[3];break;case"vtf":var B=k[k.length-1];case"vtc":switch(k[3]){case"nl":j[E][_]=!!+k[4];break;default:j[E][_]=+k[4];break}k[2]=="vtf"&&(j[E][_]=[j[E][_],B])}}}return x&&x.sheetRows&&(j=j.slice(0,x.sheetRows)),j}function n(v,x){return cc(t(v,x),x)}function s(v,x){return $o(n(v,x),x)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,u=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function h(v){if(!v||!v["!ref"])return"";for(var x=[],y=[],E,_="",w=cs(v["!ref"]),j=Array.isArray(v),k=w.s.r;k<=w.e.r;++k)for(var R=w.s.c;R<=w.e.c;++R)if(_=Jt({r:k,c:R}),E=j?(v[k]||[])[R]:v[_],!(!E||E.v==null||E.t==="z")){switch(y=["cell",_,"t"],E.t){case"s":case"str":y.push(e(E.v));break;case"n":E.f?(y[2]="vtf",y[3]="n",y[4]=E.v,y[5]=e(E.f)):(y[2]="v",y[3]=E.v);break;case"b":y[2]="vt"+(E.f?"f":"c"),y[3]="nl",y[4]=E.v?"1":"0",y[5]=e(E.f||(E.v?"TRUE":"FALSE"));break;case"d":var B=Hn(Rn(E.v));y[2]="vtc",y[3]="nd",y[4]=""+B,y[5]=E.w||Va(E.z||yr[14],B);break;case"e":continue}x.push(y.join(":"))}return x.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function m(v){return[i,o,u,o,h(v),d].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:m}})(),Z9=(function(){function r(m,v,x,y,E){E.raw?v[x][y]=m:m===""||(m==="TRUE"?v[x][y]=!0:m==="FALSE"?v[x][y]=!1:isNaN(Ui(m))?isNaN(ku(m).getDate())?v[x][y]=m:v[x][y]=Rn(m):v[x][y]=Ui(m))}function e(m,v){var x=v||{},y=[];if(!m||m.length===0)return y;for(var E=m.split(/[\r\n]/),_=E.length-1;_>=0&&E[_].length===0;)--_;for(var w=10,j=0,k=0;k<=_;++k)j=E[k].indexOf(" "),j==-1?j=E[k].length:j++,w=Math.max(w,j);for(k=0;k<=_;++k){y[k]=[];var R=0;for(r(E[k].slice(0,w).trim(),y,k,R,x),R=1;R<=(E[k].length-w)/10+1;++R)r(E[k].slice(w+(R-1)*10,w+R*10).trim(),y,k,R,x)}return x.sheetRows&&(y=y.slice(0,x.sheetRows)),y}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(m){for(var v={},x=!1,y=0,E=0;y<m.length;++y)(E=m.charCodeAt(y))==34?x=!x:!x&&E in t&&(v[E]=(v[E]||0)+1);E=[];for(y in v)Object.prototype.hasOwnProperty.call(v,y)&&E.push([v[y],y]);if(!E.length){v=n;for(y in v)Object.prototype.hasOwnProperty.call(v,y)&&E.push([v[y],y])}return E.sort(function(_,w){return _[0]-w[0]||n[_[1]]-n[w[1]]}),t[E.pop()[1]]||44}function i(m,v){var x=v||{},y="",E=x.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};m.slice(0,4)=="sep="?m.charCodeAt(5)==13&&m.charCodeAt(6)==10?(y=m.charAt(4),m=m.slice(7)):m.charCodeAt(5)==13||m.charCodeAt(5)==10?(y=m.charAt(4),m=m.slice(6)):y=s(m.slice(0,1024)):x&&x.FS?y=x.FS:y=s(m.slice(0,1024));var w=0,j=0,k=0,R=0,B=0,U=y.charCodeAt(0),W=!1,N=0,I=m.charCodeAt(0);m=m.replace(/\r\n/mg,`
`);var T=x.dateNF!=null?pj(x.dateNF):null;function C(){var D=m.slice(R,B),F={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)F.t="z";else if(x.raw)F.t="s",F.v=D;else if(D.trim().length===0)F.t="s",F.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(F.t="s",F.v=D.slice(2,-1).replace(/""/g,'"')):QO(D)?(F.t="n",F.f=D.slice(1)):(F.t="s",F.v=D);else if(D=="TRUE")F.t="b",F.v=!0;else if(D=="FALSE")F.t="b",F.v=!1;else if(!isNaN(k=Ui(D)))F.t="n",x.cellText!==!1&&(F.w=D),F.v=k;else if(!isNaN(ku(D).getDate())||T&&D.match(T)){F.z=x.dateNF||yr[14];var O=0;T&&D.match(T)&&(D=gj(D,x.dateNF,D.match(T)||[]),O=1),x.cellDates?(F.t="d",F.v=Rn(D,O)):(F.t="n",F.v=Hn(Rn(D,O))),x.cellText!==!1&&(F.w=Va(F.z,F.v instanceof Date?Hn(F.v):F.v)),x.cellNF||delete F.z}else F.t="s",F.v=D;if(F.t=="z"||(x.dense?(E[w]||(E[w]=[]),E[w][j]=F):E[Jt({c:j,r:w})]=F),R=B+1,I=m.charCodeAt(R),_.e.c<j&&(_.e.c=j),_.e.r<w&&(_.e.r=w),N==U)++j;else if(j=0,++w,x.sheetRows&&x.sheetRows<=w)return!0}e:for(;B<m.length;++B)switch(N=m.charCodeAt(B)){case 34:I===34&&(W=!W);break;case U:case 10:case 13:if(!W&&C())break e;break}return B-R>0&&C(),E["!ref"]=kr(_),E}function o(m,v){return!(v&&v.PRN)||v.FS||m.slice(0,4)=="sep="||m.indexOf("	")>=0||m.indexOf(",")>=0||m.indexOf(";")>=0?i(m,v):cc(e(m,v),v)}function u(m,v){var x="",y=v.type=="string"?[0,0,0,0]:dV(m,v);switch(v.type){case"base64":x=Gi(m);break;case"binary":x=m;break;case"buffer":v.codepage==65001?x=m.toString("utf8"):v.codepage&&typeof zf<"u"||(x=$t&&Buffer.isBuffer(m)?m.toString("binary"):Zu(m));break;case"array":x=Oh(m);break;case"string":x=m;break;default:throw new Error("Unrecognized type "+v.type)}return y[0]==239&&y[1]==187&&y[2]==191?x=cu(x.slice(3)):v.type!="string"&&v.type!="buffer"&&v.codepage==65001?x=cu(x):v.type=="binary"&&typeof zf<"u",x.slice(0,19)=="socialcalc:version:"?NC.to_sheet(v.type=="string"?x:cu(x),v):o(x,v)}function d(m,v){return $o(u(m,v),v)}function h(m){for(var v=[],x=cr(m["!ref"]),y,E=Array.isArray(m),_=x.s.r;_<=x.e.r;++_){for(var w=[],j=x.s.c;j<=x.e.c;++j){var k=Jt({r:_,c:j});if(y=E?(m[_]||[])[j]:m[k],!y||y.v==null){w.push("          ");continue}for(var R=(y.w||(Ki(y),y.w)||"").slice(0,10);R.length<10;)R+=" ";w.push(R+(j===0?" ":""))}v.push(w.join(""))}return v.join(`
`)}return{to_workbook:d,to_sheet:u,from_sheet:h}})(),iw=(function(){function r(M,V,P){if(M){rs(M,M.l||0);for(var G=P.Enum||Q;M.l<M.length;){var re=M.read_shift(2),xe=G[re]||G[65535],me=M.read_shift(2),Se=M.l+me,Ne=xe.f&&xe.f(M,me,P);if(M.l=Se,V(Ne,xe,re))return}}}function e(M,V){switch(V.type){case"base64":return t(Vs(Gi(M)),V);case"binary":return t(Vs(M),V);case"buffer":case"array":return t(M,V)}throw"Unsupported type "+V.type}function t(M,V){if(!M)return M;var P=V||{},G=P.dense?[]:{},re="Sheet1",xe="",me=0,Se={},Ne=[],nt=[],lt={s:{r:0,c:0},e:{r:0,c:0}},gt=P.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)P.Enum=Q,r(M,function(Me,bt,ne){switch(ne){case 0:P.vers=Me,Me>=4096&&(P.qpro=!0);break;case 6:lt=Me;break;case 204:Me&&(xe=Me);break;case 222:xe=Me;break;case 15:case 51:P.qpro||(Me[1].v=Me[1].v.slice(1));case 13:case 14:case 16:ne==14&&(Me[2]&112)==112&&(Me[2]&15)>1&&(Me[2]&15)<15&&(Me[1].z=P.dateNF||yr[14],P.cellDates&&(Me[1].t="d",Me[1].v=WT(Me[1].v))),P.qpro&&Me[3]>me&&(G["!ref"]=kr(lt),Se[re]=G,Ne.push(re),G=P.dense?[]:{},lt={s:{r:0,c:0},e:{r:0,c:0}},me=Me[3],re=xe||"Sheet"+(me+1),xe="");var ue=P.dense?(G[Me[0].r]||[])[Me[0].c]:G[Jt(Me[0])];if(ue){ue.t=Me[1].t,ue.v=Me[1].v,Me[1].z!=null&&(ue.z=Me[1].z),Me[1].f!=null&&(ue.f=Me[1].f);break}P.dense?(G[Me[0].r]||(G[Me[0].r]=[]),G[Me[0].r][Me[0].c]=Me[1]):G[Jt(Me[0])]=Me[1];break}},P);else if(M[2]==26||M[2]==14)P.Enum=H,M[2]==14&&(P.qpro=!0,M.l=0),r(M,function(Me,bt,ne){switch(ne){case 204:re=Me;break;case 22:Me[1].v=Me[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Me[3]>me&&(G["!ref"]=kr(lt),Se[re]=G,Ne.push(re),G=P.dense?[]:{},lt={s:{r:0,c:0},e:{r:0,c:0}},me=Me[3],re="Sheet"+(me+1)),gt>0&&Me[0].r>=gt)break;P.dense?(G[Me[0].r]||(G[Me[0].r]=[]),G[Me[0].r][Me[0].c]=Me[1]):G[Jt(Me[0])]=Me[1],lt.e.c<Me[0].c&&(lt.e.c=Me[0].c),lt.e.r<Me[0].r&&(lt.e.r=Me[0].r);break;case 27:Me[14e3]&&(nt[Me[14e3][0]]=Me[14e3][1]);break;case 1537:nt[Me[0]]=Me[1],Me[0]==me&&(re=Me[1]);break}},P);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(G["!ref"]=kr(lt),Se[xe||re]=G,Ne.push(xe||re),!nt.length)return{SheetNames:Ne,Sheets:Se};for(var Le={},ht=[],Ze=0;Ze<nt.length;++Ze)Se[Ne[Ze]]?(ht.push(nt[Ze]||Ne[Ze]),Le[nt[Ze]]=Se[nt[Ze]]||Se[Ne[Ze]]):(ht.push(nt[Ze]),Le[nt[Ze]]={"!ref":"A1"});return{SheetNames:ht,Sheets:Le}}function n(M,V){var P=V||{};if(+P.codepage>=0&&Iu(+P.codepage),P.type=="string")throw new Error("Cannot write WK1 to JS string");var G=$n(),re=cr(M["!ref"]),xe=Array.isArray(M),me=[];We(G,0,i(1030)),We(G,6,d(re));for(var Se=Math.min(re.e.r,8191),Ne=re.s.r;Ne<=Se;++Ne)for(var nt=cn(Ne),lt=re.s.c;lt<=re.e.c;++lt){Ne===re.s.r&&(me[lt]=vn(lt));var gt=me[lt]+nt,Le=xe?(M[Ne]||[])[lt]:M[gt];if(!(!Le||Le.t=="z"))if(Le.t=="n")(Le.v|0)==Le.v&&Le.v>=-32768&&Le.v<=32767?We(G,13,y(Ne,lt,Le.v)):We(G,14,_(Ne,lt,Le.v));else{var ht=Ki(Le);We(G,15,v(Ne,lt,ht.slice(0,239)))}}return We(G,1),G.end()}function s(M,V){var P=V||{};if(+P.codepage>=0&&Iu(+P.codepage),P.type=="string")throw new Error("Cannot write WK3 to JS string");var G=$n();We(G,0,o(M));for(var re=0,xe=0;re<M.SheetNames.length;++re)(M.Sheets[M.SheetNames[re]]||{})["!ref"]&&We(G,27,de(M.SheetNames[re],xe++));var me=0;for(re=0;re<M.SheetNames.length;++re){var Se=M.Sheets[M.SheetNames[re]];if(!(!Se||!Se["!ref"])){for(var Ne=cr(Se["!ref"]),nt=Array.isArray(Se),lt=[],gt=Math.min(Ne.e.r,8191),Le=Ne.s.r;Le<=gt;++Le)for(var ht=cn(Le),Ze=Ne.s.c;Ze<=Ne.e.c;++Ze){Le===Ne.s.r&&(lt[Ze]=vn(Ze));var Me=lt[Ze]+ht,bt=nt?(Se[Le]||[])[Ze]:Se[Me];if(!(!bt||bt.t=="z"))if(bt.t=="n")We(G,23,C(Le,Ze,me,bt.v));else{var ne=Ki(bt);We(G,22,N(Le,Ze,me,ne.slice(0,239)))}}++me}}return We(G,1),G.end()}function i(M){var V=Ae(2);return V.write_shift(2,M),V}function o(M){var V=Ae(26);V.write_shift(2,4096),V.write_shift(2,4),V.write_shift(4,0);for(var P=0,G=0,re=0,xe=0;xe<M.SheetNames.length;++xe){var me=M.SheetNames[xe],Se=M.Sheets[me];if(!(!Se||!Se["!ref"])){++re;var Ne=cs(Se["!ref"]);P<Ne.e.r&&(P=Ne.e.r),G<Ne.e.c&&(G=Ne.e.c)}}return P>8191&&(P=8191),V.write_shift(2,P),V.write_shift(1,re),V.write_shift(1,G),V.write_shift(2,0),V.write_shift(2,0),V.write_shift(1,1),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(4,0),V}function u(M,V,P){var G={s:{c:0,r:0},e:{c:0,r:0}};return V==8&&P.qpro?(G.s.c=M.read_shift(1),M.l++,G.s.r=M.read_shift(2),G.e.c=M.read_shift(1),M.l++,G.e.r=M.read_shift(2),G):(G.s.c=M.read_shift(2),G.s.r=M.read_shift(2),V==12&&P.qpro&&(M.l+=2),G.e.c=M.read_shift(2),G.e.r=M.read_shift(2),V==12&&P.qpro&&(M.l+=2),G.s.c==65535&&(G.s.c=G.e.c=G.s.r=G.e.r=0),G)}function d(M){var V=Ae(8);return V.write_shift(2,M.s.c),V.write_shift(2,M.s.r),V.write_shift(2,M.e.c),V.write_shift(2,M.e.r),V}function h(M,V,P){var G=[{c:0,r:0},{t:"n",v:0},0,0];return P.qpro&&P.vers!=20768?(G[0].c=M.read_shift(1),G[3]=M.read_shift(1),G[0].r=M.read_shift(2),M.l+=2):(G[2]=M.read_shift(1),G[0].c=M.read_shift(2),G[0].r=M.read_shift(2)),G}function m(M,V,P){var G=M.l+V,re=h(M,V,P);if(re[1].t="s",P.vers==20768){M.l++;var xe=M.read_shift(1);return re[1].v=M.read_shift(xe,"utf8"),re}return P.qpro&&M.l++,re[1].v=M.read_shift(G-M.l,"cstr"),re}function v(M,V,P){var G=Ae(7+P.length);G.write_shift(1,255),G.write_shift(2,V),G.write_shift(2,M),G.write_shift(1,39);for(var re=0;re<G.length;++re){var xe=P.charCodeAt(re);G.write_shift(1,xe>=128?95:xe)}return G.write_shift(1,0),G}function x(M,V,P){var G=h(M,V,P);return G[1].v=M.read_shift(2,"i"),G}function y(M,V,P){var G=Ae(7);return G.write_shift(1,255),G.write_shift(2,V),G.write_shift(2,M),G.write_shift(2,P,"i"),G}function E(M,V,P){var G=h(M,V,P);return G[1].v=M.read_shift(8,"f"),G}function _(M,V,P){var G=Ae(13);return G.write_shift(1,255),G.write_shift(2,V),G.write_shift(2,M),G.write_shift(8,P,"f"),G}function w(M,V,P){var G=M.l+V,re=h(M,V,P);if(re[1].v=M.read_shift(8,"f"),P.qpro)M.l=G;else{var xe=M.read_shift(2);B(M.slice(M.l,M.l+xe),re),M.l+=xe}return re}function j(M,V,P){var G=V&32768;return V&=-32769,V=(G?M:0)+(V>=8192?V-16384:V),(G?"":"$")+(P?vn(V):cn(V))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},R=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(M,V){rs(M,0);for(var P=[],G=0,re="",xe="",me="",Se="";M.l<M.length;){var Ne=M[M.l++];switch(Ne){case 0:P.push(M.read_shift(8,"f"));break;case 1:xe=j(V[0].c,M.read_shift(2),!0),re=j(V[0].r,M.read_shift(2),!1),P.push(xe+re);break;case 2:{var nt=j(V[0].c,M.read_shift(2),!0),lt=j(V[0].r,M.read_shift(2),!1);xe=j(V[0].c,M.read_shift(2),!0),re=j(V[0].r,M.read_shift(2),!1),P.push(nt+lt+":"+xe+re)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:P.push("("+P.pop()+")");break;case 5:P.push(M.read_shift(2));break;case 6:{for(var gt="";Ne=M[M.l++];)gt+=String.fromCharCode(Ne);P.push('"'+gt.replace(/"/g,'""')+'"')}break;case 8:P.push("-"+P.pop());break;case 23:P.push("+"+P.pop());break;case 22:P.push("NOT("+P.pop()+")");break;case 20:case 21:Se=P.pop(),me=P.pop(),P.push(["AND","OR"][Ne-20]+"("+me+","+Se+")");break;default:if(Ne<32&&R[Ne])Se=P.pop(),me=P.pop(),P.push(me+R[Ne]+Se);else if(k[Ne]){if(G=k[Ne][1],G==69&&(G=M[M.l++]),G>P.length){console.error("WK1 bad formula parse 0x"+Ne.toString(16)+":|"+P.join("|")+"|");return}var Le=P.slice(-G);P.length-=G,P.push(k[Ne][0]+"("+Le.join(",")+")")}else return Ne<=7?console.error("WK1 invalid opcode "+Ne.toString(16)):Ne<=24?console.error("WK1 unsupported op "+Ne.toString(16)):Ne<=30?console.error("WK1 invalid opcode "+Ne.toString(16)):Ne<=115?console.error("WK1 unsupported function opcode "+Ne.toString(16)):console.error("WK1 unrecognized opcode "+Ne.toString(16))}}P.length==1?V[1].f=""+P[0]:console.error("WK1 bad formula parse |"+P.join("|")+"|")}function U(M){var V=[{c:0,r:0},{t:"n",v:0},0];return V[0].r=M.read_shift(2),V[3]=M[M.l++],V[0].c=M[M.l++],V}function W(M,V){var P=U(M);return P[1].t="s",P[1].v=M.read_shift(V-4,"cstr"),P}function N(M,V,P,G){var re=Ae(6+G.length);re.write_shift(2,M),re.write_shift(1,P),re.write_shift(1,V),re.write_shift(1,39);for(var xe=0;xe<G.length;++xe){var me=G.charCodeAt(xe);re.write_shift(1,me>=128?95:me)}return re.write_shift(1,0),re}function I(M,V){var P=U(M);P[1].v=M.read_shift(2);var G=P[1].v>>1;if(P[1].v&1)switch(G&7){case 0:G=(G>>3)*5e3;break;case 1:G=(G>>3)*500;break;case 2:G=(G>>3)/20;break;case 3:G=(G>>3)/200;break;case 4:G=(G>>3)/2e3;break;case 5:G=(G>>3)/2e4;break;case 6:G=(G>>3)/16;break;case 7:G=(G>>3)/64;break}return P[1].v=G,P}function T(M,V){var P=U(M),G=M.read_shift(4),re=M.read_shift(4),xe=M.read_shift(2);if(xe==65535)return G===0&&re===3221225472?(P[1].t="e",P[1].v=15):G===0&&re===3489660928?(P[1].t="e",P[1].v=42):P[1].v=0,P;var me=xe&32768;return xe=(xe&32767)-16446,P[1].v=(1-me*2)*(re*Math.pow(2,xe+32)+G*Math.pow(2,xe)),P}function C(M,V,P,G){var re=Ae(14);if(re.write_shift(2,M),re.write_shift(1,P),re.write_shift(1,V),G==0)return re.write_shift(4,0),re.write_shift(4,0),re.write_shift(2,65535),re;var xe=0,me=0,Se=0,Ne=0;return G<0&&(xe=1,G=-G),me=Math.log2(G)|0,G/=Math.pow(2,me-31),Ne=G>>>0,(Ne&2147483648)==0&&(G/=2,++me,Ne=G>>>0),G-=Ne,Ne|=2147483648,Ne>>>=0,G*=Math.pow(2,32),Se=G>>>0,re.write_shift(4,Se),re.write_shift(4,Ne),me+=16383+(xe?32768:0),re.write_shift(2,me),re}function D(M,V){var P=T(M);return M.l+=V-14,P}function F(M,V){var P=U(M),G=M.read_shift(4);return P[1].v=G>>6,P}function O(M,V){var P=U(M),G=M.read_shift(8,"f");return P[1].v=G,P}function le(M,V){var P=O(M);return M.l+=V-10,P}function we(M,V){return M[M.l+V-1]==0?M.read_shift(V,"cstr"):""}function Ie(M,V){var P=M[M.l++];P>V-1&&(P=V-1);for(var G="";G.length<P;)G+=String.fromCharCode(M[M.l++]);return G}function ie(M,V,P){if(!(!P.qpro||V<21)){var G=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var re=M.read_shift(V-21,"cstr");return[G,re]}}function oe(M,V){for(var P={},G=M.l+V;M.l<G;){var re=M.read_shift(2);if(re==14e3){for(P[re]=[0,""],P[re][0]=M.read_shift(2);M[M.l];)P[re][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return P}function de(M,V){var P=Ae(5+M.length);P.write_shift(2,14e3),P.write_shift(2,V);for(var G=0;G<M.length;++G){var re=M.charCodeAt(G);P[P.l++]=re>127?95:re}return P[P.l++]=0,P}var Q={0:{n:"BOF",f:bC},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:u},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:E},15:{n:"LABEL",f:m},16:{n:"FORMULA",f:w},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:m},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:we},222:{n:"SHEETNAMELP",f:Ie},65535:{n:""}},H={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:W},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:I},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:oe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:le},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:we},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ie},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}})(),eO=/^\s|\s$|[\t\n\r]/;function IC(r,e){if(!e.bookSST)return"";var t=[Dr];t[t.length]=$e("sst",null,{xmlns:lc[0],count:r.Count,uniqueCount:r.Unique});for(var n=0;n!=r.length;++n)if(r[n]!=null){var s=r[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(eO)&&(i+=' xml:space="preserve"'),i+=">"+Yt(s.t)+"</t>"),i+="</si>",t[t.length]=i}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function tO(r){return[r.read_shift(4),r.read_shift(4)]}function rO(r,e){return e||(e=Ae(8)),e.write_shift(4,r.Count),e.write_shift(4,r.Unique),e}var nO=Gj;function sO(r){var e=$n();ke(e,159,rO(r));for(var t=0;t<r.length;++t)ke(e,19,nO(r[t]));return ke(e,160),e.end()}function iO(r){for(var e=[],t=r.split(""),n=0;n<t.length;++n)e[n]=t[n].charCodeAt(0);return e}function RC(r){var e=0,t,n=iO(r),s=n.length+1,i,o,u,d,h;for(t=Ro(s),t[0]=n.length,i=1;i!=s;++i)t[i]=n[i-1];for(i=s-1;i>=0;--i)o=t[i],u=(e&16384)===0?0:1,d=e<<1&32767,h=u|d,e=h^o;return e^52811}var aO=(function(){function r(s,i){switch(i.type){case"base64":return e(Gi(s),i);case"binary":return e(s,i);case"buffer":return e($t&&Buffer.isBuffer(s)?s.toString("binary"):Zu(s),i);case"array":return e(Oh(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var o=i||{},u=o.dense?[]:{},d=s.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var h={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(m,v){Array.isArray(u)&&(u[v]=[]);for(var x=/\\\w+\b/g,y=0,E,_=-1;E=x.exec(m);){switch(E[0]){case"\\cell":var w=m.slice(y,x.lastIndex-E[0].length);if(w[0]==" "&&(w=w.slice(1)),++_,w.length){var j={v:w,t:"s"};Array.isArray(u)?u[v][_]=j:u[Jt({r:v,c:_})]=j}break}y=x.lastIndex}_>h.e.c&&(h.e.c=_)}),u["!ref"]=kr(h),u}function t(s,i){return $o(r(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=cr(s["!ref"]),u,d=Array.isArray(s),h=o.s.r;h<=o.e.r;++h){i.push("\\trowd\\trautofit1");for(var m=o.s.c;m<=o.e.c;++m)i.push("\\cellx"+(m+1));for(i.push("\\pard\\intbl"),m=o.s.c;m<=o.e.c;++m){var v=Jt({r:h,c:m});u=d?(s[h]||[])[m]:s[v],!(!u||u.v==null&&(!u.f||u.F))&&(i.push(" "+(u.w||(Ki(u),u.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:t,to_sheet:r,from_sheet:n}})();function aw(r){for(var e=0,t=1;e!=3;++e)t=t*256+(r[e]>255?255:r[e]<0?0:r[e]);return t.toString(16).toUpperCase().slice(1)}var oO=6,zi=oO;function Qf(r){return Math.floor((r+Math.round(128/zi)/256)*zi)}function Jf(r){return Math.floor((r-5)/zi*100+.5)/100}function zg(r){return Math.round((r*zi+5)/zi*256)/256}function m1(r){r.width?(r.wpx=Qf(r.width),r.wch=Jf(r.wpx),r.MDW=zi):r.wpx?(r.wch=Jf(r.wpx),r.width=zg(r.wch),r.MDW=zi):typeof r.wch=="number"&&(r.width=zg(r.wch),r.wpx=Qf(r.width),r.MDW=zi),r.customWidth&&delete r.customWidth}var lO=96,kC=lO;function Zf(r){return r*96/kC}function DC(r){return r*kC/96}function cO(r){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var n=t[0];n<=t[1];++n)r[n]!=null&&(e[e.length]=$e("numFmt",null,{numFmtId:n,formatCode:Yt(r[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=$e("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function uO(r){var e=[];return e[e.length]=$e("cellXfs",null),r.forEach(function(t){e[e.length]=$e("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=$e("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function PC(r,e){var t=[Dr,$e("styleSheet",null,{xmlns:lc[0],"xmlns:vt":Wr.vt})],n;return r.SSF&&(n=cO(r.SSF))!=null&&(t[t.length]=n),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=uO(e.cellXfs))&&(t[t.length]=n),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function dO(r,e){var t=r.read_shift(2),n=yn(r);return[t,n]}function fO(r,e,t){t||(t=Ae(6+4*e.length)),t.write_shift(2,r),Gr(e,t);var n=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),n}function hO(r,e,t){var n={};n.sz=r.read_shift(2)/20;var s=e9(r);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=r.read_shift(2);switch(i===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=r.read_shift(1);o!=0&&(n.underline=o);var u=r.read_shift(1);u>0&&(n.family=u);var d=r.read_shift(1);switch(d>0&&(n.charset=d),r.l++,n.color=Zj(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=yn(r),n}function mO(r,e){e||(e=Ae(153)),e.write_shift(2,r.sz*20),t9(r,e),e.write_shift(2,r.bold?700:400);var t=0;r.vertAlign=="superscript"?t=1:r.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,r.underline||0),e.write_shift(1,r.family||0),e.write_shift(1,r.charset||0),e.write_shift(1,0),Xf(r.color,e);var n=0;return n=2,e.write_shift(1,n),Gr(r.name,e),e.length>e.l?e.slice(0,e.l):e}var pO=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],sg,gO=xi;function ow(r,e){e||(e=Ae(84)),sg||(sg=r1(pO));var t=sg[r.patternType];t==null&&(t=40),e.write_shift(4,t);var n=0;if(t!=40)for(Xf({auto:1},e),Xf({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function xO(r,e){var t=r.l+e,n=r.read_shift(2),s=r.read_shift(2);return r.l=t,{ixfe:n,numFmtId:s}}function FC(r,e,t){t||(t=Ae(16)),t.write_shift(2,e||0),t.write_shift(2,r.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var n=0;return t.write_shift(1,n),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function qc(r,e){return e||(e=Ae(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var vO=xi;function yO(r,e){return e||(e=Ae(51)),e.write_shift(1,0),qc(null,e),qc(null,e),qc(null,e),qc(null,e),qc(null,e),e.length>e.l?e.slice(0,e.l):e}function _O(r,e){return e||(e=Ae(52)),e.write_shift(4,r.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Kf(r.name||"",e),e.length>e.l?e.slice(0,e.l):e}function EO(r,e,t){var n=Ae(2052);return n.write_shift(4,r),Kf(e,n),Kf(t,n),n.length>n.l?n.slice(0,n.l):n}function wO(r,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++t}),t!=0&&(ke(r,615,zs(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&ke(r,44,fO(s,e[s]))}),ke(r,616))}}function bO(r){var e=1;ke(r,611,zs(e)),ke(r,43,mO({sz:12,color:{theme:1},name:"Calibri",family:2})),ke(r,612)}function TO(r){var e=2;ke(r,603,zs(e)),ke(r,45,ow({patternType:"none"})),ke(r,45,ow({patternType:"gray125"})),ke(r,604)}function CO(r){var e=1;ke(r,613,zs(e)),ke(r,46,yO()),ke(r,614)}function AO(r){var e=1;ke(r,626,zs(e)),ke(r,47,FC({numFmtId:0},65535)),ke(r,627)}function SO(r,e){ke(r,617,zs(e.length)),e.forEach(function(t){ke(r,47,FC(t,0))}),ke(r,618)}function NO(r){var e=1;ke(r,619,zs(e)),ke(r,48,_O({xfId:0,name:"Normal"})),ke(r,620)}function IO(r){var e=0;ke(r,505,zs(e)),ke(r,506)}function RO(r){var e=0;ke(r,508,EO(e,"TableStyleMedium9","PivotStyleMedium4")),ke(r,509)}function kO(r,e){var t=$n();return ke(t,278),wO(t,r.SSF),bO(t),TO(t),CO(t),AO(t),SO(t,e.cellXfs),NO(t),IO(t),RO(t),ke(t,279),t.end()}function jC(r,e){if(e&&e.themeXLSX)return e.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var t=[Dr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function DO(r,e){return{flags:r.read_shift(4),version:r.read_shift(4),name:yn(r)}}function PO(r){var e=Ae(12+2*r.name.length);return e.write_shift(4,r.flags),e.write_shift(4,r.version),Gr(r.name,e),e.slice(0,e.l)}function FO(r){for(var e=[],t=r.read_shift(4);t-- >0;)e.push([r.read_shift(4),r.read_shift(4)]);return e}function jO(r){var e=Ae(4+8*r.length);e.write_shift(4,r.length);for(var t=0;t<r.length;++t)e.write_shift(4,r[t][0]),e.write_shift(4,r[t][1]);return e}function OO(r,e){var t=Ae(8+2*e.length);return t.write_shift(4,r),Gr(e,t),t.slice(0,t.l)}function BO(r){return r.l+=4,r.read_shift(4)!=0}function LO(r,e){var t=Ae(8);return t.write_shift(4,r),t.write_shift(4,1),t}function MO(){var r=$n();return ke(r,332),ke(r,334,zs(1)),ke(r,335,PO({name:"XLDAPR",version:12e4,flags:3496657072})),ke(r,336),ke(r,339,OO(1,"XLDAPR")),ke(r,52),ke(r,35,zs(514)),ke(r,4096,zs(0)),ke(r,4097,Es(1)),ke(r,36),ke(r,53),ke(r,340),ke(r,337,LO(1)),ke(r,51,jO([[1,0]])),ke(r,338),ke(r,333),r.end()}function OC(){var r=[Dr];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function VO(r){var e={};e.i=r.read_shift(4);var t={};t.r=r.read_shift(4),t.c=r.read_shift(4),e.r=Jt(t);var n=r.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var Bl=1024;function BC(r,e){for(var t=[21600,21600],n=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),s=[$e("xml",null,{"xmlns:v":ss.v,"xmlns:o":ss.o,"xmlns:x":ss.x,"xmlns:mv":ss.mv}).replace(/\/>/,">"),$e("o:shapelayout",$e("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"}),$e("v:shapetype",[$e("v:stroke",null,{joinstyle:"miter"}),$e("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:n})];Bl<r*1e3;)Bl+=1e3;return e.forEach(function(i){var o=qr(i[0]),u={color2:"#BEFF82",type:"gradient"};u.type=="gradient"&&(u.angle="-180");var d=u.type=="gradient"?$e("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,h=$e("v:fill",d,u),m={on:"t",obscured:"t"};++Bl,s=s.concat(["<v:shape"+Pu({id:"_x0000_s"+Bl,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",h,$e("v:shadow",null,m),$e("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",an("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),an("x:AutoFill","False"),an("x:Row",String(o.r)),an("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function LC(r){var e=[Dr,$e("comments",null,{xmlns:lc[0]})],t=[];return e.push("<authors>"),r.forEach(function(n){n[1].forEach(function(s){var i=Yt(s.a);t.indexOf(i)==-1&&(t.push(i),e.push("<author>"+i+"</author>")),s.T&&s.ID&&t.indexOf("tc="+s.ID)==-1&&(t.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),r.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=t.indexOf("tc="+n[1][0].ID):n[1].forEach(function(d){d.a&&(s=t.indexOf(Yt(d.a))),i.push(d.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)e.push(an("t",Yt(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,u=1;u<i.length;++u)o+=`Reply:
    `+i[u]+`
`;e.push(an("t",Yt(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function UO(r,e,t){var n=[Dr,$e("ThreadedComments",null,{xmlns:Wr.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,u){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var d={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};u==0?i=d.id:d.parentId=i,o.ID=d.id,o.a&&(d.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push($e("threadedComment",an("text",o.t||""),d))})}),n.push("</ThreadedComments>"),n.join("")}function zO(r){var e=[Dr,$e("personList",null,{xmlns:Wr.TCMNT,"xmlns:x":lc[0]}).replace(/[\/]>/,">")];return r.forEach(function(t,n){e.push($e("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function $O(r){var e={};e.iauthor=r.read_shift(4);var t=Go(r);return e.rfx=t.s,e.ref=Jt(t.s),r.l+=16,e}function HO(r,e){return e==null&&(e=Ae(36)),e.write_shift(4,r[1].iauthor),uc(r[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var WO=yn;function qO(r){return Gr(r.slice(0,54))}function GO(r){var e=$n(),t=[];return ke(e,628),ke(e,630),r.forEach(function(n){n[1].forEach(function(s){t.indexOf(s.a)>-1||(t.push(s.a.slice(0,54)),ke(e,632,qO(s.a)))})}),ke(e,631),ke(e,633),r.forEach(function(n){n[1].forEach(function(s){s.iauthor=t.indexOf(s.a);var i={s:qr(n[0]),e:qr(n[0])};ke(e,635,HO([i,s])),s.t&&s.t.length>0&&ke(e,637,Xj(s)),ke(e,636),delete s.iauthor})}),ke(e,634),ke(e,629),e.end()}function KO(r,e){e.FullPaths.forEach(function(t,n){if(n!=0){var s=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Zt.utils.cfb_add(r,s,e.FileIndex[n].content)}})}var MC=["xlsb","xlsm","xlam","biff8","xla"],XO=(function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(n,s,i,o){var u=!1,d=!1;i.length==0?d=!0:i.charAt(0)=="["&&(d=!0,i=i.slice(1,-1)),o.length==0?u=!0:o.charAt(0)=="["&&(u=!0,o=o.slice(1,-1));var h=i.length>0?parseInt(i,10)|0:0,m=o.length>0?parseInt(o,10)|0:0;return u?m+=e.c:--m,d?h+=e.r:--h,s+(u?"":"$")+vn(m)+(d?"":"$")+cn(h)}return function(s,i){return e=i,s.replace(r,t)}})(),p1=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,g1=(function(){return function(e,t){return e.replace(p1,function(n,s,i,o,u,d){var h=c1(o)-(i?0:t.c),m=l1(d)-(u?0:t.r),v=m==0?"":u?m+1:"["+m+"]",x=h==0?"":i?h+1:"["+h+"]";return s+"R"+v+"C"+x})}})();function YO(r,e){return r.replace(p1,function(t,n,s,i,o,u){return n+(s=="$"?s+i:vn(c1(i)+e.c))+(o=="$"?o+u:cn(l1(u)+e.r))})}function QO(r){return r.length!=1}function Ar(r){r.l+=1}function Ua(r,e){var t=r.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function VC(r,e,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return UC(r);t.biff==12&&(n=4)}var s=r.read_shift(n),i=r.read_shift(n),o=Ua(r),u=Ua(r);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:u[0],cRel:u[1],rRel:u[2]}}}function UC(r){var e=Ua(r),t=Ua(r),n=r.read_shift(1),s=r.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:t[0],c:s,cRel:t[1],rRel:t[2]}}}function JO(r,e,t){if(t.biff<8)return UC(r);var n=r.read_shift(t.biff==12?4:2),s=r.read_shift(t.biff==12?4:2),i=Ua(r),o=Ua(r);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function zC(r,e,t){if(t&&t.biff>=2&&t.biff<=5)return ZO(r);var n=r.read_shift(t&&t.biff==12?4:2),s=Ua(r);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function ZO(r){var e=Ua(r),t=r.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function e7(r){var e=r.read_shift(2),t=r.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function t7(r,e,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return r7(r);var s=r.read_shift(n>=12?4:2),i=r.read_shift(2),o=(i&16384)>>14,u=(i&32768)>>15;if(i&=16383,u==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:u}}function r7(r){var e=r.read_shift(2),t=r.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:s,rRel:n}}function n7(r,e,t){var n=(r[r.l++]&96)>>5,s=VC(r,t.biff>=2&&t.biff<=5?6:8,t);return[n,s]}function s7(r,e,t){var n=(r[r.l++]&96)>>5,s=r.read_shift(2,"i"),i=8;if(t)switch(t.biff){case 5:r.l+=12,i=6;break;case 12:i=12;break}var o=VC(r,i,t);return[n,s,o]}function i7(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function a7(r,e,t){var n=(r[r.l++]&96)>>5,s=r.read_shift(2),i=8;if(t)switch(t.biff){case 5:r.l+=12,i=6;break;case 12:i=12;break}return r.l+=i,[n,s]}function o7(r,e,t){var n=(r[r.l++]&96)>>5,s=JO(r,e-1,t);return[n,s]}function l7(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t.biff==2?6:t.biff==12?14:7,[n]}function lw(r){var e=r[r.l+1]&1,t=1;return r.l+=4,[e,t]}function c7(r,e,t){r.l+=2;for(var n=r.read_shift(t&&t.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(r.read_shift(t&&t.biff==2?1:2));return s}function u7(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function d7(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function f7(r){var e=r[r.l+1]&255?1:0;return r.l+=2,[e,r.read_shift(2)]}function h7(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=t&&t.biff==2?3:4,[n]}function $C(r){var e=r.read_shift(1),t=r.read_shift(1);return[e,t]}function m7(r){return r.read_shift(2),$C(r)}function p7(r){return r.read_shift(2),$C(r)}function g7(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=zC(r,0,t);return[n,s]}function x7(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=t7(r,0,t);return[n,s]}function v7(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=r.read_shift(2);t&&t.biff==5&&(r.l+=12);var i=zC(r,0,t);return[n,s,i]}function y7(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=r.read_shift(t&&t.biff<=3?1:2);return[yB[s],qC[s],n]}function _7(r,e,t){var n=r[r.l++],s=r.read_shift(1),i=t&&t.biff<=3?[n==88?-1:0,r.read_shift(1)]:E7(r);return[s,(i[0]===0?qC:vB)[i[1]]]}function E7(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function w7(r,e,t){r.l+=t&&t.biff==2?3:4}function b7(r,e,t){if(r.l++,t&&t.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),s=r.read_shift(t&&t.biff==2?1:2);return[n,s]}function T7(r){return r.l++,r0[r.read_shift(1)]}function C7(r){return r.l++,r.read_shift(2)}function A7(r){return r.l++,r.read_shift(1)!==0}function S7(r){return r.l++,dc(r)}function N7(r,e,t){return r.l++,CC(r,e-1,t)}function I7(r,e){var t=[r.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=v9(r,1)?"TRUE":"FALSE",e!=12&&(r.l+=7);break;case 37:case 16:t[1]=r0[r[r.l]],r.l+=e==12?4:8;break;case 0:r.l+=8;break;case 1:t[1]=dc(r);break;case 2:t[1]=w9(r,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function R7(r,e,t){for(var n=r.read_shift(t.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((t.biff==12?Go:C9)(r));return s}function k7(r,e,t){var n=0,s=0;t.biff==12?(n=r.read_shift(4),s=r.read_shift(4)):(s=1+r.read_shift(1),n=1+r.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var u=0;u!=s;++u)o[i][u]=I7(r,t.biff);return o}function D7(r,e,t){var n=r.read_shift(1)>>>5&3,s=!t||t.biff>=8?4:2,i=r.read_shift(s);switch(t.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,i]}function P7(r,e,t){if(t.biff==5)return F7(r);var n=r.read_shift(1)>>>5&3,s=r.read_shift(2),i=r.read_shift(4);return[n,s,i]}function F7(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[e,t,n]}function j7(r,e,t){var n=r.read_shift(1)>>>5&3;r.l+=t&&t.biff==2?3:4;var s=r.read_shift(t&&t.biff==2?1:2);return[n,s]}function O7(r,e,t){var n=r.read_shift(1)>>>5&3,s=r.read_shift(t&&t.biff==2?1:2);return[n,s]}function B7(r,e,t){var n=r.read_shift(1)>>>5&3;return r.l+=4,t.biff<8&&r.l--,t.biff==12&&(r.l+=2),[n]}function L7(r,e,t){var n=(r[r.l++]&96)>>5,s=r.read_shift(2),i=4;if(t)switch(t.biff){case 5:i=15;break;case 12:i=6;break}return r.l+=i,[n,s]}var M7=xi,V7=xi,U7=xi;function n0(r,e,t){return r.l+=2,[e7(r)]}function x1(r){return r.l+=6,[]}var z7=n0,$7=x1,H7=x1,W7=n0;function HC(r){return r.l+=2,[bC(r),r.read_shift(2)&1]}var q7=n0,G7=HC,K7=x1,X7=n0,Y7=n0,Q7=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function J7(r){r.l+=2;var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(4),s=r.read_shift(2),i=r.read_shift(2),o=Q7[t>>2&31];return{ixti:e,coltype:t&3,rt:o,idx:n,c:s,C:i}}function Z7(r){return r.l+=2,[r.read_shift(4)]}function eB(r,e,t){return r.l+=5,r.l+=2,r.l+=t.biff==2?1:4,["PTGSHEET"]}function tB(r,e,t){return r.l+=t.biff==2?4:5,["PTGENDSHEET"]}function rB(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function nB(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function sB(r){return r.l+=4,[0,0]}var cw={1:{n:"PtgExp",f:b7},2:{n:"PtgTbl",f:U7},3:{n:"PtgAdd",f:Ar},4:{n:"PtgSub",f:Ar},5:{n:"PtgMul",f:Ar},6:{n:"PtgDiv",f:Ar},7:{n:"PtgPower",f:Ar},8:{n:"PtgConcat",f:Ar},9:{n:"PtgLt",f:Ar},10:{n:"PtgLe",f:Ar},11:{n:"PtgEq",f:Ar},12:{n:"PtgGe",f:Ar},13:{n:"PtgGt",f:Ar},14:{n:"PtgNe",f:Ar},15:{n:"PtgIsect",f:Ar},16:{n:"PtgUnion",f:Ar},17:{n:"PtgRange",f:Ar},18:{n:"PtgUplus",f:Ar},19:{n:"PtgUminus",f:Ar},20:{n:"PtgPercent",f:Ar},21:{n:"PtgParen",f:Ar},22:{n:"PtgMissArg",f:Ar},23:{n:"PtgStr",f:N7},26:{n:"PtgSheet",f:eB},27:{n:"PtgEndSheet",f:tB},28:{n:"PtgErr",f:T7},29:{n:"PtgBool",f:A7},30:{n:"PtgInt",f:C7},31:{n:"PtgNum",f:S7},32:{n:"PtgArray",f:l7},33:{n:"PtgFunc",f:y7},34:{n:"PtgFuncVar",f:_7},35:{n:"PtgName",f:D7},36:{n:"PtgRef",f:g7},37:{n:"PtgArea",f:n7},38:{n:"PtgMemArea",f:j7},39:{n:"PtgMemErr",f:M7},40:{n:"PtgMemNoMem",f:V7},41:{n:"PtgMemFunc",f:O7},42:{n:"PtgRefErr",f:B7},43:{n:"PtgAreaErr",f:i7},44:{n:"PtgRefN",f:x7},45:{n:"PtgAreaN",f:o7},46:{n:"PtgMemAreaN",f:rB},47:{n:"PtgMemNoMemN",f:nB},57:{n:"PtgNameX",f:P7},58:{n:"PtgRef3d",f:v7},59:{n:"PtgArea3d",f:s7},60:{n:"PtgRefErr3d",f:L7},61:{n:"PtgAreaErr3d",f:a7},255:{}},iB={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},aB={1:{n:"PtgElfLel",f:HC},2:{n:"PtgElfRw",f:X7},3:{n:"PtgElfCol",f:z7},6:{n:"PtgElfRwV",f:Y7},7:{n:"PtgElfColV",f:W7},10:{n:"PtgElfRadical",f:q7},11:{n:"PtgElfRadicalS",f:K7},13:{n:"PtgElfColS",f:$7},15:{n:"PtgElfColSV",f:H7},16:{n:"PtgElfRadicalLel",f:G7},25:{n:"PtgList",f:J7},29:{n:"PtgSxName",f:Z7},255:{}},oB={0:{n:"PtgAttrNoop",f:sB},1:{n:"PtgAttrSemi",f:h7},2:{n:"PtgAttrIf",f:d7},4:{n:"PtgAttrChoose",f:c7},8:{n:"PtgAttrGoto",f:u7},16:{n:"PtgAttrSum",f:w7},32:{n:"PtgAttrBaxcel",f:lw},33:{n:"PtgAttrBaxcel",f:lw},64:{n:"PtgAttrSpace",f:m7},65:{n:"PtgAttrSpaceSemi",f:p7},128:{n:"PtgAttrIfError",f:f7},255:{}};function lB(r,e,t,n){if(n.biff<8)return xi(r,e);for(var s=r.l+e,i=[],o=0;o!==t.length;++o)switch(t[o][0]){case"PtgArray":t[o][1]=k7(r,0,n),i.push(t[o][1]);break;case"PtgMemArea":t[o][2]=R7(r,t[o][1],n),i.push(t[o][2]);break;case"PtgExp":n&&n.biff==12&&(t[o][1][1]=r.read_shift(4),i.push(t[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[o][0]}return e=s-r.l,e!==0&&i.push(xi(r,e)),i}function cB(r,e,t){for(var n=r.l+e,s,i,o=[];n!=r.l;)e=n-r.l,i=r[r.l],s=cw[i]||cw[iB[i]],(i===24||i===25)&&(s=(i===24?aB:oB)[r[r.l+1]]),!s||!s.f?xi(r,e):o.push([s.n,s.f(r,e,t)]);return o}function uB(r){for(var e=[],t=0;t<r.length;++t){for(var n=r[t],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var dB={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function fB(r,e){if(!r&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r+"'":r}function WC(r,e,t){if(!r)return"SH33TJSERR0";if(t.biff>8&&(!r.XTI||!r.XTI[e]))return r.SheetNames[e];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":r.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(t.biff>8)switch(r[n[0]][0]){case 357:return s=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?s:s+":"+r.SheetNames[n[2]];case 358:return t.SID!=null?r.SheetNames[t.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return r[n[0]][0][3]?(s=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function uw(r,e,t){var n=WC(r,e,t);return n=="#REF"?n:fB(n,t)}function Zl(r,e,t,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},u=[],d,h,m,v=0,x=0,y,E="";if(!r[0]||!r[0][0])return"";for(var _=-1,w="",j=0,k=r[0].length;j<k;++j){var R=r[0][j];switch(R[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=u.pop(),h=u.pop(),_>=0){switch(r[0][_][1][0]){case 0:w=vr(" ",r[0][_][1][1]);break;case 1:w=vr("\r",r[0][_][1][1]);break;default:if(w="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][_][1][0])}h=h+w,_=-1}u.push(h+dB[R[0]]+d);break;case"PtgIsect":d=u.pop(),h=u.pop(),u.push(h+" "+d);break;case"PtgUnion":d=u.pop(),h=u.pop(),u.push(h+","+d);break;case"PtgRange":d=u.pop(),h=u.pop(),u.push(h+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":m=du(R[1][1],o,s),u.push(fu(m,i));break;case"PtgRefN":m=t?du(R[1][1],t,s):R[1][1],u.push(fu(m,i));break;case"PtgRef3d":v=R[1][1],m=du(R[1][2],o,s),E=uw(n,v,s),u.push(E+"!"+fu(m,i));break;case"PtgFunc":case"PtgFuncVar":var B=R[1][0],U=R[1][1];B||(B=0),B&=127;var W=B==0?[]:u.slice(-B);u.length-=B,U==="User"&&(U=W.shift()),u.push(U+"("+W.join(",")+")");break;case"PtgBool":u.push(R[1]?"TRUE":"FALSE");break;case"PtgInt":u.push(R[1]);break;case"PtgNum":u.push(String(R[1]));break;case"PtgStr":u.push('"'+R[1].replace(/"/g,'""')+'"');break;case"PtgErr":u.push(R[1]);break;case"PtgAreaN":y=KE(R[1][1],t?{s:t}:o,s),u.push(rg(y,s));break;case"PtgArea":y=KE(R[1][1],o,s),u.push(rg(y,s));break;case"PtgArea3d":v=R[1][1],y=R[1][2],E=uw(n,v,s),u.push(E+"!"+rg(y,s));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=R[1][2];var N=(n.names||[])[x-1]||(n[0]||[])[x],I=N?N.Name:"SH33TJSNAME"+String(x);I&&I.slice(0,6)=="_xlfn."&&!s.xlfn&&(I=I.slice(6)),u.push(I);break;case"PtgNameX":var T=R[1][1];x=R[1][2];var C;if(s.biff<=5)T<0&&(T=-T),n[T]&&(C=n[T][x]);else{var D="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][x]&&n[T][x].itab>0&&(D=n.SheetNames[n[T][x].itab-1]+"!"):D=n.SheetNames[x-1]+"!"),n[T]&&n[T][x])D+=n[T][x].Name;else if(n[0]&&n[0][x])D+=n[0][x].Name;else{var F=(WC(n,T,s)||"").split(";;");F[x-1]?D=F[x-1]:D+="SH33TJSERRX"}u.push(D);break}C||(C={Name:"SH33TJSERRY"}),u.push(C.Name);break;case"PtgParen":var O="(",le=")";if(_>=0){switch(w="",r[0][_][1][0]){case 2:O=vr(" ",r[0][_][1][1])+O;break;case 3:O=vr("\r",r[0][_][1][1])+O;break;case 4:le=vr(" ",r[0][_][1][1])+le;break;case 5:le=vr("\r",r[0][_][1][1])+le;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][_][1][0])}_=-1}u.push(O+u.pop()+le);break;case"PtgRefErr":u.push("#REF!");break;case"PtgRefErr3d":u.push("#REF!");break;case"PtgExp":m={c:R[1][1],r:R[1][0]};var we={c:t.c,r:t.r};if(n.sharedf[Jt(m)]){var Ie=n.sharedf[Jt(m)];u.push(Zl(Ie,o,we,n,s))}else{var ie=!1;for(d=0;d!=n.arrayf.length;++d)if(h=n.arrayf[d],!(m.c<h[0].s.c||m.c>h[0].e.c)&&!(m.r<h[0].s.r||m.r>h[0].e.r)){u.push(Zl(h[1],o,we,n,s)),ie=!0;break}ie||u.push(R[1])}break;case"PtgArray":u.push("{"+uB(R[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":u.push("");break;case"PtgAreaErr":u.push("#REF!");break;case"PtgAreaErr3d":u.push("#REF!");break;case"PtgList":u.push("Table"+R[1].idx+"[#"+R[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(R));default:throw new Error("Unrecognized Formula Token: "+String(R))}var oe=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&_>=0&&oe.indexOf(r[0][j][0])==-1){R=r[0][_];var de=!0;switch(R[1][0]){case 4:de=!1;case 0:w=vr(" ",R[1][1]);break;case 5:de=!1;case 1:w=vr("\r",R[1][1]);break;default:if(w="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+R[1][0])}u.push((de?w:"")+u.pop()+(de?"":w)),_=-1}}if(u.length>1&&s.WTF)throw new Error("bad formula stack");return u[0]}function hB(r){if(r==null){var e=Ae(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof r=="number")return ko(r);return ko(0)}function mB(r,e,t,n,s){var i=Do(e,t,s),o=hB(r.v),u=Ae(6),d=33;u.write_shift(2,d),u.write_shift(4,0);for(var h=Ae(r.bf.length),m=0;m<r.bf.length;++m)h[m]=r.bf[m];var v=sn([i,o,u,h]);return v}function Bh(r,e,t){var n=r.read_shift(4),s=cB(r,n,t),i=r.read_shift(4),o=i>0?lB(r,i,s,t):null;return[s,o]}var pB=Bh,Lh=Bh,gB=Bh,xB=Bh,vB={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},qC={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},yB={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function _B(r){var e="of:="+r.replace(p1,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function EB(r){return r.replace(/\./,"!")}var hu=typeof Map<"u";function v1(r,e,t){var n=0,s=r.length;if(t){if(hu?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var i=hu?t.get(e):t[e];n<i.length;++n)if(r[i[n]].t===e)return r.Count++,i[n]}}else for(;n<s;++n)if(r[n].t===e)return r.Count++,n;return r[s]={t:e},r.Count++,r.Unique++,t&&(hu?(t.has(e)||t.set(e,[]),t.get(e).push(s)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(s))),s}function Mh(r,e){var t={min:r+1,max:r+1},n=-1;return e.MDW&&(zi=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?n=Jf(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(t.width=zg(n),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function GC(r,e){if(r){var t=[.7,.7,.75,.75,.3,.3];r.left==null&&(r.left=t[0]),r.right==null&&(r.right=t[1]),r.top==null&&(r.top=t[2]),r.bottom==null&&(r.bottom=t[3]),r.header==null&&(r.header=t[4]),r.footer==null&&(r.footer=t[5])}}function Ka(r,e,t){var n=t.revssf[e.z!=null?e.z:"General"],s=60,i=r.length;if(n==null&&t.ssf){for(;s<392;++s)if(t.ssf[s]==null){zT(e.z,s),t.ssf[s]=e.z,t.revssf[e.z]=n=s;break}}for(s=0;s!=i;++s)if(r[s].numFmtId===n)return s;return r[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function wB(r,e,t){if(r&&r["!ref"]){var n=cr(r["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+t+"): "+r["!ref"])}}function bB(r){if(r.length===0)return"";for(var e='<mergeCells count="'+r.length+'">',t=0;t!=r.length;++t)e+='<mergeCell ref="'+kr(r[t])+'"/>';return e+"</mergeCells>"}function TB(r,e,t,n,s){var i=!1,o={},u=null;if(n.bookType!=="xlsx"&&e.vbaraw){var d=e.SheetNames[t];try{e.Workbook&&(d=e.Workbook.Sheets[t].CodeName||d)}catch{}i=!0,o.codeName=Du(Yt(d))}if(r&&r["!outline"]){var h={summaryBelow:1,summaryRight:1};r["!outline"].above&&(h.summaryBelow=0),r["!outline"].left&&(h.summaryRight=0),u=(u||"")+$e("outlinePr",null,h)}!i&&!u||(s[s.length]=$e("sheetPr",u,o))}var CB=["objects","scenarios","selectLockedCells","selectUnlockedCells"],AB=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function SB(r){var e={sheet:1};return CB.forEach(function(t){r[t]!=null&&r[t]&&(e[t]="1")}),AB.forEach(function(t){r[t]!=null&&!r[t]&&(e[t]="0")}),r.password&&(e.password=RC(r.password).toString(16).toUpperCase()),$e("sheetProtection",null,e)}function NB(r){return GC(r),$e("pageMargins",null,r)}function IB(r,e){for(var t=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(t[t.length]=$e("col",null,Mh(s,n)));return t[t.length]="</cols>",t.join("")}function RB(r,e,t,n){var s=typeof r.ref=="string"?r.ref:kr(r.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var i=t.Workbook.Names,o=cs(s);o.s.r==o.e.r&&(o.e.r=cs(e["!ref"]).e.r,s=kr(o));for(var u=0;u<i.length;++u){var d=i[u];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+t.SheetNames[n]+"'!"+s;break}}return u==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+s}),$e("autoFilter",null,{ref:s})}function kB(r,e,t,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),$e("sheetViews",$e("sheetView",null,s),{})}function DB(r,e,t,n){if(r.c&&t["!comments"].push([e,r.c]),r.v===void 0&&typeof r.f!="string"||r.t==="z"&&!r.f)return"";var s="",i=r.t,o=r.v;if(r.t!=="z")switch(r.t){case"b":s=r.v?"1":"0";break;case"n":s=""+r.v;break;case"e":s=r0[r.v];break;case"d":n&&n.cellDates?s=Rn(r.v,-1).toISOString():(r=Wn(r),r.t="n",s=""+(r.v=Hn(Rn(r.v)))),typeof r.z>"u"&&(r.z=yr[14]);break;default:s=r.v;break}var u=an("v",Yt(s)),d={r:e},h=Ka(n.cellXfs,r,n);switch(h!==0&&(d.s=h),r.t){case"n":break;case"d":d.t="d";break;case"b":d.t="b";break;case"e":d.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){u=an("v",""+v1(n.Strings,r.v,n.revStrings)),d.t="s";break}d.t="str";break}if(r.t!=i&&(r.t=i,r.v=o),typeof r.f=="string"&&r.f){var m=r.F&&r.F.slice(0,e.length)==e?{t:"array",ref:r.F}:null;u=$e("f",Yt(r.f),m)+(r.v!=null?u:"")}return r.l&&t["!links"].push([e,r.l]),r.D&&(d.cm=1),$e("c",u,d)}function PB(r,e,t,n){var s=[],i=[],o=cr(r["!ref"]),u="",d,h="",m=[],v=0,x=0,y=r["!rows"],E=Array.isArray(r),_={r:h},w,j=-1;for(x=o.s.c;x<=o.e.c;++x)m[x]=vn(x);for(v=o.s.r;v<=o.e.r;++v){for(i=[],h=cn(v),x=o.s.c;x<=o.e.c;++x){d=m[x]+h;var k=E?(r[v]||[])[x]:r[d];k!==void 0&&(u=DB(k,d,r,e))!=null&&i.push(u)}(i.length>0||y&&y[v])&&(_={r:h},y&&y[v]&&(w=y[v],w.hidden&&(_.hidden=1),j=-1,w.hpx?j=Zf(w.hpx):w.hpt&&(j=w.hpt),j>-1&&(_.ht=j,_.customHeight=1),w.level&&(_.outlineLevel=w.level)),s[s.length]=$e("row",i.join(""),_))}if(y)for(;v<y.length;++v)y&&y[v]&&(_={r:v+1},w=y[v],w.hidden&&(_.hidden=1),j=-1,w.hpx?j=Zf(w.hpx):w.hpt&&(j=w.hpt),j>-1&&(_.ht=j,_.customHeight=1),w.level&&(_.outlineLevel=w.level),s[s.length]=$e("row","",_));return s.join("")}function KC(r,e,t,n){var s=[Dr,$e("worksheet",null,{xmlns:lc[0],"xmlns:r":Wr.r})],i=t.SheetNames[r],o=0,u="",d=t.Sheets[i];d==null&&(d={});var h=d["!ref"]||"A1",m=cr(h);if(m.e.c>16383||m.e.r>1048575){if(e.WTF)throw new Error("Range "+h+" exceeds format limit A1:XFD1048576");m.e.c=Math.min(m.e.c,16383),m.e.r=Math.min(m.e.c,1048575),h=kr(m)}n||(n={}),d["!comments"]=[];var v=[];TB(d,t,r,e,s),s[s.length]=$e("dimension",null,{ref:h}),s[s.length]=kB(d,e,r,t),e.sheetFormat&&(s[s.length]=$e("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),d["!cols"]!=null&&d["!cols"].length>0&&(s[s.length]=IB(d,d["!cols"])),s[o=s.length]="<sheetData/>",d["!links"]=[],d["!ref"]!=null&&(u=PB(d,e),u.length>0&&(s[s.length]=u)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),d["!protect"]&&(s[s.length]=SB(d["!protect"])),d["!autofilter"]!=null&&(s[s.length]=RB(d["!autofilter"],d,t,r)),d["!merges"]!=null&&d["!merges"].length>0&&(s[s.length]=bB(d["!merges"]));var x=-1,y,E=-1;return d["!links"].length>0&&(s[s.length]="<hyperlinks>",d["!links"].forEach(function(_){_[1].Target&&(y={ref:_[0]},_[1].Target.charAt(0)!="#"&&(E=Xt(n,-1,Yt(_[1].Target).replace(/#.*$/,""),Vt.HLINK),y["r:id"]="rId"+E),(x=_[1].Target.indexOf("#"))>-1&&(y.location=Yt(_[1].Target.slice(x+1))),_[1].Tooltip&&(y.tooltip=Yt(_[1].Tooltip)),s[s.length]=$e("hyperlink",null,y))}),s[s.length]="</hyperlinks>"),delete d["!links"],d["!margins"]!=null&&(s[s.length]=NB(d["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=an("ignoredErrors",$e("ignoredError",null,{numberStoredAsText:1,sqref:h}))),v.length>0&&(E=Xt(n,-1,"../drawings/drawing"+(r+1)+".xml",Vt.DRAW),s[s.length]=$e("drawing",null,{"r:id":"rId"+E}),d["!drawing"]=v),d["!comments"].length>0&&(E=Xt(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Vt.VML),s[s.length]=$e("legacyDrawing",null,{"r:id":"rId"+E}),d["!legacy"]=E),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function FB(r,e){var t={},n=r.l+e;t.r=r.read_shift(4),r.l+=4;var s=r.read_shift(2);r.l+=1;var i=r.read_shift(1);return r.l=n,i&7&&(t.level=i&7),i&16&&(t.hidden=!0),i&32&&(t.hpt=s/20),t}function jB(r,e,t){var n=Ae(145),s=(t["!rows"]||[])[r]||{};n.write_shift(4,r),n.write_shift(4,0);var i=320;s.hpx?i=Zf(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var u=0,d=n.l;n.l+=4;for(var h={r,c:0},m=0;m<16;++m)if(!(e.s.c>m+1<<10||e.e.c<m<<10)){for(var v=-1,x=-1,y=m<<10;y<m+1<<10;++y){h.c=y;var E=Array.isArray(t)?(t[h.r]||[])[h.c]:t[Jt(h)];E&&(v<0&&(v=y),x=y)}v<0||(++u,n.write_shift(4,v),n.write_shift(4,x))}var _=n.l;return n.l=d,n.write_shift(4,u),n.l=_,n.length>n.l?n.slice(0,n.l):n}function OB(r,e,t,n){var s=jB(n,t,e);(s.length>17||(e["!rows"]||[])[n])&&ke(r,0,s)}var BB=Go,LB=uc;function MB(){}function VB(r,e){var t={},n=r[r.l];return++r.l,t.above=!(n&64),t.left=!(n&128),r.l+=18,t.name=Yj(r),t}function UB(r,e,t){t==null&&(t=Ae(84+4*r.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),t.write_shift(1,n);for(var s=1;s<3;++s)t.write_shift(1,0);return Xf({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),cC(r,t),t.slice(0,t.l)}function zB(r){var e=Ts(r);return[e]}function $B(r,e,t){return t==null&&(t=Ae(8)),Ho(e,t)}function HB(r){var e=Wo(r);return[e]}function WB(r,e,t){return t==null&&(t=Ae(4)),qo(e,t)}function qB(r){var e=Ts(r),t=r.read_shift(1);return[e,t,"b"]}function GB(r,e,t){return t==null&&(t=Ae(9)),Ho(e,t),t.write_shift(1,r.v?1:0),t}function KB(r){var e=Wo(r),t=r.read_shift(1);return[e,t,"b"]}function XB(r,e,t){return t==null&&(t=Ae(5)),qo(e,t),t.write_shift(1,r.v?1:0),t}function YB(r){var e=Ts(r),t=r.read_shift(1);return[e,t,"e"]}function QB(r,e,t){return t==null&&(t=Ae(9)),Ho(e,t),t.write_shift(1,r.v),t}function JB(r){var e=Wo(r),t=r.read_shift(1);return[e,t,"e"]}function ZB(r,e,t){return t==null&&(t=Ae(8)),qo(e,t),t.write_shift(1,r.v),t.write_shift(2,0),t.write_shift(1,0),t}function eL(r){var e=Ts(r),t=r.read_shift(4);return[e,t,"s"]}function tL(r,e,t){return t==null&&(t=Ae(12)),Ho(e,t),t.write_shift(4,e.v),t}function rL(r){var e=Wo(r),t=r.read_shift(4);return[e,t,"s"]}function nL(r,e,t){return t==null&&(t=Ae(8)),qo(e,t),t.write_shift(4,e.v),t}function sL(r){var e=Ts(r),t=dc(r);return[e,t,"n"]}function iL(r,e,t){return t==null&&(t=Ae(16)),Ho(e,t),ko(r.v,t),t}function aL(r){var e=Wo(r),t=dc(r);return[e,t,"n"]}function oL(r,e,t){return t==null&&(t=Ae(12)),qo(e,t),ko(r.v,t),t}function lL(r){var e=Ts(r),t=uC(r);return[e,t,"n"]}function cL(r,e,t){return t==null&&(t=Ae(12)),Ho(e,t),dC(r.v,t),t}function uL(r){var e=Wo(r),t=uC(r);return[e,t,"n"]}function dL(r,e,t){return t==null&&(t=Ae(8)),qo(e,t),dC(r.v,t),t}function fL(r){var e=Ts(r),t=u1(r);return[e,t,"is"]}function hL(r){var e=Ts(r),t=yn(r);return[e,t,"str"]}function mL(r,e,t){return t==null&&(t=Ae(12+4*r.v.length)),Ho(e,t),Gr(r.v,t),t.length>t.l?t.slice(0,t.l):t}function pL(r){var e=Wo(r),t=yn(r);return[e,t,"str"]}function gL(r,e,t){return t==null&&(t=Ae(8+4*r.v.length)),qo(e,t),Gr(r.v,t),t.length>t.l?t.slice(0,t.l):t}function xL(r,e,t){var n=r.l+e,s=Ts(r);s.r=t["!row"];var i=r.read_shift(1),o=[s,i,"b"];if(t.cellFormula){r.l+=2;var u=Lh(r,n-r.l,t);o[3]=Zl(u,null,s,t.supbooks,t)}else r.l=n;return o}function vL(r,e,t){var n=r.l+e,s=Ts(r);s.r=t["!row"];var i=r.read_shift(1),o=[s,i,"e"];if(t.cellFormula){r.l+=2;var u=Lh(r,n-r.l,t);o[3]=Zl(u,null,s,t.supbooks,t)}else r.l=n;return o}function yL(r,e,t){var n=r.l+e,s=Ts(r);s.r=t["!row"];var i=dc(r),o=[s,i,"n"];if(t.cellFormula){r.l+=2;var u=Lh(r,n-r.l,t);o[3]=Zl(u,null,s,t.supbooks,t)}else r.l=n;return o}function _L(r,e,t){var n=r.l+e,s=Ts(r);s.r=t["!row"];var i=yn(r),o=[s,i,"str"];if(t.cellFormula){r.l+=2;var u=Lh(r,n-r.l,t);o[3]=Zl(u,null,s,t.supbooks,t)}else r.l=n;return o}var EL=Go,wL=uc;function bL(r,e){return e==null&&(e=Ae(4)),e.write_shift(4,r),e}function TL(r,e){var t=r.l+e,n=Go(r),s=d1(r),i=yn(r),o=yn(r),u=yn(r);r.l=t;var d={rfx:n,relId:s,loc:i,display:u};return o&&(d.Tooltip=o),d}function CL(r,e){var t=Ae(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));uc({s:qr(r[0]),e:qr(r[0])},t),f1("rId"+e,t);var n=r[1].Target.indexOf("#"),s=n==-1?"":r[1].Target.slice(n+1);return Gr(s||"",t),Gr(r[1].Tooltip||"",t),Gr("",t),t.slice(0,t.l)}function AL(){}function SL(r,e,t){var n=r.l+e,s=fC(r),i=r.read_shift(1),o=[s];if(o[2]=i,t.cellFormula){var u=pB(r,n-r.l,t);o[1]=u}else r.l=n;return o}function NL(r,e,t){var n=r.l+e,s=Go(r),i=[s];if(t.cellFormula){var o=xB(r,n-r.l,t);i[1]=o,r.l=n}else r.l=n;return i}function IL(r,e,t){t==null&&(t=Ae(18));var n=Mh(r,e);t.write_shift(-4,r),t.write_shift(-4,r),t.write_shift(4,(n.width||10)*256),t.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),t.write_shift(2,s),t}var XC=["left","right","top","bottom","header","footer"];function RL(r){var e={};return XC.forEach(function(t){e[t]=dc(r)}),e}function kL(r,e){return e==null&&(e=Ae(48)),GC(r),XC.forEach(function(t){ko(r[t],e)}),e}function DL(r){var e=r.read_shift(2);return r.l+=28,{RTL:e&32}}function PL(r,e,t){t==null&&(t=Ae(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function FL(r){var e=Ae(24);return e.write_shift(4,4),e.write_shift(4,1),uc(r,e),e}function jL(r,e){return e==null&&(e=Ae(66)),e.write_shift(2,r.password?RC(r.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,r[t[0]]!=null&&!r[t[0]]?1:0):e.write_shift(4,r[t[0]]!=null&&r[t[0]]?0:1)}),e}function OL(){}function BL(){}function LL(r,e,t,n,s,i,o){if(e.v===void 0)return!1;var u="";switch(e.t){case"b":u=e.v?"1":"0";break;case"d":e=Wn(e),e.z=e.z||yr[14],e.v=Hn(Rn(e.v)),e.t="n";break;case"n":case"e":u=""+e.v;break;default:u=e.v;break}var d={r:t,c:n};switch(d.s=Ka(s.cellXfs,e,s),e.l&&i["!links"].push([Jt(d),e.l]),e.c&&i["!comments"].push([Jt(d),e.c]),e.t){case"s":case"str":return s.bookSST?(u=v1(s.Strings,e.v,s.revStrings),d.t="s",d.v=u,o?ke(r,18,nL(e,d)):ke(r,7,tL(e,d))):(d.t="str",o?ke(r,17,gL(e,d)):ke(r,6,mL(e,d))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?ke(r,13,dL(e,d)):ke(r,2,cL(e,d)):o?ke(r,16,oL(e,d)):ke(r,5,iL(e,d)),!0;case"b":return d.t="b",o?ke(r,15,XB(e,d)):ke(r,4,GB(e,d)),!0;case"e":return d.t="e",o?ke(r,14,ZB(e,d)):ke(r,3,QB(e,d)),!0}return o?ke(r,12,WB(e,d)):ke(r,1,$B(e,d)),!0}function ML(r,e,t,n){var s=cr(e["!ref"]||"A1"),i,o="",u=[];ke(r,145);var d=Array.isArray(e),h=s.e.r;e["!rows"]&&(h=Math.max(s.e.r,e["!rows"].length-1));for(var m=s.s.r;m<=h;++m){o=cn(m),OB(r,e,s,m);var v=!1;if(m<=s.e.r)for(var x=s.s.c;x<=s.e.c;++x){m===s.s.r&&(u[x]=vn(x)),i=u[x]+o;var y=d?(e[m]||[])[x]:e[i];if(!y){v=!1;continue}v=LL(r,y,m,x,n,e,v)}}ke(r,146)}function VL(r,e){!e||!e["!merges"]||(ke(r,177,bL(e["!merges"].length)),e["!merges"].forEach(function(t){ke(r,176,wL(t))}),ke(r,178))}function UL(r,e){!e||!e["!cols"]||(ke(r,390),e["!cols"].forEach(function(t,n){t&&ke(r,60,IL(n,t))}),ke(r,391))}function zL(r,e){!e||!e["!ref"]||(ke(r,648),ke(r,649,FL(cr(e["!ref"]))),ke(r,650))}function $L(r,e,t){e["!links"].forEach(function(n){if(n[1].Target){var s=Xt(t,-1,n[1].Target.replace(/#.*$/,""),Vt.HLINK);ke(r,494,CL(n,s))}}),delete e["!links"]}function HL(r,e,t,n){if(e["!comments"].length>0){var s=Xt(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Vt.VML);ke(r,551,f1("rId"+s)),e["!legacy"]=s}}function WL(r,e,t,n){if(e["!autofilter"]){var s=e["!autofilter"],i=typeof s.ref=="string"?s.ref:kr(s.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var o=t.Workbook.Names,u=cs(i);u.s.r==u.e.r&&(u.e.r=cs(e["!ref"]).e.r,i=kr(u));for(var d=0;d<o.length;++d){var h=o[d];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==n){h.Ref="'"+t.SheetNames[n]+"'!"+i;break}}d==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+i}),ke(r,161,uc(cr(i))),ke(r,162)}}function qL(r,e,t){ke(r,133),ke(r,137,PL(e,t)),ke(r,138),ke(r,134)}function GL(r,e){e["!protect"]&&ke(r,535,jL(e["!protect"]))}function KL(r,e,t,n){var s=$n(),i=t.SheetNames[r],o=t.Sheets[i]||{},u=i;try{t&&t.Workbook&&(u=t.Workbook.Sheets[r].CodeName||u)}catch{}var d=cr(o["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],ke(s,129),(t.vbaraw||o["!outline"])&&ke(s,147,UB(u,o["!outline"])),ke(s,148,LB(d)),qL(s,o,t.Workbook),UL(s,o),ML(s,o,r,e),GL(s,o),WL(s,o,t,r),VL(s,o),$L(s,o,n),o["!margins"]&&ke(s,476,kL(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&zL(s,o),HL(s,o,r,n),ke(s,130),s.end()}function XL(r,e){r.l+=10;var t=yn(r);return{name:t}}var YL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function QL(r){return!r.Workbook||!r.Workbook.WBProps?"false":Nj(r.Workbook.WBProps.date1904)?"true":"false"}var JL="][*?/\\".split("");function YC(r,e){if(r.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return JL.forEach(function(n){if(r.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function ZL(r,e,t){r.forEach(function(n,s){YC(n);for(var i=0;i<s;++i)if(n==r[i])throw new Error("Duplicate Sheet Name: "+n);if(t){var o=e&&e[s]&&e[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function eM(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var e=r.Workbook&&r.Workbook.Sheets||[];ZL(r.SheetNames,e,!!r.vbaraw);for(var t=0;t<r.SheetNames.length;++t)wB(r.Sheets[r.SheetNames[t]],r.SheetNames[t],t)}function QC(r){var e=[Dr];e[e.length]=$e("workbook",null,{xmlns:lc[0],"xmlns:r":Wr.r});var t=r.Workbook&&(r.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(YL.forEach(function(u){r.Workbook.WBProps[u[0]]!=null&&r.Workbook.WBProps[u[0]]!=u[1]&&(n[u[0]]=r.Workbook.WBProps[u[0]])}),r.Workbook.WBProps.CodeName&&(n.codeName=r.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=$e("workbookPr",null,n);var s=r.Workbook&&r.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",i=0;i!=r.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==r.SheetNames.length&&(i=0),e[e.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",i=0;i!=r.SheetNames.length;++i){var o={name:Yt(r.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=$e("sheet",null,o)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(u){var d={name:u.Name};u.Comment&&(d.comment=u.Comment),u.Sheet!=null&&(d.localSheetId=""+u.Sheet),u.Hidden&&(d.hidden="1"),u.Ref&&(e[e.length]=$e("definedName",Yt(u.Ref),d))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function tM(r,e){var t={};return t.Hidden=r.read_shift(4),t.iTabID=r.read_shift(4),t.strRelID=Ug(r),t.name=yn(r),t}function rM(r,e){return e||(e=Ae(127)),e.write_shift(4,r.Hidden),e.write_shift(4,r.iTabID),f1(r.strRelID,e),Gr(r.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function nM(r,e){var t={},n=r.read_shift(4);t.defaultThemeVersion=r.read_shift(4);var s=e>8?yn(r):"";return s.length>0&&(t.CodeName=s),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function sM(r,e){e||(e=Ae(72));var t=0;return r&&r.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),cC(r&&r.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function iM(r,e,t){var n=r.l+e;r.l+=4,r.l+=1;var s=r.read_shift(4),i=Qj(r),o=gB(r,0,t),u=d1(r);r.l=n;var d={Name:i,Ptg:o};return s<268435455&&(d.Sheet=s),u&&(d.Comment=u),d}function aM(r,e){ke(r,143);for(var t=0;t!=e.SheetNames.length;++t){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,s={Hidden:n,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};ke(r,156,rM(s))}ke(r,144)}function oM(r,e){e||(e=Ae(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Gr("SheetJS",e),Gr(Uf.version,e),Gr(Uf.version,e),Gr("7262",e),e.length>e.l?e.slice(0,e.l):e}function lM(r,e){e||(e=Ae(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,r),e.write_shift(4,r);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function cM(r,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,n=0,s=-1,i=-1;n<t.length;++n)!t[n]||!t[n].Hidden&&s==-1?s=n:t[n].Hidden==1&&i==-1&&(i=n);i>s||(ke(r,135),ke(r,158,lM(s)),ke(r,136))}}function uM(r,e){var t=$n();return ke(t,131),ke(t,128,oM()),ke(t,153,sM(r.Workbook&&r.Workbook.WBProps||null)),cM(t,r),aM(t,r),ke(t,132),t.end()}function dM(r,e,t){return(e.slice(-4)===".bin"?uM:QC)(r)}function fM(r,e,t,n,s){return(e.slice(-4)===".bin"?KL:KC)(r,t,n,s)}function hM(r,e,t){return(e.slice(-4)===".bin"?kO:PC)(r,t)}function mM(r,e,t){return(e.slice(-4)===".bin"?sO:IC)(r,t)}function pM(r,e,t){return(e.slice(-4)===".bin"?GO:LC)(r)}function gM(r){return(r.slice(-4)===".bin"?MO:OC)()}function xM(r,e){var t=[];return r.Props&&t.push(h9(r.Props,e)),r.Custprops&&t.push(m9(r.Props,r.Custprops)),t.join("")}function vM(){return""}function yM(r,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var i=[];i.push($e("NumberFormat",null,{"ss:Format":Yt(yr[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};t.push($e("Style",i.join(""),o))}),$e("Styles",t.join(""))}function JC(r){return $e("NamedRange",null,{"ss:Name":r.Name,"ss:RefersTo":"="+g1(r.Ref,{r:0,c:0})})}function _M(r){if(!((r||{}).Workbook||{}).Names)return"";for(var e=r.Workbook.Names,t=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||t.push(JC(s)))}return $e("Names",t.join(""))}function EM(r,e,t,n){if(!r||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var u=s[o];u.Sheet==t&&(u.Name.match(/^_xlfn\./)||i.push(JC(u)))}return i.join("")}function wM(r,e,t,n){if(!r)return"";var s=[];if(r["!margins"]&&(s.push("<PageSetup>"),r["!margins"].header&&s.push($e("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&s.push($e("Footer",null,{"x:Margin":r["!margins"].footer})),s.push($e("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t])if(n.Workbook.Sheets[t].Hidden)s.push($e("Visible",n.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<t&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==t&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),r["!protect"]&&(s.push(an("ProtectContents","True")),r["!protect"].objects&&s.push(an("ProtectObjects","True")),r["!protect"].scenarios&&s.push(an("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?s.push(an("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&s.push(an("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){r["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":$e("WorksheetOptions",s.join(""),{xmlns:ss.x})}function bM(r){return r.map(function(e){var t=Sj(e.t||""),n=$e("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return $e("Comment",n,{"ss:Author":e.a})}).join("")}function TM(r,e,t,n,s,i,o){if(!r||r.v==null&&r.f==null)return"";var u={};if(r.f&&(u["ss:Formula"]="="+Yt(g1(r.f,o))),r.F&&r.F.slice(0,e.length)==e){var d=qr(r.F.slice(e.length+1));u["ss:ArrayRange"]="RC:R"+(d.r==o.r?"":"["+(d.r-o.r)+"]")+"C"+(d.c==o.c?"":"["+(d.c-o.c)+"]")}if(r.l&&r.l.Target&&(u["ss:HRef"]=Yt(r.l.Target),r.l.Tooltip&&(u["x:HRefScreenTip"]=Yt(r.l.Tooltip))),t["!merges"])for(var h=t["!merges"],m=0;m!=h.length;++m)h[m].s.c!=o.c||h[m].s.r!=o.r||(h[m].e.c>h[m].s.c&&(u["ss:MergeAcross"]=h[m].e.c-h[m].s.c),h[m].e.r>h[m].s.r&&(u["ss:MergeDown"]=h[m].e.r-h[m].s.r));var v="",x="";switch(r.t){case"z":if(!n.sheetStubs)return"";break;case"n":v="Number",x=String(r.v);break;case"b":v="Boolean",x=r.v?"1":"0";break;case"e":v="Error",x=r0[r.v];break;case"d":v="DateTime",x=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||yr[14]);break;case"s":v="String",x=Aj(r.v||"");break}var y=Ka(n.cellXfs,r,n);u["ss:StyleID"]="s"+(21+y),u["ss:Index"]=o.c+1;var E=r.v!=null?x:"",_=r.t=="z"?"":'<Data ss:Type="'+v+'">'+E+"</Data>";return(r.c||[]).length>0&&(_+=bM(r.c)),$e("Cell",_,u)}function CM(r,e){var t='<Row ss:Index="'+(r+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=DC(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function AM(r,e,t,n){if(!r["!ref"])return"";var s=cr(r["!ref"]),i=r["!merges"]||[],o=0,u=[];r["!cols"]&&r["!cols"].forEach(function(w,j){m1(w);var k=!!w.width,R=Mh(j,w),B={"ss:Index":j+1};k&&(B["ss:Width"]=Qf(R.width)),w.hidden&&(B["ss:Hidden"]="1"),u.push($e("Column",null,B))});for(var d=Array.isArray(r),h=s.s.r;h<=s.e.r;++h){for(var m=[CM(h,(r["!rows"]||[])[h])],v=s.s.c;v<=s.e.c;++v){var x=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>v)&&!(i[o].s.r>h)&&!(i[o].e.c<v)&&!(i[o].e.r<h)){(i[o].s.c!=v||i[o].s.r!=h)&&(x=!0);break}if(!x){var y={r:h,c:v},E=Jt(y),_=d?(r[h]||[])[v]:r[E];m.push(TM(_,E,r,e,t,n,y))}}m.push("</Row>"),m.length>2&&u.push(m.join(""))}return u.join("")}function SM(r,e,t){var n=[],s=t.SheetNames[r],i=t.Sheets[s],o=i?EM(i,e,r,t):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?AM(i,e,r,t):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(wM(i,e,r,t)),n.join("")}function NM(r,e){e||(e={}),r.SSF||(r.SSF=Wn(yr)),r.SSF&&(Fh(),Ph(r.SSF),e.revssf=jh(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF,e.cellXfs=[],Ka(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(xM(r,e)),t.push(vM()),t.push(""),t.push("");for(var n=0;n<r.SheetNames.length;++n)t.push($e("Worksheet",SM(n,e,r),{"ss:Name":Yt(r.SheetNames[n])}));return t[2]=yM(r,e),t[3]=_M(r),Dr+$e("Workbook",t.join(""),{xmlns:ss.ss,"xmlns:o":ss.o,"xmlns:x":ss.x,"xmlns:ss":ss.ss,"xmlns:dt":ss.dt,"xmlns:html":ss.html})}var ig={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function IM(r,e){var t=[],n=[],s=[],i=0,o,u=BE(YE,"n"),d=BE(QE,"n");if(r.Props)for(o=un(r.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(u,o[i])?t:Object.prototype.hasOwnProperty.call(d,o[i])?n:s).push([o[i],r.Props[o[i]]]);if(r.Custprops)for(o=un(r.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(r.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(u,o[i])?t:Object.prototype.hasOwnProperty.call(d,o[i])?n:s).push([o[i],r.Custprops[o[i]]]);var h=[];for(i=0;i<s.length;++i)wC.indexOf(s[i][0])>-1||yC.indexOf(s[i][0])>-1||s[i][1]!=null&&h.push(s[i]);n.length&&Zt.utils.cfb_add(e,"/SummaryInformation",rw(n,ig.SI,d,QE)),(t.length||h.length)&&Zt.utils.cfb_add(e,"/DocumentSummaryInformation",rw(t,ig.DSI,u,YE,h.length?h:null,ig.UDI))}function RM(r,e){var t=e||{},n=Zt.utils.cfb_new({root:"R"}),s="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":s="/Workbook",t.biff=8;break;case"biff5":s="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Zt.utils.cfb_add(n,s,ZC(r,t)),t.biff==8&&(r.Props||r.Custprops)&&IM(r,n),t.biff==8&&r.vbaraw&&KO(n,Zt.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),n}var kM={0:{f:FB},1:{f:zB},2:{f:lL},3:{f:YB},4:{f:qB},5:{f:sL},6:{f:hL},7:{f:eL},8:{f:_L},9:{f:yL},10:{f:xL},11:{f:vL},12:{f:HB},13:{f:uL},14:{f:JB},15:{f:KB},16:{f:aL},17:{f:pL},18:{f:rL},19:{f:u1},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:iM},40:{},42:{},43:{f:hO},44:{f:dO},45:{f:gO},46:{f:vO},47:{f:xO},48:{},49:{f:Hj},50:{},51:{f:FO},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:W9},62:{f:fL},63:{f:VO},64:{f:OL},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:xi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:DL},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:VB},148:{f:BB,p:16},151:{f:AL},152:{},153:{f:nM},154:{},155:{},156:{f:tM},157:{},158:{},159:{T:1,f:tO},160:{T:-1},161:{T:1,f:Go},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:EL},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:DO},336:{T:-1},337:{f:BO,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Ug},357:{},358:{},359:{},360:{T:1},361:{},362:{f:M9},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:SL},427:{f:NL},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:RL},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:MB},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:TL},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Ug},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:WO},633:{T:1},634:{T:-1},635:{T:1,f:$O},636:{T:-1},637:{f:Kj},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:XL},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:BL},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function We(r,e,t,n){var s=e;if(!isNaN(s)){var i=n||(t||[]).length||0,o=r.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&o1(t)&&r.push(t)}}function DM(r,e,t,n){var s=(t||[]).length||0;if(s<=8224)return We(r,e,t,s);var i=e;if(!isNaN(i)){for(var o=t.parts||[],u=0,d=0,h=0;h+(o[u]||8224)<=8224;)h+=o[u]||8224,u++;var m=r.next(4);for(m.write_shift(2,i),m.write_shift(2,h),r.push(t.slice(d,d+h)),d+=h;d<s;){for(m=r.next(4),m.write_shift(2,60),h=0;h+(o[u]||8224)<=8224;)h+=o[u]||8224,u++;m.write_shift(2,h),r.push(t.slice(d,d+h)),d+=h}}}function s0(r,e,t){return r||(r=Ae(7)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,0),r.write_shift(1,0),r}function PM(r,e,t,n){var s=Ae(9);return s0(s,r,e),TC(t,n||"b",s),s}function FM(r,e,t){var n=Ae(8+2*t.length);return s0(n,r,e),n.write_shift(1,t.length),n.write_shift(t.length,t,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function jM(r,e,t,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Hn(Rn(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?We(r,2,X9(t,n,s)):We(r,3,K9(t,n,s));return;case"b":case"e":We(r,5,PM(t,n,e.v,e.t));return;case"s":case"str":We(r,4,FM(t,n,(e.v||"").slice(0,255)));return}We(r,1,s0(null,t,n))}function OM(r,e,t,n){var s=Array.isArray(e),i=cr(e["!ref"]||"A1"),o,u="",d=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=kr(i)}for(var h=i.s.r;h<=i.e.r;++h){u=cn(h);for(var m=i.s.c;m<=i.e.c;++m){h===i.s.r&&(d[m]=vn(m)),o=d[m]+u;var v=s?(e[h]||[])[m]:e[o];v&&jM(r,v,h,m)}}}function BM(r,e){for(var t=e||{},n=$n(),s=0,i=0;i<r.SheetNames.length;++i)r.SheetNames[i]==t.sheet&&(s=i);if(s==0&&t.sheet&&r.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return We(n,t.biff==4?1033:t.biff==3?521:9,h1(r,16,t)),OM(n,r.Sheets[r.SheetNames[s]],s,t),We(n,10),n.end()}function LM(r,e,t){We(r,49,k9({sz:12,name:"Arial"},t))}function MM(r,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&We(r,1054,F9(s,e[s],t))})}function VM(r,e){var t=Ae(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),We(r,2151,t),t=Ae(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),SC(cr(e["!ref"]||"A1"),t),t.write_shift(4,4),We(r,2152,t)}function UM(r,e){for(var t=0;t<16;++t)We(r,224,sw({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){We(r,224,sw(n,0,e))})}function zM(r,e){for(var t=0;t<e["!links"].length;++t){var n=e["!links"][t];We(r,440,z9(n)),n[1].Tooltip&&We(r,2048,$9(n))}delete e["!links"]}function $M(r,e){if(e){var t=0;e.forEach(function(n,s){++t<=256&&n&&We(r,125,q9(Mh(s,n),s))})}}function HM(r,e,t,n,s){var i=16+Ka(s.cellXfs,e,s);if(e.v==null&&!e.bf){We(r,513,Do(t,n,i));return}if(e.bf)We(r,6,mB(e,t,n,s,i));else switch(e.t){case"d":case"n":var o=e.t=="d"?Hn(Rn(e.v)):e.v;We(r,515,L9(t,n,o,i));break;case"b":case"e":We(r,517,B9(t,n,e.v,i,s,e.t));break;case"s":case"str":if(s.bookSST){var u=v1(s.Strings,e.v,s.revStrings);We(r,253,D9(t,n,u,i))}else We(r,516,P9(t,n,(e.v||"").slice(0,255),i,s));break;default:We(r,513,Do(t,n,i))}}function WM(r,e,t){var n=$n(),s=t.SheetNames[r],i=t.Sheets[s]||{},o=(t||{}).Workbook||{},u=(o.Sheets||[])[r]||{},d=Array.isArray(i),h=e.biff==8,m,v="",x=[],y=cr(i["!ref"]||"A1"),E=h?65536:16384;if(y.e.c>255||y.e.r>=E){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");y.e.c=Math.min(y.e.c,255),y.e.r=Math.min(y.e.c,E-1)}We(n,2057,h1(t,16,e)),We(n,13,Es(1)),We(n,12,Es(100)),We(n,15,Nn(!0)),We(n,17,Nn(!1)),We(n,16,ko(.001)),We(n,95,Nn(!0)),We(n,42,Nn(!1)),We(n,43,Nn(!1)),We(n,130,Es(1)),We(n,128,O9()),We(n,131,Nn(!1)),We(n,132,Nn(!1)),h&&$M(n,i["!cols"]),We(n,512,j9(y,e)),h&&(i["!links"]=[]);for(var _=y.s.r;_<=y.e.r;++_){v=cn(_);for(var w=y.s.c;w<=y.e.c;++w){_===y.s.r&&(x[w]=vn(w)),m=x[w]+v;var j=d?(i[_]||[])[w]:i[m];j&&(HM(n,j,_,w,e),h&&j.l&&i["!links"].push([m,j.l]))}}var k=u.CodeName||u.name||s;return h&&We(n,574,R9((o.Views||[])[0])),h&&(i["!merges"]||[]).length&&We(n,229,U9(i["!merges"])),h&&zM(n,i),We(n,442,AC(k)),h&&VM(n,i),We(n,10),n.end()}function qM(r,e,t){var n=$n(),s=(r||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},u=t.biff==8,d=t.biff==5;if(We(n,2057,h1(r,5,t)),t.bookType=="xla"&&We(n,135),We(n,225,u?Es(1200):null),We(n,193,x9(2)),d&&We(n,191),d&&We(n,192),We(n,226),We(n,92,A9("SheetJS",t)),We(n,66,Es(u?1200:1252)),u&&We(n,353,Es(0)),u&&We(n,448),We(n,317,G9(r.SheetNames.length)),u&&r.vbaraw&&We(n,211),u&&r.vbaraw){var h=o.CodeName||"ThisWorkbook";We(n,442,AC(h))}We(n,156,Es(17)),We(n,25,Nn(!1)),We(n,18,Nn(!1)),We(n,19,Es(0)),u&&We(n,431,Nn(!1)),u&&We(n,444,Es(0)),We(n,61,I9()),We(n,64,Nn(!1)),We(n,141,Es(0)),We(n,34,Nn(QL(r)=="true")),We(n,14,Nn(!0)),u&&We(n,439,Nn(!1)),We(n,218,Es(0)),LM(n,r,t),MM(n,r.SSF,t),UM(n,t),u&&We(n,352,Nn(!1));var m=n.end(),v=$n();u&&We(v,140,H9()),u&&t.Strings&&DM(v,252,N9(t.Strings)),We(v,10);var x=v.end(),y=$n(),E=0,_=0;for(_=0;_<r.SheetNames.length;++_)E+=(u?12:11)+(u?2:1)*r.SheetNames[_].length;var w=m.length+E+x.length;for(_=0;_<r.SheetNames.length;++_){var j=i[_]||{};We(y,133,S9({pos:w,hs:j.Hidden||0,dt:0,name:r.SheetNames[_]},t)),w+=e[_].length}var k=y.end();if(E!=k.length)throw new Error("BS8 "+E+" != "+k.length);var R=[];return m.length&&R.push(m),k.length&&R.push(k),x.length&&R.push(x),sn(R)}function GM(r,e){var t=e||{},n=[];r&&!r.SSF&&(r.SSF=Wn(yr)),r&&r.SSF&&(Fh(),Ph(r.SSF),t.revssf=jh(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,y1(t),t.cellXfs=[],Ka(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var s=0;s<r.SheetNames.length;++s)n[n.length]=WM(s,t,r);return n.unshift(qM(r,n,t)),sn(n)}function ZC(r,e){for(var t=0;t<=r.SheetNames.length;++t){var n=r.Sheets[r.SheetNames[t]];if(!(!n||!n["!ref"])){var s=cs(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var i=e||{};switch(i.biff||2){case 8:case 5:return GM(r,e);case 4:case 3:case 2:return BM(r,e)}throw new Error("invalid type "+i.bookType+" for BIFF")}function KM(r,e,t,n){for(var s=r["!merges"]||[],i=[],o=e.s.c;o<=e.e.c;++o){for(var u=0,d=0,h=0;h<s.length;++h)if(!(s[h].s.r>t||s[h].s.c>o)&&!(s[h].e.r<t||s[h].e.c<o)){if(s[h].s.r<t||s[h].s.c<o){u=-1;break}u=s[h].e.r-s[h].s.r+1,d=s[h].e.c-s[h].s.c+1;break}if(!(u<0)){var m=Jt({r:t,c:o}),v=n.dense?(r[t]||[])[o]:r[m],x=v&&v.v!=null&&(v.h||Cj(v.w||(Ki(v),v.w)||""))||"",y={};u>1&&(y.rowspan=u),d>1&&(y.colspan=d),n.editable?x='<span contenteditable="true">'+x+"</span>":v&&(y["data-t"]=v&&v.t||"z",v.v!=null&&(y["data-v"]=v.v),v.z!=null&&(y["data-z"]=v.z),v.l&&(v.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+v.l.Target+'">'+x+"</a>")),y.id=(n.id||"sjs")+"-"+m,i.push($e("td",x,y))}}var E="<tr>";return E+i.join("")+"</tr>"}var XM='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',YM="</body></html>";function QM(r,e,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function eA(r,e){var t=e||{},n=t.header!=null?t.header:XM,s=t.footer!=null?t.footer:YM,i=[n],o=cs(r["!ref"]);t.dense=Array.isArray(r),i.push(QM(r,o,t));for(var u=o.s.r;u<=o.e.r;++u)i.push(KM(r,o,u,t));return i.push("</table>"+s),i.join("")}function tA(r,e,t){var n=t||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?qr(n.origin):n.origin;s=o.r,i=o.c}var u=e.getElementsByTagName("tr"),d=Math.min(n.sheetRows||1e7,u.length),h={s:{r:0,c:0},e:{r:s,c:i}};if(r["!ref"]){var m=cs(r["!ref"]);h.s.r=Math.min(h.s.r,m.s.r),h.s.c=Math.min(h.s.c,m.s.c),h.e.r=Math.max(h.e.r,m.e.r),h.e.c=Math.max(h.e.c,m.e.c),s==-1&&(h.e.r=s=m.e.r+1)}var v=[],x=0,y=r["!rows"]||(r["!rows"]=[]),E=0,_=0,w=0,j=0,k=0,R=0;for(r["!cols"]||(r["!cols"]=[]);E<u.length&&_<d;++E){var B=u[E];if(dw(B)){if(n.display)continue;y[_]={hidden:!0}}var U=B.children;for(w=j=0;w<U.length;++w){var W=U[w];if(!(n.display&&dw(W))){var N=W.hasAttribute("data-v")?W.getAttribute("data-v"):W.hasAttribute("v")?W.getAttribute("v"):Ij(W.innerHTML),I=W.getAttribute("data-z")||W.getAttribute("z");for(x=0;x<v.length;++x){var T=v[x];T.s.c==j+i&&T.s.r<_+s&&_+s<=T.e.r&&(j=T.e.c+1-i,x=-1)}R=+W.getAttribute("colspan")||1,((k=+W.getAttribute("rowspan")||1)>1||R>1)&&v.push({s:{r:_+s,c:j+i},e:{r:_+s+(k||1)-1,c:j+i+(R||1)-1}});var C={t:"s",v:N},D=W.getAttribute("data-t")||W.getAttribute("t")||"";N!=null&&(N.length==0?C.t=D||"z":n.raw||N.trim().length==0||D=="s"||(N==="TRUE"?C={t:"b",v:!0}:N==="FALSE"?C={t:"b",v:!1}:isNaN(Ui(N))?isNaN(ku(N).getDate())||(C={t:"d",v:Rn(N)},n.cellDates||(C={t:"n",v:Hn(C.v)}),C.z=n.dateNF||yr[14]):C={t:"n",v:Ui(N)})),C.z===void 0&&I!=null&&(C.z=I);var F="",O=W.getElementsByTagName("A");if(O&&O.length)for(var le=0;le<O.length&&!(O[le].hasAttribute("href")&&(F=O[le].getAttribute("href"),F.charAt(0)!="#"));++le);F&&F.charAt(0)!="#"&&(C.l={Target:F}),n.dense?(r[_+s]||(r[_+s]=[]),r[_+s][j+i]=C):r[Jt({c:j+i,r:_+s})]=C,h.e.c<j+i&&(h.e.c=j+i),j+=R}}++_}return v.length&&(r["!merges"]=(r["!merges"]||[]).concat(v)),h.e.r=Math.max(h.e.r,_-1+s),r["!ref"]=kr(h),_>=d&&(r["!fullref"]=kr((h.e.r=u.length-E+_-1+s,h))),r}function rA(r,e){var t=e||{},n=t.dense?[]:{};return tA(n,r,e)}function JM(r,e){return $o(rA(r,e),e)}function dw(r){var e="",t=ZM(r);return t&&(e=t(r).getPropertyValue("display")),e||(e=r.style&&r.style.display),e==="none"}function ZM(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var eV=(function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Pu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return Dr+e}})(),fw=(function(){var r=function(i){return Yt(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,n=function(i,o,u){var d=[];d.push('      <table:table table:name="'+Yt(o.SheetNames[u])+`" table:style-name="ta1">
`);var h=0,m=0,v=cs(i["!ref"]||"A1"),x=i["!merges"]||[],y=0,E=Array.isArray(i);if(i["!cols"])for(m=0;m<=v.e.c;++m)d.push("        <table:table-column"+(i["!cols"][m]?' table:style-name="co'+i["!cols"][m].ods+'"':"")+`></table:table-column>
`);var _="",w=i["!rows"]||[];for(h=0;h<v.s.r;++h)_=w[h]?' table:style-name="ro'+w[h].ods+'"':"",d.push("        <table:table-row"+_+`></table:table-row>
`);for(;h<=v.e.r;++h){for(_=w[h]?' table:style-name="ro'+w[h].ods+'"':"",d.push("        <table:table-row"+_+`>
`),m=0;m<v.s.c;++m)d.push(e);for(;m<=v.e.c;++m){var j=!1,k={},R="";for(y=0;y!=x.length;++y)if(!(x[y].s.c>m)&&!(x[y].s.r>h)&&!(x[y].e.c<m)&&!(x[y].e.r<h)){(x[y].s.c!=m||x[y].s.r!=h)&&(j=!0),k["table:number-columns-spanned"]=x[y].e.c-x[y].s.c+1,k["table:number-rows-spanned"]=x[y].e.r-x[y].s.r+1;break}if(j){d.push(t);continue}var B=Jt({r:h,c:m}),U=E?(i[h]||[])[m]:i[B];if(U&&U.f&&(k["table:formula"]=Yt(_B(U.f)),U.F&&U.F.slice(0,B.length)==B)){var W=cs(U.F);k["table:number-matrix-columns-spanned"]=W.e.c-W.s.c+1,k["table:number-matrix-rows-spanned"]=W.e.r-W.s.r+1}if(!U){d.push(e);continue}switch(U.t){case"b":R=U.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=U.v?"true":"false";break;case"n":R=U.w||String(U.v||0),k["office:value-type"]="float",k["office:value"]=U.v||0;break;case"s":case"str":R=U.v==null?"":U.v,k["office:value-type"]="string";break;case"d":R=U.w||Rn(U.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=Rn(U.v).toISOString(),k["table:style-name"]="ce1";break;default:d.push(e);continue}var N=r(R);if(U.l&&U.l.Target){var I=U.l.Target;I=I.charAt(0)=="#"?"#"+EB(I.slice(1)):I,I.charAt(0)!="#"&&!I.match(/^\w+:/)&&(I="../"+I),N=$e("text:a",N,{"xlink:href":I.replace(/&/g,"&amp;")})}d.push("          "+$e("table:table-cell",$e("text:p",N,{}),k)+`
`)}d.push(`        </table:table-row>
`)}return d.push(`      </table:table>
`),d.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var u=0;o.SheetNames.map(function(h){return o.Sheets[h]}).forEach(function(h){if(h&&h["!cols"]){for(var m=0;m<h["!cols"].length;++m)if(h["!cols"][m]){var v=h["!cols"][m];if(v.width==null&&v.wpx==null&&v.wch==null)continue;m1(v),v.ods=u;var x=h["!cols"][m].wpx+"px";i.push('  <style:style style:name="co'+u+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),i.push(`  </style:style>
`),++u}}});var d=0;o.SheetNames.map(function(h){return o.Sheets[h]}).forEach(function(h){if(h&&h["!rows"]){for(var m=0;m<h["!rows"].length;++m)if(h["!rows"][m]){h["!rows"][m].ods=d;var v=h["!rows"][m].hpx+"px";i.push('  <style:style style:name="ro'+d+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+v+`"/>
`),i.push(`  </style:style>
`),++d}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,u){var d=[Dr],h=Pu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),m=Pu({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});u.bookType=="fods"?(d.push("<office:document"+h+m+`>
`),d.push(xC().replace(/office:document-meta/g,"office:meta"))):d.push("<office:document-content"+h+`>
`),s(d,o),d.push(`  <office:body>
`),d.push(`    <office:spreadsheet>
`);for(var v=0;v!=o.SheetNames.length;++v)d.push(n(o.Sheets[o.SheetNames[v]],o,v));return d.push(`    </office:spreadsheet>
`),d.push(`  </office:body>
`),u.bookType=="fods"?d.push("</office:document>"):d.push("</office:document-content>"),d.join("")}})();function nA(r,e){if(e.bookType=="fods")return fw(r,e);var t=n1(),n="",s=[],i=[];return n="mimetype",Tt(t,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Tt(t,n,fw(r,e)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Tt(t,n,eV(r,e)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Tt(t,n,Dr+xC()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Tt(t,n,f9(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Tt(t,n,u9(s)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function eh(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function tV(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):Vs(Du(r))}function rV(r,e){e:for(var t=0;t<=r.length-e.length;++t){for(var n=0;n<e.length;++n)if(r[t+n]!=e[n])continue e;return!0}return!1}function za(r){var e=r.reduce(function(s,i){return s+i.length},0),t=new Uint8Array(e),n=0;return r.forEach(function(s){t.set(s,n),n+=s.length}),t}function nV(r,e,t){var n=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,s=t/Math.pow(10,n-6176);r[e+15]|=n>>7,r[e+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)r[e+i]=s&255;r[e+15]|=t>=0?0:128}function Fu(r,e){var t=e?e[0]:0,n=r[t]&127;e:if(r[t++]>=128&&(n|=(r[t]&127)<<7,r[t++]<128||(n|=(r[t]&127)<<14,r[t++]<128)||(n|=(r[t]&127)<<21,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,28),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,35),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,42),++t,r[t++]<128)))break e;return e&&(e[0]=t),n}function Kt(r){var e=new Uint8Array(7);e[0]=r&127;var t=1;e:if(r>127){if(e[t-1]|=128,e[t]=r>>7&127,++t,r<=16383||(e[t-1]|=128,e[t]=r>>14&127,++t,r<=2097151)||(e[t-1]|=128,e[t]=r>>21&127,++t,r<=268435455)||(e[t-1]|=128,e[t]=r/256>>>21&127,++t,r<=34359738367)||(e[t-1]|=128,e[t]=r/65536>>>21&127,++t,r<=4398046511103))break e;e[t-1]|=128,e[t]=r/16777216>>>21&127,++t}return e.slice(0,t)}function ql(r){var e=0,t=r[e]&127;e:if(r[e++]>=128){if(t|=(r[e]&127)<<7,r[e++]<128||(t|=(r[e]&127)<<14,r[e++]<128)||(t|=(r[e]&127)<<21,r[e++]<128))break e;t|=(r[e]&127)<<28}return t}function Or(r){for(var e=[],t=[0];t[0]<r.length;){var n=t[0],s=Fu(r,t),i=s&7;s=Math.floor(s/8);var o=0,u;if(s==0)break;switch(i){case 0:{for(var d=t[0];r[t[0]++]>=128;);u=r.slice(d,t[0])}break;case 5:o=4,u=r.slice(t[0],t[0]+o),t[0]+=o;break;case 1:o=8,u=r.slice(t[0],t[0]+o),t[0]+=o;break;case 2:o=Fu(r,t),u=r.slice(t[0],t[0]+o),t[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var h={data:u,type:i};e[s]==null?e[s]=[h]:e[s].push(h)}return e}function tn(r){var e=[];return r.forEach(function(t,n){t.forEach(function(s){s.data&&(e.push(Kt(n*8+s.type)),s.type==2&&e.push(Kt(s.data.length)),e.push(s.data))})}),za(e)}function Ls(r){for(var e,t=[],n=[0];n[0]<r.length;){var s=Fu(r,n),i=Or(r.slice(n[0],n[0]+s));n[0]+=s;var o={id:ql(i[1][0].data),messages:[]};i[2].forEach(function(u){var d=Or(u.data),h=ql(d[3][0].data);o.messages.push({meta:d,data:r.slice(n[0],n[0]+h)}),n[0]+=h}),(e=i[3])!=null&&e[0]&&(o.merge=ql(i[3][0].data)>>>0>0),t.push(o)}return t}function Il(r){var e=[];return r.forEach(function(t){var n=[];n[1]=[{data:Kt(t.id),type:0}],n[2]=[],t.merge!=null&&(n[3]=[{data:Kt(+!!t.merge),type:0}]);var s=[];t.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:Kt(o.data.length)}],n[2].push({data:tn(o.meta),type:2})});var i=tn(n);e.push(Kt(i.length)),e.push(i),s.forEach(function(o){return e.push(o)})}),za(e)}function sV(r,e){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var t=[0],n=Fu(e,t),s=[];t[0]<e.length;){var i=e[t[0]]&3;if(i==0){var o=e[t[0]++]>>2;if(o<60)++o;else{var u=o-59;o=e[t[0]],u>1&&(o|=e[t[0]+1]<<8),u>2&&(o|=e[t[0]+2]<<16),u>3&&(o|=e[t[0]+3]<<24),o>>>=0,o++,t[0]+=u}s.push(e.slice(t[0],t[0]+o)),t[0]+=o;continue}else{var d=0,h=0;if(i==1?(h=(e[t[0]]>>2&7)+4,d=(e[t[0]++]&224)<<3,d|=e[t[0]++]):(h=(e[t[0]++]>>2)+1,i==2?(d=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(d=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),s=[za(s)],d==0)throw new Error("Invalid offset 0");if(d>s[0].length)throw new Error("Invalid offset beyond length");if(h>=d)for(s.push(s[0].slice(-d)),h-=d;h>=s[s.length-1].length;)s.push(s[s.length-1]),h-=s[s.length-1].length;s.push(s[0].slice(-d,-d+h))}}var m=za(s);if(m.length!=n)throw new Error("Unexpected length: ".concat(m.length," != ").concat(n));return m}function Ms(r){for(var e=[],t=0;t<r.length;){var n=r[t++],s=r[t]|r[t+1]<<8|r[t+2]<<16;t+=3,e.push(sV(n,r.slice(t,t+s))),t+=s}if(t!==r.length)throw new Error("data is not a valid framed stream!");return za(e)}function Rl(r){for(var e=[],t=0;t<r.length;){var n=Math.min(r.length-t,268435455),s=new Uint8Array(4);e.push(s);var i=Kt(n),o=i.length;e.push(i),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(r.slice(t,t+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,t+=n}return za(e)}function ag(r,e){var t=new Uint8Array(32),n=eh(t),s=12,i=0;switch(t[0]=5,r.t){case"n":t[1]=2,nV(t,s,r.v),i|=1,s+=16;break;case"b":t[1]=6,n.setFloat64(s,r.v?1:0,!0),i|=2,s+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[1]=3,n.setUint32(s,e.indexOf(r.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(8,i,!0),t.slice(0,s)}function og(r,e){var t=new Uint8Array(32),n=eh(t),s=12,i=0;switch(t[0]=3,r.t){case"n":t[2]=2,n.setFloat64(s,r.v,!0),i|=32,s+=8;break;case"b":t[2]=6,n.setFloat64(s,r.v?1:0,!0),i|=32,s+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[2]=3,n.setUint32(s,e.indexOf(r.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(4,i,!0),t.slice(0,s)}function wa(r){var e=Or(r);return Fu(e[1][0].data)}function iV(r,e,t){var n,s,i,o;if(!((n=r[6])!=null&&n[0])||!((s=r[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var u=((o=(i=r[8])==null?void 0:i[0])==null?void 0:o.data)&&ql(r[8][0].data)>0||!1;if(u)throw"Math only works with normal offsets";for(var d=0,h=eh(r[7][0].data),m=0,v=[],x=eh(r[4][0].data),y=0,E=[],_=0;_<e.length;++_){if(e[_]==null){h.setUint16(_*2,65535,!0),x.setUint16(_*2,65535);continue}h.setUint16(_*2,m,!0),x.setUint16(_*2,y,!0);var w,j;switch(typeof e[_]){case"string":w=ag({t:"s",v:e[_]},t),j=og({t:"s",v:e[_]},t);break;case"number":w=ag({t:"n",v:e[_]},t),j=og({t:"n",v:e[_]},t);break;case"boolean":w=ag({t:"b",v:e[_]},t),j=og({t:"b",v:e[_]},t);break;default:throw new Error("Unsupported value "+e[_])}v.push(w),m+=w.length,E.push(j),y+=j.length,++d}for(r[2][0].data=Kt(d);_<r[7][0].data.length/2;++_)h.setUint16(_*2,65535,!0),x.setUint16(_*2,65535,!0);return r[6][0].data=za(v),r[3][0].data=za(E),d}function aV(r,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=r.Sheets[r.SheetNames[0]];r.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=cs(t["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(kr(n)));var i=th(t,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(V){return V.forEach(function(P){typeof P=="string"&&o.push(P)})});var u={},d=[],h=Zt.read(e.numbers,{type:"base64"});h.FileIndex.map(function(V,P){return[V,h.FullPaths[P]]}).forEach(function(V){var P=V[0],G=V[1];if(P.type==2&&P.name.match(/\.iwa/)){var re=P.content,xe=Ms(re),me=Ls(xe);me.forEach(function(Se){d.push(Se.id),u[Se.id]={deps:[],location:G,type:ql(Se.messages[0].meta[1][0].data)}})}}),d.sort(function(V,P){return V-P});var m=d.filter(function(V){return V>1}).map(function(V){return[V,Kt(V)]});h.FileIndex.map(function(V,P){return[V,h.FullPaths[P]]}).forEach(function(V){var P=V[0];if(V[1],!!P.name.match(/\.iwa/)){var G=Ls(Ms(P.content));G.forEach(function(re){re.messages.forEach(function(xe){m.forEach(function(me){re.messages.some(function(Se){return ql(Se.meta[1][0].data)!=11006&&rV(Se.data,me[1])})&&u[me[0]].deps.push(re.id)})})})}});for(var v=Zt.find(h,u[1].location),x=Ls(Ms(v.content)),y,E=0;E<x.length;++E){var _=x[E];_.id==1&&(y=_)}var w=wa(Or(y.messages[0].data)[1][0].data);for(v=Zt.find(h,u[w].location),x=Ls(Ms(v.content)),E=0;E<x.length;++E)_=x[E],_.id==w&&(y=_);for(w=wa(Or(y.messages[0].data)[2][0].data),v=Zt.find(h,u[w].location),x=Ls(Ms(v.content)),E=0;E<x.length;++E)_=x[E],_.id==w&&(y=_);for(w=wa(Or(y.messages[0].data)[2][0].data),v=Zt.find(h,u[w].location),x=Ls(Ms(v.content)),E=0;E<x.length;++E)_=x[E],_.id==w&&(y=_);var j=Or(y.messages[0].data);{j[6][0].data=Kt(n.e.r+1),j[7][0].data=Kt(n.e.c+1);var k=wa(j[46][0].data),R=Zt.find(h,u[k].location),B=Ls(Ms(R.content));{for(var U=0;U<B.length&&B[U].id!=k;++U);if(B[U].id!=k)throw"Bad ColumnRowUIDMapArchive";var W=Or(B[U].messages[0].data);W[1]=[],W[2]=[],W[3]=[];for(var N=0;N<=n.e.c;++N){var I=[];I[1]=I[2]=[{type:0,data:Kt(N+420690)}],W[1].push({type:2,data:tn(I)}),W[2].push({type:0,data:Kt(N)}),W[3].push({type:0,data:Kt(N)})}W[4]=[],W[5]=[],W[6]=[];for(var T=0;T<=n.e.r;++T)I=[],I[1]=I[2]=[{type:0,data:Kt(T+726270)}],W[4].push({type:2,data:tn(I)}),W[5].push({type:0,data:Kt(T)}),W[6].push({type:0,data:Kt(T)});B[U].messages[0].data=tn(W)}R.content=Rl(Il(B)),R.size=R.content.length,delete j[46];var C=Or(j[4][0].data);{C[7][0].data=Kt(n.e.r+1);var D=Or(C[1][0].data),F=wa(D[2][0].data);R=Zt.find(h,u[F].location),B=Ls(Ms(R.content));{if(B[0].id!=F)throw"Bad HeaderStorageBucket";var O=Or(B[0].messages[0].data);for(T=0;T<i.length;++T){var le=Or(O[2][0].data);le[1][0].data=Kt(T),le[4][0].data=Kt(i[T].length),O[2][T]={type:O[2][0].type,data:tn(le)}}B[0].messages[0].data=tn(O)}R.content=Rl(Il(B)),R.size=R.content.length;var we=wa(C[2][0].data);R=Zt.find(h,u[we].location),B=Ls(Ms(R.content));{if(B[0].id!=we)throw"Bad HeaderStorageBucket";for(O=Or(B[0].messages[0].data),N=0;N<=n.e.c;++N)le=Or(O[2][0].data),le[1][0].data=Kt(N),le[4][0].data=Kt(n.e.r+1),O[2][N]={type:O[2][0].type,data:tn(le)};B[0].messages[0].data=tn(O)}R.content=Rl(Il(B)),R.size=R.content.length;var Ie=wa(C[4][0].data);(function(){for(var V=Zt.find(h,u[Ie].location),P=Ls(Ms(V.content)),G,re=0;re<P.length;++re){var xe=P[re];xe.id==Ie&&(G=xe)}var me=Or(G.messages[0].data);{me[3]=[];var Se=[];o.forEach(function(lt,gt){Se[1]=[{type:0,data:Kt(gt)}],Se[2]=[{type:0,data:Kt(1)}],Se[3]=[{type:2,data:tV(lt)}],me[3].push({type:2,data:tn(Se)})})}G.messages[0].data=tn(me);var Ne=Il(P),nt=Rl(Ne);V.content=nt,V.size=V.content.length})();var ie=Or(C[3][0].data);{var oe=ie[1][0];delete ie[2];var de=Or(oe.data);{var Q=wa(de[2][0].data);(function(){for(var V=Zt.find(h,u[Q].location),P=Ls(Ms(V.content)),G,re=0;re<P.length;++re){var xe=P[re];xe.id==Q&&(G=xe)}var me=Or(G.messages[0].data);{delete me[6],delete ie[7];var Se=new Uint8Array(me[5][0].data);me[5]=[];for(var Ne=0,nt=0;nt<=n.e.r;++nt){var lt=Or(Se);Ne+=iV(lt,i[nt],o),lt[1][0].data=Kt(nt),me[5].push({data:tn(lt),type:2})}me[1]=[{type:0,data:Kt(n.e.c+1)}],me[2]=[{type:0,data:Kt(n.e.r+1)}],me[3]=[{type:0,data:Kt(Ne)}],me[4]=[{type:0,data:Kt(n.e.r+1)}]}G.messages[0].data=tn(me);var gt=Il(P),Le=Rl(gt);V.content=Le,V.size=V.content.length})()}oe.data=tn(de)}C[3][0].data=tn(ie)}j[4][0].data=tn(C)}y.messages[0].data=tn(j);var H=Il(x),M=Rl(H);return v.content=M,v.size=v.content.length,h}function oV(r){return function(t){for(var n=0;n!=r.length;++n){var s=r[n];t[s[0]]===void 0&&(t[s[0]]=s[1]),s[2]==="n"&&(t[s[0]]=Number(t[s[0]]))}}}function y1(r){oV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function lV(r,e){return e.bookType=="ods"?nA(r,e):e.bookType=="numbers"?aV(r,e):e.bookType=="xlsb"?cV(r,e):uV(r,e)}function cV(r,e){Bl=1024,r&&!r.SSF&&(r.SSF=Wn(yr)),r&&r.SSF&&(Fh(),Ph(r.SSF),e.revssf=jh(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,hu?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",n=MC.indexOf(e.bookType)>-1,s=mC();y1(e=e||{});var i=n1(),o="",u=0;if(e.cellXfs=[],Ka(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),o="docProps/core.xml",Tt(i,o,vC(r.Props,e)),s.coreprops.push(o),Xt(e.rels,2,o,Vt.CORE_PROPS),o="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var d=[],h=0;h<r.SheetNames.length;++h)(r.Workbook.Sheets[h]||{}).Hidden!=2&&d.push(r.SheetNames[h]);r.Props.SheetNames=d}for(r.Props.Worksheets=r.Props.SheetNames.length,Tt(i,o,_C(r.Props)),s.extprops.push(o),Xt(e.rels,3,o,Vt.EXT_PROPS),r.Custprops!==r.Props&&un(r.Custprops||{}).length>0&&(o="docProps/custom.xml",Tt(i,o,EC(r.Custprops)),s.custprops.push(o),Xt(e.rels,4,o,Vt.CUST_PROPS)),u=1;u<=r.SheetNames.length;++u){var m={"!id":{}},v=r.Sheets[r.SheetNames[u-1]],x=(v||{})["!type"]||"sheet";switch(x){case"chart":default:o="xl/worksheets/sheet"+u+"."+t,Tt(i,o,fM(u-1,o,e,r,m)),s.sheets.push(o),Xt(e.wbrels,-1,"worksheets/sheet"+u+"."+t,Vt.WS[0])}if(v){var y=v["!comments"],E=!1,_="";y&&y.length>0&&(_="xl/comments"+u+"."+t,Tt(i,_,pM(y,_)),s.comments.push(_),Xt(m,-1,"../comments"+u+"."+t,Vt.CMNT),E=!0),v["!legacy"]&&E&&Tt(i,"xl/drawings/vmlDrawing"+u+".vml",BC(u,v["!comments"])),delete v["!comments"],delete v["!legacy"]}m["!id"].rId1&&Tt(i,gC(o),Hl(m))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+t,Tt(i,o,mM(e.Strings,o,e)),s.strs.push(o),Xt(e.wbrels,-1,"sharedStrings."+t,Vt.SST)),o="xl/workbook."+t,Tt(i,o,dM(r,o)),s.workbooks.push(o),Xt(e.rels,1,o,Vt.WB),o="xl/theme/theme1.xml",Tt(i,o,jC(r.Themes,e)),s.themes.push(o),Xt(e.wbrels,-1,"theme/theme1.xml",Vt.THEME),o="xl/styles."+t,Tt(i,o,hM(r,o,e)),s.styles.push(o),Xt(e.wbrels,-1,"styles."+t,Vt.STY),r.vbaraw&&n&&(o="xl/vbaProject.bin",Tt(i,o,r.vbaraw),s.vba.push(o),Xt(e.wbrels,-1,"vbaProject.bin",Vt.VBA)),o="xl/metadata."+t,Tt(i,o,gM(o)),s.metadata.push(o),Xt(e.wbrels,-1,"metadata."+t,Vt.XLMETA),Tt(i,"[Content_Types].xml",pC(s,e)),Tt(i,"_rels/.rels",Hl(e.rels)),Tt(i,"xl/_rels/workbook."+t+".rels",Hl(e.wbrels)),delete e.revssf,delete e.ssf,i}function uV(r,e){Bl=1024,r&&!r.SSF&&(r.SSF=Wn(yr)),r&&r.SSF&&(Fh(),Ph(r.SSF),e.revssf=jh(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,hu?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",n=MC.indexOf(e.bookType)>-1,s=mC();y1(e=e||{});var i=n1(),o="",u=0;if(e.cellXfs=[],Ka(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),o="docProps/core.xml",Tt(i,o,vC(r.Props,e)),s.coreprops.push(o),Xt(e.rels,2,o,Vt.CORE_PROPS),o="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var d=[],h=0;h<r.SheetNames.length;++h)(r.Workbook.Sheets[h]||{}).Hidden!=2&&d.push(r.SheetNames[h]);r.Props.SheetNames=d}r.Props.Worksheets=r.Props.SheetNames.length,Tt(i,o,_C(r.Props)),s.extprops.push(o),Xt(e.rels,3,o,Vt.EXT_PROPS),r.Custprops!==r.Props&&un(r.Custprops||{}).length>0&&(o="docProps/custom.xml",Tt(i,o,EC(r.Custprops)),s.custprops.push(o),Xt(e.rels,4,o,Vt.CUST_PROPS));var m=["SheetJ5"];for(e.tcid=0,u=1;u<=r.SheetNames.length;++u){var v={"!id":{}},x=r.Sheets[r.SheetNames[u-1]],y=(x||{})["!type"]||"sheet";switch(y){case"chart":default:o="xl/worksheets/sheet"+u+"."+t,Tt(i,o,KC(u-1,e,r,v)),s.sheets.push(o),Xt(e.wbrels,-1,"worksheets/sheet"+u+"."+t,Vt.WS[0])}if(x){var E=x["!comments"],_=!1,w="";if(E&&E.length>0){var j=!1;E.forEach(function(k){k[1].forEach(function(R){R.T==!0&&(j=!0)})}),j&&(w="xl/threadedComments/threadedComment"+u+"."+t,Tt(i,w,UO(E,m,e)),s.threadedcomments.push(w),Xt(v,-1,"../threadedComments/threadedComment"+u+"."+t,Vt.TCMNT)),w="xl/comments"+u+"."+t,Tt(i,w,LC(E)),s.comments.push(w),Xt(v,-1,"../comments"+u+"."+t,Vt.CMNT),_=!0}x["!legacy"]&&_&&Tt(i,"xl/drawings/vmlDrawing"+u+".vml",BC(u,x["!comments"])),delete x["!comments"],delete x["!legacy"]}v["!id"].rId1&&Tt(i,gC(o),Hl(v))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+t,Tt(i,o,IC(e.Strings,e)),s.strs.push(o),Xt(e.wbrels,-1,"sharedStrings."+t,Vt.SST)),o="xl/workbook."+t,Tt(i,o,QC(r)),s.workbooks.push(o),Xt(e.rels,1,o,Vt.WB),o="xl/theme/theme1.xml",Tt(i,o,jC(r.Themes,e)),s.themes.push(o),Xt(e.wbrels,-1,"theme/theme1.xml",Vt.THEME),o="xl/styles."+t,Tt(i,o,PC(r,e)),s.styles.push(o),Xt(e.wbrels,-1,"styles."+t,Vt.STY),r.vbaraw&&n&&(o="xl/vbaProject.bin",Tt(i,o,r.vbaraw),s.vba.push(o),Xt(e.wbrels,-1,"vbaProject.bin",Vt.VBA)),o="xl/metadata."+t,Tt(i,o,OC()),s.metadata.push(o),Xt(e.wbrels,-1,"metadata."+t,Vt.XLMETA),m.length>1&&(o="xl/persons/person.xml",Tt(i,o,zO(m)),s.people.push(o),Xt(e.wbrels,-1,"persons/person.xml",Vt.PEOPLE)),Tt(i,"[Content_Types].xml",pC(s,e)),Tt(i,"_rels/.rels",Hl(e.rels)),Tt(i,"xl/_rels/workbook."+t+".rels",Hl(e.wbrels)),delete e.revssf,delete e.ssf,i}function dV(r,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":t=Gi(r.slice(0,12));break;case"binary":t=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function sA(r,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return e0(e.file,Zt.write(r,{type:$t?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Zt.write(r,e)}function fV(r,e){var t=Wn(e||{}),n=lV(r,t);return hV(n,t)}function hV(r,e){var t={},n=$t?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=n;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=r.FullPaths?Zt.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):r.generate(t);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(Dh(s))}return e.password&&typeof encrypt_agile<"u"?sA(encrypt_agile(s,e.password),e):e.type==="file"?e0(e.file,s):e.type=="string"?cu(s):s}function mV(r,e){var t=e||{},n=RM(r,t);return sA(n,t)}function oi(r,e,t){t||(t="");var n=t+r;switch(e.type){case"base64":return Ru(Du(n));case"binary":return Du(n);case"string":return r;case"file":return e0(e.file,n,"utf8");case"buffer":return $t?Yi(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):oi(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function pV(r,e){switch(e.type){case"base64":return Ru(r);case"binary":return r;case"string":return r;case"file":return e0(e.file,r,"binary");case"buffer":return $t?Yi(r,"binary"):r.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Id(r,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",n=0;n<r.length;++n)t+=String.fromCharCode(r[n]);return e.type=="base64"?Ru(t):e.type=="string"?cu(t):t;case"file":return e0(e.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+e.type)}}function iA(r,e){$F(),eM(r);var t=Wn(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var n=iA(r,t);return t.type="array",Dh(n)}var s=0;if(t.sheet&&(typeof t.sheet=="number"?s=t.sheet:s=r.SheetNames.indexOf(t.sheet),!r.SheetNames[s]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return oi(NM(r,t),t);case"slk":case"sylk":return oi(Q9.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"htm":case"html":return oi(eA(r.Sheets[r.SheetNames[s]],t),t);case"txt":return pV(aA(r.Sheets[r.SheetNames[s]],t),t);case"csv":return oi(_1(r.Sheets[r.SheetNames[s]],t),t,"\uFEFF");case"dif":return oi(J9.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"dbf":return Id(Y9.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"prn":return oi(Z9.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"rtf":return oi(aO.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"eth":return oi(NC.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"fods":return oi(nA(r,t),t);case"wk1":return Id(iw.sheet_to_wk1(r.Sheets[r.SheetNames[s]],t),t);case"wk3":return Id(iw.book_to_wk3(r,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),Id(ZC(r,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),mV(r,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return fV(r,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function gV(r){if(!r.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(r.bookType=t.slice(1)),r.bookType=e[r.bookType]||r.bookType}}function xV(r,e,t){var n={};return n.type="file",n.file=e,gV(n),iA(r,n)}function vV(r,e,t,n,s,i,o,u){var d=cn(t),h=u.defval,m=u.raw||!Object.prototype.hasOwnProperty.call(u,"raw"),v=!0,x=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:t,enumerable:!1})}catch{x.__rowNum__=t}else x.__rowNum__=t;if(!o||r[t])for(var y=e.s.c;y<=e.e.c;++y){var E=o?r[t][y]:r[n[y]+d];if(E===void 0||E.t===void 0){if(h===void 0)continue;i[y]!=null&&(x[i[y]]=h);continue}var _=E.v;switch(E.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+E.t)}if(i[y]!=null){if(_==null)if(E.t=="e"&&_===null)x[i[y]]=null;else if(h!==void 0)x[i[y]]=h;else if(m&&_===null)x[i[y]]=null;else continue;else x[i[y]]=m&&(E.t!=="n"||E.t==="n"&&u.rawNumbers!==!1)?_:Ki(E,_,u);_!=null&&(v=!1)}}return{row:x,isempty:v}}function th(r,e){if(r==null||r["!ref"]==null)return[];var t={t:"n",v:0},n=0,s=1,i=[],o=0,u="",d={s:{r:0,c:0},e:{r:0,c:0}},h=e||{},m=h.range!=null?h.range:r["!ref"];switch(h.header===1?n=1:h.header==="A"?n=2:Array.isArray(h.header)?n=3:h.header==null&&(n=0),typeof m){case"string":d=cr(m);break;case"number":d=cr(r["!ref"]),d.s.r=m;break;default:d=m}n>0&&(s=0);var v=cn(d.s.r),x=[],y=[],E=0,_=0,w=Array.isArray(r),j=d.s.r,k=0,R={};w&&!r[j]&&(r[j]=[]);var B=h.skipHidden&&r["!cols"]||[],U=h.skipHidden&&r["!rows"]||[];for(k=d.s.c;k<=d.e.c;++k)if(!(B[k]||{}).hidden)switch(x[k]=vn(k),t=w?r[j][k]:r[x[k]+v],n){case 1:i[k]=k-d.s.c;break;case 2:i[k]=x[k];break;case 3:i[k]=h.header[k-d.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),u=o=Ki(t,null,h),_=R[o]||0,!_)R[o]=1;else{do u=o+"_"+_++;while(R[u]);R[o]=_,R[u]=1}i[k]=u}for(j=d.s.r+s;j<=d.e.r;++j)if(!(U[j]||{}).hidden){var W=vV(r,d,j,x,n,i,w,h);(W.isempty===!1||(n===1?h.blankrows!==!1:h.blankrows))&&(y[E++]=W.row)}return y.length=E,y}var hw=/"/g;function yV(r,e,t,n,s,i,o,u){for(var d=!0,h=[],m="",v=cn(t),x=e.s.c;x<=e.e.c;++x)if(n[x]){var y=u.dense?(r[t]||[])[x]:r[n[x]+v];if(y==null)m="";else if(y.v!=null){d=!1,m=""+(u.rawNumbers&&y.t=="n"?y.v:Ki(y,null,u));for(var E=0,_=0;E!==m.length;++E)if((_=m.charCodeAt(E))===s||_===i||_===34||u.forceQuotes){m='"'+m.replace(hw,'""')+'"';break}m=="ID"&&(m='"ID"')}else y.f!=null&&!y.F?(d=!1,m="="+y.f,m.indexOf(",")>=0&&(m='"'+m.replace(hw,'""')+'"')):m="";h.push(m)}return u.blankrows===!1&&d?null:h.join(o)}function _1(r,e){var t=[],n=e??{};if(r==null||r["!ref"]==null)return"";var s=cr(r["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),u=n.RS!==void 0?n.RS:`
`,d=u.charCodeAt(0),h=new RegExp((i=="|"?"\\|":i)+"+$"),m="",v=[];n.dense=Array.isArray(r);for(var x=n.skipHidden&&r["!cols"]||[],y=n.skipHidden&&r["!rows"]||[],E=s.s.c;E<=s.e.c;++E)(x[E]||{}).hidden||(v[E]=vn(E));for(var _=0,w=s.s.r;w<=s.e.r;++w)(y[w]||{}).hidden||(m=yV(r,s,w,v,o,d,i,n),m!=null&&(n.strip&&(m=m.replace(h,"")),(m||n.blankrows!==!1)&&t.push((_++?u:"")+m)));return delete n.dense,t.join("")}function aA(r,e){e||(e={}),e.FS="	",e.RS=`
`;var t=_1(r,e);return t}function _V(r){var e="",t,n="";if(r==null||r["!ref"]==null)return[];var s=cr(r["!ref"]),i="",o=[],u,d=[],h=Array.isArray(r);for(u=s.s.c;u<=s.e.c;++u)o[u]=vn(u);for(var m=s.s.r;m<=s.e.r;++m)for(i=cn(m),u=s.s.c;u<=s.e.c;++u)if(e=o[u]+i,t=h?(r[m]||[])[u]:r[e],n="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;n=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}d[d.length]=e+"="+n}return d}function oA(r,e,t){var n=t||{},s=+!n.skipHeader,i=r||{},o=0,u=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var d=typeof n.origin=="string"?qr(n.origin):n.origin;o=d.r,u=d.c}var h,m={s:{c:0,r:0},e:{c:u,r:o+e.length-1+s}};if(i["!ref"]){var v=cr(i["!ref"]);m.e.c=Math.max(m.e.c,v.e.c),m.e.r=Math.max(m.e.r,v.e.r),o==-1&&(o=v.e.r+1,m.e.r=o+e.length-1+s)}else o==-1&&(o=0,m.e.r=e.length-1+s);var x=n.header||[],y=0;e.forEach(function(_,w){un(_).forEach(function(j){(y=x.indexOf(j))==-1&&(x[y=x.length]=j);var k=_[j],R="z",B="",U=Jt({c:u+y,r:o+w+s});h=ju(i,U),k&&typeof k=="object"&&!(k instanceof Date)?i[U]=k:(typeof k=="number"?R="n":typeof k=="boolean"?R="b":typeof k=="string"?R="s":k instanceof Date?(R="d",n.cellDates||(R="n",k=Hn(k)),B=n.dateNF||yr[14]):k===null&&n.nullError&&(R="e",k=0),h?(h.t=R,h.v=k,delete h.w,delete h.R,B&&(h.z=B)):i[U]=h={t:R,v:k},B&&(h.z=B))})}),m.e.c=Math.max(m.e.c,u+x.length-1);var E=cn(o);if(s)for(y=0;y<x.length;++y)i[vn(y+u)+E]={t:"s",v:x[y]};return i["!ref"]=kr(m),i}function EV(r,e){return oA(null,r,e)}function ju(r,e,t){if(typeof e=="string"){if(Array.isArray(r)){var n=qr(e);return r[n.r]||(r[n.r]=[]),r[n.r][n.c]||(r[n.r][n.c]={t:"z"})}return r[e]||(r[e]={t:"z"})}return typeof e!="number"?ju(r,Jt(e)):ju(r,Jt({r:e,c:t||0}))}function wV(r,e){if(typeof e=="number"){if(e>=0&&r.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=r.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function bV(){return{SheetNames:[],Sheets:{}}}function TV(r,e,t,n){var s=1;if(!t)for(;s<=65535&&r.SheetNames.indexOf(t="Sheet"+s)!=-1;++s,t=void 0);if(!t||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(t)>=0){var i=t.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||t;for(++s;s<=65535&&r.SheetNames.indexOf(t=o+s)!=-1;++s);}if(YC(t),r.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return r.SheetNames.push(t),r.Sheets[t]=e,t}function CV(r,e,t){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=wV(r,e);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}r.Workbook.Sheets[n].Hidden=t}function AV(r,e){return r.z=e,r}function lA(r,e,t){return e?(r.l={Target:e},t&&(r.l.Tooltip=t)):delete r.l,r}function SV(r,e,t){return lA(r,"#"+e,t)}function NV(r,e,t){r.c||(r.c=[]),r.c.push({t:e,a:t||"SheetJS"})}function IV(r,e,t,n){for(var s=typeof e!="string"?e:cr(e),i=typeof e=="string"?e:kr(e),o=s.s.r;o<=s.e.r;++o)for(var u=s.s.c;u<=s.e.c;++u){var d=ju(r,o,u);d.t="n",d.F=i,delete d.v,o==s.s.r&&u==s.s.c&&(d.f=t,n&&(d.D=!0))}return r}var Gc={encode_col:vn,encode_row:cn,encode_cell:Jt,encode_range:kr,decode_col:c1,decode_row:l1,split_cell:$j,decode_cell:qr,decode_range:cs,format_cell:Ki,sheet_add_aoa:lC,sheet_add_json:oA,sheet_add_dom:tA,aoa_to_sheet:cc,json_to_sheet:EV,table_to_sheet:rA,table_to_book:JM,sheet_to_csv:_1,sheet_to_txt:aA,sheet_to_json:th,sheet_to_html:eA,sheet_to_formulae:_V,sheet_to_row_object_array:th,sheet_get_cell:ju,book_new:bV,book_append_sheet:TV,book_set_sheet_visibility:CV,cell_set_number_format:AV,cell_set_hyperlink:lA,cell_set_internal_link:SV,cell_add_comment:NV,sheet_set_array_formula:IV,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function RV({mesas:r=[],salas:e=[]}){const[t,n]=se.useState([]),[s,i]=se.useState(!1),[o,u]=se.useState(!1),[d,h]=se.useState(1),[m,v]=se.useState(0),[x,y]=se.useState(0),[E,_]=se.useState([]),[w,j]=se.useState(!1),[k,R]=se.useState(!1),[B,U]=se.useState(1),[W,N]=se.useState(0),[I,T]=se.useState(0),[C,D]=se.useState(!1),[F,O]=se.useState(!1),[le,we]=se.useState({actual:0,total:0}),Ie=10,ie=500,oe=15,de="historial_cobrados_cache",Q="historial_ventas_cache",H=300*1e3;se.useEffect(()=>{V()},[]),se.useEffect(()=>{t.length>0&&M(de,{data:t,page:d,mostrar:o,total:m,suma:x,timestamp:Date.now()})},[t,d,o,m,x]),se.useEffect(()=>{E.length>0&&M(Q,{data:E,page:B,mostrar:k,total:W,suma:I,timestamp:Date.now()})},[E,B,k,W,I]);const M=(Le,ht)=>{try{localStorage.setItem(Le,JSON.stringify(ht)),console.log(` Datos guardados en cach: ${Le}`)}catch(Ze){console.warn(` Error guardando en cach: ${Le}`,Ze)}},V=()=>{try{const Le=localStorage.getItem(de);if(Le){const Ze=JSON.parse(Le);Date.now()-Ze.timestamp<H&&(console.log(" Cargando cobrados desde cach"),n(Ze.data||[]),h(Ze.page||1),u(Ze.mostrar||!1),v(Ze.total||0),y(Ze.suma||0))}const ht=localStorage.getItem(Q);if(ht){const Ze=JSON.parse(ht);Date.now()-Ze.timestamp<H&&(console.log(" Cargando historial desde cach"),_(Ze.data||[]),U(Ze.page||1),R(Ze.mostrar||!1),N(Ze.total||0),T(Ze.suma||0))}}catch(Le){console.warn(" Error cargando desde cach",Le)}},P=async(Le=!1)=>{if(!Le&&t.length>0){u(!0);return}i(!0);try{console.log(" Cargando pedidos cobrados desde Firestore...");const ht=Li(jt(Je,"cobrados"),Ml("fecha_cobrado","desc")),Me=(await os(ht)).docs.map(ue=>({id:ue.id,...ue.data()})),bt=Me.length,ne=Me.reduce((ue,Ke)=>ue+(Ke.total||0),0);n(Me),v(bt),y(ne),u(!0),h(1),console.log(` Cargados ${bt} pedidos cobrados - Total: $${ne.toFixed(2)}`)}catch(ht){console.error(" Error cargando pedidos cobrados:",ht),alert(`Error al cargar pedidos cobrados: ${ht.message}`)}finally{i(!1)}},G=async(Le=!1)=>{if(!Le&&E.length>0){R(!0);return}j(!0);try{console.log(" Cargando historial de ventas desde Firestore...");const ht=Li(jt(Je,"historial"),Ml("fecha_cerrado","desc")),Me=(await os(ht)).docs.map(ue=>({id:ue.id,...ue.data()})),bt=Me.length,ne=Me.reduce((ue,Ke)=>ue+(Ke.total||0),0);_(Me),N(bt),T(ne),R(!0),U(1),console.log(` Cargados ${bt} pedidos en historial - Total: $${ne.toFixed(2)}`)}catch(ht){console.error(" Error cargando historial de ventas:",ht),alert(`Error al cargar historial de ventas: ${ht.message}`)}finally{j(!1)}};se.useEffect(()=>{(m>=ie||W>=ie)&&(console.log(" Se alcanz el lmite de 500 pedidos. Solicitando limpieza..."),D(!0))},[m,W]);const re=()=>{console.log(" Exportando datos a Excel...");try{const Le=Gc.book_new();if(t.length>0){const Me=t.map(ne=>({ID:ne.id,Mesa:ne.mesa||ne.valor_mesa,Sala:ne.sala||ne.valor_sala||"",Cliente:ne.nombre_cliente||"",Total:ne.total||0,"Fecha Cobrado":ne.fecha_cobrado?new Date(ne.fecha_cobrado.toDate?ne.fecha_cobrado.toDate():ne.fecha_cobrado).toLocaleString("es-ES"):"",Motivo:ne.motivo_cobro||"",Items:ne.items?ne.items.map(ue=>`${ue.cantidad}x ${ue.nombre}`).join(", "):"","Estado Cuenta":ne.estado_cuenta||"","Cobro Pago":ne.cobro_pago||""})),bt=Gc.json_to_sheet(Me);Gc.book_append_sheet(Le,bt,"Pedidos Cobrados")}if(E.length>0){const Me=E.map(ne=>({ID:ne.id,Mesa:ne.mesa||ne.valor_mesa,Sala:ne.sala||ne.valor_sala||"",Cliente:ne.nombre_cliente||"",Total:ne.total||0,"Fecha Cerrado":ne.fecha_cerrado?new Date(ne.fecha_cerrado.toDate?ne.fecha_cerrado.toDate():ne.fecha_cerrado).toLocaleString("es-ES"):"","Motivo Cierre":ne.motivo_cierre||"",Items:ne.items?ne.items.map(ue=>`${ue.cantidad}x ${ue.nombre}`).join(", "):"",Estado:ne.estado||"","Cobro Pago":ne.cobro_pago||""})),bt=Gc.json_to_sheet(Me);Gc.book_append_sheet(Le,bt,"Historial Ventas")}const Ze=`historial_completo_${new Date().toISOString().split("T")[0]}.xlsx`;return xV(Le,Ze),console.log(` Archivo ${Ze} descargado exitosamente`),!0}catch(Le){return console.error(" Error exportando a Excel:",Le),alert(`Error al exportar: ${Le.message}`),!1}},xe=async()=>{O(!0),we({actual:0,total:0});try{console.log(` Iniciando limpieza de pedidos con ms de ${oe} das...`);const Le=new Date;Le.setDate(Le.getDate()-oe);let ht=0;const Ze=t.filter(ne=>(ne.fecha_cobrado?.toDate?ne.fecha_cobrado.toDate():new Date(ne.fecha_cobrado))<Le);console.log(` Encontrados ${Ze.length} pedidos cobrados antiguos`),we({actual:0,total:Ze.length});for(let ne=0;ne<Ze.length;ne++)await Ma(At(Je,"cobrados",Ze[ne].id)),we({actual:ne+1,total:Ze.length}),ht++;const Me=E.filter(ne=>(ne.fecha_cerrado?.toDate?ne.fecha_cerrado.toDate():new Date(ne.fecha_cerrado))<Le);console.log(` Encontrados ${Me.length} pedidos de historial antiguos`);const bt=Me.length;we({actual:0,total:bt});for(let ne=0;ne<Me.length;ne++)await Ma(At(Je,"historial",Me[ne].id)),we({actual:ne+1,total:bt}),ht++;console.log(` Limpieza completada: ${ht} pedidos eliminados`),await P(!0),await G(!0),alert(` Limpieza completada exitosamente.

${ht} pedidos antiguos eliminados.`),D(!1)}catch(Le){console.error(" Error limpiando pedidos antiguos:",Le),alert(`Error al limpiar pedidos: ${Le.message}`)}finally{O(!1),we({actual:0,total:0})}},me=async()=>{if(!re()){alert(" No se pudo exportar los datos. Por favor, intenta nuevamente.");return}if(!window.confirm(` Datos exportados exitosamente.

Deseas continuar con la limpieza de pedidos antiguos?

Se eliminarn los pedidos con ms de ${oe} das de antigedad.`)){D(!1);return}await xe()},Se=t.slice((d-1)*Ie,d*Ie),Ne=Math.ceil(t.length/Ie),nt=E.slice((B-1)*Ie,B*Ie),lt=Math.ceil(E.length/Ie),gt=Le=>Le?(Le.toDate?Le.toDate():new Date(Le)).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"N/A";return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:" Historial Completo"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Visualiza los pedidos cobrados y el historial de ventas en pantalla partida."})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 flex flex-col",style:{maxHeight:"80vh"},children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0",children:[c.jsx("h2",{className:"text-xl font-bold text-green-700",children:" Cobrados"}),o&&c.jsx("button",{onClick:()=>P(!0),disabled:s,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 text-sm",title:"Actualizar",children:""})]}),!o&&!s&&c.jsxs("button",{onClick:()=>P(!1),className:"w-full py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center justify-center space-x-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Ver Pedidos Cobrados"})]}),s&&c.jsxs("div",{className:"flex justify-center items-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),c.jsx("span",{className:"ml-3 text-gray-600 text-sm",children:"Cargando..."})]}),o&&!s&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 flex-shrink-0",children:[c.jsxs("div",{className:"bg-green-50 p-2 rounded border border-green-200",children:[c.jsx("div",{className:"text-xs text-green-700 font-medium",children:"Pedidos"}),c.jsx("div",{className:"text-lg font-bold text-green-700",children:m})]}),c.jsxs("div",{className:"bg-green-50 p-2 rounded border border-green-200",children:[c.jsx("div",{className:"text-xs text-green-700 font-medium",children:"Total $"}),c.jsxs("div",{className:"text-lg font-bold text-green-700",children:["$",x.toFixed(2)]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto mb-3",style:{minHeight:"300px"},children:t.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{className:"text-sm",children:"No hay pedidos cobrados"})]}):c.jsx("div",{className:"space-y-2",children:Se.map(Le=>c.jsx(mw,{pedido:Le,tipo:"cobrado",formatearFecha:gt},Le.id))})}),Ne>1&&c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 flex-shrink-0",children:[c.jsx("button",{onClick:()=>h(Math.max(1,d-1)),disabled:d===1,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 text-sm",children:""}),c.jsxs("span",{className:"text-sm text-gray-600",children:[d," / ",Ne]}),c.jsx("button",{onClick:()=>h(Math.min(Ne,d+1)),disabled:d===Ne,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 text-sm",children:""})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 flex flex-col",style:{maxHeight:"80vh"},children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0",children:[c.jsx("h2",{className:"text-xl font-bold text-purple-700",children:" Historial"}),k&&c.jsx("button",{onClick:()=>G(!0),disabled:w,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 text-sm",title:"Actualizar",children:""})]}),!k&&!w&&c.jsxs("button",{onClick:()=>G(!1),className:"w-full py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-semibold flex items-center justify-center space-x-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Ver Historial de Ventas"})]}),w&&c.jsxs("div",{className:"flex justify-center items-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),c.jsx("span",{className:"ml-3 text-gray-600 text-sm",children:"Cargando..."})]}),k&&!w&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 flex-shrink-0",children:[c.jsxs("div",{className:"bg-purple-50 p-2 rounded border border-purple-200",children:[c.jsx("div",{className:"text-xs text-purple-700 font-medium",children:"Ventas"}),c.jsx("div",{className:"text-lg font-bold text-purple-700",children:W})]}),c.jsxs("div",{className:"bg-purple-50 p-2 rounded border border-purple-200",children:[c.jsx("div",{className:"text-xs text-purple-700 font-medium",children:"Total $"}),c.jsxs("div",{className:"text-lg font-bold text-purple-700",children:["$",I.toFixed(2)]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto mb-3",style:{minHeight:"300px"},children:E.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{className:"text-sm",children:"No hay ventas en historial"})]}):c.jsx("div",{className:"space-y-2",children:nt.map(Le=>c.jsx(mw,{pedido:Le,tipo:"historial",formatearFecha:gt},Le.id))})}),lt>1&&c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 flex-shrink-0",children:[c.jsx("button",{onClick:()=>U(Math.max(1,B-1)),disabled:B===1,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 text-sm",children:""}),c.jsxs("span",{className:"text-sm text-gray-600",children:[B," / ",lt]}),c.jsx("button",{onClick:()=>U(Math.min(lt,B+1)),disabled:B===lt,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 text-sm",children:""})]})]})]})]}),C&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsx("div",{className:"bg-white rounded-lg shadow-2xl max-w-lg w-full p-6",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:c.jsx("span",{className:"text-4xl",children:""})}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Lmite de Registros Alcanzado!"}),c.jsxs("div",{className:"text-left bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 mb-6",children:[c.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:["Has alcanzado el lmite de ",c.jsxs("strong",{className:"text-red-600",children:[ie," pedidos"]})," en el historial."]}),c.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Para continuar, es necesario:"}),c.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-700 space-y-2 ml-4",children:[c.jsx("li",{children:" Exportar todos los datos a Excel"}),c.jsxs("li",{children:[" Limpiar pedidos con ms de ",oe," das"]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:[c.jsx("div",{className:"text-xs text-green-700 font-medium",children:"Cobrados"}),c.jsx("div",{className:"text-2xl font-bold text-green-700",children:m})]}),c.jsxs("div",{className:"bg-purple-50 p-3 rounded border border-purple-200",children:[c.jsx("div",{className:"text-xs text-purple-700 font-medium",children:"Historial"}),c.jsx("div",{className:"text-2xl font-bold text-purple-700",children:W})]})]}),F&&c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"mb-2",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-700 mb-1",children:[c.jsx("span",{children:"Limpiando datos..."}),c.jsxs("span",{children:[le.actual," / ",le.total]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:c.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${le.total>0?le.actual/le.total*100:0}%`}})})]})}),c.jsx("div",{className:"flex space-x-3",children:c.jsx("button",{onClick:me,disabled:F,className:"flex-1 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-semibold flex items-center justify-center space-x-2 transition-colors",children:F?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),c.jsx("span",{children:"Procesando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Exportar y Limpiar"})]})})}),c.jsx("p",{className:"mt-4 text-xs text-gray-500",children:" Esta accin es necesaria para mantener el rendimiento del sistema"})]})})})]})}function mw({pedido:r,tipo:e,formatearFecha:t}){const[n,s]=se.useState(!1),i=e==="cobrado"?"border-green-300":"border-purple-300",o=e==="cobrado"?"bg-green-50":"bg-purple-50",u=e==="cobrado"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700";return c.jsxs("div",{className:`border ${i} ${o} rounded p-2 hover:shadow transition-shadow`,children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsxs("span",{className:"text-xs font-bold text-gray-700",children:["Mesa ",r.mesa||r.valor_mesa||"N/A"]}),c.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${u} font-medium`,children:e==="cobrado"?"":""})]}),c.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["$",r.total?.toFixed(2)||"0.00"]}),c.jsx("div",{className:"text-xs text-gray-600 truncate",children:t(r.fecha_cobrado||r.fecha_cerrado||r.timestamp)})]}),c.jsx("button",{onClick:()=>s(!n),className:"ml-2 px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 whitespace-nowrap",children:n?"":""})]}),n&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-300 space-y-1",children:[r.nombre_cliente&&c.jsxs("div",{className:"text-xs text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"Cliente:"})," ",r.nombre_cliente]}),r.sala&&c.jsxs("div",{className:"text-xs text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"Sala:"})," ",r.sala]}),r.motivo_cobro&&e==="cobrado"&&c.jsxs("div",{className:"text-xs text-gray-600",children:[c.jsx("span",{className:"font-medium",children:"Motivo:"})," ",r.motivo_cobro]}),r.motivo_cierre&&e==="historial"&&c.jsxs("div",{className:"text-xs text-gray-600",children:[c.jsx("span",{className:"font-medium",children:"Motivo:"})," ",r.motivo_cierre]}),r.items&&r.items.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"Items:"}),c.jsx("div",{className:"space-y-1 pl-2",children:r.items.map((d,h)=>c.jsxs("div",{className:"text-xs text-gray-600",children:[c.jsxs("span",{className:"font-medium",children:[d.cantidad,"x"]})," ",d.nombre," - $",d.precio,d.agregados&&d.agregados.length>0&&c.jsxs("div",{className:"text-xs text-green-600 pl-2",children:["+ ",d.agregados.map(m=>m.nombre).join(", ")]}),d.ingredientes_removidos&&d.ingredientes_removidos.length>0&&c.jsxs("div",{className:"text-xs text-red-600 pl-2",children:["- ",d.ingredientes_removidos.join(", ")]})]},h))})]})]})]})}function kV(){const[r,e]=se.useState(!1),[t,n]=se.useState(null),[s,i]=se.useState("operaciones"),[o,u]=se.useState("comedor"),[d,h]=se.useState(null),[m,v]=se.useState([]),[x,y]=se.useState([]),[E,_]=se.useState([]),[w,j]=se.useState([]),[k,R]=se.useState([]),[B,U]=se.useState([]),[W,N]=se.useState(!0);se.useEffect(()=>{console.log(" Configurando listener de autenticacin...");const F=Vb(Na,async O=>{if(O){console.log(" Usuario autenticado:",O.uid);try{const{doc:le,getDoc:we}=await zD(async()=>{const{doc:ie,getDoc:oe}=await Promise.resolve().then(()=>Q8);return{doc:ie,getDoc:oe}},void 0),Ie=await we(le(Je,"usuarios",O.uid));if(Ie.exists()){const ie=Ie.data();console.log(" Datos del usuario:",ie),ie.user_rol==="admin"||ie.user_rol==="cocina"?(console.log(" Usuario con permisos confirmado:",ie.user_rol),n({uid:O.uid,email:O.email,...ie}),e(!0)):(console.log(" Usuario sin permisos:",ie.user_rol),n(null),e(!1))}else console.log(" Usuario no encontrado en Firestore"),n(null),e(!1)}catch(le){console.error(" Error al verificar rol del usuario:",le),n(null),e(!1)}}else console.log(" Usuario no autenticado"),n(null),e(!1)});return()=>{console.log(" Limpiando listener de autenticacin..."),F()}},[]),se.useEffect(()=>{const F=O=>{d&&!O.target.closest(".relative")&&h(null)};return document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[d]),se.useEffect(()=>{t?.user_rol==="cocina"&&(i("operaciones"),u("orders"))},[t]),se.useEffect(()=>{if(!r){N(!1);return}console.log(" Iniciando suscripciones de Admin a Firestore...");const F=ns(jt(Je,"pedidos"),oe=>{const de=oe.docs.map(Q=>({id:Q.id,...Q.data()}));v(de),console.log(" Pedidos actualizados en tiempo real:",de.length)}),O=ns(jt(Je,"mesas"),oe=>{const de=oe.docs.map(Q=>({id:Q.id,...Q.data()}));y(de),console.log(" Mesas actualizadas en tiempo real:",de.length)}),le=ns(jt(Je,"salas"),oe=>{const de=oe.docs.map(Q=>({id:Q.id,...Q.data()}));_(de),console.log(" Salas actualizadas en tiempo real:",de.length)}),we=ns(jt(Je,"usuarios"),oe=>{const de=oe.docs.map(Q=>({id:Q.id,...Q.data()}));j(de),console.log(" Usuarios actualizados en tiempo real:",de.length),de.filter(Q=>Q.user_rol==="mozo")}),Ie=ns(jt(Je,"productos"),oe=>{const de=oe.docs.map(Q=>({id:Q.id,...Q.data()}));R(de),console.log(" Productos actualizados en tiempo real:",de.length)}),ie=ns(jt(Je,"bebidas"),oe=>{const de=oe.docs.map(Q=>({id:Q.id,...Q.data()}));U(de),console.log(" Bebidas actualizadas en tiempo real:",de.length)});return N(!1),()=>{console.log(" Limpiando suscripciones de Admin..."),F(),O(),le(),we(),Ie(),ie()}},[r]);const I=async()=>{try{await JR(Na),console.log(" Sesin cerrada exitosamente")}catch(F){console.error(" Error al cerrar sesin:",F)}},T=F=>{if(console.log(" Login exitoso:",F),F.user_rol!=="admin"&&F.user_rol!=="cocina"){console.log(" Usuario sin permisos:",F.user_rol),alert(" No tienes permisos para acceder al panel de administracin. Solo administradores y personal de cocina pueden acceder.");return}console.log(" Usuario con permisos de administrador confirmado"),n(F),e(!0)},C=F=>{if(!(t?.user_rol==="cocina"&&F!=="operaciones")){if(i(F),F==="monitoreo"){u(F),h(null);return}switch(h(d===F?null:F),F){case"operaciones":t?.user_rol==="cocina"?u("orders"):u("comedor");break;case"gestion":u("rooms");break;case"estadisticas":u("stats");break;default:u("comedor")}}},D=async(F,O,le="")=>{console.log(" Cambiando estado de mesa:",F,"a:",O,"Reservado por:",le);try{const we={estado:O};O==="reservada"&&le?we.reservado_por=le:O==="inactiva"&&(we.reservado_por=""),await pr(At(Je,"mesas",F),we),console.log(" Estado de mesa actualizado exitosamente")}catch(we){console.error(" ERROR al cambiar estado de mesa:",we),alert(`Error al cambiar estado: ${we.message}`)}};return r?W?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 text-lg",children:" Cargando Panel de Administracin..."})]})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"lg:hidden min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-6",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 max-w-md text-center",children:[c.jsx("div",{className:"mb-6",children:c.jsx("img",{src:"/images/guri.png",alt:"Logo",className:"w-20 h-20 mx-auto object-contain"})}),c.jsx("div",{className:"mb-4",children:c.jsx("svg",{className:"w-16 h-16 mx-auto text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Panel de Administracin"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Para acceder al sistema de administracin, por favor usa un dispositivo con una pantalla ms grande."}),c.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-4 rounded",children:c.jsx("p",{className:"text-sm text-orange-800",children:" Se requiere una resolucin mnima de 1024px (tablet o PC)"})})]})}),c.jsxs("div",{className:"hidden lg:block min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[c.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-2"}),c.jsxs("div",{className:"bg-slate-800 h-16 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-700 to-slate-800 opacity-50"}),c.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='4'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})]}),c.jsx("header",{className:"bg-white shadow-xl border-b-4 border-orange-500",children:c.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"p-3 rounded-xl shadow-lg bg-transparent",children:c.jsx("img",{src:"/images/guri.png",alt:"JG Logo",className:"w-8 h-8 object-contain"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"JG"}),c.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Panel de Administracin"}),t&&c.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[c.jsxs("span",{className:"font-medium",children:[" ",t.user_name]}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:t.user_rol})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Pedidos Activos"}),c.jsx("div",{className:"text-3xl font-bold text-orange-600",children:m.filter(F=>F.estado!=="entregado").length})]}),c.jsx("div",{className:"w-px h-12 bg-gray-300"}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Salas"}),c.jsx("div",{className:"text-3xl font-bold text-blue-600",children:E.length})]}),c.jsx("div",{className:"w-px h-12 bg-gray-300"}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Total Mesas"}),c.jsx("div",{className:"text-3xl font-bold text-green-600",children:x.length})]}),c.jsx("div",{className:"w-px h-12 bg-gray-300"}),c.jsx("button",{onClick:I,className:"px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white text-sm font-semibold rounded-lg hover:from-red-600 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:" Cerrar Sesin"})]})]})})}),c.jsx("div",{className:"bg-white shadow-lg",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[c.jsxs("nav",{className:"flex space-x-1 pt-4",children:[c.jsxs("button",{onClick:()=>C("operaciones"),className:`px-6 py-3 text-sm font-semibold rounded-t-lg transition-all duration-200 flex items-center space-x-2 ${s==="operaciones"?"bg-orange-500 text-white shadow-lg transform -translate-y-1":"bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-800"}`,children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{children:"Operaciones"}),c.jsx("span",{className:"text-xs",children:""})]}),t?.user_rol==="admin"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>C("gestion"),className:`px-6 py-3 text-sm font-semibold rounded-t-lg transition-all duration-200 flex items-center space-x-2 ${s==="gestion"?"bg-green-500 text-white shadow-lg transform -translate-y-1":"bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-800"}`,children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{children:"Gestin"}),c.jsx("span",{className:"text-xs",children:""})]}),c.jsxs("button",{onClick:()=>C("monitoreo"),className:`px-6 py-3 text-sm font-semibold rounded-t-lg transition-all duration-200 flex items-center space-x-2 ${s==="monitoreo"?"bg-indigo-500 text-white shadow-lg transform -translate-y-1":"bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-800"}`,children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{children:"Monitoreo"})]})]})]}),c.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-3",children:[s==="operaciones"&&c.jsxs("div",{className:"flex space-x-4",children:[t?.user_rol==="admin"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{u("comedor"),h(null)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 ${o==="comedor"?"bg-orange-100 text-orange-700 border-2 border-orange-300 shadow-md":"text-gray-600 hover:bg-orange-50 hover:text-orange-600"}`,children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Mesas"}),c.jsx("span",{className:"bg-orange-200 text-orange-800 px-2 py-1 rounded-full text-xs font-bold",children:x.length})]}),c.jsxs("button",{onClick:()=>{u("history"),h(null)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 ${o==="history"?"bg-orange-100 text-orange-700 border-2 border-orange-300 shadow-md":"text-gray-600 hover:bg-orange-50 hover:text-orange-600"}`,children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Historial"})]})]}),c.jsxs("button",{onClick:()=>{u("orders"),h(null)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 ${o==="orders"?"bg-orange-100 text-orange-700 border-2 border-orange-300 shadow-md":"text-gray-600 hover:bg-orange-50 hover:text-orange-600"}`,children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Pedidos Pendientes"}),c.jsx("span",{className:"bg-orange-200 text-orange-800 px-2 py-1 rounded-full text-xs font-bold",children:m.filter(F=>F.estado!=="entregado").length})]})]}),s==="gestion"&&c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("button",{onClick:()=>{u("rooms"),h(null)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 ${o==="rooms"?"bg-green-100 text-green-700 border-2 border-green-300 shadow-md":"text-gray-600 hover:bg-green-50 hover:text-green-600"}`,children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Gestin de Salas"})]}),c.jsxs("button",{onClick:()=>{u("tables"),h(null)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 ${o==="tables"?"bg-green-100 text-green-700 border-2 border-green-300 shadow-md":"text-gray-600 hover:bg-green-50 hover:text-green-600"}`,children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Gestin de Mesas"})]}),c.jsxs("button",{onClick:()=>{u("menu"),h(null)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 ${o==="menu"?"bg-green-100 text-green-700 border-2 border-green-300 shadow-md":"text-gray-600 hover:bg-green-50 hover:text-green-600"}`,children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Gestin de Men"})]}),c.jsxs("button",{onClick:()=>{u("categorias"),h(null)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2 ${o==="categorias"?"bg-green-100 text-green-700 border-2 border-green-300 shadow-md":"text-gray-600 hover:bg-green-50 hover:text-green-600"}`,children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Gestin de Categoras"})]})]}),s==="reservas"&&c.jsx("div",{className:"flex space-x-4",children:c.jsxs("div",{className:"px-4 py-2 text-sm font-medium text-gray-600 flex items-center space-x-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Gestin de Reservas"})]})})]})]})}),c.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[o==="comedor"&&c.jsx(MF,{mesas:x,onStatusChange:D,salas:E}),o==="orders"&&c.jsx(TT,{orders:m.filter(F=>F.estado!=="entregado"),onUpdateStatus:async(F,O)=>{try{const le=At(Je,"pedidos",F);await pr(le,{estado:O})}catch(le){console.error("Error al actualizar estado:",le),alert(`Error al actualizar estado: ${le.message}`)}},onDeleteOrder:async F=>{try{console.log("Eliminando pedido:",F)}catch(O){console.error("Error al eliminar pedido:",O)}},mesas:x,salas:E,title:" Pedidos Activos",showCompletedOrders:!1}),o==="history"&&c.jsx(RV,{mesas:x,salas:E}),o==="menu"&&c.jsx(lF,{productos:k,bebidas:B}),o==="categorias"&&c.jsx(uF,{}),o==="rooms"&&c.jsx(LF,{salas:E,setSalas:_}),o==="tables"&&c.jsx(BF,{mesas:x,setMesas:y,salas:E,usuarios:w}),o==="monitoreo"&&c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:" Monitoreo del Sistema"}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Monitores del Sistema"}),c.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[c.jsx(LD,{}),c.jsx(BD,{})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" Informacin del Sistema"}),c.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[c.jsxs("p",{children:[" ",c.jsx("strong",{children:"Fase 1:"})," Cach local implementado para productos y bebidas"]}),c.jsxs("p",{children:[" ",c.jsx("strong",{children:"TTL:"})," 10 minutos para datos estticos"]}),c.jsxs("p",{children:[" ",c.jsx("strong",{children:"Monitoreo:"})," Mtricas en tiempo real de lecturas de Firestore"]}),c.jsxs("p",{children:[" ",c.jsx("strong",{children:"Rollback:"})," Disponible desde el monitor de Firestore"]})]})]})]})})]})})]})]}):c.jsx($D,{onLogin:T})}function DV(){const[r,e]=se.useState([]),[t,n]=se.useState([]),[s,i]=se.useState(!0);se.useEffect(()=>{console.log(" Iniciando suscripciones de Cocina a Firestore...");const d=ns(jt(Je,"pedidos"),m=>{const v=m.docs.map(x=>({id:x.id,...x.data()}));e(v),console.log(" Pedidos actualizados en tiempo real:",v.length)}),h=ns(jt(Je,"mesas"),m=>{const v=m.docs.map(x=>({id:x.id,...x.data()}));n(v),console.log(" Mesas actualizadas en tiempo real:",v.length)});return i(!1),()=>{console.log(" Limpiando suscripciones de Cocina..."),d(),h()}},[]);const o=async(d,h)=>{try{console.log(" Cocina actualizando estado de pedido:",d,"a:",h);const m=At(Je,"pedidos",d);await pr(m,{estado:h}),console.log(" Estado de pedido actualizado exitosamente por cocina")}catch(m){console.error(" ERROR al actualizar estado del pedido:",m),alert(`Error al actualizar estado: ${m.message}`)}},u=async d=>{try{console.log(" Cocina eliminando pedido:",d),alert("La cocina no puede eliminar pedidos. Solo puede cambiar estados.")}catch(h){console.error(" ERROR al eliminar pedido:",h)}};return s?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 text-lg",children:" Cargando Cocina..."})]})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("header",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(A3,{clientLogo:"/images/client_logo.jpeg",showSaadSoft:!0}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-2",children:" Panel de Cocina"}),c.jsx("p",{className:"text-gray-600",children:"Gestin de pedidos en tiempo real"})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Pedidos Activos"}),c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.filter(d=>d.estado!=="entregado").length})]}),c.jsx("div",{className:"w-px h-12 bg-gray-300"}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Total Mesas"}),c.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.length})]})]})]})})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[c.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),c.jsxs("span",{className:"text-orange-700 font-medium",children:[" Panel de Cocina Activo - ",r.filter(d=>d.estado!=="entregado").length," pedidos activos"]})]}),c.jsxs("div",{className:"flex items-center justify-between mt-2",children:[c.jsx("div",{className:"text-sm text-orange-600",children:"Los pedidos se actualizan automticamente en tiempo real"}),c.jsx("div",{className:"text-sm text-orange-600 font-medium",children:" Suscripciones: 2 activas (Pedidos + Mesas)"})]})]}),c.jsx(TT,{orders:r.filter(d=>d.estado!=="entregado"),onUpdateStatus:o,onDeleteOrder:u,mesas:t}),c.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:" Instrucciones para Cocina"}),c.jsxs("div",{className:"text-blue-800 text-sm space-y-2",children:[c.jsx("p",{children:c.jsx("strong",{children:" Estados de Pedidos:"})}),c.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Pendiente:"})," Pedido recin recibido, comenzar a preparar"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"En Preparacin:"})," Pedido en proceso de coccin"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Listo:"})," Pedido terminado, listo para entregar"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Entregado:"})," Pedido ya entregado al cliente"]})]}),c.jsxs("p",{className:"mt-3",children:[c.jsx("strong",{children:" Prioridades:"})," Los pedidos ms antiguos aparecen primero"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Tiempo:"})," Monitorea el tiempo de cada pedido para cumplir con los clientes"]}),c.jsxs("p",{children:[c.jsx("strong",{children:" Mesas:"})," Verifica la ubicacin de la mesa para la entrega"]})]})]})]})]})}function PV(){qg();const[r,e]=se.useState({user_name:"",email:"",password:"",confirmPassword:"",user_rol:"general",user_dni:"",telefono:""}),[t,n]=se.useState(!1),[s,i]=se.useState(""),[o,u]=se.useState(!1),[d,h]=se.useState(null),[m,v]=se.useState(!1),[x,y]=se.useState({email:"",password:""}),[E,_]=se.useState(0);se.useEffect(()=>{(async()=>{const W=Vb(Na,async N=>{if(N)try{const I=await Au(At(Je,"usuarios",N.uid));if(I.exists()){const T=I.data();T.user_rol==="admin"&&(h({uid:N.uid,email:N.email,...T}),u(!0))}}catch(I){console.error("Error verificando rol:",I)}else u(!1),h(null)});try{const N=await os(jt(Je,"usuarios"));_(N.size)}catch(N){console.error("Error contando usuarios:",N)}return()=>W()})()},[]);const w=U=>{e({...r,[U.target.name]:U.target.value})},j=U=>{y({...x,[U.target.name]:U.target.value})},k=async U=>{U.preventDefault(),i(""),n(!0);try{const N=(await Mb(Na,x.email,x.password)).user,I=await Au(At(Je,"usuarios",N.uid));if(I.exists()){const T=I.data();T.user_rol==="admin"?(h({uid:N.uid,email:N.email,...T}),u(!0),v(!1)):(i("Solo los administradores pueden acceder al registro"),await Na.signOut())}else i("Usuario no encontrado"),await Na.signOut()}catch(W){console.error("Error en login de admin:",W),i("Credenciales incorrectas")}n(!1)},R=()=>{i("");const U="yamilsaad.admin@gmail.com";x.email===U&&x.password==="Yamil@007!"?(h({uid:"emergency-user",email:U,user_name:"Yamil Saad (Emergencia)",user_rol:"admin",es_usuario_emergencia:!0}),u(!0),v(!1),console.log(" Login de emergencia exitoso")):i("Credenciales de emergencia incorrectas")},B=async U=>{if(U.preventDefault(),i(""),n(!0),!o||d?.user_rol!=="admin"){i("Solo los administradores pueden crear usuarios"),n(!1);return}if(E>=10){i("Se ha alcanzado el lmite mximo de 10 usuarios"),n(!1);return}if(r.password!==r.confirmPassword){i("Las contraseas no coinciden"),n(!1);return}if(r.password.length<6){i("La contrasea debe tener al menos 6 caracteres"),n(!1);return}try{console.log(" Creando usuario en Firebase Auth...");const N=(await XR(Na,r.email,r.password)).user;console.log(" Usuario creado en Firebase Auth:",N.uid),console.log(" Creando documento en coleccin usuarios...");const I={user_name:r.user_name,email:r.email,user_id:N.uid,user_rol:r.user_rol,fecha_creacion:new Date,user_dni:r.user_dni,telefono:r.telefono,user_img:""};await hb(At(Je,"usuarios",N.uid),I),console.log(" Documento de usuario creado en Firestore"),alert(" Usuario registrado exitosamente!"),e({user_name:"",email:"",password:"",confirmPassword:"",user_rol:"general",user_dni:"",telefono:""})}catch(W){console.error(" Error al registrar usuario:",W),W.code==="auth/email-already-in-use"?i("Este email ya est registrado"):W.code==="auth/invalid-email"?i("Email invlido"):W.code==="auth/weak-password"?i("La contrasea es muy dbil"):i("Error al registrar usuario: "+W.message)}finally{n(!1)}};return o?c.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:[c.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center space-x-2 text-xs text-gray-400 opacity-70 hover:opacity-100 transition-opacity duration-200",children:[c.jsx("span",{className:"text-gray-500",children:"Desarrollado por"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("img",{src:"/images/guri.png",alt:"Guri Soft",className:"w-8 h-8 object-contain"}),c.jsx("span",{className:"font-medium text-gray-600",children:"Guri"}),c.jsx("span",{className:"text-gray-500",children:"Soft"})]})]}),c.jsxs("div",{className:"max-w-md w-full space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto w-24 h-24 mb-6 rounded-full overflow-hidden bg-white shadow-lg border-4 border-gray-200",children:c.jsx("img",{src:"/images/client_logo.jpeg",alt:"Logo del Restaurante",className:"w-full h-full object-cover object-center"})}),c.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Registro de Usuario"}),c.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Crea una cuenta para acceder al sistema"}),c.jsxs("div",{className:"mt-2 text-center text-xs text-orange-600",children:["Usuarios registrados: ",E,"/10"]})]}),s&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-red-800",children:s})})]})}),c.jsxs("form",{className:"mt-8 space-y-6",onSubmit:B,children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"user_name",className:"block text-sm font-medium text-gray-700",children:"Nombre de Usuario *"}),c.jsx("input",{id:"user_name",name:"user_name",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Ingresa tu nombre completo",value:r.user_name,onChange:w})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email *"}),c.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"tu@email.com",value:r.email,onChange:w})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrasea *"}),c.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Mnimo 6 caracteres",value:r.password,onChange:w})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar Contrasea *"}),c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Repite tu contrasea",value:r.confirmPassword,onChange:w})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"user_rol",className:"block text-sm font-medium text-gray-700",children:"Rol *"}),c.jsxs("select",{id:"user_rol",name:"user_rol",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:r.user_rol,onChange:w,children:[c.jsx("option",{value:"general",children:"General"}),c.jsx("option",{value:"mozo",children:"Mozo"}),c.jsx("option",{value:"cocina",children:"Cocina"}),c.jsx("option",{value:"bar",children:"Bar"}),c.jsx("option",{value:"admin",children:"Administrador"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"user_dni",className:"block text-sm font-medium text-gray-700",children:"DNI *"}),c.jsx("input",{id:"user_dni",name:"user_dni",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"12345678",value:r.user_dni,onChange:w})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700",children:"Telfono *"}),c.jsx("input",{id:"telefono",name:"telefono",type:"tel",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"+54 9 11 1234-5678",value:r.telefono,onChange:w})]})]}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsx(Rd,{to:"/admin",className:"flex-1 flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver"}),c.jsx("button",{type:"submit",disabled:t,className:"flex-1 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Registrando...":"Registrar"})]})]}),c.jsxs("div",{className:"text-center text-sm text-gray-600",children:[c.jsx("p",{children:"Ya tienes una cuenta?"}),c.jsx(Rd,{to:"/admin",className:"font-medium text-blue-600 hover:text-blue-500",children:"Inicia sesin aqu"})]})]})]}):c.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:[c.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center space-x-2 text-xs text-gray-400 opacity-70 hover:opacity-100 transition-opacity duration-200",children:[c.jsx("span",{className:"text-gray-500",children:"Desarrollado por"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("img",{src:"/images/guri.png",alt:"Guri Soft",className:"w-8 h-8 object-contain"}),c.jsx("span",{className:"font-medium text-gray-600",children:"Guri"}),c.jsx("span",{className:"text-gray-500",children:"Soft"})]})]}),c.jsxs("div",{className:"max-w-md w-full space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto w-24 h-24 mb-6 rounded-full overflow-hidden bg-white shadow-lg border-4 border-gray-200",children:c.jsx("img",{src:"/images/client_logo.jpeg",alt:"Logo del Restaurante",className:"w-full h-full object-cover object-center"})}),c.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Acceso de Administrador"}),c.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Solo los administradores pueden crear nuevos usuarios"})]}),s&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-red-800",children:s})})]})}),c.jsxs("form",{className:"mt-8 space-y-6",onSubmit:k,children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email de Administrador"}),c.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:x.email,onChange:j,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"admin@ejemplo.com"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrasea"}),c.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:x.password,onChange:j,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Contrasea"})]})]}),c.jsxs("div",{className:"flex flex-col space-y-3",children:[c.jsx("button",{type:"submit",disabled:t,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50",children:t?"Verificando...":" Iniciar Sesin como Admin"}),c.jsx("button",{type:"button",onClick:R,className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:" Usuario de Emergencia"})]}),c.jsx("div",{className:"text-center",children:c.jsx(Rd,{to:"/",className:"text-orange-600 hover:text-orange-500 text-sm",children:" Volver al inicio"})})]})]})]})}function FV(){return c.jsx(w3,{children:c.jsx("div",{className:"App",children:c.jsxs(p3,{children:[c.jsx(ba,{path:"/",element:c.jsx(p2,{})}),c.jsx(ba,{path:"/home",element:c.jsx(p2,{})}),c.jsx(ba,{path:"/menu/:salaNombre/:mesaValor/:mesaId",element:c.jsx(MD,{})}),c.jsx(ba,{path:"/admin",element:c.jsx(kV,{})}),c.jsx(ba,{path:"/admin/reportes",element:c.jsx(VF,{})}),c.jsx(ba,{path:"/cocina",element:c.jsx(DV,{})}),c.jsx(ba,{path:"/register",element:c.jsx(PV,{})})]})})})}bS.createRoot(document.getElementById("root")).render(c.jsx(pw.StrictMode,{children:c.jsx(FV,{})}));
